import{a as X,b as $,c as O,d as U,e as V,f as q,g as G,h as H}from"./chunk-4YFLKQWQ.js";import{$a as j,Fa as D,Ha as s,Ma as p,Na as c,Oa as L,Qa as F,Ra as M,V as b,Xa as y,Yc as N,Zc as Y,_a as w,_c as P,ab as A,bb as I,bd as C,cb as R,cd as W,db as u,eb as v,fb as S,fd as z,ja as k,l as g,p as f,ua as n,va as l,wb as B,x as h,xb as E,zb as T}from"./chunk-DVYQSRTR.js";var J=()=>({valueType:"Category",title:"Stars"}),K=()=>({enable:!0}),Q=()=>["#ec4899","#9333ea"];function Z(o,a){if(o&1&&(p(0,"div",6)(1,"ejs-chart",7)(2,"e-series-collection"),L(3,"e-series",8)(4,"e-series",9),c()()()),o&2){let x=a.ngIf,i=M();n(),s("primaryXAxis",u(6,J))("primaryYAxis",i.primaryYAxis)("tooltip",u(7,K))("palettes",u(8,Q)),n(2),s("dataSource",x),n(),s("dataSource",x)}}var le=(()=>{let a=class a{constructor(i,t,e){this.repositoryService=i,this.languageService=t,this.destroyRef=e,this.selectedLanguage=""}ngOnInit(){this.fetchLanguages()}fetchLanguages(){this.languages$=this.languageService.fetchLanguages().pipe(f(i=>i.map(t=>t.name)),h(i=>(console.log("Failed to fetch languages..."),g([]))),C(this.destroyRef))}fetchRepositories(i){this.barChartData$=this.repositoryService.fetchRepositories(i,"desc",1,10).pipe(f(t=>{let e=t.items,d=Math.max(...e.map(r=>r.stargazers_count)),m=Math.max(...e.map(r=>r.forks_count)),_=Math.max(d,m);return this.primaryYAxis={minimum:0,title:"Forks",maximum:Math.round(_*(1+.2)),interval:Math.round(_*.2)},e.map(r=>({name:r.name,stars:r.stargazers_count,forks:r.forks_count}))}),h(t=>(console.log("Failed to fetch repository..."),g([]))),C(this.destroyRef))}};a.\u0275fac=function(t){return new(t||a)(l(z),l(W),l(k))},a.\u0275cmp=b({type:a,selectors:[["app-bar-chart"]],standalone:!0,features:[I([G,V,H,q]),R],decls:10,vars:7,consts:[[1,"flex","flex-col","justify-center","items-center","w-3/4","mx-auto","mt-16","gap-4","bg-white","rounded-lg","shadow-lg","p-6"],[1,"text-lg","font-semibold","text-gray-800","mb-4"],[1,"flex","gap-4"],["id","atcelement","data-cy","search-input","placeholder","Search Language...",1,"w-96",3,"valueChange","dataSource","value"],["type","button","data-cy","search-button",1,"text-white","bg-pink-500","hover:bg-pink-700","font-medium","rounded-md","text-sm","p-2",3,"click"],["class","flex justify-center items-center gap-4 p-4",4,"ngIf"],[1,"flex","justify-center","items-center","gap-4","p-4"],["id","container","data-cy","barchart",3,"primaryXAxis","primaryYAxis","tooltip","palettes"],["type","Column","xName","name","yName","stars","name","Stars",3,"dataSource"],["type","Column","xName","name","yName","forks","name","Forks",3,"dataSource"]],template:function(t,e){t&1&&(p(0,"div",0)(1,"h2",1),y(2," Search to compare top ten repositories stars and forks count "),c(),p(3,"div",2)(4,"ejs-autocomplete",3),v(5,"async"),A("valueChange",function(m){return j(e.selectedLanguage,m)||(e.selectedLanguage=m),m}),c(),p(6,"button",4),F("click",function(){return e.fetchRepositories(e.selectedLanguage)}),y(7," Search "),c()(),D(8,Z,5,9,"div",5),v(9,"async"),c()),t&2&&(n(4),s("dataSource",S(5,3,e.languages$)),w("value",e.selectedLanguage),n(4),s("ngIf",S(9,5,e.barChartData$)))},dependencies:[U,O,X,$,P,Y,N,T,B,E],changeDetection:0});let o=a;return o})();export{le as a};
