import{a as Kn,b as Qn,c as Xn,d as Yn,e as Jn}from"./chunk-4ZVCFVYI.js";import{$a as Dr,$b as Mr,Aa as lt,Ac as zr,Bc as ls,Cc as ei,Db as Wn,Dc as Si,Eb as Zn,Ec as Ci,Fa as Tt,Fc as Br,Gb as oe,Gc as ie,Ha as qe,Hb as dt,Hc as fe,I as Ir,Ia as Pn,Ib as Tr,Ic as re,Ja as On,Jb as Ct,Jc as me,K as xr,Ka as qn,Kb as Zt,Kc as ti,La as Hn,Lb as O,Lc as hs,M as Mn,Ma as E,Mb as c,Mc as _,N as An,Na as P,Nb as Ae,Nc as $e,Oa as Se,Ob as $n,Oc as ii,Pa as ht,Pb as es,Pc as ri,Qa as je,Qb as $t,Qc as ps,Ra as Ze,Rc as Pr,Sa as Nn,Sb as ts,Sc as ds,Ta as Q,Tb as Hi,Tc as Vi,Ua as Vn,Ub as is,Uc as ni,V as ge,Va as G,Vb as Y,Vc as Gi,W as En,Wa as j,Wb as x,Wc as cs,X as Je,Xa as ee,Xb as Ce,Xc as us,Ya as gi,Yb as L,Yc as fs,Za as mi,Zb as z,Zc as gs,_a as Rr,_b as kr,_c as ms,ab as Fr,ac as B,ba as at,bc as Bt,bd as ji,ca as ot,cb as be,cc as vi,cd as vs,da as zt,dc as Pt,dd as ys,ea as fi,eb as Oi,ec as k,ed as Ss,fb as qi,fc as wt,fd as Cs,gb as Gn,gc as Ie,h as Ai,ha as Ln,hc as w,ic as Ee,j as $,ja as Bi,jc as yi,ka as Pi,kc as D,l as Ei,la as Xt,lc as rs,mb as jn,oc as ue,p as Li,pc as ns,qc as Ni,ra as zn,rc as ss,sc as Ar,tc as as,ua as ae,uc as Er,va as he,wb as Jt,wc as Lr,x as zi,xa as Bn,xb as _n,xc as kt,yb as Un,yc as os,za as Yt,zb as pt,zc as _e}from"./chunk-DVYQSRTR.js";var _i=(()=>{let e=class e{constructor(){this.filters$=new Ai({language:"JavaScript",sortOrder:"desc"})}setFilters(t){this.filters$.next(t)}getFilters(){return this.filters$.asObservable()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Mn({token:e,factory:e.\u0275fac,providedIn:"root"});let s=e;return s})();var bs=(()=>{let e=class e{constructor(t,r,n){this.languageService=t,this.filterService=r,this.destroyRef=n,this.sortOrders=["asc","desc"],this.selectedLanguage="Javascript",this.selectedSortOrder="desc"}ngOnInit(){this.fetchLanguages()}fetchLanguages(){this.languages$=this.languageService.fetchLanguages().pipe(Li(t=>t.map(r=>r.name)),zi(t=>(console.log("Failed to fetch languages..."),Ei([]))),ji(this.destroyRef))}searchRepositories(t,r){this.filterService.setFilters({language:t,sortOrder:r})}};e.\u0275fac=function(r){return new(r||e)(he(vs),he(_i),he(Bi))},e.\u0275cmp=ge({type:e,selectors:[["app-search"]],standalone:!0,features:[be],decls:6,vars:6,consts:[[1,"flex","justify-center","items-center","my-8","gap-8","w-3/4","mx-auto"],["data-cy","language-input",1,"w-1/3","p-2",3,"valueChange","dataSource","value"],["data-cy","sortOrder-select",1,"w-1/3","p-2",3,"valueChange","dataSource","value"],["type","button","data-cy","search-button",1,"search-button","text-white","bg-pink-500","hover:bg-pink-700","font-medium","rounded-md","text-sm","p-2",3,"click"]],template:function(r,n){r&1&&(E(0,"div",0)(1,"ejs-autocomplete",1),Oi(2,"async"),Fr("valueChange",function(o){return Dr(n.selectedLanguage,o)||(n.selectedLanguage=o),o}),P(),E(3,"ejs-dropdownlist",2),Fr("valueChange",function(o){return Dr(n.selectedSortOrder,o)||(n.selectedSortOrder=o),o}),P(),E(4,"button",3),je("click",function(){return n.searchRepositories(n.selectedLanguage,n.selectedSortOrder)}),ee(5," Search "),P()()),r&2&&(ae(),qe("dataSource",qi(2,4,n.languages$)),Rr("value",n.selectedLanguage),ae(2),qe("dataSource",n.sortOrders),Rr("value",n.selectedSortOrder))},dependencies:[pt,_n,ms,gs,Zn,fs,us],changeDetection:0});let s=e;return s})();var Ui=(()=>{let e=class e{constructor(t){this.elementRef=t,this.targetInview=new Xt}ngOnInit(){this.initializeIntersectionObserver()}initializeIntersectionObserver(){this.intersectionObserver=new IntersectionObserver(t=>{t.forEach(r=>{r.isIntersecting&&this.targetInview.emit()})},{rootMargin:"0px 0px 1000px 0px"}),this.intersectionObserver.observe(this.elementRef.nativeElement)}ngOnDestroy(){this.intersectionObserver&&this.intersectionObserver.disconnect()}};e.\u0275fac=function(r){return new(r||e)(he(Pi))},e.\u0275dir=Je({type:e,selectors:[["","appRepoInView",""]],outputs:{targetInview:"targetInview"},standalone:!0});let s=e;return s})();var Wi=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["app-loading-spinner"]],standalone:!0,features:[be],decls:4,vars:0,consts:[["role","status"],["aria-hidden","true","viewBox","0 0 100 101","fill","none","xmlns","http://www.w3.org/2000/svg",1,"w-8","h-8","text-gray-200","animate-spin","fill-blue-600"],["d","M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z","fill","currentColor"],["d","M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z","fill","currentFill"]],template:function(r,n){r&1&&(E(0,"div",0),zt(),E(1,"svg",1),Se(2,"path",2)(3,"path",3),P()())},changeDetection:0});let s=e;return s})();function Ya(s,e){if(s&1){let i=ht();E(0,"div",15),je("targetInview",function(){at(i);let r=Ze(2);return ot(r.loadMore())}),Se(1,"app-loading-spinner"),P()}}function Ja(s,e){if(s&1&&(E(0,"div",2)(1,"div",3)(2,"h3",4),ee(3),P(),E(4,"p",5),ee(5),P()(),E(6,"div",6)(7,"p",7),ee(8," Language: "),E(9,"span",8),ee(10),P()(),E(11,"p",7),zt(),E(12,"svg",9),Se(13,"path",10),P(),fi(),E(14,"span",8),ee(15),P()()(),E(16,"div",6)(17,"p",7),ee(18," Last Updated: "),E(19,"span",8),ee(20),Oi(21,"date"),P()(),E(22,"a",11),ee(23,"View "),P()(),E(24,"div",12)(25,"p",13),ee(26),P()()(),Tt(27,Ya,2,0,"div",14)),s&2){let i=e.$implicit,t=e.$index,r=Ze();ae(3),mi(" ",i.name," "),ae(2),gi(i.description),ae(5),gi(i.language),ae(5),gi(i.stargazers_count),ae(5),gi(qi(21,8,i.updated_at)),ae(2),Nn("href",i.html_url,zn),ae(4),mi(" Username: ",i.owner.login," "),ae(),qe("ngIf",t===r.repositories.length-1)}}var Is=(()=>{let e=class e{constructor(){this.repositories=[],this.loadMoreRepositories=new Xt}loadMore(){this.loadMoreRepositories.emit()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["app-card"]],inputs:{repositories:"repositories"},outputs:{loadMoreRepositories:"loadMoreRepositories"},standalone:!0,features:[be],decls:4,vars:0,consts:[[1,"w-3/4","mx-auto"],["data-cy","repo-card-parent",1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-6"],["data-cy","repo-card-child",1,"bg-white","rounded-lg","shadow-md","overflow-hidden"],[1,"px-6","py-4"],[1,"text-xl","font-semibold","text-gray-800","mb-2","repo-name"],[1,"text-gray-600","mb-4"],[1,"px-6","py-2","flex","justify-between","items-center","border-t","border-gray-200"],[1,"text-sm","text-gray-500"],[1,"font-semibold"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"fill-current","w-6","h-6","text-purple-500","inline-block","mr-1"],["d","M12 2l-2 6h-6l5 4-2 6 5-4 5 4-2-6 5-4h-6z"],["target","_blank",1,"text-white","text-sm","font-semibold","px-2","py-1","rounded-full","bg-pink-500","hover:bg-pink-600","transition","duration-300","ease-in-out",3,"href"],[1,"px-6","py-2","flex","items-center","border-t","border-gray-200"],[1,"text-sm","text-gray-700","font-semibold"],["appRepoInView","","class","rounded-lg bg-white flex justify-center items-center",3,"targetInview",4,"ngIf"],["appRepoInView","",1,"rounded-lg","bg-white","flex","justify-center","items-center",3,"targetInview"]],template:function(r,n){r&1&&(E(0,"div",0)(1,"div",1),qn(2,Ja,28,10,null,null,On),P()()),r&2&&(ae(2),Hn(n.repositories))},dependencies:[pt,Jt,Un,Ui,Wi],changeDetection:0});let s=e;return s})();var Ti=function(){function s(e){this.intl=new Hi,c(e)||(this.intl.culture=e)}return s.prototype.getFormatFunction=function(e){return e.type?this.intl.getDateFormat(e):this.intl.getNumberFormat(e)},s.prototype.getParserFunction=function(e){return e.type?this.intl.getDateParser(e):this.intl.getNumberParser(e)},s.prototype.fromView=function(e,i,t){return(t==="date"||t==="datetime"||t==="number")&&!c(i)?i(e):e},s.prototype.toView=function(e,i){var t=e;return!c(i)&&!c(e)&&(t=i(e)),t},s.prototype.setCulture=function(e){c(e)||is(e)},s}();var ye=function(){function s(e,i){var t=this;this.disableHtmlEncode=!0,this.allowSorting=!0,this.allowResizing=!0,this.allowFiltering=!0,this.allowGrouping=!0,this.allowReordering=!0,this.showColumnMenu=!0,this.enableGroupByFormat=!1,this.allowEditing=!0,this.filter={},this.showInColumnChooser=!0,this.edit={},this.allowSearching=!0,this.autoFit=!1,this.sortDirection="Descending",this.getEditTemplate=function(){return t.editTemplateFn},this.getFilterTemplate=function(){return t.filterTemplateFn},Zt(this,e),this.parent=i,this.type==="none"?this.type=null:this.type&&(this.type=typeof this.type=="string"?this.type.toLowerCase():void 0),this.editType&&(this.editType=this.editType.toLowerCase()),c(this.uid)&&(this.uid=Mt("grid-column"));var r=new Ti;if(e.format&&(e.format.skeleton||e.format.format&&typeof e.format.format=="string")&&(this.setFormatter(r.getFormatFunction(O({},e.format))),this.setParser(r.getParserFunction(e.format))),this.toJSON=function(){for(var a={},o=["filter","dataSource","headerText","template","headerTemplate","edit","editTemplate","filterTemplate","commandsTemplate","parent"],l=Object.keys(t),h=0;h<l.length;h++)if(l[parseInt(h.toString(),10)]==="columns"){a[l[parseInt(h.toString(),10)]]=[];for(var p=0;p<t[l[parseInt(h.toString(),10)]].length;p++)a[l[parseInt(h.toString(),10)]].push(t[l[parseInt(h.toString(),10)]][parseInt(p.toString(),10)].toJSON())}else o.indexOf(l[parseInt(h.toString(),10)])<0&&(a[l[parseInt(h.toString(),10)]]=t[l[parseInt(h.toString(),10)]]);return a},this.field||(this.allowFiltering=!1,this.allowGrouping=!1,this.allowSorting=!1,this.columns&&(this.allowResizing=this.columns.some(function(a){return a.allowResizing}))),this.commands&&!this.textAlign&&(this.textAlign="Right"),(this.template||this.commandsTemplate)&&(this.templateFn=de(this.template||this.commandsTemplate)),this.headerTemplate&&(this.headerTemplateFn=de(this.headerTemplate)),!c(this.filter)&&this.filter.itemTemplate&&(this.fltrTemplateFn=de(this.filter.itemTemplate)),this.editTemplate&&(this.editTemplateFn=de(this.editTemplate)),this.filterTemplate&&(this.filterTemplateFn=de(this.filterTemplate)),this.isForeignColumn()&&(c(this.editType)||this.editType==="dropdownedit"||this.editType==="defaultedit")&&(this.editType="dropdownedit",this.edit.params&&this.edit.params.dataSource&&(this.edit.params.ddEditedData=!0),this.edit.params=O({dataSource:this.dataSource,query:new fe,fields:{value:this.foreignKeyField||this.field,text:this.foreignKeyValue}},this.edit.params)),this.sortComparer){var n=this.sortComparer;this.sortComparer=function(a,o,l,h){if(typeof n=="string"&&(n=Dt(n,window)),t.sortDirection==="Descending"){var p=a;a=o,o=p;var d=l;l=h,h=d}return n(a,o,l,h)}}!this.sortComparer&&this.isForeignColumn()&&(this.sortComparer=function(a,o){return a=Dt(t.foreignKeyValue,pi(t,{},a)[0]),o=Dt(t.foreignKeyValue,pi(t,{},o)[0]),t.sortDirection==="Descending"?me.fnDescending(a,o):me.fnAscending(a,o)})}return s.prototype.getSortDirection=function(){return this.sortDirection},s.prototype.setSortDirection=function(e){this.sortDirection=e},s.prototype.getFreezeTableName=function(){return this.freezeTable},s.prototype.setProperties=function(e){for(var i=Object.keys(e),t=function(a){if(i[parseInt(a.toString(),10)]==="columns")for(var o=e[i[parseInt(a.toString(),10)]],l=function(p){r.columns.find(function(d){return d.field===o[parseInt(p.toString(),10)].field}).setProperties(o[parseInt(p.toString(),10)])},h=0;h<o.length;h++)l(h);else r[i[parseInt(a.toString(),10)]]=e[i[parseInt(a.toString(),10)]];r.parent&&r.parent.isReact&&(i[parseInt(a.toString(),10)]==="template"?(r.templateFn=de(e[i[parseInt(a.toString(),10)]]),r.parent.refreshReactColumnTemplateByUid(r.uid,!0)):i[parseInt(a.toString(),10)]==="headerTemplate"?(r.headerTemplateFn=de(e[i[parseInt(a.toString(),10)]]),r.parent.refreshReactHeaderTemplateByUid(r.uid)):i[parseInt(a.toString(),10)]==="editTemplate"&&(r.editTemplateFn=de(e[i[parseInt(a.toString(),10)]])))},r=this,n=0;n<i.length;n++)t(n)},s.prototype.isForeignColumn=function(){return!!(this.dataSource&&this.foreignKeyValue)},s.prototype.getFormatter=function(){return this.formatFn},s.prototype.setFormatter=function(e){this.formatFn=e},s.prototype.getParser=function(){return this.parserFn},s.prototype.setParser=function(e){this.parserFn=e},s.prototype.getColumnTemplate=function(){return this.templateFn},s.prototype.getHeaderTemplate=function(){return this.headerTemplateFn},s.prototype.getFilterItemTemplate=function(){return this.fltrTemplateFn},s.prototype.getDomSetter=function(){return this.disableHtmlEncode?"textContent":"innerHTML"},s}();var Kr="load",sr="rowDataBound",Qr="queryCellInfo",Xr="headerCellInfo",vt="actionBegin",Le="actionComplete",Za="actionFailure",At="dataBound",qr="rowSelecting",Hr="rowSelected",xs="rowDeselecting",Rs="rowDeselected",wi="cellSelecting",Ki="cellSelected",Ds="cellDeselecting",Fs="cellDeselected",Nr="columnSelecting",Vr="columnSelected",$a="columnDeselecting",eo="columnDeselected",to="columnDragStart",io="columnDrag",ro="columnDrop";var Ts="beforePrint",ks="printComplete",no="detailDataBound";var so="batchAdd",ea="batchCancel",ao="batchDelete";var oo="recordDoubleClick",lo="recordClick",ho="beforeDataBound";var Ms="beforeOpenAdaptiveDialog";var po="resizeStop",co="checkBoxChange",uo="beforeCopy",fo="beforePaste",go="beforeAutoFill",As="filterchoicerequest",mo="filterAfterOpen",vo="filterBeforeOpen",yo="filterSearchBegin";var ta="initial-load",yn="initial-end",xi="data-ready",ce="content-ready",ve="ui-update",yt="on-empty",Ue="inbound-model-changed",ar="model-changed",ia="colgroup-refresh",Rt="header-refreshed";var Es="searching-complete";var So="grouping-complete";var Ls="group-aggregates",Yr="refresh-footer-rendered",Co="refresh-aggregate-cell";var wo="rowselected";var bo="cellselected",Jr="destroy-autofill-elements",Zr="beforecellfocused",$r="cellfocused",si="key-pressed",hi="click",Ft="destroy",or="column-visible-changed",zs="scroll",ra="column-width-changed",na="column-position-changed";var Bs="rows-added",en="rows-removed",Io="column-drag-stop",xo="header-drop",tn="datasource-modified",Ro="refresh-complete";var Do="dblclick",Fo="toolbar-refresh",To="bulk-save",Ri="auto-col",rn="tooltip-destroy",nn="update-data";var ko="prevent-batch";var Mo="crud-Action",Ps="add-delete-Action";var Ao="double-tap";var Zi="freezerender";var Eo="filterDialogCreated",Lo="filter-menu-close",zo="initForeignKeyColumn",Os="getForeignKeyData",$i="generateQuery",sa="showEmptyGrid",aa="foreignKeyData";var sn="dataStateChange",qs="dataSourceChanged",Bo="rtl-updated",oa="beforeFragAppend";var Hs="textWrapRefresh",Ns="recordAdded",an="cancel-Begin",Po="editNextValCell",Vs="hierarchyprint",Oo="expandchildgrid",qo="printGrid-Init";var Ho="row-position-changed";var la="partial-refresh";var No="select-virtual-Row",on="columns-prepared",Vo="cbox-filter-begin",Gs="cbox-filter-complete",js="filter-Prevent";var Go="filter-cbox-value";var jo="restore-Focus";var ha="detail-indentcell-info";var _o="virtaul-cell-focus";var Uo="virtual-scroll-edit";var Wo="edit-reset";var Ko="get-virtual-data",Qo="refresh-infinite-mode-blocks",Xo="reset-infinite-blocks",Yo="infinite-scroll-handler",Jo="infinite-page-query",Zo="infinite-show-hide",$o="append-infinite-content",el="remove-infinite-rows",tl="set-infinite-cache",_s="infinite-edit-handler";var il="close-filter-dialog";var rl="reset-columns";var nl="group-cache",sl="lazy-load-scroll-handler",Us="group-collapse",al="beforeCheckboxRenderer",Gr="refreshResizeHandlers";var ol="set-freeze-selection";var ln="before-refresh-on-data-change",ll="immutable-batch-cancel";var hl="check-scroll-reset";var pl="prevent-frozen-scroll-refresh";var dl="refresh-infinite-current-view-data";var pa="filter-dialog-close",hn="refresh-cutsom-filter-ok-button",cl="refresh-cutsom-filter-clear-button",ul="render-responsive-cmenu",fl="filter-cmenu-select",gl="custom-filter-close",ml="set-fullscreen-dialog",da="refresh-Expand-and-Collapse",vl="row-mode-change",er="enter-key-handler";var yl="set-virtual-page-query";var Sl="close-edit",Cl="reset-virtual-focus";var wl="before-checkbox-renderer-query";var bl="destroy-child-grid",Il="sticky-scroll-complete";var Ws="refresh-infinite-persist-selection";var xl="after-filter-column-menu-close",Rl="beforeCheckboxfilterRenderer",Dl="commandColumnDestroy",Fl="cancelcnfrmDlg";var pn="refresh-Frozen-Position",Tl="refresh-Resize-Position",dn="refresh-Split-Frozen-Column",Qi="render-Responsive-Change-Action",jr="render-Responsive-Column-Chooser-Div",ai="show-Add-New-Row-Focus";var M=function(s){return s[s.Data=0]="Data",s[s.Header=1]="Header",s[s.Summary=2]="Summary",s[s.GroupSummary=3]="GroupSummary",s[s.CaptionSummary=4]="CaptionSummary",s[s.Filter=5]="Filter",s[s.Indent=6]="Indent",s[s.GroupCaption=7]="GroupCaption",s[s.GroupCaptionEmpty=8]="GroupCaptionEmpty",s[s.Expand=9]="Expand",s[s.HeaderIndent=10]="HeaderIndent",s[s.StackedHeader=11]="StackedHeader",s[s.DetailHeader=12]="DetailHeader",s[s.DetailExpand=13]="DetailExpand",s[s.CommandColumn=14]="CommandColumn",s[s.DetailFooterIntent=15]="DetailFooterIntent",s[s.RowDragIcon=16]="RowDragIcon",s[s.RowDragHIcon=17]="RowDragHIcon",s}(M||{}),We=function(s){return s[s.Header=0]="Header",s[s.Content=1]="Content",s[s.Summary=2]="Summary",s}(We||{});var A=function(s){return s[s.isEdit=0]="isEdit",s[s.isAdd=1]="isAdd",s[s.isSort=2]="isSort",s[s.isFilter=3]="isFilter",s[s.isColMenu=4]="isColMenu",s[s.isColumnChooser=5]="isColumnChooser",s}(A||{});var kl=function(){function s(e,i){this.dataState={isPending:!1,resolver:null,group:[]},this.foreignKeyDataState={isPending:!1,resolver:null},this.parent=e,this.serviceLocator=i,this.initDataManager(),!(this.parent.isDestroyed||this.getModuleName()==="foreignKey")&&(this.parent.on(Bs,this.addRows,this),this.parent.on(Ho,this.reorderRows,this),this.parent.on(en,this.removeRows,this),this.parent.on(tn,this.initDataManager,this),this.parent.on(Ft,this.destroy,this),this.parent.on(nn,this.crudActions,this),this.parent.on(Ps,this.getData,this),this.parent.on(Ri,this.refreshFilteredCols,this),this.parent.on(on,this.refreshFilteredCols,this))}return s.prototype.reorderRows=function(e){this.dataManager.dataSource.json.splice(e.toIndex,0,this.dataManager.dataSource.json.splice(e.fromIndex,1)[0])},s.prototype.getModuleName=function(){return"data"},s.prototype.initDataManager=function(){var e=this.parent;this.dataManager=e.dataSource instanceof _?e.dataSource:c(e.dataSource)?new _:new _(e.dataSource),e.isAngular&&!(e.query instanceof fe)?e.setProperties({query:new fe},!0):(this.isQueryInvokedFromData=!0,e.query instanceof fe||(e.query=new fe))},s.prototype.generateQuery=function(e,i){var t=this.parent,r=t.getQuery().clone();if(this.parent.columnQueryMode==="ExcludeHidden")r.select(this.parent.getColumns().filter(function(l){return!(l.isPrimaryKey!==!0&&l.visible===!1||l.field===void 0)}).map(function(l){return l.field}));else if(this.parent.columnQueryMode==="Schema"){for(var n=[],a=this.parent.columns,o=0;o<a.length;o++)n.push(a[parseInt(o.toString(),10)].field);r.select(n)}return this.filterQuery(r),this.searchQuery(r),this.aggregateQuery(r),this.sortQuery(r),it(this.parent)?this.virtualGroupPageQuery(r):this.pageQuery(r,e),(c(i)||!i)&&this.groupQuery(r),r},s.prototype.aggregateQuery=function(e){for(var i=this.parent.aggregates,t=0;t<i.length;t++)for(var r=i[parseInt(t.toString(),10)],n=0;n<r.columns.length;n++)for(var a=r.columns[parseInt(n.toString(),10)],o=a.type instanceof Array?a.type:[a.type],l=0;l<o.length;l++)e.aggregate(o[parseInt(l.toString(),10)].toLowerCase(),a.field);return e},s.prototype.virtualGroupPageQuery=function(e){var i="fn";if(e.queries.length)for(var t=0;t<e.queries.length;t++)e.queries[parseInt(t.toString(),10)][""+i]==="onPage"&&e.queries.splice(t,1);return e},s.prototype.pageQuery=function(e,i){var t=this.parent,r="fn",n={query:e,skipPage:!1};if(t.notify(yl,n),n.skipPage)return e;if((t.allowPaging||t.enableVirtualization||t.enableInfiniteScrolling)&&i!==!0){if(t.pageSettings.currentPage=Math.max(1,t.pageSettings.currentPage),t.pageSettings.pageCount<=0&&(t.pageSettings.pageCount=8),t.pageSettings.pageSize<=0&&(t.pageSettings.pageSize=12),e.queries.length)for(var a=0;a<e.queries.length;a++)e.queries[parseInt(a.toString(),10)][""+r]==="onPage"&&e.queries.splice(a,1);!c(t.infiniteScrollModule)&&t.enableInfiniteScrolling?this.parent.notify(Jo,e):e.page(t.pageSettings.currentPage,t.allowPaging&&t.pagerModule&&t.pagerModule.pagerObj.isAllPage&&!t.isManualRefresh&&!this.dataManager.dataSource.offline&&!(this.dataManager.adaptor instanceof hs)?null:t.pageSettings.pageSize)}return e},s.prototype.groupQuery=function(e){var i=this.parent;if(i.allowGrouping&&i.groupSettings.columns.length){this.parent.groupSettings.enableLazyLoading&&e.lazyLoad.push({key:"isLazyLoad",value:this.parent.groupSettings.enableLazyLoading});for(var t=i.groupSettings.columns,r=0,n=t.length;r<n;r++){var a=this.getColumnByField(t[parseInt(r.toString(),10)]);a||this.parent.log("initial_action",{moduleName:"group",columnName:t[parseInt(r.toString(),10)]});var o=a.enableGroupByFormat,l=a.format;o?e.group(t[parseInt(r.toString(),10)],this.formatGroupColumn.bind(this),l):e.group(t[parseInt(r.toString(),10)],null)}}return e},s.prototype.sortQuery=function(e){var i=this.parent;if((i.allowSorting||i.allowGrouping)&&i.sortSettings.columns.length){for(var t=i.sortSettings.columns,r=[],n=t.length-1;n>-1;n--){var a=this.getColumnByField(t[parseInt(n.toString(),10)].field);if(a)a.setSortDirection(t[parseInt(n.toString(),10)].direction);else return this.parent.log("initial_action",{moduleName:"sort",columnName:t[parseInt(n.toString(),10)].field}),e;var o=t[parseInt(n.toString(),10)].direction;a.sortComparer&&(this.parent.log("grid_sort_comparer"),o=this.isRemote()?t[parseInt(n.toString(),10)].direction:a.sortComparer.bind(a)),i.groupSettings.columns.indexOf(t[parseInt(n.toString(),10)].field)===-1?a.isForeignColumn()||a.sortComparer?e.sortByForeignKey(a.field,o,void 0,t[parseInt(n.toString(),10)].direction.toLowerCase()):e.sortBy(a.field,o):r.push({direction:o,field:a.field})}for(var n=0,l=r.length;n<l;n++)if(typeof r[parseInt(n.toString(),10)].direction=="string")e.sortBy(r[parseInt(n.toString(),10)].field,r[parseInt(n.toString(),10)].direction);else{var a=this.getColumnByField(r[parseInt(n.toString(),10)].field);e.sortByForeignKey(r[parseInt(n.toString(),10)].field,r[parseInt(n.toString(),10)].direction,void 0,a.getSortDirection().toLowerCase())}}return e},s.prototype.searchQuery=function(e,i,t){var r=this.parent.searchSettings,n=r.fields.length?r.fields:this.getSearchColumnFieldNames(),a=[],o=!1;if(this.parent.searchSettings.key.length){o=this.parent.getForeignKeyColumns().some(function(u){return n.indexOf(u.field)>-1});var l=t?i.dataSource.adaptor:this.dataManager.adaptor;if(o||l.getModuleName&&l.getModuleName()==="ODataV4Adaptor"){n=t?[i.foreignKeyValue]:n;for(var h=0;h<n.length;h++){var p=t?i:this.getColumnByField(n[parseInt(h.toString(),10)]);p.isForeignColumn()&&!t?a=this.fGeneratePredicate(p,a):a.push(new re(n[parseInt(h.toString(),10)],r.operator,r.key,r.ignoreCase,r.ignoreAccent))}var d=re.or(a);d.key=r.key,e.where(d)}else e.search(r.key,n,r.operator,r.ignoreCase,r.ignoreAccent)}return e},s.prototype.filterQuery=function(e,i,t){var r=this.parent,n=[],a=[],o=this.parent.getForeignKeyColumns(),l;if(r.allowFiltering&&r.filterSettings.columns.length){for(var h=i||r.filterSettings.columns,p={},d=0,u=r.getColumns();d<u.length;d++){var f=u[d];p[f.field]=f.filter.type?f.filter.type:r.filterSettings.type}for(var m=[],g=[],y=0,S=h;y<S.length;y++){var f=S[y],I=f.isForeignKey?r.getColumnByUid(f.uid):r.getColumnByField(f.field);c(f.type)&&I&&(I.type==="date"||I.type==="datetime"||I.type==="dateonly")&&(f.type=f.isForeignKey?r.getColumnByUid(f.uid).type:r.getColumnByField(f.field).type),f.isForeignKey?m.push(f):g.push(f)}if(g.length){for(var C=0,R=g.length;C<R;C++)g[parseInt(C.toString(),10)].uid=g[parseInt(C.toString(),10)].uid||this.parent.grabColumnByFieldFromAllCols(g[parseInt(C.toString(),10)].field,g[parseInt(C.toString(),10)].isForeignKey).uid;for(var T=$s.getPredicate(g),F=0,X=Object.keys(T);F<X.length;F++){var W=X[F];n.push(T[""+W])}}if(m.length)for(var q=0,K=m;q<K.length;q++){var f=K[q];f.uid=f.uid||this.parent.grabColumnByFieldFromAllCols(f.field,f.isForeignKey).uid;var te=this.parent.grabColumnByUidFromAllCols(f.uid);if(te||this.parent.log("initial_action",{moduleName:"filter",columnName:f.field}),te.isForeignColumn()&&wn(f.field,o)&&!t)a.push(f),te.columnData.length||(l=!0),n=this.fGeneratePredicate(te,n);else for(var T=$s.getPredicate(h),se=0,ne=Object.keys(T);se<ne.length;se++){var W=ne[se];n.push(T[""+W])}}n.length&&!l?e.where(re.and(n)):this.parent.notify(sa,{})}return e},s.prototype.fGeneratePredicate=function(e,i){var t={};return e&&(this.parent.notify($i,{predicate:t,column:e}),t.predicate.predicates.length&&i.push(t.predicate)),i},s.prototype.getData=function(e,i){var t=this;e===void 0&&(e={requestType:""});var r=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());if(this.parent.log("datasource_syntax_mismatch",{dataState:this.parent}),this.parent.dataSource&&"result"in this.parent.dataSource){var n=this.eventPromise(e,i,r);return n.promise}else{var a=void 0;switch(e.requestType){case"delete":i=i||this.generateQuery();var o=Object.keys(e.data).length;if(o===1)a=this.dataManager.remove(r,e.data[0],i.fromTable,i);else{var l={addedRecords:[],deletedRecords:[],changedRecords:[]};l.deletedRecords=e.data,a=this.dataManager.saveChanges(l,r,i.fromTable,i.requiresCount())}break;case"save":i=i||this.generateQuery(),e.index=c(e.index)?0:e.index,a=this.dataManager.insert(e.data,i.fromTable,i,e.index);break}var h="promise";return e[""+h]=a,a&&!Array.isArray(a)&&!a.hasOwnProperty("deletedRecords")?a.then(function(){return t.insert(i,e)}):this.insert(i,e)}},s.prototype.insert=function(e,i){return i.requestType==="save"&&this.parent.notify(Ns,i),this.executeQuery(e)},s.prototype.executeQuery=function(e){var i=this;if(this.dataManager.ready){var t=new $e,r=this.dataManager.ready;return r.then(function(){i.dataManager.executeQuery(e).then(function(n){t.resolve(n)})}).catch(function(n){t.reject(n)}),t.promise}else return this.dataManager.executeQuery(e)},s.prototype.formatGroupColumn=function(e,i){var t=this.serviceLocator,r=this.getColumnByField(i),n=e;r.type||(r.type=n.getDay?n.getHours()>0||n.getMinutes()>0||n.getSeconds()>0||n.getMilliseconds()>0?"datetime":"date":typeof e),c(r.getFormatter())&&fn(t,r);var a=Ti.prototype.toView(e,r.getFormatter());return a},s.prototype.crudActions=function(e){var i=this.generateQuery(),t=null,r="promise",n=this.getKey(e.foreignKeyData&&Object.keys(e.foreignKeyData).length?e.foreignKeyData:this.parent.getPrimaryKeyFieldNames());switch(this.parent.dataSource&&"result"in this.parent.dataSource&&this.eventPromise(e,i,n),e.requestType){case"save":t=this.dataManager.update(n,e.data,i.fromTable,i,e.previousData);break}e[""+r]=t||e[""+r],this.parent.notify(Mo,e)},s.prototype.saveChanges=function(e,i,t,r){if(r===void 0&&(r=this.generateQuery()),r.requiresCount(),"result"in this.parent.dataSource){var n=new $e,a={requestType:"batchsave",changes:e,key:i,query:r,endEdit:n.resolve};return this.setState({isPending:!0,resolver:n.resolve}),this.parent.trigger(qs,a),n.promise}else{var o=this.dataManager.saveChanges(e,i,r.fromTable,r,t);return o}},s.prototype.getKey=function(e){if(e&&e.length)return e[0]},s.prototype.isRemote=function(){return this.dataManager.dataSource.offline!==!0&&this.dataManager.dataSource.url!==void 0&&this.dataManager.dataSource.url!==""},s.prototype.addRows=function(e){for(var i=e.records.length;i>0;i--)this.parent.dataSource instanceof _&&this.dataManager.dataSource.offline?this.dataManager.dataSource.json.splice(e.toIndex,0,e.records[i-1]):!this.parent.getDataModule().isRemote()&&!c(this.parent.dataSource)&&!this.parent.dataSource.result&&this.parent.dataSource.splice(e.toIndex,0,e.records[i-1])},s.prototype.removeRows=function(e){var i=this.dataManager.dataSource.json;this.parent.dataSource instanceof _&&this.dataManager.dataSource.offline?this.dataManager.dataSource.json=i.filter(function(t){return e.records.indexOf(t)===-1}):!this.parent.getDataModule().isRemote()&&!c(this.parent.dataSource)&&!this.parent.dataSource.result&&(this.parent.dataSource=i.filter(function(t){return e.records.indexOf(t)===-1}))},s.prototype.getColumnByField=function(e){var i;return this.parent.columnModel.some(function(t){return i=t,t.field===e})&&i},s.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(Bs,this.addRows),this.parent.off(en,this.removeRows),this.parent.off(tn,this.initDataManager),this.parent.off(Ft,this.destroy),this.parent.off(nn,this.crudActions),this.parent.off(Ps,this.getData),this.parent.off(Ri,this.refreshFilteredCols),this.parent.off(on,this.refreshFilteredCols))},s.prototype.getState=function(){return this.dataState},s.prototype.setState=function(e){return this.dataState=e},s.prototype.getForeignKeyDataState=function(){return this.foreignKeyDataState},s.prototype.setForeignKeyDataState=function(e){this.foreignKeyDataState=e},s.prototype.getStateEventArgument=function(e){var i=new ti,t=new _({url:"",adaptor:new ti}),r=i.processQuery(t,e),n=JSON.parse(r.data);return O(n,r.pvtData)},s.prototype.eventPromise=function(e,i,t){var r=this,n=e,a=this.getStateEventArgument(i),o=new $e,l=new $e;if((e.requestType!==void 0||this.parent.groupSettings.disablePageWiseAggregates&&i.queries.some(function(d){return d.fn==="onGroup"}))&&this.dataState.isDataChanged!==!1)if(a.action=e,e.requestType==="save"||e.requestType==="delete"){var h=e;h.key=t;var p="promise";h[""+p]=l.promise,h.state=a,this.setState({isPending:!0,resolver:l.resolve}),n.endEdit=l.resolve,n.cancelEdit=l.reject,this.parent.trigger(qs,h),l.promise.then(function(){r.setState({isPending:!0,resolver:o.resolve,group:a.group,aggregates:a.aggregates}),h.requestType==="save"&&r.parent.notify(Ns,h),r.parent.trigger(sn,a)}).catch(function(){})}else this.setState({isPending:!0,resolver:o.resolve,group:a.group,aggregates:a.aggregates}),this.parent.trigger(sn,a);else this.setState({}),o.resolve(this.parent.dataSource);return o},s.prototype.getSearchColumnFieldNames=function(){for(var e=[],i=this.parent.getColumns(),t=0,r=i;t<r.length;t++){var n=r[t];n.allowSearching&&!c(n.field)&&e.push(n.field)}return e},s.prototype.refreshFilteredCols=function(){this.parent.allowFiltering&&this.parent.filterSettings.columns.length&&Yh(this.parent,this.parent.filterSettings.columns)},s}(),di=function(){function s(e,i){Zt(this,e),this.parent=i}return s.prototype.clone=function(){var e=new s({});return Zt(e,this),e.cells=this.cells.map(function(i){return i.clone()}),e},s.prototype.setRowValue=function(e){if(this.parent){var i=this.data[this.parent.getPrimaryKeyFieldNames()[0]];this.parent.setRowData(i,e)}},s.prototype.setCellValue=function(e,i){if(this.parent){var t=this.data[""+e].toString()!==i.toString();if(t){var r=this.parent.getPrimaryKeyFieldNames()[0],n=this.data[""+r];this.parent.setCellValue(n,e,i),this.makechanges(r,this.data)}else return}},s.prototype.makechanges=function(e,i){if(this.parent){var t=this.parent,r=t.getDataModule().dataManager;r.update(e,i)}},s}(),Di=function(){function s(e){this.isSpanned=!1,this.isRowSpanned=!1,Zt(this,e)}return s.prototype.clone=function(){var e=new s({});return Zt(e,this),e},s}(),ca=function(){function s(e,i){this.serviceLocator=e,this.parent=i}return s.prototype.render=function(e,i,t,r){var n=this.serviceLocator.getService("cellRendererFactory"),a=n.getCellRenderer(i.cells[parseInt(t.toString(),10)].cellType||M.Data),o=i.cells[parseInt(t.toString(),10)].cellSpan?i.cells[parseInt(t.toString(),10)].cellSpan:e.colSpan+t<=i.cells.length?e.colSpan:i.cells.length-t,l=e.rowSpan,h=0,p;if(i.index>0){var d=this.parent.getRowsObject(),u=this.parent.groupSettings.columns.length>0&&!d[i.index-1].isDataRow?d[i.index].cells:d[i.index-1].cells,f=i.cells[parseInt(t.toString(),10)],m="uid";p=u.filter(function(S){return S.column.uid===f.column[""+m]})[0]}for(var g=p&&p.colSpanRange>1&&p.rowSpanRange>1?p.colSpanRange:o,y=t+1;y<t+g&&y<i.cells.length;y++)i.cells[parseInt(y.toString(),10)].visible===!1?h++:i.cells[parseInt(y.toString(),10)].isSpanned=!0;if(h>0){for(var y=t+o;y<t+o+h&&y<i.cells.length;y++)i.cells[parseInt(y.toString(),10)].isSpanned=!0;t+o+h>=i.cells.length&&(o-=t+o+h-i.cells.length)}return i.cells[parseInt(t.toString(),10)].cellSpan&&(i.data[e.column.field]=i.cells[parseInt(t.toString(),10)].spanText,r=a.render(i.cells[parseInt(t.toString(),10)],i.data,{index:c(i.index)?"":i.index.toString()})),o>1&&Bt(r,{colSpan:o.toString(),"aria-colSpan":o.toString()}),l>1&&(Bt(r,{rowspan:l.toString(),"aria-rowspan":l.toString()}),i.cells[parseInt(t.toString(),10)].isRowSpanned=!0,i.cells[parseInt(t.toString(),10)].rowSpanRange=Number(l),o>1&&(i.cells[parseInt(t.toString(),10)].colSpanRange=Number(o))),i.index>0&&p.rowSpanRange>1&&(i.cells[parseInt(t.toString(),10)].isSpanned=!0,i.cells[parseInt(t.toString(),10)].rowSpanRange=Number(p.rowSpanRange-1),i.cells[parseInt(t.toString(),10)].colSpanRange=p.rowSpanRange>0?p.colSpanRange:1),this.parent.enableColumnVirtualization&&!i.cells[parseInt(t.toString(),10)].cellSpan&&!this.containsKey(e.column.field,e.data[e.column.field])&&this.backupMergeCells(e.column.field,e.data[e.column.field],e.colSpan),r},s.prototype.backupMergeCells=function(e,i,t){this.setMergeCells(this.generteKey(e,i),t)},s.prototype.generteKey=function(e,i){return e+"__"+i.toString()},s.prototype.splitKey=function(e){return e.split("__")},s.prototype.containsKey=function(e,i){return this.getMergeCells().hasOwnProperty(this.generteKey(e,i))},s.prototype.getMergeCells=function(){return this.parent.mergeCells},s.prototype.setMergeCells=function(e,i){this.parent.mergeCells[""+e]=i},s.prototype.updateVirtualCells=function(e){for(var i=this.getMergeCells(),t=0,r=Object.keys(i);t<r.length;t++){var n=r[t],a=i[""+n],o=this.splitKey(n),l=this.getIndexFromAllColumns(o[0]),h=this.parent.getColumnIndexesInView(),p=a-(h[0]-l);if(l<h[0]&&p>1)for(var d=0,u=e;d<u.length;d++){var f=u[d];if(f.data[o[0]].toString()===o[1].toString()){f.cells[0].cellSpan=p,f.cells[0].spanText=o[1];break}}}return e},s.prototype.getIndexFromAllColumns=function(e){var i=jt(this.parent.getVisibleColumns(),function(t,r){if(t.field===e)return r})[0];return i},s}(),U="e-rowcell",ze="e-gridheader",mt="e-gridcontent",tr="e-gridfooter",Re="e-headercontent",Xi="e-movablecontent",lr="e-movableheader";var we="e-content",gt="e-table",xe="e-row",oi="e-gridchkbox",Ii="e-editedrow",li="e-addedrow",Ml="changedRecords",hr="addedRecords",ua="deletedRecords",et="Left-Right",Al="frozen-right";var pe="data-colindex",Ks="aria-colindex",Z="data-rowindex",Sn="aria-rowindex",N="tbody",Ke="colgroup";var Qs="initialFrozenColumnIndex",Fi=function(){function s(e,i,t){this.isSpan=!1,this.cellType=i,this.serviceLocator=e,this.parent=t,this.element=this.parent.createElement("tr",{attrs:{role:"row"}})}return s.prototype.render=function(e,i,t,r,n){return this.refreshRow(e,i,t,r,n)},s.prototype.refresh=function(e,i,t,r,n){var a=this;t&&(e.data=bn({},e.changes),this.refreshMergeCells(e));var o=this.parent.element.querySelector("[data-uid="+e.uid+"]"),l=this.refreshRow(e,i,r,n,null,t),h=[].slice.call(l.cells),p=[].slice.call(o.querySelectorAll(".e-templatecell"));if(this.parent.isReact&&p.length)for(var d=function(R){if(R.template)return setTimeout(function(){a.parent.refreshReactColumnTemplateByUid(R.uid,!0)},0),"break"},u=0,f=i;u<f.length;u++){var m=f[u],g=d(m);if(g==="break")break}var y=[].slice.call(l.attributes);y.map(function(R){o.setAttribute(R.name,R.value)}),o.innerHTML="";for(var S=0,I=h;S<I.length;S++){var C=I[S];o.appendChild(C)}},s.prototype.refreshRow=function(e,i,t,r,n,a){var o=c(n)?this.element.cloneNode():n,l={data:e.data},h={data:e.data},p=this.parent.getColumns().filter(function(J){return J.type==="checkbox"&&J.field})[0],d=!1,u=this.parent.isFrozenGrid();p&&(d=Dt(p.field,l.data));var f=this.parent.getSelectedRowIndexes();e.isDataRow&&(e.isSelected=f.indexOf(e.index)>-1||d),e.isDataRow&&this.parent.isCheckBoxSelection&&this.parent.checkAllRows==="Check"&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(e.isSelected=!0,f.indexOf(e.index)===-1&&f.push(e.index)),this.buildAttributeFromRow(o,e),Bt(o,O({},t,{})),ut(o,e.attributes);for(var m=this.serviceLocator.getService("cellRendererFactory"),g=function(J,kn){var V=e.cells[parseInt(J.toString(),10)];V.isSelected=e.isSelected,V.isColumnSelected=V.column.isSelected;var ki=m.getCellRenderer(e.cells[parseInt(J.toString(),10)].cellType||M.Data),Mi={index:c(e.index)?"":e.index.toString()};e.isExpand&&e.cells[parseInt(J.toString(),10)].cellType===M.DetailExpand&&(Mi.class=y.parent.isPrinting?"e-detailrowcollapse":"e-detailrowexpand");var Te=ki.render(e.cells[parseInt(J.toString(),10)],e.data,Mi,e.isExpand,a);if(e.cells[parseInt(J.toString(),10)].cellType!==M.Filter){if(e.cells[parseInt(J.toString(),10)].cellType===M.Data||e.cells[parseInt(J.toString(),10)].cellType===M.CommandColumn){var vr=y.parent.parentDetails&&y.parent.parentDetails.parentInstObj&&y.parent.parentDetails.parentInstObj.isReact;if((y.parent.isReact&&y.parent.requireTemplateRef||vr&&y.parent.parentDetails.parentInstObj.requireTemplateRef)&&V.isTemplate){var H=y;H.parent.renderTemplates(function(){if(typeof V.column.template!="string"){var br=Te.getAttribute("aria-label");Te.setAttribute("aria-label",Te.innerText+br)}H.parent.trigger(Qr,O(h,{cell:Te,column:V.column,colSpan:1,rowSpan:1,foreignKeyData:e.cells[parseInt(J.toString(),10)].foreignKeyData,requestType:H.parent.requestTypeAction}))})}else y.parent.trigger(Qr,O(h,{cell:Te,column:V.column,colSpan:1,rowSpan:1,foreignKeyData:e.cells[parseInt(J.toString(),10)].foreignKeyData,requestType:y.parent.requestTypeAction}));var ci=!1;if(e.index>0&&(y.isSpan||y.parent.isSpan&&a)){var Xe=y.parent.getRowsObject(),nt=y.parent.groupSettings.columns.length>0&&!Xe[e.index-1].isDataRow?Xe[e.index].cells:Xe[e.index-1].cells,Kt="uid",le=nt.filter(function(br){return br.column.uid===e.cells[parseInt(J.toString(),10)].column[""+Kt]})[0];ci=le.isRowSpanned?le.isRowSpanned:le.rowSpanRange>1}if(h.rowSpan>1||h.colSpan>1){if(y.resetrowSpanvalue(y.parent.frozenRows>e.index?y.parent.frozenRows:y.parent.currentViewData.length,h,e.index),h.column.visible===!1)h.colSpan=1;else if(u){var Qt=y.parent.getColumns(),yr=y.parent.getFrozenRightColumnsCount(),Ye=y.parent.getFrozenLeftCount(),Ge=Qt.length-yr,Oe=h.column.index;if(Ye>Oe&&Ye<Oe+h.colSpan){var st=Oe+h.colSpan-Ye;h.colSpan=h.colSpan-st}else if(Ge<=Oe&&Qt.length<Oe+h.colSpan){var st=Oe+h.colSpan-Qt.length;h.colSpan=h.colSpan-st}else if(h.column.freeze==="Fixed"){for(var st=1,Lt=Oe,Sr=Lt+1;Sr<Lt+h.colSpan&&Qt[parseInt(Sr.toString(),10)].freeze==="Fixed";Sr++)st++;h.colSpan=st}else if(Ge>Oe&&Ge<Oe+h.colSpan){var st=Oe+h.colSpan-Ge;h.colSpan=h.colSpan-st}}}if(h.colSpan>1||e.cells[parseInt(J.toString(),10)].cellSpan>1||h.rowSpan>1||ci){y.parent.isSpan=!0,y.isSpan=!0;var Xa=new ca(y.serviceLocator,y.parent);Te=Xa.render(h,e,J,Te),u&&rp(y.parent,h.column,Te,h.colSpan)}}if(u&&y.isSpan){var Xe=y.parent.getRowsObject(),Cr=y.parent.enableRtl;if(Xe[e.index-1]){var nt=Xe[e.index-1].cells,le=nt[J-1],ui=nt[J+1],wr=nt[parseInt(J.toString(),10)].column.freeze;le&&(le.isRowSpanned||le.rowSpanRange>1)&&le.visible&&(le.column.freeze==="Fixed"&&wr==="Fixed"?Te.classList.add(Cr?"e-removefreezerightborder":"e-removefreezeleftborder"):!Cr&&J===1&&wr==="Left"&&Te.classList.add("e-addfreezefirstchildborder")),ui&&(ui.isRowSpanned||ui.rowSpanRange>1)&&ui.visible&&ui.column.freeze==="Fixed"&&wr==="Fixed"&&h.colSpan<2&&Te.classList.add(Cr?"e-removefreezeleftborder":"e-removefreezerightborder")}}h.rowSpan>1&&y.parent.currentViewData.length-e.index===h.rowSpan&&Te.classList.add("e-row-span-lastrowcell"),e.cells[parseInt(J.toString(),10)].isSpanned||o.appendChild(Te)}},y=this,S=0,I=e.cells.length;S<I;S++)g(S,I);var C=0;if(this.parent.groupSettings.columns.length&&this.parent.getFrozenLeftColumnsCount()){if(o.classList.contains("e-groupcaptionrow")){var R=[].slice.call(o.querySelectorAll(".e-leftfreeze,.e-unfreeze,.e-rightfreeze,.e-fixedfreeze,.e-freezerightborder,.e-freezeleftborder"));if(R.length&&z(R,["e-leftfreeze","e-unfreeze","e-rightfreeze","e-fixedfreeze","e-freezerightborder","e-freezeleftborder"]),o.querySelector(".e-summarycell"))Jh(o,this.parent);else{for(var T=0;T<o.childNodes.length;T++){var F=o.childNodes[parseInt(T.toString(),10)];if(F.classList.add("e-leftfreeze"),De(F,T*30,this.parent.enableRtl,"Left"),F.classList.contains("e-groupcaption")){var X=parseInt(F.getAttribute("colspan"),10),W=Ma(this.parent,T);F.setAttribute("colspan",W.toString()),C=X-W}}if(C){var F=this.parent.createElement("TD",{className:"e-groupcaption",attrs:{colspan:C.toString(),id:this.parent.element.id+"captioncell",tabindex:"-1"}});o.appendChild(F)}}}if(o.querySelectorAll(".e-leftfreeze").length&&(o.querySelectorAll(".e-indentcell").length||o.querySelectorAll(".e-grouptopleftcell").length))for(var F=o.querySelectorAll(".e-indentcell, .e-grouptopleftcell"),S=0;S<F.length;S++)F[parseInt(S.toString(),10)].classList.add("e-leftfreeze"),De(F[parseInt(S.toString(),10)],S*30,this.parent.enableRtl,"Left")}var q={row:o,rowHeight:this.parent.rowHeight};if(e.isDataRow){var K=O(l,q);K.isSelectable=!0;var te=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,se=K.row.querySelectorAll(".e-templatecell");if((this.parent.isReact&&this.parent.requireTemplateRef||te&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&se.length){var ne=this;ne.parent.renderTemplates(function(){ne.parent.trigger(sr,K),K.isSelectable||(e.isSelectable=K.isSelectable,ne.disableRowSelection(ne,e,q,K))})}else this.parent.trigger(sr,K);e.isSelectable=K.isSelectable;var St=this.parent.isRowDragable();if(this.parent.allowPaging&&this.parent.selectionSettings.persistSelection){var Pe=this.parent.getPrimaryKeyFieldNames()[0],ke=e.data?e.data[""+Pe]:null,Me=K.isSelectable?this.parent.partialSelectedRecords:this.parent.disableSelectedRecords;Me.some(function(J){return J[""+Pe]===ke})||Me.push(e.data)}if(K.isSelectable||this.disableRowSelection(this,e,q,K),this.parent.childGrid||St||this.parent.detailTemplate){var F=o.querySelectorAll(".e-rowcell:not(.e-hide)")[0];F&&F.classList.add("e-detailrowvisible")}}this.parent.enableVirtualization&&(l.rowHeight=this.parent.rowHeight),l.rowHeight?o.style.height=l.rowHeight+"px":this.parent.rowHeight&&(o.querySelector(".e-headercell")||o.querySelector(".e-groupcaption"))&&(o.style.height=this.parent.rowHeight+"px"),e.cssClass&&o.classList.add(e.cssClass),e.lazyLoadCssClass&&o.classList.add(e.lazyLoadCssClass),this.parent.rowRenderingMode==="Vertical"&&this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Header"||this.parent.textWrapSettings.wrapMode==="Both")&&o.classList.add("e-verticalwrap");var rt=this.parent.enableColumnVirtualization;if(!rt&&this.parent.aggregates.length&&this.parent.element.scrollHeight>this.parent.height)for(var S=0;S<this.parent.aggregates.length;S++){var Fe="properties",Ut="columns";if(this.parent.aggregates[parseInt(S.toString(),10)][""+Fe][""+Ut][0].footerTemplate){var Wt=[].slice.call(o.getElementsByClassName("e-summarycell"));if(Wt.length){var gr=Wt[Wt.length-1];L([gr],["e-lastsummarycell"]);var mr=Wt[0];L([mr],["e-firstsummarycell"])}}}return o},s.prototype.resetrowSpanvalue=function(e,i,t){if(e>t&&e<t+i.rowSpan){var r=t+i.rowSpan-e;i.rowSpan=i.rowSpan-r}},s.prototype.disableRowSelection=function(e,i,t,r){var n=this.parent.getSelectedRowIndexes();this.parent.selectionModule.isPartialSelection=!0,i.isSelected=!1;var a=n.indexOf(i.index);a>-1&&n.splice(a,1);for(var o=t.row.querySelectorAll(".e-rowcell.e-gridchkbox"),l=r.row.querySelector(".e-rowdragdrop"),h=e.parent.groupSettings.columns.length+(l||e.parent.isDetail()?1:0),p=0;p<o.length;p++)o[parseInt(p.toString(),10)].firstElementChild.classList.add("e-checkbox-disabled"),o[parseInt(p.toString(),10)].querySelector(".e-frame").classList.remove("e-check");if(i.cells.length)for(var p=h;p<i.cells.length;p++){var d=r.row.querySelector('.e-rowcell[data-colindex="'+i.cells[parseInt(p.toString(),10)].index+'"]');d&&z([d],["e-selectionbackground","e-active"])}l&&z([l],["e-selectionbackground","e-active"])},s.prototype.refreshMergeCells=function(e){for(var i=0,t=e.cells;i<t.length;i++){var r=t[i];r.isSpanned=!1}return e},s.prototype.buildAttributeFromRow=function(e,i){var t={},r={rowindex:Z,dataUID:"data-uid",ariaSelected:"aria-selected"},n=[];i.isDataRow&&n.push(xe),i.isAltRow&&n.push("e-altrow"),i.isCaptionRow&&n.push("e-groupcaptionrow"),i.isAggregateRow&&i.parentUid&&n.push("e-groupfooterrow"),c(i.index)||(t[Sn]=i.index+1,t[r.rowindex]=i.index),i.rowSpan&&(t.rowSpan=i.rowSpan),i.uid&&(t[r.dataUID]=i.uid),i.isSelected&&(t[r.ariaSelected]=!0),i.visible===!1&&n.push("e-hide"),t.class=n,ut(e,t)},s}(),fr=function(){function s(e){this.parent=e}return s.prototype.generateRows=function(e,i){var t=[],r=this.parent.enableVirtualization&&i?i.startIndex:0;r=this.parent.enableInfiniteScrolling&&i?this.getInfiniteIndex(i):r,this.parent.enableImmutableMode&&i&&i.startIndex&&(r=i.startIndex);for(var n=0,a=Object.keys(e).length;n<a;n++,r++)t[parseInt(n.toString(),10)]=this.generateRow(e[parseInt(n.toString(),10)],r);return t},s.prototype.ensureColumns=function(){var e=[];if(this.parent.detailTemplate||this.parent.childGrid){var i={};this.parent.notify(ha,i),e.push(this.generateCell(i,null,M.DetailExpand))}return this.parent.isRowDragable()&&e.push(this.generateCell({},null,M.RowDragIcon)),e},s.prototype.generateRow=function(e,i,t,r,n,a,o){var l={};l.foreignKeyData={},l.uid=Mt("grid-row"),l.data=e,l.index=i,l.indent=r,l.tIndex=a,l.isDataRow=!0,l.parentGid=n,l.parentUid=o,this.parent.isPrinting&&(this.parent.hierarchyPrintMode==="All"?l.isExpand=!0:this.parent.hierarchyPrintMode==="Expanded"&&this.parent.expandedRows&&this.parent.expandedRows[parseInt(i.toString(),10)]&&(l.isExpand=this.parent.expandedRows[parseInt(i.toString(),10)].isExpand)),l.cssClass=t,l.isAltRow=this.parent.enableAltRow?i%2!==0:!1,l.isAltRow=this.parent.enableAltRow?i%2!==0:!1,l.isSelected=this.parent.getSelectedRowIndexes().indexOf(i)>-1,this.refreshForeignKeyRow(l);var h=this.ensureColumns(),p=new di(l,this.parent);return p.cells=this.parent.getFrozenMode()==="Right"?this.generateCells(l).concat(h):h.concat(this.generateCells(l)),p},s.prototype.refreshForeignKeyRow=function(e){for(var i=this.parent.getForeignKeyColumns(),t=0;t<i.length;t++)dt(i[parseInt(t.toString(),10)].field,pi(i[parseInt(t.toString(),10)],e.data),e.foreignKeyData)},s.prototype.generateCells=function(e){for(var i=this.parent.getColumns(),t=[],r=0;r<i.length;r++)t.push(this.generateCell(i[parseInt(r.toString(),10)],e.uid,c(i[parseInt(r.toString(),10)].commands)?void 0:M.CommandColumn,null,r,e.foreignKeyData));return t},s.prototype.generateCell=function(e,i,t,r,n,a){var o={visible:e.visible,isDataCell:!c(e.field||e.template),isTemplate:!c(e.template),rowID:i,column:e,cellType:c(t)?M.Data:t,colSpan:r,commands:e.commands,isForeignKey:e.isForeignColumn&&e.isForeignColumn(),foreignKeyData:e.isForeignColumn&&e.isForeignColumn()&&oe(e.field,a)};return(o.isDataCell||o.column.type==="checkbox"||o.commands)&&(o.index=n),new Di(o)},s.prototype.refreshRows=function(e){for(var i=0;i<e.length;i++)this.refreshForeignKeyRow(e[parseInt(i.toString(),10)]),e[parseInt(i.toString(),10)].cells=this.generateCells(e[parseInt(i.toString(),10)]);return e},s.prototype.getInfiniteIndex=function(e){return e.requestType==="infiniteScroll"||e.requestType==="delete"||e.action==="add"?c(e.startIndex)?e.index:e.startIndex:0},s}(),fa=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),ga=function(){function s(e){this.parent=e}return s.prototype.getData=function(){for(var e=this,i=[],t=this.parent.aggregates.slice(),r=0;r<t.length;r++){var n=t[parseInt(r.toString(),10)].columns.filter(function(a){return!(a.footerTemplate||a.groupFooterTemplate||a.groupCaptionTemplate)||e.columnSelector(a)});n.length&&i.push({columns:n})}return i},s.prototype.columnSelector=function(e){return e.footerTemplate!==void 0},s.prototype.getColumns=function(e){var i=[];if((this.parent.detailTemplate||!c(this.parent.childGrid))&&i.push(new ye({})),this.parent.allowGrouping)for(var t=0;t<this.parent.groupSettings.columns.length;t++)i.push(new ye({}));return this.parent.isRowDragable()&&!e&&i.push(new ye({})),i.push.apply(i,this.parent.getColumns()),i},s.prototype.generateRows=function(e,i,t,r,n){if(e.length===0&&(i===void 0||!i.count))return[];for(var a=this.buildSummaryData(e,i),o=[],l=this.getData(),h=0;h<l.length;h++)o.push(this.getGeneratedRow(l[parseInt(h.toString(),10)],a[parseInt(h.toString(),10)],i?i.level:void 0,t,r,i?i.parentUid:void 0,n));return o},s.prototype.getGeneratedRow=function(e,i,t,r,n,a,o){var l=[],h=this.getIndentByLevel(),p=!c(this.parent.childGrid),d=this.parent.getIndentCount();this.parent.groupSettings.columns.length&&this.parent.allowRowDragAndDrop?h.push("e-indentcelltop"):this.parent.isRowDragable()&&!r&&(h=["e-indentcelltop"]);for(var u=o||this.getColumns(r),f=0;f<u.length;f++)l.push(this.getGeneratedCell(u[parseInt(f.toString(),10)],e,f>=d?this.getCellType():f===0&&this.parent.childGrid?M.DetailFooterIntent:M.Indent,h[parseInt(f.toString(),10)],p));var m=new di({data:i,attributes:{class:"e-summaryrow"}});return m.cells=l,m.uid=Mt("grid-row"),m.parentUid=a,m.isAggregateRow=!0,m.visible=l.some(function(g){return g.isDataCell&&g.visible}),m},s.prototype.getGeneratedCell=function(e,i,t,r,n){var a=i.columns.filter(function(h){return h.columnName===e.field})[0],o={style:{textAlign:e.textAlign},"e-mappinguid":e.uid,index:e.index};r&&(o.class=r),c(r)&&n&&(o.class="e-detailindentcelltop");var l={visible:e.visible,isDataCell:!c(a),isTemplate:a&&!c(a.footerTemplate||a.groupFooterTemplate||a.groupCaptionTemplate),column:a||{},attributes:o,cellType:t};return l.column.headerText=e.headerText,new Di(l)},s.prototype.buildSummaryData=function(e,i){for(var t=[],r=this.getData(),n={},a=0;a<r.length;a++){n={};for(var o=r[parseInt(a.toString(),10)].columns,l=0;l<o.length;l++)n=this.setTemplate(o[parseInt(l.toString(),10)],i&&i.aggregates?i:e,n);t.push(n)}return t},s.prototype.getIndentByLevel=function(){return this.parent.groupSettings.columns.map(function(){return"e-indentcelltop"})},s.prototype.setTemplate=function(e,i,t){var r=e.type,n={},a=e.getFormatter()||function(){return function(u){return u}}(),o=i;r instanceof Array||(r=[e.type]);for(var l=0;l<r.length;l++){var h=e.field+" - "+r[parseInt(l.toString(),10)].toLowerCase(),p=e.columnName,d=r[parseInt(l.toString(),10)]!=="Custom"&&o.aggregates&&h in o.aggregates?o.aggregates[""+h]:Gh(r[parseInt(l.toString(),10)],o.aggregates?o:i,e,this.parent);t[""+p]=t[""+p]||{},t[""+p][""+h]=d,t[""+p][r[parseInt(l.toString(),10)]]=c(d)?" ":a(d),o.field&&(t[""+p].field=o.field,t[""+p].key=o.key)}return n.format=e.getFormatter(),e.setTemplate(n),t},s.prototype.getCellType=function(){return M.Summary},s}(),El=function(s){fa(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e.prototype.columnSelector=function(i){return i.groupFooterTemplate!==void 0},e.prototype.getIndentByLevel=function(i){return i===void 0&&(i=this.parent.groupSettings.columns.length),this.parent.allowRowDragAndDrop&&this.parent.groupSettings.columns.length&&(i-=1),this.parent.groupSettings.columns.map(function(t,r){return r<=i-1?"":"e-indentcelltop"})},e.prototype.getCellType=function(){return M.GroupSummary},e}(ga),Ll=function(s){fa(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e.prototype.columnSelector=function(i){return i.groupCaptionTemplate!==void 0},e.prototype.getData=function(){var i={columns:[]};return[s.prototype.getData.call(this).reduce(function(t,r){return t.columns=t.columns.concat(r.columns),t},i)]},e.prototype.isEmpty=function(){return(this.getData()[0].columns||[]).length===0},e.prototype.getCellType=function(){return M.CaptionSummary},e}(ga),zl=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Bl=function(s){zl(e,s);function e(i){var t=s.call(this,i)||this;return t.rows=[],t.index=0,t.infiniteChildCount=0,t.renderInfiniteAgg=!0,t.parent=i,t.summaryModelGen=new El(i),t.captionModelGen=new Ll(i),t}return e.prototype.generateRows=function(i,t){if(this.parent.groupSettings.columns.length===0)return s.prototype.generateRows.call(this,i,t);this.isInfiniteScroll=t.requestType==="infiniteScroll",this.rows=[],this.index=this.parent.enableVirtualization||this.isInfiniteScroll?t.startIndex:0;for(var r=0,n=i.length;r<n;r++)this.infiniteChildCount=0,this.renderInfiniteAgg=!0,this.getGroupedRecords(0,i[parseInt(r.toString(),10)],i.level,r,void 0,this.rows.length);return this.index=0,this.parent.isCollapseStateEnabled()&&this.ensureRowVisibility(),this.rows},e.prototype.getGroupedRecords=function(i,t,r,n,a,o,l){var h,p=r;if(c(t.items))if(c(t.GroupGuid))this.rows=this.rows.concat(this.generateDataRows(t,i,n,this.rows.length,l));else for(var d=0,u=t.length;d<u;d++)this.getGroupedRecords(i,t[parseInt(d.toString(),10)],t.level,n,i,this.rows.length,l);else{var f=void 0,m=this.generateCaptionRow(t,i,n,a,o,l);if(this.isInfiniteScroll&&(f=this.getPreCaption(i,m.data.key)),f?m.uid=f.uid:this.rows=this.rows.concat(m),t.items&&t.items.length&&this.getGroupedRecords(i+1,t.items,t.items.level,n,i+1,this.rows.length,m.uid),this.parent.aggregates.length&&this.isRenderAggregate(m)){var g=this.rows.length;(h=this.rows).push.apply(h,this.summaryModelGen.generateRows(t,{level:p,parentUid:m.uid}));for(var y=g-1;y>=0;y--)if(this.rows[parseInt(y.toString(),10)].isCaptionRow)this.rows[parseInt(y.toString(),10)].aggregatesCount=this.rows.length-g;else if(!this.rows[parseInt(y.toString(),10)].isCaptionRow&&!this.rows[parseInt(y.toString(),10)].isDataRow)break}f&&this.setInfiniteRowVisibility(f)}},e.prototype.isRenderAggregate=function(i){return this.parent.enableInfiniteScrolling?this.renderInfiniteAgg?(this.getPreCaption(i.indent,i.data.key),this.renderInfiniteAgg=i.data.count===this.infiniteChildCount,this.renderInfiniteAgg):!1:!this.parent.enableInfiniteScrolling},e.prototype.getPreCaption=function(i,t){var r=this.parent.getRowsObject().concat(this.rows),n;this.infiniteChildCount=0;for(var a=r.length;a--;){if(r[parseInt(a.toString(),10)].isCaptionRow&&r[parseInt(a.toString(),10)].indent===i){var o=r[parseInt(a.toString(),10)].data.key;(o instanceof Date&&o.toString()===t.toString()||o===t)&&(n=r[parseInt(a.toString(),10)])}if(r[parseInt(a.toString(),10)].indent===i||r[parseInt(a.toString(),10)].indent<i)break;r[parseInt(a.toString(),10)].indent===i+1&&this.infiniteChildCount++}return n},e.prototype.getCaptionRowCells=function(i,t,r){var n=[],a=[],o=this.parent.getColumnByField(i),l=this.parent.getColumnIndexesInView();this.parent.enableColumnVirtualization&&(o=this.parent.columns.filter(function(C){return C.field===i})[0]);var h=this.parent.groupSettings.columns.length,p=this.parent;if(!this.parent.enableColumnVirtualization||l.indexOf(t)!==-1){for(var d=0;d<t;d++)n.push(this.generateIndentCell());n.push(this.generateCell({},null,M.Expand))}if(t=this.parent.enableColumnVirtualization?1:this.parent.getVisibleColumns().length+h+(p.detailTemplate||p.childGrid?1:0)-t+(this.parent.getVisibleColumns().length?-1:0),this.parent.aggregates.length&&!this.captionModelGen.isEmpty()){var u=this.captionModelGen.generateRows(r)[0];O(r,u.data);var f=0;u.cells.some(function(C,R){return f=R,C.visible&&C.isDataCell}),a=u.cells.slice(f).filter(function(C){return C.visible}),u.visible&&a[0].column.field===this.parent.getVisibleColumns()[0].field&&(a=a.slice(1)),this.parent.getVisibleColumns().length===1&&(a=[]),t=t-a.length}for(var m=this.parent.enableColumnVirtualization?this.parent.getColumns():[o],g=!0,y=0;y<m.length;y++){var S=g&&l.indexOf(t)!==-1;S&&(g=!1);var I=!this.parent.enableColumnVirtualization||S?M.GroupCaption:M.GroupCaptionEmpty;t=this.parent.enableColumnVirtualization&&I===M.GroupCaption?t+h:t,p.isRowDragable()&&t++,n.push(this.generateCell(o,null,I,t))}return n.push.apply(n,a),n},e.prototype.generateCaptionRow=function(i,t,r,n,a,o){var l={},h="records",p=this.parent.getColumnByField(i.field);l.data=O({},i),p&&(l.data.field=i.field),l.isDataRow=!1,l.isExpand=!this.parent.groupSettings.enableLazyLoading&&!this.parent.isCollapseStateEnabled(),l.parentGid=r,l.childGid=n,l.tIndex=a,l.isCaptionRow=!0,l.parentUid=o,l.gSummary=c(i.items[""+h])?i.items.length:i.items[""+h].length,l.uid=Mt("grid-row");var d=new di(l);return d.indent=t,this.getForeignKeyData(d),d.cells=this.getCaptionRowCells(i.field,t,d.data),d},e.prototype.getForeignKeyData=function(i){var t=i.data,r=this.parent.getColumnByField(t.field);if(r&&r.isForeignColumn&&r.isForeignColumn()){var n=c(t.key)?"":r.valueAccessor(r.foreignKeyValue,pi(r,{},t.key)[0],r);dt("foreignKey",n,i.data)}},e.prototype.generateDataRows=function(i,t,r,n,a){for(var o=[],l=this.parent.getColumnIndexesInView(),h=0,p=i.length;h<p;h++,n++){o[parseInt(h.toString(),10)]=this.generateRow(i[parseInt(h.toString(),10)],this.index,h?void 0:"e-firstchildrow",t,r,n,a);for(var d=0;d<t;d++)this.parent.enableColumnVirtualization&&l.indexOf(t)===-1||o[parseInt(h.toString(),10)].cells.unshift(this.generateIndentCell());this.index++}return o},e.prototype.generateIndentCell=function(){return this.generateCell({},null,M.Indent)},e.prototype.refreshRows=function(i){for(var t=this.parent.getColumnIndexesInView(),r=0;r<i.length;r++)if(i[parseInt(r.toString(),10)].isDataRow){i[parseInt(r.toString(),10)].cells=this.generateCells(i[parseInt(r.toString(),10)]);for(var n=0;n<i[parseInt(r.toString(),10)].indent;n++)this.parent.enableColumnVirtualization&&t.indexOf(i[parseInt(r.toString(),10)].indent)===-1||i[parseInt(r.toString(),10)].cells.unshift(this.generateIndentCell())}else{var a=this.generateCaptionRow(i[parseInt(r.toString(),10)].data,i[parseInt(r.toString(),10)].indent);i[parseInt(r.toString(),10)].cells=a.cells}return i},e.prototype.setInfiniteRowVisibility=function(i){if(!i.isExpand||i.visible===!1)for(var t=0,r=this.rows;t<r.length;t++){var n=r[t];n.parentUid===i.uid&&(n.visible=!1,n.isCaptionRow&&this.setInfiniteRowVisibility(n))}},e.prototype.ensureRowVisibility=function(){for(var i=0;i<this.rows.length;i++){var t=this.rows[parseInt(i.toString(),10)];if(t.isCaptionRow)for(var r=i+1;r<this.rows.length;r++){var n=this.rows[parseInt(r.toString(),10)];t.uid===n.parentUid&&(this.rows[parseInt(r.toString(),10)].visible=t.isExpand)}}},e}(fr),Pl=function(){function s(e,i){var t=this;this.rows=[],this.freezeRows=[],this.movableRows=[],this.freezeRowElements=[],this.currentInfo={},this.prevCurrentView=[],this.isLoaded=!0,this.drop=function(r){t.parent.notify(ro,{target:r.target,droppedElement:r.droppedElement}),B(r.droppedElement)},this.infiniteCache={},this.visibleRows=[],this.visibleFrozenRows=[],this.rightFreezeRows=[],this.isAddRows=!1,this.isInfiniteFreeze=!1,this.useGroupCache=!1,this.tempFreezeRows=[],this.rafCallback=function(r){var n=r;return function(){if(t.ariaService.setBusy(t.getPanel().querySelector("."+we),!1),!t.parent.isDestroyed){var a=t.rows.slice(0);if(t.parent.enableInfiniteScrolling){if(t.parent.groupSettings.enableLazyLoading)for(var o=0;o<t.visibleRows.length;o++)t.setRowsInLazyGroup(t.visibleRows[parseInt(o.toString(),10)],o);a=t.parent.getRowsObject();var l=n.prevPage;if(t.parent.infiniteScrollSettings.enableCache&&l){var h=t.parent.infiniteScrollSettings.maxBlocks;a=[];for(var p=parseInt(t.rowElements[0].getAttribute("data-rowindex"),10)+1,d=Math.ceil(p/t.parent.pageSettings.pageSize),o=0,u=d;o<h;o++,u++)t.infiniteCache[parseInt(u.toString(),10)]&&(a=a.concat(t.infiniteCache[parseInt(u.toString(),10)]))}}if(t.parent.notify(ce,{rows:a,args:n}),t.parent.editSettings.showAddNewRow&&t.parent.addNewRowFocus&&(t.parent.notify(ai,{}),t.parent.addNewRowFocus=!1),t.parent.autoFit&&t.parent.preventAdjustColumns(),t.parent.isInitialLoad||t.parent.focusModule.setFirstFocusableTabIndex(),t.isLoaded){t.parent.isManualRefresh=!1,t.parent.enableInfiniteScrolling&&t.parent.groupSettings.enableLazyLoading&&r.requestType==="sorting"&&(t.parent.infiniteScrollModule.groupCaptionAction=void 0);var f=t.parent.parentDetails&&t.parent.parentDetails.parentInstObj&&t.parent.parentDetails.parentInstObj.isReact;if((t.parent.isReact||f)&&t.parent.element.querySelectorAll(".e-templatecell").length){var m=t;m.parent.renderTemplates(function(){m.parent.trigger(At,{},function(){m.parent.allowTextWrap&&m.parent.notify(Zi,{case:"textwrap"})})})}else t.parent.trigger(At,{},function(){t.parent.allowTextWrap&&t.parent.notify(Zi,{case:"textwrap"})});t.parent.allowTextWrap&&t.parent.height==="auto"&&(t.parent.getContentTable().scrollHeight>t.parent.getContent().clientHeight?t.parent.scrollModule.setPadding():t.parent.scrollModule.removePadding())}if(n){var g=(n.requestType||"").toLowerCase()+"-complete";t.parent.notify(g,n),r.requestType==="batchsave"&&(r.cancel=!1,t.parent.trigger(Le,r))}t.isLoaded&&t.parent.hideSpinner()}}},this.parent=e,this.serviceLocator=i,this.widthService=i.getService("widthService"),this.ariaService=this.serviceLocator.getService("ariaService"),this.parent.enableDeepCompare=this.parent.getDataModule().isRemote(),this.generator=this.getModelGenerator(),!this.parent.isDestroyed&&(!this.parent.enableColumnVirtualization&&!this.parent.enableVirtualization&&!this.parent.groupSettings.enableLazyLoading&&this.parent.on(or,this.setVisible,this),this.parent.on(ia,this.colGroupRefresh,this),this.parent.on(ve,this.enableAfterRender,this),this.parent.on(Qo,this.refreshContentRows,this),this.parent.on(Zr,this.beforeCellFocused,this),this.parent.on(Ft,this.droppableDestroy,this))}return s.prototype.beforeCellFocused=function(e){e.byKey&&(e.keyArgs.action==="upArrow"||e.keyArgs.action==="downArrow")?this.pressedKey=e.keyArgs.action:this.pressedKey=void 0},s.prototype.renderPanel=function(){var e=this.parent,i=this.parent.element.querySelector("."+mt);if(i){this.ariaService.setOptions(this.parent.element.querySelector("."+we),{busy:!1}),this.setPanel(i);return}i=this.parent.createElement("div",{className:mt});var t=this.parent.createElement("div",{className:we});this.ariaService.setOptions(t,{busy:!1}),this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&(this.renderHorizontalScrollbar(i),t.classList.add("e-virtual-content")),i.appendChild(t),this.setPanel(i),e.element.appendChild(i)},s.prototype.renderHorizontalScrollbar=function(e){var i=this.parent.createElement("div",{className:"e-movablescrollbar"}),t=this.parent.createElement("div",{className:"e-movablechild"}),r=Ne().toString();this.setScrollbarHeight(t,r),this.setScrollbarHeight(i,r),i.appendChild(t),e.appendChild(i)},s.prototype.setScrollbarHeight=function(e,i){e.style.minHeight=i+"px",e.style.maxHeight=i+"px"},s.prototype.renderTable=function(){var e=this.getPanel(),i=e.querySelector(".e-virtualtable"),t=e.querySelector(".e-virtualtrack");this.parent.enableVirtualization&&!c(i)&&!c(t)&&(B(i),B(t)),e.appendChild(this.createContentTable("_content_table")),this.setTable(e.querySelector("."+gt)),this.parent.selectionSettings.type==="Multiple"&&this.ariaService.setOptions(this.parent.element,{multiselectable:!0}),this.initializeContentDrop(),this.parent.frozenRows&&this.parent.getHeaderContent().classList.add("e-frozenhdr")},s.prototype.createContentTable=function(e){var i=this.getPanel().firstElementChild;this.getTable()&&B(this.getTable());var t=i.querySelector("."+gt)?i.querySelector("."+gt):this.parent.createElement("table",{className:gt,attrs:{cellspacing:"0.25px",role:"presentation",id:this.parent.element.id+e}});return this.setColGroup(this.parent.getHeaderTable().querySelector(Ke).cloneNode(!0)),t.appendChild(this.getColGroup()),t.appendChild(this.parent.createElement(N,{attrs:{role:"rowgroup"}})),i.appendChild(t),i},s.prototype.refreshContentRows=function(e){var i=this;e===void 0&&(e={});var t=this.parent;if(t.currentViewData.length!==0){t.editSettings&&t.editModule&&t.editSettings.mode==="Batch"&&t.editModule.formObj&&t.editSettings.showConfirmDialog===!1&&t.editModule.destroyForm();var r=this.currentMovableRows||t.currentViewData,n=t.isReact&&!c(t.rowTemplate),a=n?t.createElement(N,{attrs:{role:"rowgroup"}}):document.createDocumentFragment();this.initialPageRecords||(this.initialPageRecords=O([],r));var o=n?t.createElement(N,{attrs:{role:"rowgroup"}}):document.createDocumentFragment(),l,h;t.isReact&&t.rowTemplate&&(l=a,h=o);var p=t.getColumns(),d,u,f,m=new Fi(this.serviceLocator,null,this.parent),g=this.parent.enableInfiniteScrolling&&e.requestType==="infiniteScroll",y=this.isInfiniteColumnvirtualization()&&e.requestType!=="virtualscroll";t.notify(bl,{}),this.rowElements=[],this.rows=[],this.tempFreezeRows=[];var S,I,C=!!(this.parent.frozenRows&&this.parent.groupSettings.columns.length);it(t)&&["sorting","filtering","searching","grouping","ungrouping","reorder","save","delete"].some(function(H){return e.requestType===H})&&this.emptyVcRows();var R;R=this.checkCache(R,e),!this.isAddRows&&!this.useGroupCache&&(R=this.generator.generateRows(r,e)),this.setGroupCache(R,e),this.parent.notify(tl,{isInfiniteScroll:g,modelData:R,args:e});var T=!1,F=this.parent.registeredTemplate;if(!(e.requestType==="infiniteScroll"&&!this.parent.infiniteScrollSettings.enableCache)&&F&&F.template&&!e.isFrozen&&!T){for(var X=[],W=0;W<F.template.length;W++)for(var q=0;q<F.template[parseInt(W.toString(),10)].rootNodes.length;q++)c(F.template[parseInt(W.toString(),10)].rootNodes[parseInt(q.toString(),10)].parentNode)&&X.push(F.template[parseInt(W.toString(),10)]);this.parent.destroyTemplate(["template"],X)}if((this.parent.isReact||this.parent.isVue)&&!(e.requestType==="infiniteScroll"&&!this.parent.infiniteScrollSettings.enableCache)&&!e.isFrozen){var K=[this.parent.isVue?"template":"columnTemplate","rowTemplate","detailTemplate","captionTemplate","commandsTemplate","groupFooterTemplate","groupCaptionTemplate"];e.requestType==="infiniteScroll"&&this.parent.infiniteScrollSettings.enableCache&&(K=[this.parent.isVue?"template":"columnTemplate","commandsTemplate"]),xn(this.parent,K)}if(this.parent.enableColumnVirtualization){var te=new ca(this.serviceLocator,this.parent);te.updateVirtualCells(R)}this.tbody=this.getTable().querySelector(N);var se=0,ne=!0;if(it(t)&&t.vcRows.length){var St="top",Pe=c(e.virtualInfo.offsets)?c(e.scrollTop)?0:e.scrollTop[""+St]:e.virtualInfo.offsets.top;if(Pe!==0){for(var ke=t.vGroupOffsets,Me=t.pageSettings.pageSize/2,rt=Object.keys(ke).map(function(H){return ke[""+H]}),Fe=0;Fe<rt.length;Fe++)if(Pe<rt[parseInt(Fe.toString(),10)])if(!c(e.virtualInfo)&&e.virtualInfo.direction==="up"){se=Fe>0?(Fe-1)*Me:Fe*Me;break}else{se=Fe*Me,(this.parent.contentModule.isEndBlock(Fe)||this.parent.contentModule.isEndBlock(Fe+1))&&(e.virtualInfo.blockIndexes=[Fe,Fe+1]);break}Math.round(Pe+this.contentPanel.firstElementChild.offsetHeight)>=this.contentPanel.firstElementChild.scrollHeight&&!e.rowObject&&(ne=!1)}}var Ut=t.frozenRows&&this.parent.enableVirtualization&&e.requestType==="reorder";if(t.frozenRows&&e.requestType==="virtualscroll"&&e.virtualInfo.sentinelInfo.axis==="X"||Ut){var Wt=e.virtualInfo.blockIndexes,gr=e.virtualInfo.page;e.virtualInfo.blockIndexes=[1,2],Ut&&(e.virtualInfo.page=1);var mr=Ut?this.initialPageRecords:r,J=this.vgenerator.generateRows(mr,e);J.splice(this.parent.frozenRows);for(var W=0;W<this.parent.frozenRows;W++)d=m.render(J[parseInt(W.toString(),10)],p),vn(d),o.appendChild(d);e.virtualInfo.blockIndexes=Wt,e.virtualInfo.page=gr,Ut&&e.virtualInfo.page===1&&R.splice(0,this.parent.frozenRows)}this.virtualFrozenHdrRefresh(o,R,m,e,r,p),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&((this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]=[]),this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&e.requestType==="delete"&&(this.visibleRows=[]);for(var kn=function(H,ci){if(V.rows.push(R[parseInt(H.toString(),10)]),V.parent.groupSettings.enableLazyLoading&&!V.useGroupCache&&V.parent.groupSettings.columns.length&&((V.parent.enableVirtualization?V.parent.lazyLoadRender:V.parent.contentModule).refRowsObj[V.parent.pageSettings.currentPage].push(R[parseInt(H.toString(),10)]),V.setRowsInLazyGroup(R[parseInt(H.toString(),10)],H),c(R[parseInt(H.toString(),10)].indent)))return"continue";if(V.setInfiniteVisibleRows(e,R[parseInt(H.toString(),10)]),it(t)&&e.virtualInfo&&e.virtualInfo.blockIndexes&&V.rowElements.length>=e.virtualInfo.blockIndexes.length*V.parent.contentModule.getBlockSize()&&ne)return V.parent.currentViewData.records=V.rows.map(function(Lt){return Lt.data}),"break";if(t.rowTemplate){var Kt=t.element.id+"rowTemplate",le=void 0;if(t.isReact){var Qt=t.frozenRows&&H<t.frozenRows,yr=O({index:H},r[parseInt(H.toString(),10)]);if(t.getRowTemplate()(yr,t,"rowTemplate",Kt,null,null,Qt?o:a),t.requireTemplateRef){var Ye=V;return Ye.parent.renderTemplates(function(){t.frozenRows&&H<t.frozenRows?d=h.childNodes[parseInt(H.toString(),10)]:f=l.childNodes[parseInt(H.toString(),10)];var Lt={data:R[parseInt(H.toString(),10)].data,row:f||d};Ye.parent.trigger(sr,Lt),(R[parseInt(H.toString(),10)].isDataRow||Ye.parent.enableVirtualization&&Ye.parent.groupSettings.enableLazyLoading)&&Ye.rowElements.push(Lt.row),Ye.ariaService.setOptions(Ye.parent.element,{colcount:t.getColumns().length.toString()}),H===R.length-1&&(l=null,h=null)}),"continue"}}else le=t.getRowTemplate()(O({index:H},r[parseInt(H.toString(),10)]),t,"rowTemplate",Kt,void 0,void 0,void 0,V.parent.root);if(!t.isReact&&le[0].tagName==="TBODY"){for(var Ge=0;Ge<le.length;Ge++){var Oe=le[parseInt(Ge.toString(),10)].nodeName.toLowerCase()==="tr";(Oe||le[parseInt(Ge.toString(),10)].querySelectorAll&&le[parseInt(Ge.toString(),10)].querySelectorAll("tr").length)&&(d=Oe?le[parseInt(Ge.toString(),10)]:le[parseInt(Ge.toString(),10)].querySelector("tr"))}t.frozenRows&&H<t.frozenRows?o.appendChild(d):a.appendChild(d)}else t.frozenRows&&H<t.frozenRows?d=t.isReact?o.lastElementChild:Qe(o,le):(t.isReact||(d=Qe(a,le)),f=t.isReact?a.lastElementChild:d.lastElementChild);var st={data:R[parseInt(H.toString(),10)].data,row:f||d};V.parent.trigger(sr,st)}else{d=m.render(R[parseInt(H.toString(),10)],p),vn(d);var Xe=V.ensureFrozenHeaderRender(e);t.frozenRows&&(H<t.frozenRows||C)&&!g&&e.requestType!=="virtualscroll"&&Xe&&V.ensureVirtualFrozenHeaderRender(e)?o.appendChild(d):a.appendChild(d);var nt=parseInt(d.getAttribute("data-rowindex"),10);nt+1===t.frozenRows&&(C=!1),R[parseInt(H.toString(),10)].isExpand&&t.notify(Oo,d.cells[t.groupSettings.columns.length])}(R[parseInt(H.toString(),10)].isDataRow||V.parent.enableVirtualization&&V.parent.groupSettings.enableLazyLoading)&&(!c(t.rowTemplate)&&(t.isAngular||t.isVue3||t.isVue)?V.rowElements.push(f||d):V.rowElements.push(d)),V.ariaService.setOptions(V.parent.element,{colcount:t.getColumns().length.toString()})},V=this,W=se,ki=R.length;W<ki;W++){var Mi=kn(W,ki);if(Mi==="break")break}var Te=t.parentDetails&&t.parentDetails.parentInstObj&&t.parentDetails.parentInstObj.isReact;if((t.isReact||Te)&&!t.requireTemplateRef&&t.renderTemplates(),this.parent.enableInfiniteScrolling&&this.parent.groupSettings.enableLazyLoading&&(this.parent.contentModule.refRowsObj[this.parent.pageSettings.currentPage]=this.parent.contentModule.groupCache[this.parent.pageSettings.currentPage]),this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&this.parent.notify(da,{rows:(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).refRowsObj[this.parent.pageSettings.currentPage]}),t.removeMaskRow(),this.parent.notify("removeGanttShimmer",{requestType:"hideShimmer"}),t.frozenRows&&e.requestType!=="virtualscroll"&&!g&&this.ensureVirtualFrozenHeaderRender(e)||e.requestType==="virtualscroll"&&e.virtualInfo.sentinelInfo&&e.virtualInfo.sentinelInfo.axis==="X"){if(u=t.getHeaderTable().querySelector(N),n){var vr=u.parentElement;B(u),vr.appendChild(o)}else u.innerHTML="",u.appendChild(o);t.isInitialLoad||t.scrollModule.setHeight()}e.rows=this.rows.slice(0),Da(function(){if(i.parent.notify(oa,e),!i.parent.enableVirtualization&&(!i.parent.enableColumnVirtualization||y)&&!g&&(t.isReact||(i.tbody.innerHTML=""),c(i.tbody.parentElement)?B(t.getContentTable().querySelector(N)):B(i.tbody),i.tbody=i.parent.createElement(N,{attrs:{role:"rowgroup"}})),t.rowTemplate&&os(t.element.id+"rowTemplate","RowTemplate",t),!c(i.parent.infiniteScrollModule)&&(i.parent.enableInfiniteScrolling&&!i.isInfiniteColumnvirtualization()||y)){if(i.isAddRows=!1,i.parent.notify(el,{args:e}),i.parent.notify($o,{tbody:S||i.tbody,frag:a,args:e,rows:i.rows,rowElements:i.rowElements,visibleRows:i.visibleRows,tableName:I}),i.isInfiniteColumnvirtualization()&&i.parent.isFrozenGrid()){var H=i.parent.getContent().querySelector(".e-virtualtable"),ci=gn(H);i.parent.contentModule.resetStickyLeftPos(ci.width),i.widthService.refreshFrozenScrollbar()}}else i.useGroupCache=!1,i.appendContent(i.tbody,a,e);if(i.parent.editSettings.showAddNewRow&&(i.parent.enableVirtualization||i.parent.enableInfiniteScrolling)){var Xe=i.parent.element.querySelector(".e-addrow-removed");Xe&&B(Xe)}var nt=!i.parent.element.querySelector("."+li);i.parent.editSettings.showAddNewRow&&i.parent.editSettings.mode==="Normal"&&(nt&&((i.parent.enableVirtualization||i.parent.enableInfiniteScrolling)&&(i.parent.isAddNewRow=!0),i.parent.isEdit=!1,i.parent.addRecord()),(nt||(i.parent.enableVirtualization||i.parent.enableInfiniteScrolling)&&["sorting","filtering","searching","grouping","ungrouping","reorder"].some(function(Kt){return e.requestType===Kt}))&&i.parent.notify(ai,{})),i.parent.getVisibleFrozenRightCount()&&i.parent.getContent()&&In(i.parent)>0&&i.parent.element.classList.add("e-right-shadow"),a=null},this.rafCallback(O({},e)))}},s.prototype.isInfiniteColumnvirtualization=function(){return this.parent.enableColumnVirtualization&&this.parent.enableInfiniteScrolling},s.prototype.enableCacheOnInfiniteColumnVirtual=function(){return this.isInfiniteColumnvirtualization()&&this.parent.infiniteScrollSettings.enableCache},s.prototype.emptyVcRows=function(){this.parent.vcRows=[],this.parent.vRows=[]},s.prototype.appendContent=function(e,i,t,r){var n=this.parent.isReact&&!c(this.parent.rowTemplate);if(n?this.getTable().appendChild(i):(e.appendChild(i),this.getTable().appendChild(e)),this.parent.rowRenderingMode==="Vertical"&&this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Header"||this.parent.textWrapSettings.wrapMode==="Both"))for(var a=e.querySelectorAll("td"),o=0;o<a.length;o++){var l=parseFloat(document.defaultView.getComputedStyle(a[parseInt(o.toString(),10)],"::before").getPropertyValue("height")),h=a[parseInt(o.toString(),10)].offsetHeight;l>h&&(a[parseInt(o.toString(),10)].style.height=l+"px",a[parseInt(o.toString(),10)].style.boxSizing="content-box")}this.parent.getVisibleFrozenLeftCount()&&this.parent.enableColumnVirtualization&&this.widthService.refreshFrozenScrollbar()},s.prototype.setRowsInLazyGroup=function(e,i){this.parent.groupSettings.enableLazyLoading&&!this.useGroupCache&&this.parent.groupSettings.columns.length&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).maintainRows(e,i)},s.prototype.setGroupCache=function(e,i){!this.useGroupCache&&this.parent.groupSettings.enableLazyLoading&&this.parent.notify(nl,{args:i,data:e})},s.prototype.ensureFrozenHeaderRender=function(e){return!(this.parent.enableVirtualization&&(e.requestType==="reorder"||e.requestType==="refresh")||this.parent.infiniteScrollSettings.enableCache&&this.parent.frozenRows&&this.parent.infiniteScrollModule.requestType==="delete"&&this.parent.pageSettings.currentPage!==1)},s.prototype.ensureVirtualFrozenHeaderRender=function(e){return!(this.parent.enableVirtualization&&e.requestType==="delete")},s.prototype.checkCache=function(e,i){if(this.parent.infiniteScrollSettings.enableCache&&i.requestType==="infiniteScroll"){if(this.isAddRows=!c(this.infiniteCache[this.parent.pageSettings.currentPage]),this.isAddRows){var t=this.infiniteCache[this.parent.pageSettings.currentPage];e=this.parent.pageSettings.currentPage===1?t.slice(this.parent.frozenRows):t}return e}return this.parent.groupSettings.enableLazyLoading&&this.parent.groupSettings.columns.length&&(i.requestType==="paging"||i.requestType==="columnstate"||i.requestType==="reorder"||i.requestType==="virtualscroll")&&(this.parent.enableVirtualization?this.parent.lazyLoadRender:this.parent.contentModule).getGroupCache()[this.parent.pageSettings.currentPage]?(this.parent.enableVirtualization||(this.useGroupCache=!0),this.parent.enableVirtualization?this.parent.getRowsObject():this.parent.contentModule.initialGroupRows(i.requestType==="reorder")):null},s.prototype.setInfiniteVisibleRows=function(e,i){this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!(this.isInfiniteColumnvirtualization()&&e.requestType==="virtualscroll")&&this.visibleRows.push(i)},s.prototype.getCurrentBlockInfiniteRecords=function(){var e=[];if(this.parent.infiniteScrollSettings.enableCache){if(!Object.keys(this.infiniteCache).length)return[];var i=this.parent.getRows(),t=parseInt(i[this.parent.frozenRows].getAttribute(Z),10),r=Math.ceil((t+1)/this.parent.pageSettings.pageSize);t=parseInt(i[i.length-1].getAttribute(Z),10);for(var n=Math.ceil((t+(i.length?1:0))/this.parent.pageSettings.pageSize),a=r;a<=n;a++)e=e.length?e.concat(this.infiniteCache[parseInt(a.toString(),10)]):this.infiniteCache[parseInt(a.toString(),10)];this.parent.frozenRows&&this.parent.pageSettings.currentPage>1&&(e=this.infiniteCache[1].slice(0,this.parent.frozenRows).concat(e))}return e},s.prototype.getReorderedRows=function(e){return this.parent.contentModule.getReorderedFrozenRows(e)},s.prototype.virtualFrozenHdrRefresh=function(e,i,t,r,n,a){if(this.parent.frozenRows&&this.parent.enableVirtualization&&(r.requestType==="reorder"||r.requestType==="refresh")){for(var o=void 0,l=this.getReorderedRows(r),h=0;h<l.length;h++)o=t.render(l[parseInt(h.toString(),10)],a),e.appendChild(o);r.virtualInfo.page===1&&i.splice(0,this.parent.frozenRows)}},s.prototype.getInfiniteRows=function(){var e=[];if(this.parent.enableInfiniteScrolling)if(this.parent.infiniteScrollSettings.enableCache)for(var i=Object.keys(this.infiniteCache),t=0;t<i.length;t++)e=e.concat(this.infiniteCache[i[parseInt(t.toString(),10)]]);else e=this.visibleRows;return e},s.prototype.getInfiniteMovableRows=function(){var e=this.getCurrentBlockInfiniteRecords(),i=this.parent.enableInfiniteScrolling?e.length?e:this.visibleRows:[];return i},s.prototype.getPanel=function(){return this.contentPanel},s.prototype.setPanel=function(e){this.contentPanel=e},s.prototype.getTable=function(){return this.contentTable},s.prototype.setTable=function(e){this.contentTable=e},s.prototype.getRows=function(){var e=this.getInfiniteRows();return e.length?e:this.rows},s.prototype.getRowElements=function(){return this.rowElements},s.prototype.setRowElements=function(e){this.rowElements=e},s.prototype.getColGroup=function(){return this.colgroup},s.prototype.setColGroup=function(e){return c(e)||(e.id="content-"+e.id),this.colgroup=e},s.prototype.setVisible=function(e){var i=this.parent,t=this.getRows(),r;t.some(function(y){return y.isDataRow&&(r=y),y.isDataRow});var n=!0;!i.groupSettings.columns.length&&r&&(n=!1);for(var a=i.getDataRows(),o={},l=this.infiniteRowVisibility(),h=l||this.rows.filter(function(y){return!y.isDetailRow}),p=0,d=e.length;p<d;p++){var u=e[parseInt(p.toString(),10)],f=this.parent.getNormalizedColumnIndex(u.uid),m=this.parent.getColumnIndexByUid(u.uid),g=u.visible===!0?"":"none";f!==-1&&r&&f<r.cells.length&&wt(this.getColGroup().childNodes[parseInt(f.toString(),10)],{display:g}),n||this.setDisplayNone(a,m,g,h),!this.parent.invokedFromMedia&&u.hideAtMedia&&this.parent.updateMediaColumns(u),this.parent.invokedFromMedia=!1}n?this.refreshContentRows({requestType:"refresh"}):(this.parent.notify(la,{rows:h,args:o}),this.parent.editSettings.showAddNewRow&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.notify(ai,{}))},s.prototype.setDisplayNone=function(e,i,t,r){lp(e,i,t,r,this.parent,this.parent.isRowDragable()),this.parent.notify(Zo,{visible:t,index:i,isFreeze:this.isInfiniteFreeze})},s.prototype.infiniteRowVisibility=function(e){var i;return this.parent.enableInfiniteScrolling&&(this.isInfiniteFreeze=e,this.parent.infiniteScrollSettings.enableCache?i=e?this.getCurrentBlockInfiniteRecords():this.getCurrentBlockInfiniteRecords():i=e?this.visibleFrozenRows:this.visibleRows),i},s.prototype.colGroupRefresh=function(){if(this.getColGroup()){var e=this.getHeaderColGroup();this.getTable().replaceChild(e,this.getColGroup()),this.setColGroup(e)}},s.prototype.getHeaderColGroup=function(){return this.parent.element.querySelector("."+ze).querySelector(Ke+":not(.e-masked-colgroup)").cloneNode(!0)},s.prototype.initializeContentDrop=function(){var e=this.parent;this.droppable=new Ar(e.element,{accept:".e-dragclone",drop:this.drop})},s.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy()},s.prototype.canSkip=function(e,i,t){return c(i)||c(e.visible)||i.cells[parseInt(t.toString(),10)].visible===e.visible},s.prototype.getModelGenerator=function(){return this.generator=this.parent.allowGrouping?new Bl(this.parent):new fr(this.parent)},s.prototype.renderEmpty=function(e){this.getTable().appendChild(e),this.parent.frozenRows&&(this.parent.getHeaderContent().querySelector(N).innerHTML="")},s.prototype.setSelection=function(e,i,t){this.parent.notify(ol,{uid:e,set:i,clearAll:t});for(var r=this.getRows().filter(function(l){return t||e===l.uid}),n=0;n<r.length;n++){r[parseInt(n.toString(),10)].isSelected=i;for(var a=r[parseInt(n.toString(),10)].cells,o=0;o<a.length;o++)a[parseInt(o.toString(),10)].isSelected=i}},s.prototype.getRowByIndex=function(e){return e=this.getInfiniteRowIndex(e),c(e)?void 0:this.parent.getDataRows()[parseInt(e.toString(),10)]},s.prototype.getInfiniteRowIndex=function(e){if(this.parent.infiniteScrollSettings.enableCache&&!c(e)){var i=this.parent.frozenRows,t=i>e?0:i,r=parseInt(this.parent.getRows()[parseInt(t.toString(),10)].getAttribute(Z),10);e=i>e?e:e-r+i}return e},s.prototype.getVirtualRowIndex=function(e){return e},s.prototype.enableAfterRender=function(e){e.module==="group"&&e.enable&&(this.generator=this.getModelGenerator())},s.prototype.setRowObjects=function(e){this.rows=e},s.prototype.immutableModeRendering=function(e){var i=this;e===void 0&&(e={});var t=this.parent;t.hideSpinner();var r=t.getPrimaryKeyFieldNames()[0],n={},a={},o=[],l={},h=t.getRowsObject().slice(),p=this.getBatchEditedRecords(r,h),d={},u=Object.keys(p).length!==0;if(t.getContent().querySelector(".e-emptyrow")||e.requestType==="reorder"||this.parent.groupSettings.columns.length)this.refreshContentRows(e);else{if(t.currentViewData.length===0)return;var f={},m=t.createElement(N,{attrs:{role:"rowgroup"}}),g=t.currentViewData,y=[].slice.call(this.getTable().querySelector(N).children);if(this.prevCurrentView.length){var S=this.prevCurrentView.length,I=g.length;if(S===I)for(var C=0;C<I;C++){if(this.parent.editSettings.mode==="Batch"&&y[parseInt(C.toString(),10)].classList.contains("e-insertedrow")){y.splice(C,1),--C;continue}a[g[parseInt(C.toString(),10)][""+r]]=n[this.prevCurrentView[parseInt(C.toString(),10)][""+r]]=C,d[parseInt(C.toString(),10)]=g[parseInt(C.toString(),10)][""+r],f[h[parseInt(C.toString(),10)].uid]=y[parseInt(C.toString(),10)],l[parseInt(C.toString(),10)]=this.prevCurrentView[parseInt(C.toString(),10)][""+r]}else{for(var C=0;C<I;C++)a[g[parseInt(C.toString(),10)][""+r]]=C,d[parseInt(C.toString(),10)]=g[parseInt(C.toString(),10)][""+r];for(var C=0;C<S;C++){if(this.parent.editSettings.mode==="Batch"&&y[parseInt(C.toString(),10)].classList.contains("e-insertedrow")){y.splice(C,1),--C;continue}f[h[parseInt(C.toString(),10)].uid]=y[parseInt(C.toString(),10)],n[this.prevCurrentView[parseInt(C.toString(),10)][""+r]]=C,l[parseInt(C.toString(),10)]=this.prevCurrentView[parseInt(C.toString(),10)][""+r]}}}for(var C=0;C<g.length;C++){var R=n[g[parseInt(C.toString(),10)][""+r]];if(c(R)){var X=new Fi(this.serviceLocator,null,t),W={startIndex:C},q=this.generator.generateRows([g[parseInt(C.toString(),10)]],W);o.push(q[0]);var F=X.render(q[0],t.getColumns());m.appendChild(F),this.refreshImmutableContent(C,F,o[parseInt(C.toString(),10)])}else{var T=!1;this.parent.enableDeepCompare&&(T=this.objectEqualityChecker(this.prevCurrentView[parseInt(R.toString(),10)],g[parseInt(C.toString(),10)]));var F=f[h[parseInt(R.toString(),10)].uid];if(o.push(h[parseInt(R.toString(),10)]),this.rowElements[parseInt(R.toString(),10)]&&this.rowElements[parseInt(R.toString(),10)].getAttribute("data-uid")===o[parseInt(C.toString(),10)].uid&&(u&&c(p[d[parseInt(C.toString(),10)]])||!u&&(T||this.prevCurrentView[parseInt(R.toString(),10)]===g[parseInt(C.toString(),10)]))){R!==C&&this.refreshImmutableContent(C,F,o[parseInt(C.toString(),10)]),m.appendChild(F);continue}(u&&!c(p[d[parseInt(C.toString(),10)]])||!this.parent.enableDeepCompare&&g[parseInt(C.toString(),10)]!==this.prevCurrentView[parseInt(R.toString(),10)]||this.parent.enableDeepCompare&&!T)&&h[parseInt(R.toString(),10)].setRowValue(g[parseInt(C.toString(),10)]),m.appendChild(F),this.refreshImmutableContent(C,F,o[parseInt(C.toString(),10)])}}if(this.rows=o,this.rowElements=[].slice.call(m.children),B(this.getTable().querySelector(N)),this.getTable().appendChild(m),this.parent.trigger(At,{},function(){i.parent.allowTextWrap&&i.parent.notify(Zi,{case:"textwrap"})}),e){var K=(e.requestType||"").toLowerCase()+"-complete";this.parent.notify(K,e)}}},s.prototype.objectEqualityChecker=function(e,i){for(var t=Object.keys(e),r=!0,n=0;n<t.length;n++)if(e[t[parseInt(n.toString(),10)]]!==i[t[parseInt(n.toString(),10)]]){var a=e[t[parseInt(n.toString(),10)]]instanceof Date&&i[t[parseInt(n.toString(),10)]]instanceof Date;if(!a||e[t[parseInt(n.toString(),10)]].getTime()!==i[t[parseInt(n.toString(),10)]].getTime()){r=!1;break}}return r},s.prototype.getBatchEditedRecords=function(e,i){var t={},r=this.parent.getBatchChanges(),n=[],a=[];Object.keys(r).length&&(n=r.changedRecords,a=r.addedRecords);var o={cancel:!1};this.parent.notify(ll,{rows:i,args:o}),a.length&&(this.parent.editSettings.newRowPosition==="Bottom"?i.splice(i.length-1,a.length):o.cancel||i.splice(0,a.length));for(var l=0;l<n.length;l++)t[n[parseInt(l.toString(),10)][""+e]]=l;return t},s.prototype.refreshImmutableContent=function(e,i,t){t.isAltRow=this.parent.enableAltRow?e%2!==0:!1,t.isAltRow?i.classList.add("e-altrow"):i.classList.remove("e-altrow"),t.index=e,t.edit=void 0,t.isDirty=!1,i.setAttribute(Z,e.toString()),i.setAttribute(Sn,(e+1).toString()),this.updateCellIndex(i,e)},s.prototype.updateCellIndex=function(e,i){for(var t=0;t<e.cells.length;t++)e.cells[parseInt(t.toString(),10)].setAttribute("index",i.toString())},s}(),Ol=function(){function s(e,i){var t=this;this.frzIdx=0,this.notfrzIdx=0,this.isFirstCol=!1,this.isReplaceDragEle=!0,this.helper=function(r){var n=t.parent,a=t.draggable.currentStateTarget,o=b(a,"e-headercell");if(!(n.allowReordering||n.allowGrouping)||!c(o)&&o.getElementsByClassName("e-checkselectall").length>0)return!1;var l=t.parent.createElement("div",{className:"e-cloneproperties e-dragclone e-headerclone"}),h=a.classList.contains("e-headercell")?a:o;if(!h||!n.allowReordering&&h.classList.contains("e-stackedheadercell"))return!1;var p=h.offsetHeight,d=h.querySelector(".e-headercelldiv")||h.querySelector(".e-stackedheadercelldiv"),u;if(d){if(h.querySelector(".e-stackedheadercelldiv")?u=n.getStackedHeaderColumnByHeaderText(d.innerText.trim(),n.columns):u=n.getColumnByUid(d.getAttribute("e-mappinguid")),t.column=u,t.column.lockColumn)return!1;l.setAttribute("e-mappinguid",t.column.uid)}if(u&&!c(u.headerTemplate)){if(c(u.headerTemplate))l.innerHTML=u.headerTemplate;else{var f=n.getColumnIndexByField(u.field),m=u.getHeaderTemplate()(O({index:f},u),n,"headerTemplate"),g=n.isReact&&typeof u.headerTemplate!="string",y=n.parentDetails&&n.parentDetails.parentInstObj&&n.parentDetails.parentInstObj.isReact;(g||y)&&n.renderTemplates(),Qe(l,m)}!c(l.firstChild)&&l.firstChild.nodeType===1&&(l.firstChild.style.pointerEvents="none")}else l.innerHTML=d?u.headerText:h.firstElementChild.innerHTML;return l.style.width=h.offsetWidth+"px",l.style.height=h.offsetHeight+"px",l.style.lineHeight=(p-6).toString()+"px",n.element.appendChild(l),l},this.dragStart=function(r){var n=t.parent;n.element.querySelector(".e-gridpopup").style.display="none",n.notify(to,{target:t.draggable.currentStateTarget,column:t.column,event:r.event})},this.drag=function(r){var n=t.parent,a=r.target;if(a){var o=k(a,".e-grid"),l=t.parent.element.querySelector(".e-cloneproperties");if((!o||o.getAttribute("id")!==n.element.getAttribute("id"))&&(Ie(l,["e-notallowedcur"],["e-defaultcur"]),n.allowReordering&&(n.element.querySelector(".e-reorderuparrow").style.display="none",n.element.querySelector(".e-reorderdownarrow").style.display="none"),!n.groupSettings.allowReordering))return;n.notify(io,{target:r.target,column:t.column,event:r.event})}},this.dragStop=function(r){var n=t.parent,a;n.element.querySelector(".e-gridpopup").style.display="none",(!b(r.target,"e-headercell")&&!b(r.target,"e-groupdroparea")||!n.allowReordering&&b(r.target,"e-headercell")||!r.helper.getAttribute("e-mappinguid")&&b(r.target,"e-groupdroparea"))&&(B(r.helper),a=!0),n.notify(Io,{target:r.target,event:r.event,column:t.column,cancel:a})},this.drop=function(r){var n=t.parent,a=r.droppedElement.getAttribute("e-mappinguid"),o=k(r.target,".e-grid");B(r.droppedElement),!(o&&o.getAttribute("id")!==n.element.getAttribute("id")||!(n.allowReordering||n.allowGrouping))&&n.notify(xo,{target:r.target,uid:a,droppedElement:r.droppedElement})},this.parent=e,this.serviceLocator=i,this.ariaService=this.serviceLocator.getService("ariaService"),this.widthService=this.serviceLocator.getService("widthService"),!this.parent.isDestroyed&&(this.parent.enableColumnVirtualization||this.parent.on(or,this.setVisible,this),this.parent.on(na,this.colPosRefresh,this),this.parent.on(yn,this.renderCustomToolbar,this),this.parent.rowRenderingMode==="Vertical"&&this.parent.on(ve,this.updateCustomResponsiveToolbar,this))}return s.prototype.renderPanel=function(){var e=this.parent.element.querySelector("."+ze),i=e!=null;e=i?e:this.parent.createElement("div",{className:"e-gridheader"});var t=i?e.querySelector("."+Re):this.parent.createElement("div",{className:Re});this.toggleStackClass(e),e.appendChild(t),this.setPanel(e),i||this.parent.element.appendChild(e)},s.prototype.renderTable=function(){var e=this.getPanel();e.appendChild(this.createHeaderTable()),this.setTable(e.querySelector("."+gt)),this.initializeHeaderDrag(),this.initializeHeaderDrop(),this.parent.notify(Rt,{rows:this.rows})},s.prototype.getPanel=function(){return this.headerPanel},s.prototype.setPanel=function(e){this.headerPanel=e},s.prototype.getTable=function(){return this.headerTable},s.prototype.setTable=function(e){this.headerTable=e},s.prototype.getColGroup=function(){return this.colgroup},s.prototype.setColGroup=function(e){return this.colgroup=e},s.prototype.getRows=function(){var e=this.getTable();return e.tHead.rows},s.prototype.createHeaderTable=function(){var e=this.createTable(),i=this.getPanel().querySelector("."+Re);return i.appendChild(e),i},s.prototype.createHeader=function(e,i){e===void 0&&(e=null);var t=this.parent;this.getTable()&&B(this.getTable());var r=this.parent.createElement("table",{className:gt,attrs:{cellspacing:"0.25px",role:"presentation"}}),n=this.createHeaderContent(i),a=n.thead,o=this.parent.createElement(N,{className:this.parent.frozenRows||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow?"":"e-hide",attrs:{role:"rowgroup"}});this.caption=this.parent.createElement("caption",{innerHTML:this.parent.element.id+"_header_table",className:"e-hide"});for(var l=this.parent.createElement(Ke),h=this.parent.createElement("tr",{attrs:{role:"row"},className:(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow?"e-hide":""}),p,d=this.rows=n.rows,u=0,f=d.length;u<f;u++)for(var m=0,g=d[parseInt(u.toString(),10)].cells.length;m<g;m++)p=this.parent.createElement("td"),h.appendChild(p);return(t.allowFiltering||t.allowSorting||t.allowGrouping)&&r.classList.add("e-sortfilter"),this.updateColGroup(l),o.appendChild(h),r.appendChild(this.setColGroup(l)),r.appendChild(a),r.appendChild(o),r.appendChild(this.caption),r},s.prototype.createTable=function(e){return e===void 0&&(e=null),this.createHeader(e)},s.prototype.createHeaderContent=function(e){var i=this.parent,t=i.getColumns(),r=this.parent.createElement("thead",{attrs:{role:"rowgroup"}}),n=this.parent.createElement("tr",{className:"e-columnheader",attrs:{role:"row"}}),a=new Fi(this.serviceLocator,M.Header,i);a.element=n;var o=[],l;this.colDepth=Xh(i.columns);for(var h=0,p=this.colDepth;h<p;h++)o[parseInt(h.toString(),10)]=this.generateRow(h),o[parseInt(h.toString(),10)].cells=[];if(o=this.ensureColumns(o),o=this.getHeaderCells(o,e),i.isRowDragable()&&this.parent.getFrozenMode()==="Right")for(var h=0,p=o.length;h<p;h++)o[parseInt(h.toString(),10)].cells.push(this.generateCell({},M.RowDragHIcon));for(var h=0,p=this.colDepth;h<p;h++)l=a.render(o[parseInt(h.toString(),10)],t),this.parent.rowHeight&&l.querySelector(".e-headercell")&&(l.style.height=this.parent.rowHeight+"px"),vn(l),r.appendChild(l);var d={thead:r,rows:o};return d},s.prototype.updateColGroup=function(e){var i=this.parent.getColumns(),t,r=this.parent.getColumnIndexesInView();if(e.id=this.parent.element.id+Ke,this.parent.allowGrouping)for(var n=0,a=this.parent.groupSettings.columns.length;n<a;n++)this.parent.enableColumnVirtualization&&r.indexOf(n)===-1||(t=this.parent.createElement("col",{className:"e-group-intent"}),e.appendChild(t));(this.parent.detailTemplate||this.parent.childGrid)&&(t=this.parent.createElement("col",{className:"e-detail-intent"}),e.appendChild(t)),this.parent.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&(t=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(t));for(var n=0,a=i.length;n<a;n++)t=this.parent.createElement("col"),i[parseInt(n.toString(),10)].visible===!1&&wt(t,{display:"none"}),e.appendChild(t);return this.parent.isRowDragable()&&this.parent.getFrozenMode()==="Right"&&(t=this.parent.createElement("col",{className:"e-drag-intent"}),e.appendChild(t)),e},s.prototype.ensureColumns=function(e){for(var i=this.parent,t=this.parent.getColumnIndexesInView(),r=0,n=e.length;r<n;r++){if(i.allowGrouping)for(var a=0,o=i.groupSettings.columns.length;a<o;a++)this.parent.enableColumnVirtualization&&t.indexOf(a)===-1||e[parseInt(r.toString(),10)].cells.push(this.generateCell({},M.HeaderIndent));if(i.detailTemplate||i.childGrid){var l={};this.parent.notify(ha,l),e[parseInt(r.toString(),10)].cells.push(this.generateCell(l,M.DetailHeader))}i.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&e[parseInt(r.toString(),10)].cells.push(this.generateCell({},M.RowDragHIcon))}return e},s.prototype.getHeaderCells=function(e,i){var t=this.parent.getHeaderTable()&&this.parent.getHeaderTable().querySelector("thead"),r=this.parent.enableColumnVirtualization?this.parent.getColumns(this.parent.enablePersistence):this.parent.columns;if(this.frzIdx=0,this.notfrzIdx=0,this.parent.lockcolPositionCount)for(var n=0;n<r.length;n++)this.lockColsRendered=!1,e=this.appendCells(r[parseInt(n.toString(),10)],e,0,n===0,!1,n===r.length-1,t,i,!1);for(var n=0,a=r.length;n<a;n++)this.notfrzIdx=0,this.lockColsRendered=!0,e=this.appendCells(r[parseInt(n.toString(),10)],e,0,n===0,!1,n===a-1,t,i,!1);return e},s.prototype.appendCells=function(e,i,t,r,n,a,o,l,h){var p=a?h?"e-laststackcell":"e-lastcell":"",d=!this.parent.lockcolPositionCount||e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered;if(!e.columns)d&&i[parseInt(t.toString(),10)].cells.push(this.generateCell(e,M.Header,this.colDepth-t,(r?"":n?"e-firstcell":"")+p,t,this.parent.getColumnIndexByUid(e.uid))),this.parent.lockcolPositionCount?this.frzIdx+this.notfrzIdx<this.parent.frozenColumns&&(e.lockColumn&&!this.lockColsRendered||!e.lockColumn&&this.lockColsRendered)?this.frzIdx++:this.notfrzIdx++:this.frzIdx++;else{this.isFirstCol=!1;var u=this.getCellCnt(e,0);if(u){var f=this.getStackedLockColsCount(e,0),m=this.parent.lockcolPositionCount===0||!this.lockColsRendered&&f!==0||this.lockColsRendered&&u-f!==0;m&&i[parseInt(t.toString(),10)].cells.push(new Di({cellType:M.StackedHeader,column:e,colSpan:this.getColSpan(u,f),className:r?"":n?"e-firstcell":""}))}if(this.parent.lockcolPositionCount&&!this.lockColsRendered)for(var g=0;g<e.columns.length;g++)i=this.appendCells(e.columns[parseInt(g.toString(),10)],i,t+1,r,g===0,g===e.columns.length-1&&a,o,l,!1);if(this.lockColsRendered)for(var g=0,y=e.columns.length;g<y;g++){r=r&&g===0;var S=this.isFirstCol=e.columns[parseInt(g.toString(),10)].visible&&!r,I=g===y-1&&a;i=this.appendCells(e.columns[parseInt(g.toString(),10)],i,t+1,r,S&&!I,I,o,l,!0)}}return i},s.prototype.getStackedLockColsCount=function(e,i){if(e.columns)for(var t=0;t<e.columns.length;t++)i=this.getStackedLockColsCount(e.columns[parseInt(t.toString(),10)],i);else e.lockColumn&&i++;return i},s.prototype.getColSpan=function(e,i){return e=this.lockColsRendered?e-i:i,e},s.prototype.generateRow=function(e){return new di({})},s.prototype.generateCell=function(e,i,t,r,n,a){var o={visible:e.visible,isDataCell:!1,isTemplate:!c(e.headerTemplate),rowID:"",column:e,cellType:i,rowSpan:t,className:r,index:n,colIndex:a};return(!o.rowSpan||o.rowSpan<2)&&delete o.rowSpan,new Di(o)},s.prototype.setVisible=function(e){for(var i=this.parent,t,r,n=0,a=e.length;n<a;n++){var o=e[parseInt(n.toString(),10)];r=i.getNormalizedColumnIndex(o.uid),t=o.visible?"":"none",wt(this.getColGroup().children[parseInt(r.toString(),10)],{display:t}),i.editSettings.showAddNewRow&&i.element.querySelector(".e-addedrow")&&wt(i.element.querySelector(".e-addedrow").querySelector("colgroup").childNodes[parseInt(r.toString(),10)],{display:t})}this.refreshUI(),this.parent.editSettings.showAddNewRow&&(this.parent.isAddNewRow=!0)},s.prototype.colPosRefresh=function(){this.refreshUI()},s.prototype.refreshUI=function(){var e=this.getPanel();this.toggleStackClass(e);var i=this.freezeReorder?this.headerPanel.querySelector("."+lr).querySelector("."+gt):this.getTable(),t=void 0;if(i){B(i),this.parent.editSettings.showAddNewRow&&!this.parent.isAddNewRow&&i.querySelector(".e-addedrow")&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&(i.querySelector(".e-addedrow").classList.add("e-addrow-removed"),this.parent.isAddNewRow=!0),i.removeChild(i.firstChild),i.removeChild(i.childNodes[0]);var r=this.parent.createElement(Ke),n=this.createHeaderContent(t);this.rows=n.rows,i.insertBefore(n.thead,i.firstChild),this.updateColGroup(r),i.insertBefore(this.setColGroup(r),i.firstChild),this.appendContent(i),this.parent.notify(ia,{}),this.widthService.setWidthToColumns(),this.parent.updateDefaultCursor(),this.initializeHeaderDrag();for(var a=[].slice.call(e.querySelectorAll("tr.e-columnheader")),o=0,l=a;o<l.length;o++){var h=l[o],p=[].slice.call(h.getElementsByClassName("e-grouptopleftcell"));p.length&&p[p.length-1].classList.add("e-lastgrouptopleftcell")}this.parent.notify(Rt,{rows:this.rows}),this.parent.enableColumnVirtualization&&b(i,lr)&&this.parent.notify(Rt,{rows:this.rows,args:{isFrozen:!1,isXaxis:!0}}),this.parent.allowTextWrap&&this.parent.textWrapSettings.wrapMode==="Header"&&He(a,!0)}var d=this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");c(d)||(d.tabIndex=0)},s.prototype.toggleStackClass=function(e){var i=this.parent.columns,t=i.some(function(r){return!c(r.columns)});t?e.classList.add("e-stackedheader"):e.classList.remove("e-stackedheader")},s.prototype.appendContent=function(e){this.getPanel().querySelector("."+Re).appendChild(e)},s.prototype.getCellCnt=function(e,i){if(e.columns)for(var t=0,r=e.columns.length;t<r;t++)i=this.getCellCnt(e.columns[parseInt(t.toString(),10)],i);else e.visible&&i++;return i},s.prototype.initializeHeaderDrag=function(){var e=this.parent;(this.parent.allowReordering||this.parent.allowGrouping&&this.parent.groupSettings.showDropArea)&&(this.draggable=new ss(e.getHeaderContent(),{dragTarget:".e-headercell",distance:5,helper:this.helper,dragStart:this.dragStart,drag:this.drag,dragStop:this.dragStop,abort:".e-rhandler",isReplaceDragEle:this.isReplaceDragEle}),this.parent.on(Ft,this.droppableDestroy,this))},s.prototype.initializeHeaderDrop=function(){var e=this.parent;this.droppable=new Ar(e.getHeaderContent(),{accept:".e-dragclone",drop:this.drop}),this.parent.on(Ft,this.droppableDestroy,this)},s.prototype.droppableDestroy=function(){this.droppable&&!this.droppable.isDestroyed&&this.droppable.destroy(),this.draggable&&!this.draggable.isDestroyed&&this.draggable.destroy()},s.prototype.renderCustomToolbar=function(){var e=this,i=this.parent;if(i.rowRenderingMode==="Vertical"&&!i.toolbar&&(i.allowSorting||i.allowFiltering&&i.filterSettings.type!=="FilterBar")){for(var t=i.createElement("div",{className:"e-res-toolbar e-toolbar"}),r=i.createElement("div",{className:"e-toolbar-items"}),n=i.createElement("div",{className:"e-toolbar-left"}),a=this.parent.allowFiltering&&this.parent.allowSorting?2:1,o=0;o<a;o++){var l=i.createElement("div",{className:"e-toolbar-item e-gridresponsiveicons e-icons e-tbtn-align"}),h=a===1?this.parent.allowSorting?"sort":"filter":o===1?"sort":"filter",p=i.createElement("button",{className:"e-tbar-btn e-control e-btn e-lib e-icon-btn"}),d=i.createElement("span",{className:"e-btn-icon e-res"+h+"-icon e-icons"});p.appendChild(d);var u=new ri({cssClass:this.parent.cssClass?this.parent.cssClass:""});u.appendTo(p),p.onclick=function(f){f.target.classList.contains("e-ressort-btn")||f.target.classList.contains("e-ressort-icon")||f.target.querySelector(".e-ressort-icon")?e.parent.showResponsiveCustomSort():e.parent.showResponsiveCustomFilter()},l.appendChild(p),n.appendChild(l)}r.appendChild(n),t.appendChild(r),i.element.insertBefore(t,this.parent.element.querySelector("."+ze))}else i.enableAdaptiveUI&&!i.toolbar&&i.getContent().classList.add("e-responsive-header")},s.prototype.updateCustomResponsiveToolbar=function(e){var i=this.parent.element.querySelector(".e-responsive-toolbar");e.module==="toolbar"&&(i?B(i):this.renderCustomToolbar())},s}(),Ve=function(){function s(e,i){this.localizer=i.getService("localization"),this.formatter=i.getService("valueFormatter"),this.parent=e,this.element=this.parent.createElement("TD",{className:U,attrs:{role:"gridcell",tabindex:"-1"}}),this.rowChkBox=this.parent.createElement("input",{className:"e-checkselect",attrs:{type:"checkbox","aria-label":this.localizer.getConstant("SelectRow")}})}return s.prototype.getGui=function(){return""},s.prototype.format=function(e,i,t){if(!c(e.format)){if(e.type==="number"&&isNaN(parseInt(i,10))&&(i=null),e.type==="dateonly"&&typeof i=="string"&&i){var r=i.split(/[^0-9.]/);i=new Date(parseInt(r[0],10),parseInt(r[1],10)-1,parseInt(r[2],10))}i=this.formatter.toView(i,e.getFormatter())}return c(i)?"":i.toString()},s.prototype.evaluate=function(e,i,t,r,n,a){var o,l;if(i.column.template){var h=this.parent.isReact&&typeof i.column.template!="string"&&i.column.template.prototype&&!i.column.template.prototype.CSPTemplate,p=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact,d=["index"],u=bn({},t,(o={},o[aa]=n,o.column=i.column,o)),f=this.parent.element.id+i.column.uid,m="isStringTemplate";if(h||p){var g={index:r[d[0]]};i.column.getColumnTemplate()(O(g,u),this.parent,"columnTemplate",f,this.parent[""+m],null,e)}else l=i.column.getColumnTemplate()(O({index:r[d[0]]},u),this.parent,"template",f,this.parent[""+m],void 0,void 0,this.parent.root);return!h&&!p&&Qe(e,l),this.parent.notify("template-result",{template:l}),l=null,e.setAttribute("aria-label",e.innerText+this.localizer.getConstant("TemplateCell")+this.localizer.getConstant("ColumnHeader")+i.column.headerText),!1}return!0},s.prototype.invokeFormatter=function(e,i,t){if(!c(e.formatter))if(Oh(e.formatter,"getValue")){var r=e.formatter;i=new r().getValue(e,t)}else typeof e.formatter=="function"?i=e.formatter(e,t):i=e.formatter.getValue(e,t);return i},s.prototype.render=function(e,i,t,r,n){return this.refreshCell(e,i,t,n)},s.prototype.refreshTD=function(e,i,t,r){var n=this.parent.editSettings.mode==="Batch"&&e.classList.contains("e-editedbatchcell");if(this.parent.isReact){var a=e.cellIndex,o=e.parentElement;B(e);var l=this.refreshCell(i,t,r,n);this.cloneAttributes(l,e),o.cells.length!==a-1?o.insertBefore(l,o.cells[parseInt(a.toString(),10)]):o.appendChild(l)}else{var h=this.refreshCell(i,t,r,n);e.innerHTML="";var p=h.getAttribute("aria-label");p&&e.setAttribute("aria-label",p);for(var d=[].slice.call(h.childNodes),u=0,f=d;u<f.length;u++){var m=f[u];e.appendChild(m)}}},s.prototype.cloneAttributes=function(e,i){for(var t=i.attributes,r=t.length,n;r--;)n=t[parseInt(r.toString(),10)],e.setAttribute(n.name,n.value)},s.prototype.refreshCell=function(e,i,t,r){var n,a=this.element.cloneNode(),o=e.column,l;e.isForeignKey&&(l=e.foreignKeyData[0]||(n={},n[o.foreignKeyValue]=o.format?null:"",n));var h=this.getGui(),p=e.isForeignKey?this.getValue(o.foreignKeyValue,l,o):this.getValue(o.field,i,o);if((o.type==="date"||o.type==="datetime")&&!c(p)&&(p=new Date(p)),o.type==="dateonly"&&!c(p)&&typeof p=="string"){var d=p.split(/[^0-9.]/);p=new Date(parseInt(d[0],10),parseInt(d[1],10)-1,parseInt(d[2],10))}if(p=this.format(o,p,i),h=p.toString(),o.type==="boolean"&&!o.displayAsCheckBox){var u=p!=="true"&&p!=="false"?null:p==="true"?"True":"False";h=u?this.localizer.getConstant(u):h}var f=this.invokeFormatter(o,p,i);if(h=c(o.formatter)?h:c(f)?"":f.toString(),this.evaluate(a,e,i,t,l,r)&&o.type!=="checkbox")this.appendHtml(a,this.parent.sanitize(h),o.getDomSetter?o.getDomSetter():"innerHTML");else if(o.type==="checkbox"){a.classList.add(oi),this.parent.selectionSettings.persistSelection?p=p==="true":p=!1;var m=ii(this.parent.createElement,!1,{checked:p,label:" "});this.parent.cssClass&&L([m],[this.parent.cssClass]),this.rowChkBox.id="checkbox-"+e.rowID,m.insertBefore(this.rowChkBox.cloneNode(),m.firstChild),a.appendChild(m)}if(this.parent.checkAllRows==="Check"&&this.parent.enableVirtualization&&(e.isSelected=!0),this.setAttributes(a,e,t),o.type==="boolean"&&o.displayAsCheckBox){var g=isNaN(parseInt(p.toString(),10))?p==="true":parseInt(p.toString(),10)>0,m=ii(this.parent.createElement,!1,{checked:g,label:" "});a.innerHTML="",a.classList.add("e-gridchkbox-cell"),m.classList.add("e-checkbox-disabled"),this.parent.cssClass&&L([m],[this.parent.cssClass]),a.appendChild(m)}if(a.classList.contains("e-summarycell")&&!i.key){var y=a.getAttribute("e-mappinguid");o=this.parent.getColumnByUid(y),a.setAttribute("aria-label",h+this.localizer.getConstant("ColumnHeader")+e.column.headerText)}return this.parent.isFrozenGrid()&&(!i||i&&!i.key)&&Ea(this.parent,o,a),a},s.prototype.appendHtml=function(e,i,t){return t===void 0&&(t="innerHTML"),e[""+t]=i,e},s.prototype.setAttributes=function(e,i,t){var r=i.column;this.buildAttributeFromCell(e,i,r.type==="checkbox"),ut(e,t),ut(e,i.attributes),r.customAttributes&&ut(e,r.customAttributes),this.parent.rowRenderingMode==="Vertical"&&ut(e,{"data-cell":r.headerText}),r.textAlign&&(e.style.textAlign=r.textAlign),r.clipMode==="Clip"||!r.clipMode&&this.parent.clipMode==="Clip"?e.classList.add("e-gridclip"):(r.clipMode==="EllipsisWithTooltip"||!r.clipMode&&this.parent.clipMode==="EllipsisWithTooltip"&&!(this.parent.allowTextWrap&&(this.parent.textWrapSettings.wrapMode==="Content"||this.parent.textWrapSettings.wrapMode==="Both")))&&r.type!=="checkbox"&&e.classList.add("e-ellipsistooltip")},s.prototype.buildAttributeFromCell=function(e,i,t){var r={},n={colindex:pe},a=[];i.colSpan&&(r.colSpan=i.colSpan),i.rowSpan&&(r.rowSpan=i.rowSpan),i.isTemplate&&a.push("e-templatecell"),i.isSelected&&(a.push.apply(a,["e-selectionbackground","e-active"]),t&&e.querySelector(".e-frame").classList.add("e-check")),i.isColumnSelected&&a.push.apply(a,["e-columnselection"]),i.cellType===M.Header?(r[n.colindex]=i.colIndex,r[Ks]=i.colIndex+1):c(i.index)||(r[n.colindex]=i.index,r[Ks]=i.index+1),i.visible||a.push("e-hide"),r.class=a,ut(e,r)},s.prototype.getValue=function(e,i,t){return t.valueAccessor(e,i,t)},s}(),ma=function(){function s(){}return s.prototype.setOptions=function(e,i){for(var t=Object.keys(i),r=0;r<t.length;r++)Ot(e,qt[t[parseInt(r.toString(),10)]],i[t[parseInt(r.toString(),10)]])},s.prototype.setExpand=function(e,i){Ot(e,qt.expand,i)},s.prototype.setSort=function(e,i){Ot(e,qt.sort,i,typeof i=="boolean")},s.prototype.setBusy=function(e,i){Ot(e,qt.busy,i),Ot(e,qt.invalid,null,!0)},s.prototype.setGrabbed=function(e,i,t){Ot(e,qt.grabbed,i,t)},s.prototype.setDropTarget=function(e,i){Ot(e,qt.dropeffect,"copy",!i)},s}();function Ot(s,e,i,t){if(t&&s){s.removeAttribute(e);return}s&&s.setAttribute(e,i)}var qt={expand:"aria-expanded",role:"role",datarole:"data-role",selected:"aria-selected",multiselectable:"aria-multiselectable",sort:"aria-sort",busy:"aria-busy",invalid:"aria-invalid",grabbed:"aria-grabbed",dropeffect:"aria-dropeffect",haspopup:"aria-haspopup",level:"aria-level",colcount:"aria-colcount",rowcount:"aria-rowcount"},ql=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),va=function(s){ql(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TH",{className:"e-headercell",attrs:{tabindex:"-1",role:"columnheader"}}),i.ariaService=new ma,i.hTxtEle=i.parent.createElement("span",{className:"e-headertext"}),i.sortEle=i.parent.createElement("div",{className:"e-sortfilterdiv e-icons",attrs:{"aria-hidden":"true"}}),i.gui=i.parent.createElement("div"),i.chkAllBox=i.parent.createElement("input",{className:"e-checkselectall",attrs:{type:"checkbox","aria-label":i.localizer.getConstant("SelectAllCheckbox")}}),i}return e.prototype.getGui=function(){return this.gui.cloneNode()},e.prototype.render=function(i,t,r){var n=this.element.cloneNode(),a=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(i,n,a)},e.prototype.refresh=function(i,t){this.clean(t);var r=this.parent.createElement("div",{className:"e-filtermenudiv e-icons e-icon-filter",attrs:{"aria-hidden":"true"}});return this.prepareHeader(i,t,r)},e.prototype.clean=function(i){i.innerHTML=""},e.prototype.prepareHeader=function(i,t,r){var n=i.column,a={},o="",l=this.getGui(),h;if(Bt(l,{"e-mappinguid":n.uid,class:"e-headercelldiv"}),c(n.headerValueAccessor)||(h=this.getValue(n.headerText,n)),n.type!=="checkbox"){var p=n.headerText;c(h)||(p=h);var d=this.hTxtEle.cloneNode();d[n.getDomSetter()]=this.parent.sanitize(p),l.appendChild(d)}else{n.editType="booleanedit";var u=ii(this.parent.createElement,!1,{checked:!1,label:" "});this.chkAllBox.id="checkbox-"+n.uid,u.insertBefore(this.chkAllBox.cloneNode(),u.firstChild),this.parent.cssClass&&L([u],[this.parent.cssClass]),l.appendChild(u),l.classList.add("e-headerchkcelldiv")}if(this.buildAttributeFromCell(t,i),this.appendHtml(t,l),t.appendChild(this.sortEle.cloneNode()),this.parent.allowFiltering&&this.parent.filterSettings.type!=="FilterBar"&&n.allowFiltering&&!c(n.field)&&!(this.parent.showColumnMenu&&n.showColumnMenu)){Bt(r,{"e-mappinguid":"e-flmenu-"+n.uid}),o=o.length?o+". "+this.localizer.getConstant("FilterDescription"):this.localizer.getConstant("FilterDescription"),t.classList.add("e-fltr-icon");var f=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==f.length){for(var m=this.parent.getForeignKeyColumns(),g=0;g<this.parent.columns.length;g++)for(var y=0;y<this.parent.filterSettings.columns.length;y++)if(this.parent.filterSettings.columns[parseInt(y.toString(),10)].field===n.field||m.length&&n.foreignKeyValue===this.parent.filterSettings.columns[parseInt(y.toString(),10)].field){r.classList.add("e-filtered"),f.push(n.field);break}}t.appendChild(r.cloneNode())}i.className&&t.classList.add(i.className),n.customAttributes&&ut(t,n.customAttributes),this.parent.allowSorting&&n.allowSorting&&(a.sort="none",o=o.length?o+". "+this.localizer.getConstant("SortDescription"):this.localizer.getConstant("SortDescription")),(this.parent.allowGrouping&&n.allowGrouping||this.parent.allowReordering&&n.allowReordering)&&(a.grabbed=!1,o=o.length?o+". "+this.localizer.getConstant("GroupDescription"):this.localizer.getConstant("GroupDescription")),this.parent.showColumnMenu&&n.type!=="checkbox"&&!n.template&&(o=o.length?o+". "+this.localizer.getConstant("ColumnMenuDescription"):this.localizer.getConstant("ColumnMenuDescription")),t=this.extendPrepareHeader(n,t);var S,I=this.parent,C=I.getColumnIndexByField(n.field);if(!c(n.headerTemplate)){var R=I.element.id+n.uid+"headerTemplate",T="isStringTemplate",F=n,X=this.parent.isReact&&typeof n.headerTemplate!="string",W=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if(X||W){var q={index:C};t.firstElementChild.innerHTML="",n.getHeaderTemplate()(O(q,F),I,"headerTemplate",R,this.parent[""+T],null,t.firstElementChild),this.parent.renderTemplates()}else S=n.getHeaderTemplate()(O({index:C},F),I,"headerTemplate",R,this.parent[""+T],void 0,void 0,this.parent.root),t.firstElementChild.innerHTML="",Qe(t.firstElementChild,S)}if(this.ariaService.setOptions(t,a),!c(n.headerTextAlign)||!c(n.textAlign)){var K=n.headerTextAlign||n.textAlign;l.style.textAlign=K,K==="Right"||K==="Left"?t.classList.add(K==="Right"?"e-rightalign":"e-leftalign"):K==="Center"&&t.classList.add("e-centeralign")}if(n.clipMode==="Clip"||!n.clipMode&&this.parent.clipMode==="Clip"?t.classList.add("e-gridclip"):(n.clipMode==="EllipsisWithTooltip"||!n.clipMode&&this.parent.clipMode==="EllipsisWithTooltip")&&!(I.allowTextWrap&&(I.textWrapSettings.wrapMode==="Header"||I.textWrapSettings.wrapMode==="Both"))&&n.type!=="checkbox"&&t.classList.add("e-ellipsistooltip"),o){var te=this.parent.createElement("span",{id:"headerTitle-"+n.uid,innerHTML:o,attrs:{style:"display:none"}});t.appendChild(te),t.setAttribute("aria-describedby",te.id)}t.setAttribute("aria-rowspan",(c(i.rowSpan)?1:i.rowSpan).toString()),t.setAttribute("aria-colspan","1");var se=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if((this.parent.isReact&&this.parent.requireTemplateRef||se&&this.parent.parentDetails.parentInstObj.requireTemplateRef)&&!c(n.headerTemplate)){var ne=this;ne.parent.renderTemplates(function(){ne.parent.trigger(Xr,{cell:i,node:t})})}else this.parent.trigger(Xr,{cell:i,node:t});return this.parent.isFrozenGrid()&&Ea(this.parent,n,t),t},e.prototype.getValue=function(i,t){return t.headerValueAccessor(i,t)},e.prototype.extendPrepareHeader=function(i,t){if(this.parent.showColumnMenu&&i.showColumnMenu&&!c(i.field)){var r=this.parent.createElement("div",{className:"e-icons e-columnmenu",attrs:{"aria-hidden":"true"}}),n=[];if(this.parent.filterSettings.columns.length&&this.parent.filterSettings.columns.length!==n.length){for(var a=0;a<this.parent.columns.length;a++)for(var o=0;o<this.parent.filterSettings.columns.length;o++)if(this.parent.filterSettings.columns[parseInt(o.toString(),10)].field===i.field){r.classList.add("e-filtered"),n.push(i.field);break}}t.classList.add("e-fltr-icon"),t.appendChild(r)}if(this.parent.allowResizing){var l=this.parent.createElement("div");l.className=i.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",t.appendChild(l)}return t},e.prototype.appendHtml=function(i,t){return i.appendChild(t),i},e}(Ve),Hl=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Xs=function(s){Hl(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TH",{className:"e-headercell e-stackedheadercell",attrs:{tabindex:"-1",role:"columnheader"}}),i}return e.prototype.render=function(i,t,r){var n=this.element.cloneNode(),a=this.parent.createElement("div",{className:"e-stackedheadercelldiv",attrs:{"e-mappinguid":i.column.uid}}),o=i.column;if(n.appendChild(a),c(o.headerTemplate)?this.appendHtml(a,this.parent.sanitize(o.headerText),o.getDomSetter()):Qe(a,o.getHeaderTemplate()(o,this.parent,"headerTemplate")),i.column.toolTip&&n.setAttribute("title",i.column.toolTip),o.clipMode==="Clip"||!o.clipMode&&this.parent.clipMode==="Clip"?n.classList.add("e-gridclip"):(o.clipMode==="EllipsisWithTooltip"||!o.clipMode&&this.parent.clipMode==="EllipsisWithTooltip")&&n.classList.add("e-ellipsistooltip"),c(i.column.textAlign)||(a.style.textAlign=i.column.textAlign),i.column.customAttributes&&ut(n,i.column.customAttributes),n.setAttribute("colspan",i.colSpan.toString()),n.setAttribute("aria-colspan",i.colSpan.toString()),n.setAttribute("aria-rowspan","1"),this.parent.allowResizing){var l=this.parent.createElement("div");l.className=i.column.allowResizing?"e-rhandler e-rcursor":"e-rsuppress",n.appendChild(l)}if(i.className&&n.classList.add(i.className),this.parent.trigger(Xr,{cell:i,node:n}),nr(o)==="Left")if(n.classList.add("e-leftfreeze"),o.border==="Left"&&n.classList.add("e-freezeleftborder"),o.index===0)De(n,this.parent.getIndentCount()*30,this.parent.enableRtl,"Left");else{for(var h=this.parent.getColumns(),p=this.parent.getIndentCount()*30,d=0;d<h.length&&!(o.index<h[parseInt(d.toString(),10)].index);d++)h[parseInt(d.toString(),10)].visible&&(p+=parseFloat(h[parseInt(d.toString(),10)].width.toString()));De(n,p,this.parent.enableRtl,"Left")}else if(nr(o)==="Right"){n.classList.add("e-rightfreeze");for(var h=this.parent.getColumns(),p=this.parent.getFrozenMode()==="Right"&&this.parent.isRowDragable()?30:0,d=h.length-1;d>=0&&!(Js(o,h[parseInt(d.toString(),10)].uid)||o.index>h[parseInt(d.toString(),10)].index);d--)h[parseInt(d.toString(),10)].visible&&(p+=parseFloat(h[parseInt(d.toString(),10)].width.toString()));De(n,p,this.parent.enableRtl,"Right"),o.border==="Right"&&n.classList.add("e-freezerightborder")}else if(nr(o)==="Fixed"){n.classList.add("e-fixedfreeze");var h=this.parent.getColumns(),p=0;this.parent.getVisibleFrozenLeftCount()?p=this.parent.getIndentCount()*30:this.parent.getFrozenMode()==="Right"&&(p=this.parent.groupSettings.columns.length*30);for(var d=0;d<h.length;d++)o.index>h[parseInt(d.toString(),10)].index&&(h[parseInt(d.toString(),10)].freeze==="Left"||h[parseInt(d.toString(),10)].isFrozen||h[parseInt(d.toString(),10)].freeze==="Fixed")&&h[parseInt(d.toString(),10)].visible&&(p+=parseFloat(h[parseInt(d.toString(),10)].width.toString()));De(n,p-1,this.parent.enableRtl,"Left"),p=this.parent.getFrozenMode()==="Right"&&this.parent.isRowDragable()?30:0;for(var d=h.length-1;d>=0;d--)if(o.index<h[parseInt(d.toString(),10)].index){if(Js(o,h[parseInt(d.toString(),10)].uid)||o.index>h[parseInt(d.toString(),10)].index)break;(h[parseInt(d.toString(),10)].freeze==="Right"||h[parseInt(d.toString(),10)].freeze==="Fixed")&&h[parseInt(d.toString(),10)].visible&&(p+=parseFloat(h[parseInt(d.toString(),10)].width.toString()))}De(n,p-1,this.parent.enableRtl,"Right")}else n.classList.add("e-unfreeze");return n},e}(Ve),Nl=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),cn=function(s){Nl(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TD",{className:"e-indentcell"}),i}return e.prototype.render=function(i,t){var r=this.element.cloneNode();return ut(r,i.attributes),r},e}(Ve),ya=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Vl=function(s){ya(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.cellUid=0,i.element=i.parent.createElement("TD",{className:"e-groupcaption",attrs:{id:i.parent.element.id+"captioncell",tabindex:"-1"}}),i}return e.prototype.render=function(i,t){this.element.id=this.parent.element.id+"captioncell"+this.cellUid++;var r=this.element.cloneNode(),n=this.parent,a=i.column,o=a.getDomSetter?a.getDomSetter():"innerHTML",l,h,p;t.headerText=i.column.headerText,i.isForeignKey&&(h=this.format(i.column,i.column.valueAccessor("foreignKey",t,i.column)));for(var d=i.isForeignKey?h:i.column.enableGroupByFormat?t.key:this.format(i.column,i.column.valueAccessor("key",t,i.column)),u=0;u<n.aggregates.length;u++)for(var f=function(R){if(n.getVisibleColumns()[0].field===n.aggregates[parseInt(u.toString(),10)].columns[parseInt(R.toString(),10)].field&&n.aggregates[parseInt(u.toString(),10)].columns[parseInt(R.toString(),10)].groupCaptionTemplate){var T=n.aggregates[parseInt(u.toString(),10)].columns[parseInt(R.toString(),10)].groupCaptionTemplate;if(typeof T=="string"&&T.includes("$"))p=n.aggregates[parseInt(u.toString(),10)].columns[parseInt(R.toString(),10)].groupCaptionTemplate.split("$")[0]+t[n.getVisibleColumns()[0].field][n.aggregates[parseInt(u.toString(),10)].columns[parseInt(R.toString(),10)].type]+n.aggregates[parseInt(u.toString(),10)].columns[parseInt(R.toString(),10)].groupCaptionTemplate.split("}")[1];else{var F=n.aggregates[parseInt(u.toString(),10)].columns[parseInt(R.toString(),10)],X=F.getTemplate(M.CaptionSummary),W="";if(!c(X)){var q=X.fn(t[F.columnName],m.parent,X.property,W);m.parent.isReact&&typeof F.groupCaptionTemplate!="string"?m.parent.renderTemplates(function(){q&&q.length&&(c(n.groupSettings.captionTemplate)?r.innerText+=" "+q[0].textContent:r.appendChild(q[0]))}):q&&q.length&&(c(n.groupSettings.captionTemplate)?p=q[0].textContent:p=q)}}return"break"}},m=this,g=0;g<n.aggregates[parseInt(u.toString(),10)].columns.length;g++){var y=f(g);if(y==="break")break}if(c(n.groupSettings.captionTemplate))n.groupSettings.enableLazyLoading?r[""+o]=this.parent.sanitize(i.column.headerText)+": "+this.parent.sanitize(d)+(p?"   "+p:""):r[""+o]=this.parent.sanitize(i.column.headerText)+": "+this.parent.sanitize(d)+" - "+t.count+" "+(t.count<2?this.localizer.getConstant("Item"):this.localizer.getConstant("Items"))+(p?"   "+p:"");else{var S=this.parent.isReact&&typeof n.groupSettings.captionTemplate!="string",I=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;if(S||I){var C=n.element.id+"captionTemplate";de(n.groupSettings.captionTemplate)(t,this.parent,"captionTemplate",C,null,null,r),this.parent.renderTemplates()}else this.parent.isVue?l=de(n.groupSettings.captionTemplate)(t,this.parent):l=de(n.groupSettings.captionTemplate)(t);!S&&!I&&(Qe(r,l),p&&p.length&&p[0].textContent&&r.appendChild(p[0]))}return r.setAttribute("colspan",i.colSpan.toString()),r.setAttribute("aria-label",r.innerHTML+this.localizer.getConstant("GroupCaption")),r.setAttribute("title",r.textContent),r},e}(Ve),Gl=function(s){ya(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TD",{className:"e-groupcaption"}),i}return e.prototype.render=function(i,t){var r=this.element.cloneNode();return r.innerHTML="&nbsp;",r.setAttribute("colspan",i.colSpan.toString()),r},e}(Ve),jl=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),_l=function(s){jl(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return e.prototype.render=function(i,t,r,n){var a=this.element.cloneNode();return a.setAttribute("ej-mappingname",t.field),a.setAttribute("ej-mappingvalue",t.key),a.setAttribute("aria-expanded",n?"true":"false"),a.setAttribute("tabindex","-1"),this.parent.infiniteScrollSettings&&this.parent.infiniteScrollSettings.enableCache&&!this.parent.groupSettings.enableLazyLoading?(i.cellType=M.Indent,a.className=n?"e-recordplusexpand e-disablepointer":"e-recordpluscollapse e-disablepointer"):(a.className=n?"e-recordplusexpand":"e-recordpluscollapse",a.appendChild(this.parent.createElement("a",{className:n?"e-icons e-gdiagonaldown e-icon-gdownarrow":"e-icons e-gnextforward e-icon-grightarrow",attrs:{href:"#",title:n?"expanded":"collapsed"}}))),a},e}(cn),Ul=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Wl=function(s){Ul(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TH",{className:"e-grouptopleftcell"}),i}return e.prototype.render=function(i,t){var r=this.element.cloneNode();return r.appendChild(this.parent.createElement("div",{className:"e-headercelldiv e-emptycell",innerHTML:""})),r},e}(Ve),Kl=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Ql=function(s){Kl(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TH",{className:"e-detailheadercell"}),i}return e.prototype.render=function(i,t){var r=this.element.cloneNode();return r.appendChild(this.parent.createElement("div",{className:"e-emptycell"})),r},e}(Ve),Xl=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Yl=function(s){Xl(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TD",{className:"e-detailrowcollapse",attrs:{"aria-expanded":"false",tabindex:"-1"}}),i}return e.prototype.render=function(i,t,r){var n=this.element.cloneNode();return r&&!c(r.class)?(n.className="",n.className=r.class,n.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonaldown e-icon-gdownarrow",attrs:{href:"#",title:this.localizer.getConstant("Expanded")}}))):n.appendChild(this.parent.createElement("a",{className:"e-icons e-dtdiagonalright e-icon-grightarrow",attrs:{href:"#",title:this.localizer.getConstant("Collapsed")}})),i.isSelected&&n.classList.add("e-selectionbackground","e-active"),n},e}(Ve),Jl=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Zl=function(s){Jl(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TD",{className:"e-rowdragdrop e-rowdragdropcell",attrs:{tabindex:"-1",role:"gridcell"}}),i}return e.prototype.render=function(i,t){var r=this.element.cloneNode();if(r.appendChild(this.parent.createElement("div",{className:"e-icons e-rowcelldrag e-dtdiagonalright e-icon-rowdragicon",attrs:{"aria-hidden":"true"}})),i.isSelected&&(r.classList.add("e-selectionbackground"),r.classList.add("e-active")),this.parent.getVisibleFrozenRightCount()||this.parent.getVisibleFrozenLeftCount()){r.classList.add("e-leftfreeze");var n=this.parent.getFrozenMode()==="Right"?0:this.parent.groupSettings.columns.length*30;De(r,n,this.parent.enableRtl,this.parent.getFrozenMode()==="Right"?"Right":"Left")}return r},e}(Ve),$l=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),eh=function(s){$l(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.element=i.parent.createElement("TH",{className:"e-rowdragheader"}),i}return e.prototype.render=function(i,t){var r=this.element.cloneNode();if(r.appendChild(Ce("div",{className:"e-emptycell"})),this.parent.getVisibleFrozenRightCount()||this.parent.getVisibleFrozenLeftCount()){r.classList.add("e-leftfreeze");var n=this.parent.getFrozenMode()==="Right"?0:this.parent.groupSettings.columns.length*30;De(r,n,this.parent.enableRtl,this.parent.getFrozenMode()==="Right"?"Right":"Left")}return r},e}(Ve),th=function(){function s(e,i){this.emptyGrid=!1,this.counter=0,this.parent=e,this.locator=i,this.data=new kl(e,i),this.l10n=i.getService("localization"),this.ariaService=this.locator.getService("ariaService"),this.renderer=this.locator.getService("rendererFactory"),this.addEventListener()}return s.prototype.render=function(){var e=this.parent;this.headerRenderer=this.renderer.getRenderer(We.Header),this.contentRenderer=this.renderer.getRenderer(We.Content),this.headerRenderer.renderPanel(),this.contentRenderer.renderPanel(),e.getColumns().length&&(this.isLayoutRendered=!0,this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.emptyRow(!1)),this.parent.scrollModule.setWidth(),this.parent.scrollModule.setHeight(),this.parent.height!=="auto"&&this.parent.scrollModule.setPadding(),this.refreshDataManager()},s.prototype.refresh=function(e){var i=this;e===void 0&&(e={requestType:"refresh"});var t=this.parent;t.notify(e.requestType+"-begin",e),t.trigger(vt,e,function(r){if(r===void 0&&(r={requestType:"refresh"}),r.cancel){if(t.notify(an,r),r.action==="clearFilter"&&i.parent.filterSettings.type==="Menu"){i.parent.filterSettings.columns[i.parent.filterModule.filterObjIndex]=i.parent.filterModule.prevFilterObject;var n=i.parent.showColumnMenu&&i.parent.filterModule.column.showColumnMenu?".e-columnmenu":".e-icon-filter",a=i.parent.element.querySelector('[e-mappinguid="'+i.parent.filterModule.column.uid+'"]').parentElement,o=a.querySelector(n);c(i.parent.filterModule.prevFilterObject)||o.classList.add("e-filtered")}if(r.action==="clear-filter"&&(i.parent.filterSettings.type==="CheckBox"||i.parent.filterSettings.type==="Excel")&&(i.parent.filterSettings.columns=i.parent.filterModule.checkboxPrevFilterObject),r.requestType==="grouping"){var l=t.groupSettings.columns.indexOf(r.columnName);if(l!==-1){t.setProperties({groupSettings:{Columns:t.groupSettings.columns.splice(l,1)}},!0),t.setProperties({sortSettings:{Columns:t.sortSettings.columns.splice(l,1)}},!0);var h=t.getColumnByField(r.columnName),p=t.getColumnHeaderByField(h.field);h.visible=!c(p)&&!p.classList.contains("e-hide")}}return}if(t.allowSelection&&(r.action==="clearFilter"||r.action==="clear-filter"||r.requestType==="searching"&&r.searchString===""||r.action==="add")&&(t.selectionModule.rmtHdrChkbxClicked=!1),t.allowPaging&&t.pageSettings.pageSizes&&t.pagerModule.pagerObj.isAllPage&&r.action==="add"&&r.requestType==="save"&&t.pagerModule.pagerObj.checkAll&&t.setProperties({pageSettings:{pageSize:t.pageSettings.pageSize+1}},!0),r.requestType==="delete"&&t.allowPaging){var d=r.data.length,u=t.pageSettings.totalRecordsCount-d,f=t.getCurrentViewRecords().length;(!(f-d)&&u&&(t.pageSettings.currentPage-1)*t.pageSettings.pageSize===u||u&&u<=d)&&(t.prevPageMoving=!0,t.setProperties({pageSettings:{totalRecordsCount:u,currentPage:Math.ceil(u/t.pageSettings.pageSize)}},!0),t.pagerModule.pagerObj.totalRecordsCount=u)}r.requestType==="reorder"&&i.parent.dataSource&&"result"in i.parent.dataSource||(r.requestType==="paging"||r.requestType==="columnstate"||r.requestType==="reorder")&&i.parent.groupSettings.enableLazyLoading&&i.parent.groupSettings.columns.length&&(i.parent.enableVirtualization?i.parent.lazyLoadRender:i.parent.contentModule).getGroupCache()[i.parent.pageSettings.currentPage]?i.contentRenderer.refreshContentRows(r):i.refreshDataManager(r)})},s.prototype.resetTemplates=function(){var e=this.parent,i=e.getColumns();if(e.detailTemplate){var t=e.element.id+"detailTemplate";Lr[""+t]=[],_e(t,"DetailTemplate")}e.groupSettings.captionTemplate&&_e(e.element.id+"captionTemplate","CaptionTemplate"),e.rowTemplate&&_e(e.element.id+"rowTemplate","RowTemplate"),e.toolbarTemplate&&_e(e.element.id+"toolbarTemplate","ToolbarTemplate"),e.pageSettings.template&&_e(e.element.id+"_template","pageSettings");for(var r=0;r<i.length;r++)i[parseInt(r.toString(),10)].template&&(Lr[e.element.id+i[parseInt(r.toString(),10)].uid]=[],_e(e.element.id+i[parseInt(r.toString(),10)].uid,"Template")),i[parseInt(r.toString(),10)].headerTemplate&&_e(e.element.id+i[parseInt(r.toString(),10)].uid+"headerTemplate","HeaderTemplate"),i[parseInt(r.toString(),10)].filterTemplate&&_e(e.element.id+i[parseInt(r.toString(),10)].uid+"filterTemplate","FilterTemplate");for(var n="guid",a=0;a<e.aggregates.length;a++)for(var o=0;o<e.aggregates[parseInt(a.toString(),10)].columns.length;o++){if(e.aggregates[parseInt(a.toString(),10)].columns[parseInt(o.toString(),10)].footerTemplate){var l=e.element.id+e.aggregates[parseInt(a.toString(),10)].columns[parseInt(o.toString(),10)][""+n]+"footerTemplate";_e(l,"FooterTemplate")}if(e.aggregates[parseInt(a.toString(),10)].columns[parseInt(o.toString(),10)].groupFooterTemplate){var l=e.element.id+e.aggregates[parseInt(a.toString(),10)].columns[parseInt(o.toString(),10)][""+n]+"groupFooterTemplate";_e(l,"GroupFooterTemplate")}if(e.aggregates[parseInt(a.toString(),10)].columns[parseInt(o.toString(),10)].groupCaptionTemplate){var l=e.element.id+e.aggregates[parseInt(a.toString(),10)].columns[parseInt(o.toString(),10)][""+n]+"groupCaptionTemplate";_e(l,"GroupCaptionTemplate")}}},s.prototype.refreshComplete=function(e){this.parent.trigger(Le,e)},s.prototype.refreshDataManager=function(e){var i=this;e===void 0&&(e={});var t=this.parent,r=t.loadingIndicator.indicatorType==="Shimmer"&&e.requestType!=="virtualscroll"&&e.requestType!=="infiniteScroll"||(e.requestType==="virtualscroll"||e.requestType==="infiniteScroll")&&t.enableVirtualMaskRow;e.requestType!=="virtualscroll"&&!e.isCaptionCollapse&&!r&&this.parent.showSpinner(),r&&t.showMaskRow(e.requestType==="virtualscroll"?e.virtualInfo.sentinelInfo.axis:e.requestType==="infiniteScroll"?e.direction:void 0),this.parent.notify(Xo,e),this.emptyGrid=!1;var n,a=this.isNeedForeignAction();if(this.ariaService.setBusy(this.parent.getContent().querySelector("."+we),!0),a){var o=new $e;n=this.getFData(o,e)}if(n?n=n.then(function(h){var p=i.data.generateQuery().requiresCount();if(i.emptyGrid){var d=new $e;return d.resolve({result:[],count:0}),d.promise}return i.data.getData(e,p)}):(t.allowPaging&&!t.getDataModule().dataManager.dataSource.offline&&t.pageSettings&&t.pageSettings.pageSizes&&t.pagerModule&&t.pagerModule.pagerObj&&t.pagerModule.pagerObj.isAllPage&&(t.pagerModule.pagerObj.isAllPage=void 0),n=this.data.getData(e,this.data.generateQuery().requiresCount())),this.parent.getForeignKeyColumns().length&&(!a||this.parent.searchSettings.key.length)){var l=new $e;n=n.then(function(h){return i.parent.notify(Os,{dataManager:n,result:h,promise:l,action:e}),l.promise})}this.parent.groupSettings.disablePageWiseAggregates&&this.parent.groupSettings.columns.length&&(n=n.then(function(h){return i.validateGroupRecords(h)})),n.then(function(h){return i.dataManagerSuccess(h,e)}).catch(function(h){return i.dataManagerFailure(h,e)})},s.prototype.getFData=function(e,i){return this.parent.notify(Os,{isComplex:!0,promise:e,action:i}),e.promise},s.prototype.isNeedForeignAction=function(){var e=this.parent;return!!(e.allowFiltering&&e.filterSettings.columns.length||e.searchSettings.key.length)&&this.foreignKey(this.parent.getForeignKeyColumns())},s.prototype.foreignKey=function(e){var i=this;return e.some(function(t){var r=!1;return r=i.parent.filterSettings.columns.some(function(n){return t.uid===n.uid}),!!(r||i.parent.searchSettings.key.length)})},s.prototype.sendBulkRequest=function(e){var i=this;e.requestType="batchsave";var t=this.parent;if(t.allowPaging&&t.pageSettings.pageSizes&&t.pagerModule.pagerObj.isAllPage&&t.pagerModule.pagerObj.checkAll){var r=e.changes.addedRecords.length;r&&t.setProperties({pageSettings:{pageSize:t.pageSettings.pageSize+r}},!0)}t.allowPaging&&(e.changes.addedRecords.length||e.changes.deletedRecords.length||e.changes.changedRecords.length)&&t.pageSettings&&t.pageSettings.pageSizes&&t.pagerModule&&t.pagerModule.pagerObj&&!t.getDataModule().dataManager.dataSource.offline&&t.pagerModule.pagerObj.isAllPage&&(t.pagerModule.pagerObj.isAllPage=void 0);var n=this.data.saveChanges(e.changes,this.parent.getPrimaryKeyFieldNames()[0],e.original),a=this.data.generateQuery().requiresCount();if(this.data.dataManager.dataSource.offline){this.refreshDataManager({requestType:"batchsave"});return}else n.then(function(o){i.data.getData(e,a).then(function(l){return i.dmSuccess(l,e)}).catch(function(l){return i.dmFailure(l,e)})}).catch(function(o){return i.dmFailure(o,e)})},s.prototype.dmSuccess=function(e,i){this.dataManagerSuccess(e,i)},s.prototype.dmFailure=function(e,i){this.dataManagerFailure(e,i)},s.prototype.renderEmptyRow=function(){this.emptyRow(!0)},s.prototype.emptyRow=function(e){var i=this.parent,t=this.contentRenderer.getTable().querySelector(N);c(t)||B(t),t=this.parent.createElement(N,{attrs:{role:"rowgroup"}});var r=i.allowRowDragAndDrop&&c(i.rowDropSettings.targetID)?1:0;(i.detailTemplate||i.childGrid)&&++r;var n=i.editSettings.showAddNewRow&&i.editSettings.newRowPosition==="Bottom"?"e-emptyrow e-show-added-row":"e-emptyrow",a=this.parent.createElement("tr",{className:n,attrs:{role:"row"}}),o;if(i.emptyRecordTemplate){var l=i.element.id+"emptyRecordTemplate";o=this.parent.createElement("td",{attrs:{colspan:(i.getVisibleColumns().length+r+i.groupSettings.columns.length).toString()}}),i.isVue?o.appendChild(i.getEmptyRecordTemplate()(i.dataSource,i,"emptyRecordTemplate",l,void 0,void 0,void 0,this.parent.root)[1]):o.appendChild(i.getEmptyRecordTemplate()(i.dataSource,i,"emptyRecordTemplate",l,void 0,void 0,void 0,this.parent.root)[0]),i.isReact&&this.parent.renderTemplates()}else o=this.parent.createElement("td",{innerHTML:this.l10n.getConstant("EmptyRecord"),attrs:{colspan:(i.getVisibleColumns().length+r+i.groupSettings.columns.length).toString()}});i.isFrozenGrid()&&(o.classList.add("e-leftfreeze"),o.style.left="0px"),i.frozenRows&&i.element.querySelector(".e-frozenrow-border")&&this.parent.element.querySelector(".e-frozenrow-border").classList.add("e-frozenrow-empty"),a.appendChild(o),t.appendChild(a),this.contentRenderer.renderEmpty(t),e&&(this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.trigger(At,{}),this.parent.notify(yt,{rows:[new di({isDataRow:!0,cells:[new Di({isDataCell:!0,visible:!0})]})]}),i.editSettings.showAddNewRow&&(i.addRecord(),this.parent.notify(ai,{})))},s.prototype.dynamicColumnChange=function(){this.parent.getCurrentViewRecords().length&&this.updateColumnType(this.parent.getCurrentViewRecords()[0])},s.prototype.updateColumnType=function(e){for(var i=this.parent.getColumns(),t,r="customFormat",n="equalTo",a=e&&e.items?e.items[0]:e,o=this.locator.getService("valueFormatter"),l=0,h=i.length;l<h;l++){t=Dt(i[parseInt(l.toString(),10)].field||"",a),c(i[parseInt(l.toString(),10)][""+r])||(i[parseInt(l.toString(),10)].format=i[parseInt(l.toString(),10)][""+r]),!c(i[parseInt(l.toString(),10)].validationRules)&&!c(i[parseInt(l.toString(),10)].validationRules[""+n])&&(i[parseInt(l.toString(),10)].validationRules[""+n][0]=this.parent.element.id+i[parseInt(l.toString(),10)].validationRules[""+n][0]),i[parseInt(l.toString(),10)].isForeignColumn()&&i[parseInt(l.toString(),10)].columnData&&(t=Dt(i[parseInt(l.toString(),10)].foreignKeyValue||"",i[parseInt(l.toString(),10)].columnData[0])),c(t)?i[parseInt(l.toString(),10)].type=i[parseInt(l.toString(),10)].type||null:(this.isColTypeDef=!0,i[parseInt(l.toString(),10)].type||(i[parseInt(l.toString(),10)].type=t.getDay?t.getHours()>0||t.getMinutes()>0||t.getSeconds()>0||t.getMilliseconds()>0?"datetime":"date":typeof t));var p=new Ti;i[parseInt(l.toString(),10)].format&&(i[parseInt(l.toString(),10)].format.skeleton||i[parseInt(l.toString(),10)].format.format&&typeof i[parseInt(l.toString(),10)].format.format=="string")&&(i[parseInt(l.toString(),10)].setFormatter(p.getFormatFunction(O({},i[parseInt(l.toString(),10)].format))),i[parseInt(l.toString(),10)].setParser(p.getParserFunction(i[parseInt(l.toString(),10)].format))),typeof i[parseInt(l.toString(),10)].format=="string"?fn(this.locator,i[parseInt(l.toString(),10)]):!i[parseInt(l.toString(),10)].format&&i[parseInt(l.toString(),10)].type==="number"&&i[parseInt(l.toString(),10)].setParser(o.getParserFunction({format:"n2"})),i[parseInt(l.toString(),10)].type==="dateonly"&&!i[parseInt(l.toString(),10)].format&&(i[parseInt(l.toString(),10)].format="yMd",fn(this.locator,i[parseInt(l.toString(),10)]))}},s.prototype.dataManagerSuccess=function(e,i){var t=this,r=this.parent;this.contentRenderer=this.renderer.getRenderer(We.Content),this.headerRenderer=this.renderer.getRenderer(We.Header),e.actionArgs=i;var n=this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&!r.groupSettings.enableLazyLoading&&(i.requestType==="delete"||i.requestType==="save"&&this.parent.infiniteScrollModule.requestType==="add"&&!(r.sortSettings.columns.length||r.filterSettings.columns.length||this.parent.groupSettings.columns.length||r.searchSettings.key));r.trigger(ho,e,function(a){if(!a.cancel){a.result=c(a.result)?[]:a.result;var o=Object.keys(a.result).length;if(!t.parent.isDestroyed){if(!r.getColumns().length&&!o&&!(r.columns.length&&r.columns[0]instanceof ye)){r.hideSpinner();return}if(t.isInfiniteEnd(i)&&!o){t.parent.notify(_s,{e:i,result:e.result,count:e.count,agg:e.aggregates});return}if(t.parent.isEdit=!1,t.parent.notify(Wo,{}),t.parent.notify(rn,{}),i&&!((i.requestType==="infiniteScroll"||i.requestType==="delete"||i.action==="add")&&r.enableInfiniteScrolling)&&t.parent.notify(Dl,{type:"refreshCommandColumn"}),t.contentRenderer.prevCurrentView=t.parent.currentViewData.slice(),r.currentViewData=a.result,r.notify(dl,{args:i,data:a.result}),a.count&&!r.allowPaging&&(r.enableVirtualization||r.enableInfiniteScrolling)&&(r.totalDataRecordsCount=a.count),!o&&a.count&&r.allowPaging&&i&&i.requestType!=="delete"){t.parent.groupSettings.enableLazyLoading&&(i.requestType==="grouping"||i.requestType==="ungrouping")&&t.parent.notify(So,i),r.prevPageMoving=!0,r.pageSettings.totalRecordsCount=a.count,i.requestType!=="paging"&&(r.pageSettings.currentPage=Math.ceil(a.count/r.pageSettings.pageSize)),r.dataBind();return}if((!r.getColumns().length&&o||!t.isLayoutRendered)&&!it(r)&&(r.removeMaskRow(),t.updatesOnInitialRender(a)),!t.isColTypeDef&&r.getCurrentViewRecords()&&(t.data.dataManager.dataSource.offline&&r.dataSource&&r.dataSource.length?t.updateColumnType(r.dataSource[0]):t.updateColumnType(r.getCurrentViewRecords()[0])),!t.parent.isInitialLoad&&t.parent.groupSettings.disablePageWiseAggregates&&!t.parent.groupSettings.columns.length&&(a.result=t.parent.dataSource instanceof Array?t.parent.dataSource:t.parent.currentViewData),(t.parent.isReact||t.parent.isVue)&&!c(i)&&i.requestType!=="infiniteScroll"&&!i.isFrozen&&xn(t.parent,["footerTemplate"]),t.parent.isAngular&&t.parent.allowGrouping&&t.parent.groupSettings.captionTemplate&&!(!c(i)&&i.requestType==="infiniteScroll")&&t.parent.destroyTemplate(["groupSettings_captionTemplate"]),t.parent.notify(xi,O({count:a.count,result:a.result,aggregates:a.aggregates},i)),(r.groupSettings.columns.length||i&&i.requestType==="ungrouping")&&i&&i.requestType!=="filtering"&&t.headerRenderer.refreshUI(),o){if(it(r)){var l="content";i.scrollTop={top:t.contentRenderer[""+l].scrollTop}}n?t.parent.notify(_s,{e:i,result:e.result,count:e.count,agg:e.aggregates}):t.parent.enableImmutableMode?t.contentRenderer.immutableModeRendering(i):t.contentRenderer.refreshContentRows(i)}else{if(i&&i.isCaptionCollapse)return;if(!r.getColumns().length){r.element.innerHTML="",alert(t.l10n.getConstant("EmptyDataSourceError"));return}if(t.contentRenderer.setRowElements([]),t.contentRenderer.setRowObjects([]),t.ariaService.setBusy(t.parent.getContent().querySelector("."+we),!1),r.removeMaskRow(),t.renderEmptyRow(),r.enableColumnVirtualization&&!o&&t.parent.notify(ce,{rows:r.getRowsObject(),args:{}}),i){var h=(i.requestType||"").toLowerCase()+"-complete";t.parent.notify(h,i),i.requestType==="batchsave"&&(i.cancel=!1,i.rows=[],i.isFrozen=!i.isFrozen,t.parent.trigger(Le,i))}t.parent.autoFit&&t.parent.preventAdjustColumns(),t.parent.hideSpinner()}t.parent.notify(Fo,{}),t.setRowCount(t.parent.getCurrentViewRecords().length),"query"in e&&(t.parent.getDataModule().isQueryInvokedFromData=!1)}}})},s.prototype.dataManagerFailure=function(e,i){c(this.parent.contentModule)||(this.ariaService.setOptions(this.parent.getContent().querySelector("."+we),{busy:!1,invalid:!0}),this.setRowCount(1)),this.parent.trigger(Za,{error:e}),this.parent.hideSpinner(),this.parent.removeMaskRow(),!(i.requestType==="save"||i.requestType==="delete"||i.name==="bulk-save")&&(this.parent.currentViewData=[],this.renderEmptyRow(),this.parent.isInitialLoad||this.parent.focusModule.setFirstFocusableTabIndex(),this.parent.log("actionfailure",{error:e}))},s.prototype.setRowCount=function(e){this.ariaService.setOptions(this.parent.element,{rowcount:e?e.toString():"1"})},s.prototype.isInfiniteEnd=function(e){return this.parent.enableInfiniteScrolling&&!this.parent.infiniteScrollSettings.enableCache&&e.requestType==="delete"},s.prototype.updatesOnInitialRender=function(e){this.isLayoutRendered=!0;var i=!1;this.parent.columns.length<1&&(this.buildColumns(e.result[0]),i=!0),dr(this.parent.columns,null,this.parent),i&&this.parent.notify(dn,{}),this.headerRenderer.renderTable(),this.contentRenderer.renderTable(),this.parent.isAutoGen=!0,this.parent.notify(Ri,{})},s.prototype.iterateComplexColumns=function(e,i,t){for(var r=Object.keys(e),n=0;n<r.length;n++){var a=typeof e[r[parseInt(n.toString(),10)]]=="object"&&e[r[parseInt(n.toString(),10)]]&&!(e[r[parseInt(n.toString(),10)]]instanceof Date)?Object.keys(e[r[parseInt(n.toString(),10)]]):[];a.length?this.iterateComplexColumns(e[r[parseInt(n.toString(),10)]],i+(r[parseInt(n.toString(),10)]+"."),t):(t[this.counter]=i+r[parseInt(n.toString(),10)],this.counter++)}},s.prototype.buildColumns=function(e){var i=[],t={};this.iterateComplexColumns(e,"",t);for(var r=Object.keys(t).filter(function(o){return t[""+o]!=="BlazId"}).map(function(o){return t[""+o]}),n=0,a=r.length;n<a;n++)i[parseInt(n.toString(),10)]={field:r[parseInt(n.toString(),10)]},this.parent.enableColumnVirtualization&&(i[parseInt(n.toString(),10)].width=c(i[parseInt(n.toString(),10)].width)?200:i[parseInt(n.toString(),10)].width);this.parent.setProperties({columns:i},!0)},s.prototype.instantiateRenderer=function(){this.renderer.addRenderer(We.Header,new Ol(this.parent,this.locator)),this.renderer.addRenderer(We.Content,new Pl(this.parent,this.locator));var e=this.locator.getService("cellRendererFactory");e.addCellRenderer(M.Header,new va(this.parent,this.locator)),e.addCellRenderer(M.Data,new Ve(this.parent,this.locator)),e.addCellRenderer(M.StackedHeader,new Xs(this.parent,this.locator)),e.addCellRenderer(M.Indent,new cn(this.parent,this.locator)),e.addCellRenderer(M.GroupCaption,new Vl(this.parent,this.locator)),e.addCellRenderer(M.GroupCaptionEmpty,new Gl(this.parent,this.locator)),e.addCellRenderer(M.Expand,new _l(this.parent,this.locator)),e.addCellRenderer(M.HeaderIndent,new Wl(this.parent,this.locator)),e.addCellRenderer(M.StackedHeader,new Xs(this.parent,this.locator)),e.addCellRenderer(M.DetailHeader,new Ql(this.parent,this.locator)),e.addCellRenderer(M.RowDragHIcon,new eh(this.parent,this.locator)),e.addCellRenderer(M.DetailExpand,new Yl(this.parent,this.locator)),e.addCellRenderer(M.DetailFooterIntent,new cn(this.parent,this.locator)),e.addCellRenderer(M.RowDragIcon,new Zl(this.parent,this.locator))},s.prototype.addEventListener=function(){var e=this;this.parent.isDestroyed||(this.parent.on(ta,this.instantiateRenderer,this),this.parent.on("refreshdataSource",this.dataManagerSuccess,this),this.parent.on(ar,this.refresh,this),this.parent.on(Ro,this.refreshComplete,this),this.parent.on(To,this.sendBulkRequest,this),this.parent.on(sa,function(){e.emptyGrid=!0},this),this.parent.on(Ri,this.dynamicColumnChange,this))},s.prototype.validateGroupRecords=function(e){var i=this,t=e.result.length-1;if(t<0)return Promise.resolve(e);var r=e.result[0],n=e.result[parseInt(t.toString(),10)],a=[],o=function(y){for(var S=[r,n],I=0;I<S.length;I++)a.push(new re("field","==",S[parseInt(I.toString(),10)].field).and(i.getPredicate("key","equal",S[parseInt(I.toString(),10)].key)));y.where(re.or(a))},l=new fe;o(l);var h=new _(e.result),p=h.executeLocal(l),d=this.data.generateQuery(!0),u=[];if(this.data.isRemote()){for(var f=[r,n],m=0;m<f.length;m++)u.push(this.getPredicate(f[parseInt(m.toString(),10)].field,"equal",f[parseInt(m.toString(),10)].key));d.where(re.or(u))}else o(d);var g=new $e;return this.data.getData({},d).then(function(y){i.updateGroupInfo(p,y.result),g.resolve(e)}).catch(function(y){return g.reject(y)}),g.promise},s.prototype.getPredicate=function(e,i,t){return t instanceof Date?Gt({field:e,operator:i,value:t}):new re(e,i,t)},s.prototype.updateGroupInfo=function(e,i){for(var t=new _(i),r=e,n=0;n<r.length;n++){var a=t.executeLocal(new fe().where(new re("field","==",r[parseInt(n.toString(),10)].field).and(this.getPredicate("key","equal",r[parseInt(n.toString(),10)].key))))[0];if(!c(a)){r[parseInt(n.toString(),10)].count=a.count;var o=r[parseInt(n.toString(),10)].items,l=a.items;o.GroupGuid&&(r[parseInt(n.toString(),10)].items=this.updateGroupInfo(r[parseInt(n.toString(),10)].items,a.items));for(var h=this.parent.aggregates,p=0;p<h.length;p++)for(var d=h[parseInt(p.toString(),10)],u=0;u<d.columns.length;u++)for(var f=d.columns[parseInt(u.toString(),10)],m=f.type instanceof Array?f.type:[f.type],g=0;g<m.length;g++){var y=f.field+" - "+m[parseInt(g.toString(),10)].toLowerCase(),S=o.level?l.records:a.items,I=this.parent;if(m[parseInt(g.toString(),10)]==="Custom"){var C=o.level?l:a,R=f.customAggregate;typeof R=="string"&&(R=oe(R,window)),r[parseInt(n.toString(),10)].aggregates[""+y]=R?R.call(I,C,d.columns[parseInt(u.toString(),10)]):""}else r[parseInt(n.toString(),10)].aggregates[""+y]=me.aggregates[m[parseInt(g.toString(),10)].toLowerCase()](S,d.columns[parseInt(u.toString(),10)].field)}}}return e},s}(),ih=function(){function s(){this.cellRenderMap={}}return s.prototype.addCellRenderer=function(e,i){e=typeof e=="string"?e:Ct(M,e),c(this.cellRenderMap[""+e])&&(this.cellRenderMap[""+e]=i)},s.prototype.getCellRenderer=function(e){if(e=typeof e=="string"?e:Ct(M,e),c(this.cellRenderMap[""+e]))throw"The cellRenderer "+e+" is not found";return this.cellRenderMap[""+e]},s}(),rh=function(){function s(e,i){this.sortedCols=[],this.sortPredicate=[],this.isCustomDialog=!1,this.parent=e,this.serviceLocator=i,this.addEventListener()}return s.prototype.addEventListener=function(){this.evtHandlers=[{event:pa,handler:this.closeCustomDialog},{event:hn,handler:this.refreshCustomFilterOkBtn},{event:ul,handler:this.renderResponsiveContextMenu},{event:fl,handler:this.renderCustomFilterDiv},{event:gl,handler:this.customExFilterClose},{event:cl,handler:this.refreshCustomFilterClearBtn}],Et(this.parent,this.evtHandlers,!0,this),this.onActionCompleteFn=this.editComplate.bind(this),this.parent.addEventListener(Le,this.onActionCompleteFn)},s.prototype.customExFilterClose=function(){this.isCustomDlgRender=!1},s.prototype.renderCustomFilterDiv=function(){var e=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),i=e.querySelector(".e-dlg-custom-header"),t=e.querySelector(".e-dlg-closeicon-btn");this.isCustomDlgRender=!0,this.parent.filterModule.filterModule.closeDialog(),this.saveBtn.element.style.display="",this.refreshCustomFilterOkBtn({disabled:!1}),this.backBtn.element.style.display="none",t.style.display="",i.innerHTML=this.parent.localeObj.getConstant("CustomFilter");var r=this.customResponsiveDlg.element.querySelector(".e-dlg-content");this.customExcelFilterParent=this.parent.createElement("div",{className:"e-xl-customfilterdiv e-default-filter"}),r.appendChild(this.customExcelFilterParent)},s.prototype.renderResponsiveContextMenu=function(e){if(this.action===A.isFilter){var i=this.customResponsiveDlg.element.querySelector(".e-dlg-content"),t=this.customResponsiveDlg.element.querySelector(".e-dlg-header-content"),r=t.querySelector(".e-dlg-closeicon-btn"),n=t.querySelector(".e-dlg-custom-header");if(e.isOpen){i.firstChild.style.display="none",i.appendChild(e.target),r.style.display="none",this.saveBtn.element.style.display="none",this.filterClearBtn.element.style.display="none",n.innerHTML=e.header;var a=this.parent.createElement("button"),o=this.parent.createElement("span",{className:"e-btn-icon e-resfilterback e-icons"});a.appendChild(o),this.backBtn=new ri({cssClass:this.parent.cssClass?"e-res-back-btn "+this.parent.cssClass:"e-res-back-btn"}),this.backBtn.appendTo(a),n.parentElement.insertBefore(a,n)}else this.backBtn&&!this.isCustomDlgRender&&(i.firstChild.style.display="",B(this.backBtn.element),r.style.display="",this.saveBtn.element.style.display="",this.isFiltered&&(this.filterClearBtn.element.style.display=""),n.innerHTML=this.getHeaderTitle({action:A.isFilter},e.col))}},s.prototype.refreshCustomFilterClearBtn=function(e){this.filterClearBtn&&(this.isFiltered=e.isFiltered,this.filterClearBtn.element.style.display=e.isFiltered?"":"none")},s.prototype.refreshCustomFilterOkBtn=function(e){this.saveBtn&&(this.saveBtn.disabled=e.disabled),this.parent.columnChooserModule&&this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn&&(this.parent.columnChooserModule.responsiveDialogRenderer.saveBtn.disabled=e.disabled)},s.prototype.columnMenuResponsiveContent=function(e,i,t){var r=this.parent.createElement("div",{className:"e-responsivecoldiv e-responsive"+e.toLowerCase()+"div"+(t?" e-disabled":"")}),n=this.parent.createElement("span",{className:"e-icons e-res"+e.toLowerCase()+"-icon e-btn-icon"}),a=this.parent.createElement("span",{innerHTML:i,className:"e-rescolumn-menu e-res-header-text"});r.appendChild(n),r.appendChild(a),this.customColumnDiv.appendChild(r)},s.prototype.renderResponsiveContent=function(e,i){var t=this,r=this.parent,n=this.action===A.isColumnChooser;if(e||n)return this.filterParent=this.parent.createElement("div",{className:(n?"e-maincolumnchooserdiv ":"")+"e-mainfilterdiv e-default-filter",id:(n?"columchooser":e.uid)+"-main-filter"}),this.filterParent;if(this.customColumnDiv=r.createElement("div",{className:"columndiv columnmenudiv",styles:"width: 100%"}),this.parent.showColumnMenu&&this.parent.rowRenderingMode==="Horizontal"&&this.action===A.isColMenu){if(this.columnMenuResponsiveContent("AutoFitAll",r.localeObj.getConstant("AutoFitAll")),this.columnMenuResponsiveContent("AutoFit",r.localeObj.getConstant("AutoFit")),i.allowGrouping&&r.allowGrouping&&(this.columnMenuResponsiveContent("Group",r.localeObj.getConstant("Group"),r.groupSettings.columns.indexOf(i.field)>=0),this.columnMenuResponsiveContent("UnGroup",r.localeObj.getConstant("Ungroup"),r.groupSettings.columns.indexOf(i.field)<0)),i.allowSorting&&r.allowSorting){for(var a="None",o=this.parent.sortSettings.columns,l=0;l<o.length;l++)if(o[parseInt(l.toString(),10)].field===i.field){a=o[parseInt(l.toString(),10)].direction;break}this.columnMenuResponsiveContent("ascending",r.localeObj.getConstant("SortAscending"),a==="Ascending"),this.columnMenuResponsiveContent("descending",r.localeObj.getConstant("SortDescending"),a==="Descending")}r.showColumnChooser&&this.columnMenuResponsiveContent("Column",r.localeObj.getConstant("Columnchooser")),i.allowFiltering&&r.allowFiltering&&this.columnMenuResponsiveContent("Filter",r.localeObj.getConstant("FilterMenu"))}else{var h=r.getColumns(),p=r.createElement("div",{className:"e-ressortbutton-parent"}),d=[],u=this.action===A.isSort,f=this.action===A.isFilter;if(f)for(var l=0;l<r.filterSettings.columns.length;l++)d.push(r.filterSettings.columns[parseInt(l.toString(),10)].field);for(var l=0;l<h.length;l++)if(!(!h[parseInt(l.toString(),10)].visible||!h[parseInt(l.toString(),10)].allowSorting&&u||!h[parseInt(l.toString(),10)].allowFiltering&&f)){var m=r.createElement("div",{className:"e-responsivecoldiv"});m.setAttribute("data-e-mappingname",h[parseInt(l.toString(),10)].field),m.setAttribute("data-e-mappinguid",h[parseInt(l.toString(),10)].uid);var g=r.createElement("span",{innerHTML:h[parseInt(l.toString(),10)].headerText,className:"e-res-header-text"});if(m.appendChild(g),this.customColumnDiv.appendChild(m),u){var y=this.getSortedFieldsAndDirections("field"),S=y.indexOf(h[parseInt(l.toString(),10)].field),I=r.createElement("button",{id:r.element.id+h[parseInt(l.toString(),10)].field+"sortbutton"}),C=p.cloneNode();C.appendChild(I),m.appendChild(C);var R=new ri({cssClass:this.parent.cssClass?"e-ressortbutton "+this.parent.cssClass:"e-ressortbutton"});R.appendTo(I);var T=void 0;c(this.parent.sortSettings.columns[parseInt(S.toString(),10)])||(T=this.parent.sortSettings.columns[parseInt(S.toString(),10)].direction==="Ascending"?this.parent.localeObj.getConstant("AscendingText"):this.parent.localeObj.getConstant("DescendingText")),I.innerHTML=S>-1?T:this.parent.localeObj.getConstant("NoneText"),I.onclick=function(q){t.sortButtonClickHandler(q.target)}}if(f&&d.indexOf(h[parseInt(l.toString(),10)].field)>-1){var F=r.createElement("div",{className:"e-icons e-res-icon e-filtersetdiv"}),X=r.createElement("span",{className:"e-icons e-res-icon e-filterset"});X.setAttribute("colType",h[parseInt(l.toString(),10)].type),F.appendChild(X),m.appendChild(F)}}}return x.add(this.customColumnDiv,Y.isDevice?"touchend":"click",this.customFilterColumnClickHandler,this),this.customColumnDiv},s.prototype.getSortedFieldsAndDirections=function(e){for(var i=[],t=0;t<this.parent.sortSettings.columns.length;t++)i.push(this.parent.sortSettings.columns[parseInt(t.toString(),10)][""+e]);return i},s.prototype.sortButtonClickHandler=function(e){if(e){var i=b(e,"e-responsivecoldiv"),t=i.getAttribute("data-e-mappingname");this.parent.allowMultiSorting||(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1,this.resetSortButtons(e));var r=e.textContent,n=r===this.parent.localeObj.getConstant("NoneText")?this.parent.localeObj.getConstant("AscendingText"):r===this.parent.localeObj.getConstant("AscendingText")?this.parent.localeObj.getConstant("DescendingText"):this.parent.localeObj.getConstant("NoneText"),a=n===this.parent.localeObj.getConstant("AscendingText")?"Ascending":n===this.parent.localeObj.getConstant("DescendingText")?"Descending":"None";e.innerHTML=n,this.setSortedCols(t,a)}},s.prototype.resetSortButtons=function(e){for(var i=[].slice.call(this.customColumnDiv.getElementsByClassName("e-ressortbutton")),t=0;t<i.length;t++)i[parseInt(t.toString(),10)]!==e&&(i[parseInt(t.toString(),10)].innerHTML="None")},s.prototype.setSortedCols=function(e,i){var t=this.getCurrentSortedFields(),r=t.indexOf(e);this.parent.allowMultiSorting&&r>-1&&(this.sortedCols.splice(r,1),this.sortPredicate.splice(r,1)),this.isSortApplied=!0,i!=="None"&&(this.sortedCols.push(e),this.sortPredicate.push({field:e,direction:i}))},s.prototype.getCurrentSortedFields=function(){for(var e=[],i=0;i<this.sortedCols.length;i++)e.push(this.sortedCols[parseInt(i.toString(),10)]);return e},s.prototype.customFilterColumnClickHandler=function(e){var i=this.parent,t=e.target;if(b(t,"columnmenudiv")&&this.action===A.isColMenu&&!b(t,"e-disabled")){var r=this.menuCol?this.menuCol:this.filteredCol;b(t,"e-responsiveautofitalldiv")?(i.autoFitColumns([]),this.closeCustomFilter()):b(t,"e-responsiveautofitdiv")?(i.autoFitColumns(r.field),this.closeCustomFilter()):b(t,"e-responsivegroupdiv")?(i.groupColumn(r.field),this.closeCustomFilter()):b(t,"e-responsiveungroupdiv")?(i.ungroupColumn(r.field),this.closeCustomFilter()):b(t,"e-responsiveascendingdiv")?(i.sortColumn(r.field,"Ascending"),this.closeCustomFilter()):b(t,"e-responsivedescendingdiv")?(i.sortColumn(r.field,"Descending"),this.closeCustomFilter()):b(t,"e-responsivecolumndiv")?(i.notify(Qi,{action:5}),i.showResponsiveCustomColumnChooser()):b(t,"e-responsivefilterdiv")&&(i.notify(Qi,{action:3}),this.isRowResponsive=!0,this.isCustomDialog=!1,i.filterModule&&i.filterModule.responsiveDialogRenderer.showResponsiveDialog(r)),e.preventDefault()}if(this.action===A.isFilter&&i.filterSettings.type!=="FilterBar"){if(t.classList.contains("e-responsivecoldiv")||t.parentElement.classList.contains("e-responsivecoldiv")){var n=t.getAttribute("data-e-mappingname");if(n||(n=t.parentElement.getAttribute("data-e-mappingname")),n){var a=i.getColumnByField(n);this.isRowResponsive=!0,this.showResponsiveDialog(a)}}else if(t.classList.contains("e-filterset")||t.parentElement.classList.contains("e-filtersetdiv")){var o=b(t,"e-responsivecoldiv");if(o){var n=o.getAttribute("data-e-mappingname"),a=i.getColumnByField(n);(a.filter.type==="Menu"||!a.filter.type&&i.filterSettings.type==="Menu")&&(this.isDialogClose=!0),this.parent.filterModule.filterModule.clearCustomFilter(a),this.removeCustomDlgFilterEle(t)}}}},s.prototype.showResponsiveDialog=function(e,i){if(this.isCustomDialog&&this.action===A.isFilter&&!this.isRowResponsive||i&&this.action===A.isColMenu)this.menuCol=i,this.renderCustomFilterDialog(null,i);else{if(this.filteredCol=e,this.renderResponsiveDialog(e),this.parent.enableAdaptiveUI&&e&&(this.parent.filterModule.setFilterModel(e),this.parent.filterModule.filterModule.openDialog(this.parent.filterModule.createOptions(e,void 0))),this.action===A.isColumnChooser&&this.parent.notify(jr,{action:"open"}),this.action===A.isSort){var t={cancel:!1,dialogObj:this.customResponsiveDlg,requestType:"beforeOpenAptiveSortDialog"};if(this.parent.trigger(Ms,t),t.cancel)return}this.customResponsiveDlg.show(!0),this.customResponsiveDlg.element.style.maxHeight="100%",this.setTopToChildDialog(this.customResponsiveDlg.element)}},s.prototype.setTopToChildDialog=function(e){var i=e.querySelector(".e-dialog");if(i){var t=e.querySelector(".e-dlg-header-content").getBoundingClientRect().height;i.style.top=t+"px"}},s.prototype.renderCustomFilterDialog=function(e,i){var t=this.parent,r=this.action===A.isColMenu;if(!(this.action===A.isFilter&&t.filterSettings.type==="FilterBar")){var n=r?"e-customcolumnmenudiv ":"",a=this.parent.createElement("div",{id:t.element.id+(r?"customcolumnmenu":"customfilter"),className:this.parent.cssClass?n+"e-customfilterdiv e-responsive-dialog "+this.parent.cssClass:n+"e-customfilterdiv e-responsive-dialog"});this.parent.element.appendChild(a),this.customFilterDlg=this.getDialogOptions(e,!0,null,i);var o={cancel:!1,dialogObj:this.customFilterDlg,requestType:"beforeOpenAptiveFilterDialog"};this.parent.trigger(Ms,o),!o.cancel&&(this.customFilterDlg.appendTo(a),this.customFilterDlg.show(!0),this.customFilterDlg.element.style.maxHeight="100%")}},s.prototype.getDialogOptions=function(e,i,t,r){var n=new Pr({isModal:!0,showCloseIcon:!0,closeOnEscape:!1,locale:this.parent.locale,target:this.parent.adaptiveDlgTarget?this.parent.adaptiveDlgTarget:document.body,visible:!1,enableRtl:this.parent.enableRtl,content:this.renderResponsiveContent(e,r),open:this.dialogOpen.bind(this),created:this.dialogCreated.bind(this),close:this.beforeDialogClose.bind(this),width:"100%",height:"100%",animationSettings:{effect:"None"},cssClass:this.parent.cssClass?this.parent.cssClass:""}),a="isStringTemplate";if(n[""+a]=!0,i){n.header=this.renderResponsiveHeader(e,void 0,!0);var o=this.action===A.isColMenu?"e-customcolumnmenu ":"";n.cssClass=o+"e-customfilter"}else n.header=this.renderResponsiveHeader(e),n.cssClass=this.parent.rowRenderingMode==="Vertical"&&this.action===A.isFilter?"e-res"+t+" e-row-responsive-filter":"e-res"+t;return n},s.prototype.renderResponsiveDialog=function(e){var i=this.parent;if(!(this.action===A.isFilter&&i.filterSettings.type==="FilterBar")){var t=this.action===A.isFilter?"filter":"sort";t=this.action===A.isColumnChooser?"columnchooser":t;var r=this.parent.createElement("div",{id:i.element.id+"responsive"+t,className:this.parent.cssClass?"e-res"+t+"div e-responsive-dialog "+this.parent.cssClass:"e-res"+t+"div e-responsive-dialog"});this.parent.element.appendChild(r),this.customResponsiveDlg=this.getDialogOptions(e,!1,t),this.customResponsiveDlg.appendTo(r)}},s.prototype.dialogCreated=function(){ap(this.parent)},s.prototype.dialogOpen=function(){if(this.action===A.isSort&&this.parent.allowMultiSorting)for(var e=0;e<this.parent.sortSettings.columns.length;e++){this.sortedCols.push(this.parent.sortSettings.columns[parseInt(e.toString(),10)].field);var i=this.parent.sortSettings.columns[parseInt(e.toString(),10)].field,t=this.parent.sortSettings.columns[parseInt(e.toString(),10)].direction;this.sortPredicate.push({field:i,direction:t})}},s.prototype.beforeDialogClose=function(e){if(this.isDialogClose=e.element&&!e.element.querySelector(".e-xl-customfilterdiv")&&e.element.classList.contains("e-resfilterdiv"),this.action===A.isFilter){if(e.element.classList.contains("e-resfilterdiv")?this.parent.filterModule.filterModule.closeResponsiveDialog(this.isCustomDlgRender):e.element.classList.contains("e-customfilterdiv")&&this.closeCustomFilter(),this.parent.rowRenderingMode==="Horizontal"&&this.parent.showColumnMenu){this.parent.notify(Qi,{action:4});var i=document.querySelector(".e-resfilter");i&&B(i)}}else if(this.action===A.isSort)this.closeCustomDialog();else if(this.action===A.isColMenu){this.closeCustomFilter();var i=document.querySelector(".e-rescolummenu");i&&B(i)}else if(this.action===A.isColumnChooser){this.parent.notify(jr,{action:"clear"});var i=document.querySelector(".e-rescolumnchooser");i&&B(i),this.parent.rowRenderingMode==="Horizontal"&&this.parent.showColumnMenu&&this.parent.notify(Qi,{action:4}),this.isCustomDialog=!1,this.isDialogClose=!1}this.parent.off(er,this.keyHandler)},s.prototype.sortColumn=function(){if(!this.isSortApplied){this.closeCustomDialog();return}this.sortPredicate.length&&this.parent.setProperties({sortSettings:{columns:[]}},!0);for(var e=0;e<this.sortPredicate.length;e++)this.parent.sortColumn(this.sortPredicate[parseInt(e.toString(),10)].field,this.sortPredicate[parseInt(e.toString(),10)].direction,this.parent.allowMultiSorting);this.sortPredicate.length||this.parent.clearSorting(),this.closeCustomDialog()},s.prototype.getHeaderTitle=function(e,i){var t=this.parent,r;return this.action===A.isEdit?r=t.localeObj.getConstant("EditFormTitle")+e.primaryKeyValue[0]:this.action===A.isAdd?r=t.localeObj.getConstant("AddFormTitle"):this.action===A.isFilter?r=i?i.headerText||i.field:t.localeObj.getConstant("FilterButton"):this.action===A.isSort?r=t.localeObj.getConstant("Sort"):this.action===A.isColMenu?r=t.localeObj.getConstant("ColumnMenu"):this.action===A.isColumnChooser&&(r=t.localeObj.getConstant("ChooseColumns")),r},s.prototype.getDialogName=function(e){var i;return e===A.isAdd||e===A.isEdit?i="dialogEdit_wrapper_title":e===A.isFilter?i="responsive_filter_dialog_wrapper":e===A.isColumnChooser&&(i="responsive_column_chooser_dialog_wrapper"),i},s.prototype.getButtonText=function(e){var i;return e===A.isAdd||e===A.isEdit?i="Save":(e===A.isFilter||this.action===A.isSort||e===A.isColumnChooser||this.action===A.isColumnChooser)&&(i="OKButton"),i},s.prototype.renderResponsiveHeader=function(e,i,t){var r=this,n=this.parent;n.on(er,this.keyHandler,this);var a=n.element.id+this.getDialogName(this.action),o=n.createElement("div",{className:"e-res-custom-element"}),l=n.createElement("div",{className:"e-dlg-custom-header",id:a});l.innerHTML=this.getHeaderTitle(i,e),o.appendChild(l);var h=n.createElement("button");t||(this.saveBtn=new ri({cssClass:this.parent.cssClass?"e-primary e-flat e-res-apply-btn "+this.parent.cssClass:"e-primary e-flat e-res-apply-btn"}),h.innerHTML=n.localeObj.getConstant(this.getButtonText(this.action)),this.saveBtn.appendTo(h),h.onclick=function(g){r.dialogHdrBtnClickHandler()});var p=this.action===A.isSort,d=this.action===A.isFilter;if(d||p){var u=p?"sort":"filter",f=n.createElement("button");if(this.filterClearBtn=new ri({cssClass:this.parent.cssClass?"e-primary e-flat e-res-"+u+"-clear-btn "+this.parent.cssClass:"e-primary e-flat e-res-"+u+"-clear-btn"}),d){var m=n.createElement("span",{className:"e-btn-icon e-icon-filter-clear e-icons"});f.appendChild(m)}else f.innerHTML=n.localeObj.getConstant("Clear");o.appendChild(f),this.filterClearBtn.appendTo(f),f.onclick=function(g){b(g.target,"e-customfilter")?(r.parent.filterModule.clearFiltering(),r.removeCustomDlgFilterEle()):d?r.filterClear():(r.resetSortButtons(),r.sortedCols=[],r.sortPredicate=[],r.isSortApplied=!0)},o.appendChild(f)}return t||o.appendChild(h),o},s.prototype.filterClear=function(){this.parent.filterModule.filterModule.clearCustomFilter(this.filteredCol),this.parent.filterModule.filterModule.closeResponsiveDialog()},s.prototype.removeCustomFilterElement=function(){var e=document.getElementById(this.parent.element.id+"customcolumnmenu");if(e){B(e);var i=document.querySelector(".e-customfilter");i&&B(i)}var t=document.querySelector(".e-rescolumnchooser");t&&B(t)},s.prototype.dialogHdrBtnClickHandler=function(){this.action===A.isEdit||this.action===A.isAdd?this.parent.endEdit():this.action===A.isFilter?(this.parent.filterModule.filterModule.applyCustomFilter({col:this.filteredCol,isCustomFilter:this.isCustomDlgRender}),this.removeCustomFilterElement()):this.action===A.isSort?(this.sortColumn(),this.removeCustomFilterElement()):this.action===A.isColumnChooser&&(this.parent.notify(jr,{action:"confirm"}),this.removeCustomFilterElement(),this.isCustomDialog=!1,this.isDialogClose=!1)},s.prototype.closeCustomDialog=function(){if(this.isCustomDlgRender){var e=this.customResponsiveDlg.element.querySelector(".e-mainfilterdiv");B(e);return}this.isRowResponsive=!1,this.isCustomDlgRender=!1,this.destroyCustomFilterDialog()},s.prototype.destroyCustomFilterDialog=function(){if(this.customResponsiveDlg){var e=document.getElementById(this.customResponsiveDlg.element.id);this.customResponsiveDlg&&!this.customResponsiveDlg.isDestroyed&&e&&(this.customResponsiveDlg.destroy(),B(e)),this.closeCustomFilter(),this.action===A.isSort&&(this.sortPredicate=[],this.sortedCols=[],this.isSortApplied=!1)}},s.prototype.closeCustomFilter=function(){if(!this.isDialogClose&&this.customFilterDlg){var e=document.getElementById(this.customFilterDlg.element.id);this.customFilterDlg&&!this.customFilterDlg.isDestroyed&&e&&(this.customFilterDlg.destroy(),B(e))}this.isCustomDialog=!1,this.isDialogClose=!1},s.prototype.removeCustomDlgFilterEle=function(e){if(e)e.parentElement.classList.contains("e-filtersetdiv")?B(e.parentElement):B(e);else for(var i=this.customColumnDiv.children,t=0;t<i.length;t++)e=i[parseInt(t.toString(),10)].querySelector(".e-filtersetdiv"),e&&(B(e),t--)},s.prototype.keyHandler=function(e){e.keyCode===13&&(this.action===A.isFilter&&e.target.classList.contains("e-searchinput")||this.action===A.isEdit||this.action===A.isAdd)&&this.dialogHdrBtnClickHandler()},s.prototype.editComplate=function(e){(e.requestType==="save"||e.requestType==="cancel")&&this.parent.off(er,this.keyHandler)},s.prototype.removeEventListener=function(){this.customColumnDiv&&x.remove(this.customColumnDiv,Y.isDevice?"touchend":"click",this.customFilterColumnClickHandler),Et(this.parent,this.evtHandlers,!0,this),this.parent.removeEventListener(Le,this.onActionCompleteFn)},s}(),nh=function(){function s(){this.services={}}return s.prototype.register=function(e,i){c(this.services[""+e])&&(this.services[""+e]=i)},s.prototype.getService=function(e){if(c(this.services[""+e]))throw"The service "+e+" is not registered";return this.services[""+e]},s.prototype.registerAdaptiveService=function(e,i,t){i?(e.responsiveDialogRenderer=new rh(e.parent,e.serviceLocator),e.responsiveDialogRenderer.action=t):e.responsiveDialogRenderer&&(e.responsiveDialogRenderer.removeEventListener(),e.responsiveDialogRenderer=void 0)},s}(),sh=function(){function s(){this.rendererMap={}}return s.prototype.addRenderer=function(e,i){var t=Ct(We,e);c(this.rendererMap[""+t])&&(this.rendererMap[""+t]=i)},s.prototype.getRenderer=function(e){var i=Ct(We,e);if(c(this.rendererMap[""+i]))throw"The renderer "+i+" is not found";return this.rendererMap[""+i]},s}(),Sa=function(){function s(e){this.parent=e}return s.prototype.setWidthToColumns=function(){var e=0,i=this.parent.getColumnIndexesInView(),t=!0,r=0;if(this.parent.allowGrouping)for(var n=this.parent.groupSettings.columns.length;e<n;e++){if(this.parent.enableColumnVirtualization&&i.indexOf(e)===-1){t=!1;continue}this.setColumnWidth(new ye({width:"30px"}),e)}(this.parent.detailTemplate||this.parent.childGrid)&&(this.setColumnWidth(new ye({width:"30px"}),e),e++),this.parent.isRowDragable()&&this.parent.getFrozenMode()!=="Right"&&(this.setColumnWidth(new ye({width:"30px"}),e),e++);for(var a=this.parent.getColumns(),o=0;o<a.length;o++)this.setColumnWidth(a[parseInt(o.toString(),10)],t&&this.parent.enableColumnVirtualization?void 0:o+e);this.parent.isRowDragable()&&this.parent.getFrozenMode()==="Right"&&this.setColumnWidth(new ye({width:"30px"}),this.parent.groupSettings.columns.length+a.length),r=this.getTableWidth(this.parent.getColumns()),this.parent.width!=="auto"&&this.parent.width.toString().indexOf("%")===-1&&this.setMinwidthBycalculation(r)},s.prototype.setMinwidthBycalculation=function(e){var i=0,t=this.parent.getColumns().filter(function(p){return c(p.width)||p.width==="auto"});if(t.length){!c(this.parent.width)&&this.parent.width!=="auto"&&typeof this.parent.width=="string"&&this.parent.width.indexOf("%")===-1?i=(typeof this.parent.width=="string"?parseInt(this.parent.width,10):this.parent.width)-e:i=this.parent.element.getBoundingClientRect().width-e;for(var r=0,n=0,a=t;n<a.length;n++){var o=a[n];r+=c(o.minWidth)?0:typeof o.minWidth=="string"?parseInt(o.minWidth,10):o.minWidth}for(var l=0;l<t.length;l++){e===0&&this.parent.allowResizing&&this.isWidthUndefined()&&l!==t.length-1&&this.setUndefinedColumnWidth(t);var h=this.parent.getColumnIndexByField(t[parseInt(l.toString(),10)].field)+this.parent.getIndentCount();e!==0&&i<r?this.setWidth(t[parseInt(l.toString(),10)].minWidth,h):e!==0&&i>r&&this.setWidth("",h,!0)}}},s.prototype.setUndefinedColumnWidth=function(e){for(var i=0;i<e.length;i++)i!==e.length-1&&(e[parseInt(i.toString(),10)].width=200,this.setWidth(200,this.parent.getColumnIndexByField(e[parseInt(i.toString(),10)].field)))},s.prototype.setColumnWidth=function(e,i,t){if(!(this.parent.getColumns().length<1)){var r=c(i)?this.parent.getNormalizedColumnIndex(e.uid):i,n=this.getWidth(e),a=this.getTableWidth(this.parent.getColumns());n!==null&&(this.setWidth(n,r),this.parent.width!=="auto"&&this.parent.width.toString().indexOf("%")===-1&&this.setMinwidthBycalculation(a),(this.parent.allowResizing&&t==="resize"||this.parent.getFrozenColumns()&&this.parent.allowResizing)&&this.setWidthToTable(),this.parent.notify(ra,{index:r,width:n,column:e,module:t}))}},s.prototype.setWidth=function(e,i,t){if(this.parent.groupSettings.columns.length>i&&mn(this.parent)){var r=this.parent.element.offsetWidth;e=(30/r*100).toFixed(1)+"%"}var n=this.parent.getHeaderTable(),a=this.parent.getContentTable(),o=$t(e),l=n.querySelector(Ke).children[parseInt(i.toString(),10)];l&&!t?l.style.width=o:l&&t&&(l.style.width="");var h=a.querySelector(Ke).children[parseInt(i.toString(),10)];if(h&&!t?h.style.width=o:h&&t&&(h.style.width=""),!this.parent.enableColumnVirtualization&&this.parent.isEdit){for(var p=this.parent.element.querySelectorAll(".e-table.e-inline-edit"),d=[],u=0;u<p.length;u++)if(b(p[parseInt(u.toString(),10)],"e-grid").id===this.parent.element.id)for(var f=0;f<p[parseInt(u.toString(),10)].querySelector("colgroup").children.length;f++)d.push(p[parseInt(u.toString(),10)].querySelector("colgroup").children[parseInt(f.toString(),10)]);p.length&&d.length&&d[parseInt(i.toString(),10)]&&(d[parseInt(i.toString(),10)].style.width=o)}this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&this.refreshFrozenScrollbar()},s.prototype.refreshFrozenScrollbar=function(){var e={cancel:!1};if(this.parent.notify(pl,e),!e.cancel){var i=Ne(),t=this.parent.element.querySelector(".e-movablescrollbar"),r=this.parent.getContent().firstElementChild.getBoundingClientRect().width;if(this.parent.enableColumnVirtualization){var n=this.parent.getContent().querySelector(".e-virtualtrack");n&&(r=n.scrollWidth)}this.parent.height!=="auto"&&(r=r+i),t.firstElementChild.style.width=r+"px"}},s.prototype.getSiblingsHeight=function(e){var i=this.getHeightFromDirection(e,"previous"),t=this.getHeightFromDirection(e,"next");return i+t},s.prototype.getHeightFromDirection=function(e,i){for(var t=e[i+"ElementSibling"],r=0,n=[ze,tr,"e-groupdroparea","e-gridpager","e-toolbar","e-temp-toolbar"];t;)n.some(function(a){return t.classList.contains(a)})&&(r+=t.offsetHeight),t=t[i+"ElementSibling"];return r},s.prototype.isWidthUndefined=function(){var e=this.parent.getColumns().filter(function(i){return c(i.width)&&c(i.minWidth)}).length;return this.parent.getColumns().length===e},s.prototype.getWidth=function(e){if(c(e.width)&&this.parent.allowResizing&&c(e.minWidth)&&!this.isWidthUndefined()&&(e.width=200),!e.width)return null;var i=parseInt(e.width.toString(),10);return e.minWidth&&i<parseInt(e.minWidth.toString(),10)?e.minWidth:e.maxWidth&&i>parseInt(e.maxWidth.toString(),10)?e.maxWidth:e.width},s.prototype.getTableWidth=function(e){for(var i=0,t=0,r=e;t<r.length;t++){var n=r[t],a=this.getWidth(n);n.width==="auto"&&(a=0),n.visible!==!1&&a!==null&&(i+=parseInt(a.toString(),10))}return i},s.prototype.setWidthToTable=function(){var e=$t(this.getTableWidth(this.parent.getColumns()));(this.parent.detailTemplate||this.parent.childGrid)&&this.setColumnWidth(new ye({width:"30px"})),e=this.isAutoResize()?"100%":e,this.parent.getHeaderTable().style.width=e,this.parent.getContentTable().style.width=e;var i=this.parent.element.querySelector(".e-table.e-inline-edit");i&&(i.style.width=e)},s.prototype.isAutoResize=function(){return this.parent.allowResizing&&this.parent.resizeSettings.mode==="Auto"},s}(),ah=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),oh=function(){function s(e){this.currentInfo={},this.oneTime=!0,this.swap={},this.isInfiniteScroll=!1,this.forget=!1,this.skipFocus=!0,this.focusByClick=!1,this.firstHeaderCellClick=!1,this.prevIndexes={},this.refMatrix=this.refreshMatrix(!0),this.actions=["downArrow","upArrow"],this.isVirtualScroll=!1,this.groupedFrozenRow=0,this.parent=e,this.rowModelGen=new fr(this.parent),this.addEventListener()}return s.prototype.focusCheck=function(e){var i=e.target;this.focusByClick=!0,this.firstHeaderCellClick=!0,this.skipFocus=i.classList.contains("e-grid")},s.prototype.onFocus=function(e){if(!(this.parent.isDestroyed||Y.isDevice||this.parent.enableVirtualization||this.parent.element.querySelector(".e-masked-table")||!this.parent.isInitialLoad&&e&&e.target===this.parent.element&&this.parent.element.querySelector(".e-spin-show"))){this.setActive(!this.parent.enableHeaderFocus&&this.parent.frozenRows===0),!this.parent.enableHeaderFocus&&!this.parent.getCurrentViewRecords().length&&(this.parent.editSettings.mode!=="Batch"||this.parent.editSettings.mode==="Batch"&&this.parent.editModule&&!this.parent.editModule.getBatchChanges()[hr].length)&&this.getContent().matrix.generate(this.rowModelGen.generateRows({rows:[new di({isDataRow:!0})]}),this.getContent().selector,!1);var i=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(i[0],i[1]),this.skipFocus&&!(e&&e.target===this.parent.element)&&(this.focus(e),this.skipFocus=!1)}},s.prototype.passiveFocus=function(e){if(!this.parent.isDestroyed){var i=this.parent.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");if(e.target===i&&e.relatedTarget&&!b(e.relatedTarget,"e-grid")&&!this.firstHeaderCellClick){var t=[0,0];this.active.matrix.matrix[t[0]][t[1]]===0&&(t=tt(this.active.matrix.matrix,t,!0)),this.active.matrix.current=t,this.currentInfo.element=e.target,this.currentInfo.elementToFocus=e.target,L([this.currentInfo.element],["e-focused","e-focus"])}this.firstHeaderCellClick=!1,e.target&&e.target.classList.contains("e-detailcell")&&(this.currentInfo.skipAction=!1,L([this.currentInfo.element],["e-focused","e-focus"]))}},s.prototype.onBlur=function(e){this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").removeAttribute("aria-hidden");var i=!!(b(e.target,"e-gantt")&&e.target.classList.contains("e-rowcell")&&!c(e.target.nextElementSibling)&&e.target.nextElementSibling.classList.contains("e-rowcell"));(this.parent.isEdit||e&&(!e.relatedTarget||k(e.relatedTarget,".e-grid"))&&!(this.parent.element.classList.contains("e-childgrid")&&!this.parent.element.matches(":focus-within")))&&!(!i&&c(e.relatedTarget)&&parseInt(e.target.getAttribute("data-colindex"),10)===0&&parseInt(e.target.getAttribute("index"),10)===0)&&!(!i&&c(e.relatedTarget)&&!k(document.activeElement,".e-grid")&&!c(e.sourceCapabilities))||(this.removeFocus(),this.skipFocus=!0,this.currentInfo.skipAction=!1,this.setLastContentCellTabIndex(),this.setFirstFocusableTabIndex(),this.firstHeaderCellClick=!1)},s.prototype.setFirstFocusableTabIndex=function(){var e=this.parent;if(e.element.tabIndex=-1,e.allowGrouping&&e.groupSettings.showDropArea){var i=e.groupModule,t=i.getFocusableGroupedItems();t.length>0?(i.element.tabIndex=-1,t[0].tabIndex=0):i.element.tabIndex=0;return}if(e.toolbar||e.toolbarTemplate){var r=e.toolbarModule.element,n=this.parent.toolbarModule.getFocusableToolbarItems();n.length>0&&n[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input")?(r.tabIndex=-1,n[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").tabIndex=0):r.tabIndex=0;return}if(e.getColumns().length){var a=e.getHeaderContent().querySelector(".e-headercell:not(.e-hide)");if(a.tabIndex=0,this.setActive(!1),!c(this.active)&&(c(this.active.target)||!this.active.target.classList.contains("e-columnmenu"))){var o=[0,0];this.active.matrix.matrix[o[0]][o[1]]===0&&(o=tt(this.active.matrix.matrix,o,!0)),this.active.matrix.current=o}return}},s.prototype.setLastContentCellTabIndex=function(){var e=this.parent.getContentTable();if(e.rows[e.rows.length-1]){var i=e.rows[e.rows.length-1].lastElementChild;i.tabIndex=0}},s.prototype.onClick=function(e,i){if(!(b(e.target,"e-filterbarcell")&&(b(e.target,"e-multiselect")||e.target.classList.contains("e-input-group-icon")))){var t=!c(k(e.target,"."+mt)),r=!c(k(e.target,"."+ze));if(t=t&&r?!t:t,!(!t&&c(k(e.target,"."+ze))||e.target.classList.contains(we)||!c(k(e.target,".e-unboundcell")))){if(this.setActive(t),!t&&c(k(e.target,"."+ze))){this.clearOutline();return}var n={cancel:!1,byKey:!1,byClick:!c(e.target),clickArgs:e};if(this.parent.notify(Zr,n),!(n.cancel||k(e.target,".e-inline-edit")&&!this.parent.editSettings.showAddNewRow&&this.parent.editSettings.showAddNewRow&&!this.parent.element.querySelector(".e-editedrow"))&&(this.setActive(t),this.getContent())){var a=this.getContent().onClick(e,i);if(a===!1)return;this.focus(),this.currentInfo.element.classList.contains("e-rowcell")&&e.type&&e.type==="click"&&L([this.currentInfo.element],["e-focused","e-focus"])}}}},s.prototype.handleFilterNavigation=function(e,i,t){e.target===document.querySelector(i)&&e.key==="Tab"&&e.shiftKey?(e.preventDefault(),document.querySelector(t).focus()):e.target===document.querySelector(t)&&e.key==="Tab"&&!e.shiftKey&&document.activeElement===document.querySelector(t)&&(e.preventDefault(),document.querySelector(i).focus())},s.prototype.onKeyPress=function(e){if(this.parent.allowPaging){var i=this.parent.pagerModule.pagerObj.element,t=this.parent.pagerModule.pagerObj.getFocusablePagerElements(i,[]);if(this.parent.childGrid&&!b(e.target,"e-gridpager")&&this.allowToPaging(e)&&t.length&&(t[0].tabIndex=0),this.parent.pagerModule.pagerObj.checkPagerHasFocus()){if(e.action==="shiftTab"&&t.length&&t[0]===e.target){this.setActive(!0);var r=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];this.active.matrix.matrix[r[0]][r[1]]===0&&(r=tt(this.active.matrix.matrix,r,!1)),this.active.matrix.current=this.parent.editSettings.mode==="Batch"?this.isValidBatchEditCell(r)?r:this.findBatchEditCell(r,!1):r,e.preventDefault(),this.focus(e);return}if(e.action==="tab"&&this.parent.element.classList.contains("e-childgrid")&&(!this.parent.pageSettings.pageSizes&&t.length&&t[t.length-1]===e.target||this.parent.pagerModule.pagerObj.getDropDownPage()===e.target)){var n=b(this.parent.element,"e-detailcell");z([this.parent.element],["e-focus"]),z([n],["e-focused"]),n.tabIndex=-1}else{this.parent.pagerModule.pagerObj.changePagerFocus(e);return}}if(this.parent.pagerModule.pagerObj.element.tabIndex===0&&(e.keyCode===38||e.shiftKey&&e.keyCode===9)){e.preventDefault(),this.focus(e);return}else if(this.parent.pagerModule.pagerObj.element.tabIndex===0&&e.keyCode===9){e.preventDefault(),this.parent.pagerModule.pagerObj.setPagerFocus();return}if(this.parent.pagerModule.pagerObj.checkFirstPagerFocus()){var a=this.getContent().matrix.rows,o=this.getContent().matrix.columns;this.getContent().matrix.current=[a,o]}}if(this.parent.filterSettings.type==="Excel"&&this.handleFilterNavigation(e,".e-excelfilter .e-menu-item:not(.e-disabled)",".e-excelfilter .e-footer-content button:nth-child(2)"),this.parent.filterSettings.type==="CheckBox"&&this.handleFilterNavigation(e,".e-searchinput.e-input",".e-checkboxfilter .e-footer-content button:nth-child(2)"),this.parent.filterSettings.type==="Menu"&&this.handleFilterNavigation(e,".e-flmenu .e-input-group.e-popup-flmenu",".e-flmenu .e-footer-content button:nth-child(2)"),!this.skipOn(e)){if(e.target&&b(e.target,"e-gridcontent")){var l=[].slice.call(this.parent.getContentTable().rows),h=l[l.length-1].lastElementChild;e.target===h&&(this.setActive(!0),this.setLastContentCellActive())}if(e.action==="shiftTab"&&e.target&&(e.target===this.parent.element||b(e.target,"e-toolbar")||b(e.target,"e-groupdroparea"))){if(e.target===this.parent.element){this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(e);return}if(b(e.target,"e-groupdroparea")){this.parent.element.classList.contains("e-childgrid")&&(e.preventDefault(),this.parent.element.focus());return}if(b(e.target,"e-toolbar")){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var p=this.parent.groupModule,d=p.getFocusableGroupedItems();e.preventDefault(),d.length>0?d[d.length-1].focus():p.element.focus()}else this.parent.element.classList.contains("e-childgrid")&&(e.preventDefault(),this.parent.element.focus());return}}var u=!1;if(e.action==="tab"&&e.target&&(e.target===this.parent.element||b(e.target,"e-toolbar")||b(e.target,"e-groupdroparea"))){if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea&&(e.target===this.parent.element||e.target.classList.contains("e-groupdroparea"))){var p=this.parent.groupModule,d=p.getFocusableGroupedItems();if(d.length>0){e.preventDefault(),d[0].focus();return}if(!e.target.classList.contains("e-groupdroparea")){e.preventDefault(),p.element.focus();return}}if((this.parent.toolbar||this.parent.toolbarTemplate)&&(e.target===this.parent.element||b(e.target,"e-groupdroparea")||e.target.classList.contains("e-toolbar"))){var f=this.parent.toolbarModule.element,m=this.parent.toolbarModule.getFocusableToolbarItems();if(m.length>0){e.preventDefault(),m[0].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus();return}if(!e.target.classList.contains("e-toolbar")){e.preventDefault(),f.focus();return}}(e.target===this.parent.element||b(e.target,"e-toolbar")||b(e.target,"e-groupdroparea"))&&(u=!0)}u&&(this.parent.allowGrouping&&this.parent.groupSettings.columns.length===this.parent.columns.length?this.setActive(!0):this.setActive(!1),this.active.matrix.current=[0,-1]),this.activeKey=e.action;var g={cancel:!1,byKey:!0,byClick:!1,keyArgs:e};if(this.parent.notify(Zr,g),!g.cancel){var y=this.getContent().matrix.current,S=this.active&&this.active.matrix.current?[this.active.matrix.current[0],this.active.matrix.current[1]]:void 0;this.currentInfo.outline=!0;var I=this.getContent().jump(e.action,y);this.swap=I,I.swap&&!(this.parent.editSettings.mode==="Batch"&&(e.action==="tab"||e.action==="shiftTab"))&&(this.setActive(!I.toHeader),this.getContent().matrix.current=this.getContent().getNextCurrent(y,I,this.active,e.action),this.prevIndexes={}),this.setActiveByKey(e.action,this.getContent());var C=this.content.lastIdxCell?!1:this.getContent().onKeyPress(e);if(e.target&&b(e.target,"e-gridheader")){if(e.action==="tab"&&y.toString()===this.active.matrix.current.toString()){var R=tt(this.active.matrix.matrix,this.active.matrix.current,!0),r=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];if(this.active.matrix.matrix[r[0]][r[1]]===0&&(r=tt(this.active.matrix.matrix,r,!1)),this.active.matrix.current.toString()===r.toString()&&this.content.matrix.matrix.length){C=!0,this.setActive(!0);var T=[0,0];this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").setAttribute("aria-hidden","true"),this.active.matrix.matrix[T[0]][T[1]]===0&&(T=tt(this.active.matrix.matrix,[0,0],!0)),this.active.matrix.current=this.parent.editSettings.mode==="Batch"?this.isValidBatchEditCell(T)?T:this.findBatchEditCell(T,!0):T}else this.active.matrix.current.toString()!==R.toString()&&(this.active.matrix.current=R)}if(e.action==="shiftTab"&&y.toString()===this.active.matrix.current.toString()){var F=tt(this.active.matrix.matrix,this.active.matrix.current,!1);if(F.toString()===this.active.matrix.current.toString()){this.focusOutFromHeader(e);return}this.active.matrix.current.toString()!==F.toString()&&!C&&(C=!0,this.active.matrix.current=F)}}if(e.target&&b(e.target,"e-gridcontent")&&(this.parent.allowPaging&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer")&&this.parent.pagerModule.pagerObj.element.querySelector(".e-pagercontainer").removeAttribute("aria-hidden"),this.parent.editSettings.mode==="Batch"&&(e.action==="tab"||e.action==="shiftTab")&&(this.active.matrix.current=this.findBatchEditCell(S,e.action==="tab"),e.action==="tab"&&S.toString()===this.active.matrix.current.toString()&&(this.parent.editModule.editModule.addBatchRow=!0)),e.action==="shiftTab"&&y.toString()===this.active.matrix.current.toString())){if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length===this.parent.columns.length){this.focusOutFromHeader(e);return}var T=[0,0];this.active.matrix.matrix[T[0]][T[1]]===0&&(T=tt(this.active.matrix.matrix,[0,0],!0)),!C&&(T.toString()===this.active.matrix.current.toString()||this.parent.editSettings.mode==="Batch"&&S.toString()===this.active.matrix.current.toString())&&(C=!0,this.setActive(!1),this.setLastContentCellActive())}if(C===!1){if(this.clearIndicator(),e.action==="shiftTab"&&y.toString()===[0,0].toString()&&(this.parent.element.tabIndex=-1),this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.allowToPaging(e)&&y.toString()!==[0,0].toString()){if(e.preventDefault(),e.keyCode===40){this.parent.pagerModule.pagerObj.setPagerContainerFocus();return}else if(e.keyCode===9){this.parent.pagerModule.pagerObj.setPagerFocus();return}}this.parent.element.classList.contains("e-childgrid")&&this.focusOutFromChildGrid(e);return}e.preventDefault(),this.focus(e)}}},s.prototype.isValidBatchEditCell=function(e){var i=this.active.getTable().rows[e[0]].cells[e[1]],t=k(i,"tr"),r=parseInt(i.getAttribute("data-colindex"),10),n=this.parent.getColumns()[parseInt(r.toString(),10)];return!!(this.active.matrix.matrix[e[0]][e[1]]===1&&(!t.classList.contains("e-row")||(t.classList.contains("e-insertedrow")||!n.isPrimaryKey)&&n.allowEditing))},s.prototype.findBatchEditCell=function(e,i,t){for(var r=e,n=e,a=!1;!a;){var o=n;if(n=tt(this.active.matrix.matrix,n,i),o.toString()===n.toString()||t&&o[0]!==n[0]){a=!0;continue}this.isValidBatchEditCell(n)&&(r=n,a=!0)}return r},s.prototype.setLastContentCellActive=function(){var e=[this.active.matrix.matrix.length-1,this.active.matrix.matrix[this.active.matrix.matrix.length-1].length-1];this.active.matrix.matrix[e[0]][e[1]]===0&&(e=tt(this.active.matrix.matrix,e,!1)),this.active.matrix.current=e},s.prototype.focusOutFromChildGrid=function(e){var i=b(this.parent.element,"e-table"),t=b(i,"e-grid").ej2_instances[0],r=b(this.parent.element,"e-detailcell"),n=b(this.parent.element,"e-detailrow").getAttribute("data-uid"),a=[].slice.call(t.getContentTable().rows),o=a.map(function(u){return u.getAttribute("data-uid")}).indexOf(n);if(!(e.action==="tab"&&o>=a.length-1)){z([this.parent.element],["e-focus"]),z([r],["e-focused"]),r.tabIndex=-1,e.preventDefault();var l;if(t.focusModule.removeFocus(),e.action==="shiftTab"){for(var h=a[o-1],p=h.cells,d=p.length-1;d>=0;d--)if(l=p[parseInt(d.toString(),10)],!l.classList.contains("e-hide")){t.focusModule.active.matrix.current=[o-1,d];break}}else l=a[o+1].cells[0],t.focusModule.active.matrix.current=[o+1,0];t.focusModule.currentInfo.element=l,t.focusModule.currentInfo.elementToFocus=l,L([l],["e-focused","e-focus"]),l.tabIndex=0,l.focus()}},s.prototype.focusOutFromHeader=function(e){if(this.removeFocus(),this.parent.toolbar||this.parent.toolbarTemplate){var i=this.parent.toolbarModule.element,t=this.parent.toolbarModule.getFocusableToolbarItems();e.preventDefault(),t.length>0?t[t.length-1].querySelector(".e-toolbar-item-focus,.e-btn,.e-input").focus():i.focus();return}if(this.parent.allowGrouping&&this.parent.groupSettings.showDropArea){var r=this.parent.groupModule,n=r.getFocusableGroupedItems();e.preventDefault(),n.length>0?n[n.length-1].focus():r.element.focus();return}this.parent.element.classList.contains("e-childgrid")&&(e.preventDefault(),this.parent.element.focus())},s.prototype.allowToPaging=function(e){return!(this.parent.editSettings.mode==="Batch"&&this.parent.editSettings.allowAdding&&e.keyCode!==40)},s.prototype.skipOn=function(e){var i=e.target;if(!i)return!1;if(this.currentInfo.skipAction)return this.clearIndicator(),!0;if(["pageUp","pageDown","altDownArrow"].indexOf(e.action)>-1)return this.clearIndicator(),!0;if(this.parent.allowGrouping){var t=this.parent.groupModule.getFocusableGroupedItems();if(b(e.target,"e-groupheadercell")&&!(e.target===t[0]&&e.action==="shiftTab"||e.target===t[t.length-1]&&e.action==="tab"))return!0}if(this.parent.toolbar||this.parent.toolbarTemplate){var r=this.parent.toolbarModule.element,n=r.querySelectorAll(".e-toolbar-item:not(.e-overlay):not(.e-hidden)");if(b(e.target,"e-toolbar-item")&&!(n.length>0&&(b(e.target,"e-toolbar-item")===n[0]&&e.action==="shiftTab"||b(e.target,"e-toolbar-item")===n[n.length-1]&&e.action==="tab")))return!0}var a=k(i,"th")&&!k(i,"th").tabIndex;if(e.target.classList.contains("e-filterbaroperator")&&(e.keyCode===13||e.keyCode===27)){var o=k(e.target,".e-filterbarcell");o.querySelector("input").focus()}var l=this.parent.editSettings.showAddNewRow&&k(document.activeElement,".e-addedrow")!==null;(a&&k(document.activeElement,".e-filterbarcell")!==null||l)&&this.removeFocus();var h=k(document.activeElement,".e-filterbarcell")!==null;if(this.parent.enableHeaderFocus&&h){var p=this.active.matrix,d=p.current;h=p.matrix[d[0]].lastIndexOf(1)!==d[1]}if(this.parent.isEdit&&(e.action==="tab"||e.action==="shiftTab")&&this.parent.editSettings.mode==="Normal"&&!this.parent.editSettings.showAddNewRow&&!c(b(i,"e-addedrow"))){var u=this.parent.editModule.formObj.element.querySelectorAll("input.e-field:not(.e-disabled),button:not(.e-hide)"),o=i.classList.contains("e-ddl")?i.querySelector("input"):i,f=e.action==="tab"&&o===u[u.length-1],m=e.action==="shiftTab"&&o===u[0];if(f||m){e.preventDefault();var g=u[f?0:u.length-1];g=g.parentElement.classList.contains("e-ddl")?g.parentElement:g,g.focus()}}return e.action==="delete"||this.parent.editSettings.mode!=="Batch"&&(this.parent.isEdit&&(!this.parent.editSettings.showAddNewRow||this.parent.editSettings.showAddNewRow&&(!c(this.parent.element.querySelector(".e-editedrow"))||!c(b(i,"e-addedrow"))&&!c(k(e.target,"input"))&&!c(document.querySelector(".e-popup-open"))||!c(b(i,"e-addedrow"))&&i&&!i.querySelector(".e-cancel-icon")&&!c(b(i,"e-unboundcell"))))||["insert","f2"].indexOf(e.action)>-1)||h&&this.parent.enableHeaderFocus||(h||l)&&e.action!=="tab"&&e.action!=="shiftTab"||k(document.activeElement,"#"+this.parent.element.id+"_searchbar")!==null&&["enter","leftArrow","rightArrow","shiftLeft","shiftRight","ctrlPlusA"].indexOf(e.action)>-1||k(i,"."+mt)===null&&k(i,"."+ze)===null&&!(e.target===this.parent.element||b(e.target,"e-toolbar")||b(e.target,"e-groupdroparea"))||e.action==="space"&&!i.classList.contains(oi)&&k(i,"."+oi)===null&&k(i,".e-headerchkcelldiv")===null||k(i,".e-filter-popup")!==null},s.prototype.focusVirtualElement=function(e){var i=this;if(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling){var t={virtualData:{},isAdd:!1,isCancel:!1};this.parent.notify(Ko,t);var r=this.actions.some(function(a){return a===i.activeKey}),n=this.parent.contentModule?this.parent.contentModule.selectedRowIndex>-1:!1;t.isAdd||Object.keys(t.virtualData).length||r||t.isCancel||n?(this.parent.notify(Cl,{isCancel:!1}),t.isCancel=!1,this.parent.contentModule.selectedRowIndex=-1,r&&(this.activeKey=this.empty,this.parent.notify("virtaul-key-handler",e)),this.currentInfo.elementToFocus.focus({preventScroll:!0})):this.isVirtualScroll||this.isInfiniteScroll?this.currentInfo.elementToFocus.focus({preventScroll:!0}):this.currentInfo.elementToFocus.focus()}this.isVirtualScroll=this.isInfiniteScroll=!1},s.prototype.getFocusedElement=function(){return this.currentInfo.elementToFocus},s.prototype.getContent=function(){return this.active||this.content},s.prototype.setActive=function(e){this.active=e?this.content:this.header},s.prototype.setFocusedElement=function(e,i){var t=this;this.currentInfo.elementToFocus=e,setTimeout(function(){c(t.currentInfo.elementToFocus)||(t.parent.enableVirtualization||t.parent.enableInfiniteScrolling?t.focusVirtualElement(i):(c(t.parent.element.querySelector(".e-flmenu"))||b(document.activeElement,"e-flmenu-valuediv")!==t.parent.element.querySelector(".e-flmenu-valuediv"))&&t.currentInfo.elementToFocus.focus())},0)},s.prototype.focus=function(e){this.parent.notify(_o,e),this.removeFocus(),this.addFocus(this.getContent().getFocusInfo(),e)},s.prototype.removeFocus=function(e){if(this.currentInfo.element){if(this.parent.isReact&&!this.parent.isEdit&&this.currentInfo.element.classList.contains("e-rowcell")&&!this.currentInfo.element.parentElement&&!(this.parent.allowGrouping&&this.parent.groupSettings.columns.length)&&this.parent.getRowByIndex(this.prevIndexes.rowIndex)){var i=this.parent.getCellFromIndex(this.prevIndexes.rowIndex,this.prevIndexes.cellIndex);this.currentInfo.element=i||this.currentInfo.element}z([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focused","e-focus"]),this.currentInfo.element.tabIndex=-1}},s.prototype.addOutline=function(){var e=this.getContent().getFocusInfo();e.element&&(L([e.element],["e-focused"]),L([e.elementToFocus],["e-focus"]))},s.prototype.focusHeader=function(){this.setActive(!1),this.resetFocus()},s.prototype.focusContent=function(){this.setActive(!0),this.resetFocus()},s.prototype.resetFocus=function(){var e=this.getContent().matrix.get(0,-1,[0,1],null,this.getContent().validator());this.getContent().matrix.select(e[0],e[1]),this.focus()},s.prototype.addFocus=function(e,i){if(this.currentInfo=e,this.currentInfo.outline=e.outline&&(!c(i)||this.isVirtualScroll),this.isInfiniteScroll&&(this.currentInfo.outline=!0),!!e.element){var t=e.elementToFocus.classList.contains("e-focus");if(!t){this.currentInfo.outline&&L([e.element],["e-focused"]),L([e.elementToFocus],["e-focus"]),e.element.tabIndex=0,t||this.setFocusedElement(e.elementToFocus,i),this.parent.notify($r,{element:e.elementToFocus,parent:e.element,indexes:this.getContent().matrix.current,byKey:!c(i),byClick:c(i),keyArgs:i,isJump:this.swap.swap,container:this.getContent().getInfo(i),outline:!c(i),swapInfo:this.swap});var r=this.getContent().matrix.current,n=r[0],a=r[1];this.prevIndexes={rowIndex:n,cellIndex:a},this.focusedColumnUid=this.parent.getColumnByIndex(a).uid,this.focusByClick=!1}}},s.prototype.refreshMatrix=function(e){var i=this;return function(t){e&&!i.content&&(i.content=new Ca(i.parent)),!e&&!i.header&&(i.header=new hh(i.parent));var r=e?i.content:i.header,n=i.parent.frozenRows,a=0;if(n&&i.parent.editSettings.mode==="Batch"&&(a=i.parent.getHeaderContent().querySelectorAll(".e-insertedrow").length+i.parent.getHeaderContent().querySelectorAll(".e-hiddenrow").length),i.parent.groupSettings.columns.length&&n&&e){n=0;for(var o=0;o<t.rows.length&&(n++,t.rows[parseInt(o.toString(),10)].index+1!==i.parent.frozenRows);o++);i.groupedFrozenRow=n}var l=e?t.rows.slice(n+a):t.rows,h=e?t.rows.slice(0,n+a):t.rows;i.parent.isCollapseStateEnabled()&&e&&(l=l.filter(function(F){return F.visible!==!1}));var p=!c(i.parent.rowTemplate);if(n&&(i.parent.editSettings.mode==="Batch"&&e&&(t.name==="batchDelete"||t.name==="batchAdd"||t.name==="batchCancel"||t.args&&t.args.requestType==="batchsave")||t.args&&(t.args.requestType==="delete"||t.args.requestType==="save"))){var d=i.header.matrix.matrix,u=i.parent.headerModule.rows.length;d.splice(u,d.length-u)}var f=r.matrix.generate(h,r.selector,p);r.matrix.generate(l,r.selector,p);var m=i.parent.enableVirtualization||i.parent.enableInfiniteScrolling;if(i.parent.editSettings.showAddNewRow&&e&&i.header&&i.header.matrix&&(!m||m&&i.parent.isAddNewRow)){var g=i.header.matrix.matrix,y=i.parent.allowFiltering&&i.parent.filterSettings.type==="FilterBar"?2:1;r.matrix.rows=i.parent.frozenRows&&i.parent.editSettings.newRowPosition==="Top"?r.matrix.rows:++r.matrix.rows,i.parent.editSettings.newRowPosition==="Top"?(i.parent.frozenRows||m?f:r.matrix.matrix).unshift(i.refreshAddNewRowMatrix(g[g.length-y])):r.matrix.matrix.push(i.refreshAddNewRowMatrix(g[g.length-y])),i.parent.isAddNewRow=!1}if((!(i.parent.isFrozenGrid()&&t.args&&(t.args.requestType==="sorting"||t.args.requestType==="batchsave"||t.args.requestType==="paging"))||n&&i.parent.editSettings.mode==="Batch"&&e&&(t.name==="batchDelete"||t.name==="batchAdd"||t.name==="batchCancel"||t.args.requestType==="batchsave"||t.name==="batchAdd"||t.name==="batchCancel"))&&r.generateRows(h,{matrix:f,handlerInstance:i.header}),!Y.isDevice&&t&&t.args&&(!i.focusByClick&&t.args.requestType==="paging"&&!i.parent.pagerModule.pagerObj.checkPagerHasFocus()&&(i.skipFocus=!1,i.parent.element.focus()),t.args.requestType==="grouping"&&(i.skipFocus=!0)),t&&t.args&&t.args.requestType==="virtualscroll"){if(i.currentInfo.uid){var S,I=t.rows.some(function(F,X){return S=X,F.uid===i.currentInfo.uid});if(I){i.content.matrix.current[0]=S,i.content.matrix.current[1]=i.parent.getColumnIndexByUid(i.focusedColumnUid)||0;var C=i.getContent().getFocusInfo().elementToFocus;if(C){var R=C.getBoundingClientRect(),T=i.parent.element.getBoundingClientRect();R.top>=0&&R.left>=0&&R.right<=Math.min(T.right,window.innerWidth||document.documentElement.clientWidth)&&R.bottom<=Math.min(T.bottom,window.innerHeight||document.documentElement.clientHeight)&&(i.isVirtualScroll=!0,i.focus())}}}else if(t.args.focusElement&&t.args.focusElement.classList.contains("e-filtertext")){var C=i.parent.element.querySelector("#"+t.args.focusElement.id);C&&C.focus()}}t&&t.args&&t.args.requestType==="infiniteScroll"&&(i.isInfiniteScroll=!0)}},s.prototype.refreshAddNewRowMatrix=function(e){for(var i=this.parent.getColumns(),t=this.parent.getIndentCount(),r=t;r<e.length-1;r++)i[r-t]&&i[r-t].visible&&i[r-t].allowEditing?e[parseInt(r.toString(),10)]=1:e[parseInt(r.toString(),10)]=0;return e},s.prototype.addEventListener=function(){var e=this;this.parent.isDestroyed||(x.add(this.parent.element,"mousedown",this.focusCheck,this),x.add(this.parent.element,"touchstart",this.focusCheck,this),x.add(this.parent.element,"focus",this.onFocus,this),this.parent.element.addEventListener("focus",this.passiveHandler=function(i){return e.passiveFocus(i)},!0),x.add(this.parent.element,"focusout",this.onBlur,this),this.evtHandlers=[{event:si,handler:this.onKeyPress},{event:hi,handler:this.onClick},{event:ce,handler:this.refMatrix},{event:la,handler:this.refMatrix},{event:da,handler:this.refMatrix},{event:ai,handler:this.showAddNewRowFocus},{event:Rt,handler:this.refreshMatrix()},{event:Sl,handler:this.restoreFocus},{event:jo,handler:this.restoreFocus},{event:"start-edit",handler:this.clearIndicator},{event:"start-add",handler:this.clearIndicator},{event:"sorting-complete",handler:this.restoreFocus},{event:"filtering-complete",handler:this.filterfocus},{event:"grouping-complete",handler:this.restoreFocusWithAction},{event:"ungrouping-complete",handler:this.restoreFocusWithAction},{event:so,handler:this.refMatrix},{event:ea,handler:this.refMatrix},{event:ao,handler:this.refMatrix},{event:no,handler:this.refMatrix},{event:yt,handler:this.refMatrix},{event:$r,handler:this.internalCellFocus}],Et(this.parent,this.evtHandlers,!0,this))},s.prototype.showAddNewRowFocus=function(){if(this.parent.editSettings.showAddNewRow){var e=this.parent.editSettings.newRowPosition==="Top"?0:this.content.matrix.matrix.length-1,i=this.parent.getIndentCount();if(this.parent.editSettings.newRowPosition==="Top"&&(this.parent.frozenRows||this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)){var t=this.header.matrix.matrix.length-(this.groupedFrozenRow?this.groupedFrozenRow:this.parent.frozenRows);i=this.findNextCellFocus(this.header.matrix.matrix[t-1],i),this.header.matrix.current=[t-1,i],this.active=this.header}else i=this.findNextCellFocus(this.content.matrix.matrix[parseInt(e.toString(),10)],i),this.content.matrix.current=[e,i],this.active=this.content;var r=this.parent.element.querySelector(".e-addedrow");r&&r.querySelectorAll("tr")&&r.querySelector("tr").cells[parseInt(i.toString(),10)].querySelector("input")&&r.querySelector("tr").cells[parseInt(i.toString(),10)].querySelector("input").select()}},s.prototype.findNextCellFocus=function(e,i){for(var t=i;t<e.length;t++)if(e[parseInt(t.toString(),10)]===1)return t;return i},s.prototype.filterfocus=function(){this.parent.filterSettings.type!=="FilterBar"&&this.restoreFocus()},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(x.remove(this.parent.element,"mousedown",this.focusCheck),x.remove(this.parent.element,"touchstart",this.focusCheck),x.remove(this.parent.element,"focus",this.onFocus),x.remove(this.parent.element,"focusout",this.onBlur),this.parent.element.removeEventListener("focus",this.passiveHandler,!0),Et(this.parent,this.evtHandlers,!1))},s.prototype.destroy=function(){this.removeEventListener()},s.prototype.restoreFocus=function(){var e=this.parent.groupModule;if(this.parent.allowGrouping&&e&&(e.groupSortFocus||e.groupTextFocus)){e.groupSortFocus=!1,e.groupTextFocus=!1;return}this.firstHeaderCellClick=!0,this.addFocus(this.getContent().getFocusInfo())},s.prototype.restoreFocusWithAction=function(e){if(!this.parent.enableInfiniteScrolling){var i=this.getContent().matrix,t=i.current;switch(e.requestType){case"grouping":case"ungrouping":t[1]=t.length&&!this.parent.groupSettings.showGroupedColumn&&!c(i.matrix[t[0]])?i.matrix[t[0]].indexOf(1):e.requestType==="grouping"?t[1]+1:t[1]-1;break}this.getContent().matrix.current=t;var r=this.parent.groupModule;if(this.parent.allowGrouping&&r&&r.groupCancelFocus){var n=r.getFocusableGroupedItems();n.length?n[0].parentElement.getAttribute("ej-mappingname")===e.columnName?n[3].focus():n[0].focus():r.element.focus(),r.groupCancelFocus=!1;return}this.addFocus(this.getContent().getFocusInfo())}},s.prototype.clearOutline=function(){this.getContent().matrix.current=this.getContent().matrix.get(0,-1,[0,1],"downArrow",this.getContent().validator()),this.clearIndicator()},s.prototype.clearIndicator=function(){!this.currentInfo.element||!this.currentInfo.elementToFocus||z([this.currentInfo.element,this.currentInfo.elementToFocus],["e-focus","e-focused"])},s.prototype.getPrevIndexes=function(){var e=this.forget;return this.forget=!1,e||!Object.keys(this.prevIndexes).length?{rowIndex:null,cellIndex:null}:this.prevIndexes},s.prototype.forgetPrevious=function(){this.forget=!0},s.prototype.setActiveByKey=function(e,i){if(this.parent.frozenRows!==0){var t,r={home:function(){return{toHeader:!t.isContent,toFrozen:!0}},end:function(){return{toHeader:!t.isContent,toFrozen:!1}},ctrlHome:function(){return{toHeader:!0,toFrozen:!1}},ctrlEnd:function(){return{toHeader:!1,toFrozen:!1}}};if(e in r){t=i.getInfo();var n=r[""+e]();this.setActive(!n.toHeader),this.getContent().matrix.current=i.matrix.current}}},s.prototype.internalCellFocus=function(e){if(e.byKey&&e.container.isContent&&e.keyArgs.action==="enter"&&(e.parent.classList.contains("e-detailcell")||e.parent.classList.contains("e-unboundcell"))){this.clearIndicator();var i=this.getContent().getFocusable(this.getFocusedElement());this.setFocusedElement(i),this.currentInfo.skipAction=!0}},s}(),lh=function(){function s(){this.matrix=[],this.current=[]}return s.prototype.set=function(e,i,t){e=Math.max(0,Math.min(e,this.rows)),i=Math.max(0,Math.min(i,this.columns)),this.matrix[parseInt(e.toString(),10)]=this.matrix[parseInt(e.toString(),10)]||[],this.matrix[parseInt(e.toString(),10)][parseInt(i.toString(),10)]=t?1:0},s.prototype.get=function(e,i,t,r,n){var a=i;if(e+t[0]<0)return[e,i];e=Math.max(0,Math.min(e+t[0],this.rows));var o=!0;if(c(this.matrix[parseInt(e.toString(),10)]))return null;if(i=Math.max(0,Math.min(i+t[1],this.matrix[parseInt(e.toString(),10)].length-1)),a+t[1]>this.matrix[parseInt(e.toString(),10)].length-1&&n(e,i,r))return[e,a];var l=this.first(this.matrix[parseInt(e.toString(),10)],i,t,!0,r);i=l===null?a:l;var h=oe(e+"."+i,this.matrix);if(e===this.rows&&(r==="downArrow"||r==="enter")&&(t[0]=-1),l===null){for(var p=0;p<this.rows;p++)if(this.matrix[parseInt(p.toString(),10)].some(function(d){return d===1})){o=!1;break}if(o)return e=this.current.length?this.current[0]:0,[e,i]}return this.inValid(h)||!n(e,i,r)?this.get(e,a,t,r,n):[e,i]},s.prototype.first=function(e,i,t,r,n){return(i<0||i===e.length)&&this.inValid(e[parseInt(i.toString(),10)])&&n!=="upArrow"&&n!=="downArrow"||!e.some(function(a){return a===1})?null:this.inValid(e[parseInt(i.toString(),10)])?this.first(e,["upArrow","downArrow","shiftUp","shiftDown"].indexOf(n)!==-1?r?0:++i:i+t[1],t,!1,n):i},s.prototype.select=function(e,i){e=Math.max(0,Math.min(e,this.rows)),i=Math.max(0,Math.min(i,this.matrix[parseInt(e.toString(),10)].length-1)),this.current=[e,i]},s.prototype.generate=function(e,i,t){this.rows=e.length-1,this.matrix=[];for(var r=0;r<e.length;r++){var n=e[parseInt(r.toString(),10)].cells.filter(function(l){return l.isSpanned!==!0});this.columns=Math.max(n.length-1,this.columns|0);for(var a=0,o=0;o<n.length;o++)n[parseInt(o.toString(),10)].column&&n[parseInt(o.toString(),10)].column.columns?a=this.columnsCount(n[parseInt(o.toString(),10)].column.columns,a):a++,this.set(r,o,e[parseInt(r.toString(),10)].visible===!1?!1:i(e[parseInt(r.toString(),10)],n[parseInt(o.toString(),10)],t));this.columns=Math.max(a-1,this.columns|0)}return this.matrix},s.prototype.columnsCount=function(e,i){for(var t=e,r=i,n=0;n<t.length;n++)t[parseInt(n.toString(),10)].columns?r=this.columnsCount(t[parseInt(n.toString(),10)].columns,r):r++;return r},s.prototype.inValid=function(e){return e===0||e===void 0},s}(),Ca=function(){function s(e){var i=this;this.matrix=new lh,this.lastIdxCell=!1,this.parent=e,this.keyActions={rightArrow:[0,1],tab:[0,1],leftArrow:[0,-1],shiftTab:[0,-1],upArrow:[-1,0],downArrow:[1,0],shiftUp:[-1,0],shiftDown:[1,0],shiftRight:[0,1],shiftLeft:[0,-1],enter:[1,0],shiftEnter:[-1,0]},this.indexesByKey=function(t){var r={home:[i.matrix.current[0],-1,0,1],end:[i.matrix.current[0],i.matrix.columns+1,0,-1],ctrlHome:[0,-1,0,1],ctrlEnd:[i.matrix.rows,i.matrix.columns+1,0,-1]};return r[""+t]||null}}return s.prototype.getTable=function(){return this.parent.getContentTable()},s.prototype.onKeyPress=function(e){var i=/(Mac)/i.test(navigator.platform);if(i&&e.metaKey){if(e.action==="home")e.action="ctrlHome";else if(e.action==="end")e.action="ctrlEnd";else if(["downArrow","upArrow","leftArrow","rightArrow"].indexOf(e.action)!==-1)return}var t=this.keyActions[e.action],r=this.getCurrentFromAction(e.action,t,e.action in this.keyActions,e);if(r){if((["tab","shiftTab"].indexOf(e.action)>-1&&this.matrix.current||[]).toString()===r.toString()||this.parent.allowPaging&&!this.parent.pagerModule.pagerObj.checkPagerHasFocus()&&this.matrix.current[0]===this.matrix.rows&&(this.parent.editSettings.mode==="Batch"&&this.parent.editSettings.allowAdding&&e.keyCode===40||e.keyCode===40)){if(r.toString()===[this.matrix.rows,this.matrix.columns].toString()||r.toString()===[0,0].toString()||this.matrix.current[0]===this.matrix.rows&&this.matrix.current.toString()===r.toString()||this.parent.allowGrouping&&this.parent.infiniteScrollSettings.enableCache&&r.toString()===[0,1].toString())return!1;r=this.editNextRow(r[0],r[1],e.action)}this.matrix.select(r[0],r[1])}},s.prototype.editNextRow=function(e,i,t){var r=this.parent,n=r.editSettings.allowNextRowEdit&&(r.isEdit||r.isLastCellPrimaryKey),a=r.getColumnIndexByField(r.getVisibleColumns()[0].field),o=this.getTable().rows[parseInt(e.toString(),10)],l=r.editSettings.showAddNewRow&&o.classList.contains("e-addedrow")?o.querySelectorAll("td:not(.e-editcell)")[parseInt(i.toString(),10)]:o.cells[parseInt(i.toString(),10)];if(t==="tab"&&n){e++;var h=this.getTable().rows[parseInt(e.toString(),10)].getElementsByClassName("e-indentcell").length+this.getTable().rows[parseInt(e.toString(),10)].getElementsByClassName("e-detailrowcollapse").length;i=a+h}return t==="shiftTab"&&n&&(e--,i=r.getColumnIndexByField(r.getVisibleColumns()[r.getVisibleColumns().length-1].field)),!l.classList.contains(U)&&!l.classList.contains("e-headercell")&&!l.classList.contains("e-groupcaption")&&!l.classList.contains("e-filterbarcell")?this.editNextRow(e,i,t):[e,i]},s.prototype.getCurrentFromAction=function(e,i,t,r){if(i===void 0&&(i=[0,0]),!t&&!this.indexesByKey(e)||this.matrix.current.length===0)return null;if(!this.shouldFocusChange(r))return this.matrix.current;var n=this.indexesByKey(e)||this.matrix.current.concat(i),a=n[0],o=n[1],l=n[2],h=n[3];if(this.parent.allowGrouping&&this.parent.groupSettings.columns.length&&this.parent.aggregates.length&&e==="enter")for(var p=a;p<this.matrix.matrix.length;p++){var d=this.getTable().rows[p+1];if(d&&d.cells[parseInt(o.toString(),10)]&&d.cells[parseInt(o.toString(),10)].classList.contains("e-rowcell"))return[p+1,o];if(p===this.matrix.matrix.length-1)return[a,o]}if(e==="ctrlEnd"||e==="end"){var u=[this.matrix.matrix.length-1,this.matrix.matrix[this.matrix.matrix.length-1].length-1];e==="end"&&(u=[a,this.matrix.matrix[parseInt(a.toString(),10)].length-1]),this.matrix.matrix[u[0]][u[1]]===0&&(u=tt(this.matrix.matrix,u,!1)),a=u[0],o=u[1]+1}var f=this.matrix.get(a,o,[l,h],e,this.validator());return f},s.prototype.onClick=function(e,i){var t=e.target;if(this.target=t,t=t.classList.contains(U)?t:k(t,"td"),t=t||k(e.target,"td.e-detailrowcollapse")||k(e.target,"td.e-detailrowexpand"),t=k(e.target,"td.e-detailcell")&&c(k(k(e.target,".e-grid"),"td.e-detailcell"))?null:t,t=t&&k(t,"table").classList.contains(gt)?t:null,!t)return!1;var r=t.parentElement.rowIndex;this.parent.editSettings.showAddNewRow&&b(t,"e-addedrow")&&(r=b(t,"e-addedrow").rowIndex);var n=[r,t.cellIndex],a=n[0],o=n[1],l=this.matrix.current,h=l[0],p=l[1],d=oe(a+"."+o,this.matrix.matrix);if(this.matrix.inValid(d)||!i&&h===a&&p===o||!b(e.target,U)&&!b(e.target,"e-groupcaption")&&!b(e.target,"e-recordpluscollapse")&&!b(e.target,"e-recordplusexpand")&&!b(e.target,"e-detailrowcollapse")&&!b(e.target,"e-detailrowexpand")&&!b(e.target,"e-templatecell"))return!1;this.matrix.select(a,o)},s.prototype.getFocusInfo=function(){var e={},i=this.matrix.current,t=i[0],r=t===void 0?0:t,n=i[1],a=n===void 0?0:n;this.matrix.current=[r,a];var o=this.getTable().rows[parseInt(r.toString(),10)];return e.element=c(o)?null:this.parent.editSettings.showAddNewRow&&o.classList.contains("e-addedrow")?o.querySelectorAll("td:not(.e-editcell)")[parseInt(a.toString(),10)]:o.cells[parseInt(a.toString(),10)],e.element&&(e.elementToFocus=(!e.element.classList.contains("e-unboundcell")||this.parent.editSettings.showAddNewRow&&e.element.classList.contains("e-unboundcell")&&b(e.element,"e-addedrow"))&&!e.element.classList.contains("e-detailcell")?this.getFocusable(e.element):e.element,e.elementToFocus=e.element.classList.contains("e-detailcell")&&e.element.querySelector(".e-childgrid")?e.element.querySelector(".e-childgrid"):e.elementToFocus,this.parent.editSettings.mode==="Batch"&&this.parent.isEdit&&e.elementToFocus.tagName.toLowerCase()==="input"&&e.elementToFocus.classList.contains("e-dropdownlist")&&(e.elementToFocus=e.elementToFocus.parentElement),e.outline=!0,e.uid=e.element.parentElement.getAttribute("data-uid")),e},s.prototype.getFocusable=function(e){var i='button, [href], input:not([type="hidden"]), select, textarea, [tabindex]:not([tabindex="-1"])',t=!c(k(e,".e-templatecell"));if(this.parent.isEdit){var r=this.parent.editSettings.showAddNewRow&&b(e,"e-addedrow")?", button:not(.e-hide)":"";i='input:not([type="hidden"]), select:not([aria-hidden="true"]), textarea'+r}var n=[].slice.call(e.querySelectorAll(i));return n.length?t&&n.length>1?this.target?this.target:e:n[0]:e},s.prototype.selector=function(e,i,t){var r=[M.Expand,M.GroupCaption,M.CaptionSummary,M.GroupSummary];return(e.isDataRow&&i.visible&&(i.isDataCell||i.isTemplate)||e.isDataRow&&i.cellType===M.DetailExpand&&c(i.visible)||!e.isDataRow&&r.indexOf(i.cellType)>-1&&!((i.cellType===M.GroupSummary||i.cellType===M.CaptionSummary)&&!(i.isDataCell&&i.visible))||i.column&&i.visible&&i.column.type==="checkbox"||i.cellType===M.CommandColumn||e.isDataRow&&t)&&!(e.edit==="delete"&&e.isDirty)},s.prototype.nextRowFocusValidate=function(e){for(var i=e,t=e,r=this.matrix.rows;t<=r;t++)if(this.matrix.matrix[parseInt(e.toString(),10)].indexOf(1)===-1)e=e+1;else return e;return this.lastIdxCell=!0,i},s.prototype.previousRowFocusValidate=function(e){for(var i=e,t=e,r=0;t>=r;t--)if(this.matrix.matrix[parseInt(e.toString(),10)].indexOf(1)===-1){if(e=e-1,e<0)return this.lastIdxCell=!0,i}else return e;return i},s.prototype.jump=function(e,i){this.lastIdxCell=!1;var t=this.parent.frozenRows!==0&&e==="shiftEnter",r=(e==="upArrow"||t)&&i[0]===0;e==="tab"&&this.matrix.matrix.length&&i[1]===this.matrix.matrix[i[0]].lastIndexOf(1)&&this.matrix.matrix.length-1!==i[0]&&(this.matrix.current[0]=this.nextRowFocusValidate(this.matrix.current[0]+1),this.matrix.current[1]=-1),e==="shiftTab"&&i[0]!==0&&this.matrix.matrix[i[0]].indexOf(1)===i[1]&&(this.matrix.current[0]=this.previousRowFocusValidate(this.matrix.current[0]-1),this.matrix.current[1]=this.matrix.matrix[i[0]].length);var n=!1,a=b(document.activeElement,"e-addedrow")&&this.parent.editSettings.showAddNewRow?b(document.activeElement,"e-addedrow"):document.activeElement.parentElement;if((this.parent.enableVirtualization||this.parent.infiniteScrollSettings.enableCache)&&!c(a)&&a.classList.contains(xe)){var o=parseInt(a.getAttribute(Z),10);n=o>0}var l={swap:n?!1:(e==="upArrow"||t)&&i[0]===0,toHeader:r};return l},s.prototype.getNextCurrent=function(e,i,t,r){e===void 0&&(e=[]);var n=[];return(r==="rightArrow"||r==="tab")&&(n[0]=e[0],n[1]=-1),(r==="downArrow"||r==="enter")&&(n[0]=-1,n[1]=e[1]),n},s.prototype.generateRows=function(e,i){var t,r=i.matrix,n=i.handlerInstance,a=n.matrix.matrix.length,o=this.parent.allowFiltering&&this.parent.filterSettings.type==="FilterBar"?a+1:a;n.matrix.matrix=n.matrix.matrix.slice(0,o),n.matrix.rows=o,(t=n.matrix.matrix).push.apply(t,r),n.matrix.rows+=r.length},s.prototype.getInfo=function(e){var i=this.getFocusInfo(),t=this.matrix.current,r=t[0],n=t[1],a=i.element.classList.contains(U),o=a||e&&e.action!=="enter"&&(i.element.classList.contains("e-detailrowcollapse")||i.element.classList.contains("e-detailrowexpand")),l=[Math.min(parseInt(i.element.parentElement.getAttribute(Z),10),r),Math.min(parseInt(i.element.getAttribute(pe),10),n)],h=l[0],p=l[1];return this.parent.allowGrouping&&this.parent.groupSettings.enableLazyLoading&&a&&(h=this.parent.getDataRows().indexOf(i.element.parentElement)),this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Top"&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&e&&e.action==="downArrow"&&h++,{isContent:!0,isDataCell:a,indexes:[h,p],isSelectable:o}},s.prototype.validator=function(){var e=this.getTable();return function(i,t,r){if(!c(e.rows[parseInt(i.toString(),10)])){var n=void 0;t=e.querySelector(".e-emptyrow")?0:t,e.rows[parseInt(i.toString(),10)].cells[0].classList.contains("e-editcell")?n=e.rows[parseInt(i.toString(),10)].cells[0].querySelectorAll("td")[parseInt(t.toString(),10)]:n=e.rows[parseInt(i.toString(),10)].cells[parseInt(t.toString(),10)];var a=n.getBoundingClientRect().width!==0;if(r==="enter"||r==="shiftEnter")return a&&n.classList.contains(U);if((r==="shiftUp"||r==="shiftDown")&&n.classList.contains(U))return a;if(r!=="shiftUp"&&r!=="shiftDown")return a}return!1}},s.prototype.shouldFocusChange=function(e){var i=this.matrix.current,t=i[0],r=t===void 0?-1:t,n=i[1],a=n===void 0?-1:n;if(r<0||a<0)return!0;var o=oe(r+".cells."+a,this.getTable().rows);return o&&(e.action==="enter"||e.action==="shiftEnter")?o.classList.contains(U)&&!o.classList.contains("e-unboundcell")||o.classList.contains("e-editedbatchcell")&&!o.classList.contains("e-detailcell"):!0},s.prototype.getGridSeletion=function(){return this.parent.allowSelection&&this.parent.selectionSettings.allowColumnSelection},s}(),hh=function(s){ah(e,s);function e(i){return s.call(this,i)||this}return e.prototype.getTable=function(){return this.parent.getHeaderTable()},e.prototype.onClick=function(i){var t=i.target;if(this.target=t,t=t.classList.contains("e-headercell")?t:k(t,"th"),!t&&(this.parent.frozenRows!==0||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.parent.editSettings.showAddNewRow)&&(t=i.target.classList.contains(U)?i.target:k(i.target,"td")),i.target.classList.contains("e-columnheader")||i.target.querySelector(".e-stackedheadercell"))return!1;if(t){var r=t.parentElement.rowIndex;this.parent.editSettings.showAddNewRow&&b(t,"e-addedrow")&&(r=b(t,"e-addedrow").rowIndex);var n=[r,t.cellIndex],a=n[0],o=n[1],l=oe(a+"."+o,this.matrix.matrix);if(this.matrix.inValid(l))return!1;this.matrix.select(r,t.cellIndex)}},e.prototype.getFocusInfo=function(){var i={},t=this.matrix.current,r=t[0],n=r===void 0?0:r,a=t[1],o=a===void 0?0:a,l=this.getTable().rows[parseInt(n.toString(),10)];return i.element=c(l)?null:this.parent.editSettings.showAddNewRow&&l.classList.contains("e-addedrow")?l.querySelectorAll("td:not(.e-editcell)")[parseInt(o.toString(),10)]:l.cells[parseInt(o.toString(),10)],c(i.element)||(i.elementToFocus=this.getFocusable(i.element),i.outline=!i.element.classList.contains("e-filterbarcell")),i},e.prototype.selector=function(i,t){return t.visible&&(t.column.field!==void 0||t.isTemplate||!c(t.column.template)||!c(t.column.commands))||t.column.type==="checkbox"||t.cellType===M.StackedHeader},e.prototype.jump=function(i,t){var r=this.parent.frozenRows!==0&&i==="enter",n,a;return this.parent.enableHeaderFocus&&i==="tab"&&(a=this.matrix.matrix.length-1===t[0],n=t[1]===this.matrix.matrix[t[0]].lastIndexOf(1),n&&(a?this.matrix.current[0]=0:this.matrix.current[0]=this.matrix.current[0]+1,this.matrix.current[1]=-1)),{swap:(i==="downArrow"||r)&&t[0]===this.matrix.matrix.length-1||i==="tab"&&a&&n}},e.prototype.getNextCurrent=function(i,t,r,n){i===void 0&&(i=[]);var a=[];return(n==="rightArrow"||n==="shiftRight"&&this.getGridSeletion()||n==="tab")&&(a[0]=i[0],a[1]=-1),(n==="upArrow"||n==="shiftEnter")&&(a[0]=this.matrix.matrix.length,a[1]=i[1]),a},e.prototype.generateRows=function(i){var t=this.matrix.matrix.length;if(this.parent.allowFiltering&&this.parent.filterSettings.type==="FilterBar"){this.matrix.rows=++this.matrix.rows;for(var r=i[0].cells,n=0,a=0;a<r.length;a++)r[parseInt(a.toString(),10)].column&&r[parseInt(a.toString(),10)].column.columns?n=this.checkFilterColumn(r[parseInt(a.toString(),10)].column.columns,t,n):(this.matrix.set(t,n,r[parseInt(a.toString(),10)].visible&&r[parseInt(a.toString(),10)].column.allowFiltering!==!1),n++)}},e.prototype.checkFilterColumn=function(i,t,r){for(var n=i,a=r,o=0;o<n.length;o++)n[parseInt(o.toString(),10)].columns?a=this.checkFilterColumn(n[parseInt(o.toString(),10)].columns,t,a):(this.matrix.set(t,a,n[parseInt(o.toString(),10)].visible&&n[parseInt(o.toString(),10)].allowFiltering!==!1),a++);return a},e.prototype.getInfo=function(i){return O(s.prototype.getInfo.call(this,i),{isContent:!1,isHeader:!0})},e.prototype.validator=function(){return function(){return!0}},e.prototype.shouldFocusChange=function(i){var t=this.matrix.current,r=t[0],n=t[1];if(r<0||n<0)return!0;var a=oe(r+".cells."+n,this.getTable().rows);return a&&(i.action==="enter"||i.action==="altDownArrow")?!a.classList.contains("e-headercell"):!0},e.prototype.getHeaderType=function(){return"HeaderFocus"},e}(Ca);var ph=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Ht=function(s,e,i,t){var r=arguments.length,n=r<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,i):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,e,i,t);else for(var o=s.length-1;o>=0;o--)(a=s[o])&&(n=(r<3?a(n):r>3?a(e,i,n):a(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n},dh=function(s){ph(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return Ht([w(12)],e.prototype,"pageSize",void 0),Ht([w(8)],e.prototype,"pageCount",void 0),Ht([w(1)],e.prototype,"currentPage",void 0),Ht([w()],e.prototype,"totalRecordsCount",void 0),Ht([w(!1)],e.prototype,"enableQueryString",void 0),Ht([w(!1)],e.prototype,"pageSizes",void 0),Ht([w(null)],e.prototype,"template",void 0),e}(ue),ch=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),Ys=function(s,e,i,t){var r=arguments.length,n=r<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,i):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,e,i,t);else for(var o=s.length-1;o>=0;o--)(a=s[o])&&(n=(r<3?a(n):r>3?a(e,i,n):a(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n},uh=function(s){ch(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return Ys([w("startsWith")],e.prototype,"operator",void 0),Ys([w(!1)],e.prototype,"ignoreAccent",void 0),e}(ue),wa=function(){function s(e,i,t){this.selectedRowIndexes=[],this.selectedRowCellIndexes=[],this.selectedRecords=[],this.preventFocus=!1,this.selectedColumnsIndexes=[],this.checkBoxState=!1,this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1,this.isMultiCtrlRequestCell=!1,this.enableSelectMultiTouch=!1,this.clearRowCheck=!1,this.selectRowCheck=!1,this.selectedRowState={},this.unSelectedRowState={},this.totalRecordsCount=0,this.chkAllCollec=[],this.isCheckedOnAdd=!1,this.persistSelectedData=[],this.deSelectedData=[],this.isHdrSelectAllClicked=!1,this.needColumnSelection=!1,this.isCancelDeSelect=!1,this.isPreventCellSelect=!1,this.disableUI=!1,this.isPersisted=!1,this.cmdKeyPressed=!1,this.cellselected=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.initialRowSelection=!1,this.isPrevRowSelection=!1,this.isKeyAction=!1,this.isRowDragSelected=!1,this.isPartialSelection=!1,this.rmtHdrChkbxClicked=!1,this.isCheckboxReset=!1,this.autoFillRLselection=!0,this.bottom="0 0 2px 0",this.top="2px 0 0 0",this.right_bottom="0 2px 2px 0",this.bottom_left="0 0 2px 2px",this.top_right="2px 2px 0 0",this.top_left="2px 0 0 2px",this.top_bottom="2px 0 2px 0",this.top_right_bottom="2px 2px 2px 0",this.top_bottom_left="2px 0 2px 2px",this.top_right_left="2px 2px 0 2px",this.right_bottom_left="0 2px 2px 2px",this.all_border="2px",this.parent=e,this.selectionSettings=i,this.factory=t.getService("rendererFactory"),this.focus=t.getService("focus"),this.addEventListener(),this.wireEvents()}return s.prototype.initializeSelection=function(){this.parent.log("selection_key_missing"),this.render()},s.prototype.onActionBegin=function(e,i){this.parent.trigger(i,this.fDataUpdate(e))},s.prototype.fDataUpdate=function(e){if(!this.isMultiSelection&&(!c(e.cellIndex)||!c(e.rowIndex))){var i=this.getRowObj(c(e.rowIndex)?c(e.cellIndex)?this.currentIndex:e.cellIndex.rowIndex:e.rowIndex);e.foreignKeyData=i.foreignKeyData}return e},s.prototype.onActionComplete=function(e,i){this.parent.trigger(i,this.fDataUpdate(e)),this.isMultiSelection=!1},s.prototype.getModuleName=function(){return"selection"},s.prototype.destroy=function(){var e=this.parent.element;!e||!e.querySelector("."+ze)&&!e.querySelector("."+mt)||(this.hidePopUp(),this.clearSelection(),this.destroyAutoFillElements(),this.removeEventListener(),this.unWireEvents(),x.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),x.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler))},s.prototype.isEditing=function(){return(this.parent.editSettings.mode==="Normal"||this.parent.editSettings.mode==="Batch"&&this.parent.editModule&&this.parent.editModule.formObj&&!this.parent.editModule.formObj.validate())&&this.parent.isEdit&&!this.parent.editSettings.showAddNewRow&&!this.parent.isPersistSelection},s.prototype.getCurrentBatchRecordChanges=function(){var e=this.parent;if(e.editSettings.mode==="Batch"&&e.editModule){var i=_r(this.parent.getCurrentViewRecords());i=e.editSettings.newRowPosition==="Bottom"?i.concat(this.parent.editModule.getBatchChanges()[hr]):this.parent.editModule.getBatchChanges()[hr].concat(i);for(var t=this.parent.editModule.getBatchChanges()[ua],r=this.parent.getPrimaryKeyFieldNames()[0],n=0;n<t.length;n++)for(var a=0;a<i.length;a++)if(t[parseInt(n.toString(),10)][""+r]===i[parseInt(a.toString(),10)][""+r]){i.splice(a,1);break}return i}else if(this.parent.enableVirtualization&&this.parent.groupSettings.columns.length&&!this.parent.isPersistSelection){var o=e.getCurrentViewRecords().filter(function(l){return l.key===void 0});return o}else return e.getCurrentViewRecords()},s.prototype.selectRow=function(e,i){if(this.selectedRowIndexes.length&&this.selectionSettings.enableSimpleMultiRowSelection){this.addRowsToSelection([e]);return}var t=this.parent,r=t.getRowByIndex(e),n=r&&t.getRowObjectFromUID(r.getAttribute("data-uid"));if(!(this.isPartialSelection&&n&&n.isDataRow&&!n.isSelectable)){var a,o=!1;if(t.enableVirtualization&&e>-1){var l={selectedIndex:e,isAvailable:!0};if(this.parent.notify(No,l),r&&t.getRowObjectFromUID(r.getAttribute("data-uid")))a=t.getRowObjectFromUID(r.getAttribute("data-uid")).data;else{if(l.isAvailable&&!t.selectionSettings.persistSelection){var h=this.parent.getSelectedRecords();h.length>0&&this.clearRowSelection()}return}}else a=this.getRowObj(e).data;if(!(!this.isRowType()||!r||this.isEditing())){var p=r.hasAttribute("aria-selected");this.activeTarget(),i=i&&(this.selectedRowIndexes.length&&this.selectedRowIndexes.length===1?this.isKeyAction&&this.parent.isCheckBoxSelection?!1:e===this.selectedRowIndexes[0]:!1),this.isKeyAction=!1;var d,u="cancel";i?this.rowSelectingCallBack(d,i,e,a,o,p,u)(d):(d={data:a,rowIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,row:r,previousRow:t.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked},this.parent.trigger(qr,this.fDataUpdate(d),this.rowSelectingCallBack(d,i,e,a,o,p,u)))}}},s.prototype.rowSelectingCallBack=function(e,i,t,r,n,a,o){var l=this;return function(h){if(!c(h)&&h[""+o]===!0){l.disableInteracted();return}l.index=t,l.toggle=i,l.data=r,l.removed=n,a&&l.selectionSettings.persistSelection&&l.selectionSettings.checkboxMode!=="ResetOnRowClick"?(l.clearSelectedRow(t),l.selectRowCallBack()):!a&&l.selectionSettings.persistSelection&&l.selectionSettings.checkboxMode!=="ResetOnRowClick"&&l.selectRowCallBack(),l.selectionSettings.checkboxMode==="ResetOnRowClick"&&(l.isCheckboxReset=!0,l.clearSelection()),(!l.selectionSettings.persistSelection||l.selectionSettings.checkboxMode==="ResetOnRowClick"||!l.parent.isCheckBoxSelection&&l.selectionSettings.persistSelection)&&(l.selectRowCheck=!0,l.clearRow())}},s.prototype.selectRowCallBack=function(){var e=this.parent,i,t=this.index,r=this.toggle,n=this.data,a=this.removed,o=e.getRowByIndex(t);!r&&!a&&(this.selectedRowIndexes.indexOf(t)<=-1&&this.updateRowSelection(o,t),this.selectRowIndex(t)),r||(i={data:n,rowIndex:t,row:o,previousRow:e.getRowByIndex(this.prevRowIndex),previousRowIndex:this.prevRowIndex,target:this.actualTarget,isInteracted:this.isInteracted,isHeaderCheckBoxClicked:this.isHeaderCheckboxClicked,rowIndexes:t},this.onActionComplete(i,Hr)),this.isInteracted=!1,this.updateRowProps(t)},s.prototype.selectRowsByRange=function(e,i){this.selectRows(this.getCollectionFromIndexes(e,i)),this.selectRowIndex(i)},s.prototype.selectedDataUpdate=function(e,i,t,r,n){for(var a=0,o=r.length;a<o;a++){var l=this.parent.getDataRows()[r[parseInt(a.toString(),10)]];this.parent.enableVirtualization&&(l=this.parent.getRowByIndex(r[parseInt(a.toString(),10)]));var h=this.getRowObj(l);h&&h.isDataRow&&h.isSelectable?(e.push(h.data),t.push(l),i.push(h.foreignKeyData)):this.isPartialSelection&&n&&n.splice(n.indexOf(r[parseInt(a.toString(),10)]),1)}},s.prototype.selectRows=function(e){var i=this,t=this.parent,r=e.slice(),n=this.isSingleSel()?e[e.length-1]:e[0];this.isMultiSelection=!0;var a=[],o=[],l="cancel",h=[];if(!(!this.isRowType()||this.isEditing())){this.selectedDataUpdate(h,o,a,e,r),this.activeTarget();var p={cancel:!1,rowIndexes:r,row:a,rowIndex:n,target:this.actualTarget,prevRow:t.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isInteracted:this.isInteracted,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,data:h,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,foreignKeyData:o};this.parent.trigger(qr,this.fDataUpdate(p),function(d){if(!c(d)&&d[""+l]===!0){i.disableInteracted();return}t.allowRowDragAndDrop&&i.isDragged&&i.selectionSettings.persistSelection||i.clearRow(),i.selectRowIndex(r.slice(-1)[0]);var u=function(y,S){i.updateRowSelection(t.getRowByIndex(y),y,S),i.updateRowProps(n)};if(i.isSingleSel())u(n);else for(var f=0,m=r;f<m.length;f++){var g=m[f];u(g,!!t.enableVirtualization)}d={rowIndexes:r,row:a,rowIndex:n,target:i.actualTarget,prevRow:t.getRows()[i.prevRowIndex],previousRowIndex:i.prevRowIndex,data:i.getSelectedRecords(),isInteracted:i.isInteracted,isHeaderCheckboxClicked:i.isHeaderCheckboxClicked,foreignKeyData:o},i.isRowSelected&&i.onActionComplete(d,Hr),i.isInteracted=!1})}},s.prototype.addRowsToSelection=function(e){var i=this.parent,t="cancel",r=this.target;this.isMultiSelection=!0;var n=[],a=[],o=[],l=i.getSelectedRowIndexes().concat(e),h=this.isSingleSel()?i.getRowByIndex(e[e.length-1]):i.getRowByIndex(e[0]);if(!((!this.isRowType()||this.isEditing())&&!this.selectionSettings.checkboxOnly)){var p,d=this.parent.getColumns().filter(function(S){return S.type==="checkbox"});this.isMultiCtrlRequest&&!d.length&&this.selectedDataUpdate(o,a,n,l);for(var u=0,f=e;u<f.length;u++){var m=f[u],g=this.getRowObj(m),y=this.selectedRowIndexes.indexOf(m)>-1;if(!(this.isPartialSelection&&g&&g.isDataRow&&!g.isSelectable)){if(this.selectRowIndex(m),y&&(d.length||this.selectionSettings.enableToggle||this.isMultiCtrlRequest)){if(this.isAddRowsToSelection=!0,this.rowDeselect(xs,[m],[g.data],[h],[g.foreignKeyData],r),this.isCancelDeSelect)return;this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(m),1),this.selectedRecords.splice(this.selectedRecords.indexOf(h),1),this.selectRowIndex(this.selectedRowIndexes.length?this.selectedRowIndexes[this.selectedRowIndexes.length-1]:-1),h.removeAttribute("aria-selected"),this.addRemoveClassesForRow(h,!1,null,"e-selectionbackground","e-active"),this.rowDeselect(Rs,[m],[g.data],[h],[g.foreignKeyData],r,void 0,void 0,void 0),this.isInteracted=!1,this.isMultiSelection=!1,this.isAddRowsToSelection=!1,this.isHdrSelectAllClicked=!1}else{if(this.activeTarget(),p={cancel:!1,data:o.length?o:g.data,rowIndex:m,row:n.length?n:h,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,foreignKeyData:a.length?a:g.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},this.parent.trigger(qr,this.fDataUpdate(p)),!c(p)&&p[""+t]===!0){this.disableInteracted();return}this.isSingleSel()&&this.clearRow(),this.updateRowSelection(h,m)}if(y||(p={data:o.length?o:g.data,rowIndex:m,row:n.length?n:h,target:this.actualTarget,prevRow:i.getRows()[this.prevRowIndex],previousRowIndex:this.prevRowIndex,foreignKeyData:a.length?a:g.foreignKeyData,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked,rowIndexes:l},this.onActionComplete(p,Hr)),this.isInteracted=!1,this.updateRowProps(m),this.isSingleSel())break}}}},s.prototype.getCollectionFromIndexes=function(e,i){for(var t=[],r=e<=i?{i:e,max:i}:{i,max:e},n=r.i,a=r.max;n<=a;n++)t.push(n);return e>i&&t.reverse(),t},s.prototype.clearRow=function(){this.clearRowCheck=!0,this.clearRowSelection()},s.prototype.clearRowCallBack=function(){this.isCancelDeSelect&&this.parent.checkAllRows!=="Check"||(this.selectedRowIndexes=[],this.selectedRecords=[],this.selectRowIndex(-1),this.isSingleSel()&&this.parent.isPersistSelection&&(this.selectedRowState={}))},s.prototype.clearSelectedRow=function(e){if(this.toggle){var i=this.parent.getRowByIndex(e);this.disableUI||(i.removeAttribute("aria-selected"),this.addRemoveClassesForRow(i,!1,!0,"e-selectionbackground","e-active")),this.removed=!0,this.updatePersistCollection(i,!1),this.updateCheckBoxes(i),this.selectedRowIndexes.splice(this.selectedRowIndexes.indexOf(e),1),this.selectedRecords.splice(this.selectedRecords.indexOf(this.parent.getRowByIndex(e)),1)}},s.prototype.updateRowProps=function(e){this.prevRowIndex=e,this.isRowSelected=this.selectedRowIndexes.length&&!0},s.prototype.getPkValue=function(e,i){return e&&_h(e)?Dt(e,i):i[""+e]},s.prototype.updatePersistCollection=function(e,i){var t=this;if((this.parent.isPersistSelection||this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0)&&!c(e)){this.parent.isPersistSelection||this.ensureCheckboxFieldSelection();var r=this.getRowObj(e),n=r.data?this.getPkValue(this.primaryKey,r.data):null;if(n===null)return;r.isSelected=i,i&&!this.isPartialSelection||this.isPartialSelection&&r.isSelectable&&r.isSelected?(this.selectedRowState[""+n]=i,delete this.unSelectedRowState[""+n],this.persistSelectedData.some(function(a){return t.getPkValue(t.primaryKey,a)===n})||this.persistSelectedData.push(r.data)):this.updatePersistDelete(n)}},s.prototype.updatePersistDelete=function(e,i){var t=this;delete this.selectedRowState[""+e],this.rmtHdrChkbxClicked&&(this.unSelectedRowState[""+e]=!0);var r,n=this.persistSelectedData.some(function(a,o){return r=o,t.getPkValue(t.primaryKey,a)===e});n&&(this.persistSelectedData.splice(r,1),i&&this.parent.partialSelectedRecords.splice(r,1))},s.prototype.updateCheckBoxes=function(e,i,t){if(!c(e)){var r=e.querySelector(".e-checkselect");c(r)||(rr(r.nextElementSibling,i),_t(r,i),(c(this.checkedTarget)||!c(this.checkedTarget)&&!this.checkedTarget.classList.contains("e-checkselectall"))&&this.setCheckAllState(t))}},s.prototype.updateRowSelection=function(e,i,t){if(e&&(this.selectedRowIndexes.indexOf(i)===-1&&(this.selectedRowIndexes.push(i),this.selectedRecords.push(e)),e.setAttribute("aria-selected","true"),this.updatePersistCollection(e,!0),this.updateCheckBoxes(e,!0),this.addRemoveClassesForRow(e,!0,null,"e-selectionbackground","e-active"),!this.preventFocus)){var r=this.focus.getPrevIndexes().cellIndex?e.cells[this.focus.getPrevIndexes().cellIndex]:e.querySelector(".e-selectionbackground:not(.e-hide):not(.e-detailrowcollapse):not(.e-detailrowexpand)");if(this.parent.contextMenuModule&&this.mouseButton===2&&(r=this.parent.contextMenuModule.cell),!r||t)return;this.focus.onClick({target:r},!0)}},s.prototype.clearSelection=function(){if(this.checkSelectAllClicked=!0,this.selectionSettings.persistSelection&&this.persistSelectedData.length&&(this.deSelectedData=_r(this.persistSelectedData)),!this.parent.isPersistSelection||this.parent.isPersistSelection&&!this.parent.isEdit||!c(this.checkedTarget)&&this.checkedTarget.classList.contains("e-checkselectall")){var e=this.parent.element.querySelector(".e-gridpopup").querySelector("span");e.classList.contains("e-rowselect")&&e.classList.remove("e-spanclicked"),this.parent.isPersistSelection&&(this.persistSelectedData=[],this.selectedRowState={}),this.clearRowSelection(),this.clearCellSelection(),this.clearColumnSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0,this.enableSelectMultiTouch=!1,this.isInteracted=!1,this.checkSelectAllClicked=!1,this.isHdrSelectAllClicked=!1}},s.prototype.clearRowSelection=function(){var e=this;if(this.isRowSelected){for(var i=this.parent.getDataRows(),t=[],r=[],n=[],a=[],o=this.target,l=0,h=this.selectedRowIndexes.length;l<h;l++){var p=this.parent.editSettings.mode==="Batch"?this.parent.getRows()[this.selectedRowIndexes[parseInt(l.toString(),10)]]:this.parent.getDataRows()[this.selectedRowIndexes[parseInt(l.toString(),10)]],d=this.getRowObj(p);d&&(t.push(d.data),r.push(p),n.push(this.selectedRowIndexes[parseInt(l.toString(),10)]),a.push(d.foreignKeyData))}this.selectionSettings.persistSelection&&this.selectionSettings.checkboxMode!=="ResetOnRowClick"&&(this.isRowClicked=!!this.checkSelectAllClicked),this.rowDeselect(xs,n,t,r,a,o,null,function(){if(e.isCancelDeSelect&&(e.isRowClicked||e.checkSelectAllClicked||e.isInteracted&&!e.parent.isPersistSelection)){if(e.parent.isPersistSelection)if(e.getCheckAllStatus(e.parent.element.querySelector(".e-checkselectall"))==="Intermediate")for(var u=0;u<e.selectedRecords.length;u++)e.updatePersistCollection(e.selectedRecords[parseInt(u.toString(),10)],!0);else e.parent.checkAllRows="Check",e.updatePersistSelectedData(!0);e.clearRowCheck&&(e.clearRowCallBack(),e.clearRowCheck=!1,e.selectRowCheck&&(e.selectRowCallBack(),e.selectRowCheck=!1));return}for(var f=[].slice.call(i.filter(function(g){return g.hasAttribute("aria-selected")})),m=0;m<f.length;m++)e.disableUI||(f[parseInt(m.toString(),10)].removeAttribute("aria-selected"),e.addRemoveClassesForRow(f[parseInt(m.toString(),10)],!1,!0,"e-selectionbackground","e-active")),e.isPrevRowSelection||e.updatePersistCollection(f[parseInt(m.toString(),10)],!1),e.updateCheckBoxes(f[parseInt(m.toString(),10)]);e.selectedRowIndexes=[],e.selectedRecords=[],e.isRowSelected=!1,e.selectRowIndex(-1),e.isPrevRowSelection=!1,e.rowDeselect(Rs,n,t,r,a,o,null,void 0,null),e.clearRowCheck&&(e.clearRowCallBack(),e.clearRowCheck=!1,e.selectRowCheck&&(e.selectRowCallBack(),e.selectRowCheck=!1))},null)}else this.clearRowCheck&&(this.clearRowCallBack(),this.clearRowCheck=!1,this.selectRowCheck&&(this.selectRowCallBack(),this.selectRowCheck=!1))},s.prototype.rowDeselect=function(e,i,t,r,n,a,o,l,h){var p=this;if(this.selectionSettings.persistSelection&&(this.isRowClicked||this.checkSelectAllClicked||this.focus.activeKey&&this.focus.currentInfo.element.classList.contains("e-gridchkbox")&&this.focus.activeKey==="space")||!this.selectionSettings.persistSelection){var d="cancel",u=i.length===1&&this.deSelectedData.length===1,f={rowIndex:i[0],data:this.selectionSettings.persistSelection&&this.parent.checkAllRows==="Uncheck"&&!u&&this.selectionSettings.checkboxMode!=="ResetOnRowClick"?this.deSelectedData:t,foreignKeyData:n,cancel:!1,isInteracted:this.isInteracted,isHeaderCheckboxClicked:this.isHeaderCheckboxClicked};e==="rowDeselected"&&delete f.cancel;var m="row",g="target",y="rowIndex",S="rowIndexes",I="data",C="foreignKeyData";f[""+m]=r,f[""+g]=this.actualTarget;var R=this.actualTarget&&!c(k(this.actualTarget,"thead"));R||i.length>1?(f[""+y]=i[0],f[""+S]=i):i.length===1&&(f[""+I]=f[""+I][0],f[""+m]=f[""+m][0],f[""+C]=f[""+C][0],this.isAddRowsToSelection&&(f[""+S]=i)),this.parent.trigger(e,f,function(T){p.isCancelDeSelect=T[""+d],(!p.isCancelDeSelect||!p.isRowClicked&&!p.isInteracted&&!p.checkSelectAllClicked)&&(p.updatePersistCollection(r[0],!1),p.updateCheckBoxes(r[0],void 0,i[0])),l!==void 0&&l()})}else this.selectionSettings.persistSelection&&!this.isInteracted&&l!==void 0&&l()},s.prototype.getRowObj=function(e){return e===void 0&&(e=this.currentIndex),c(e)?{}:(typeof e=="number"&&(e=this.parent.getRowByIndex(e)),e?this.parent.getRowObjectFromUID(e.getAttribute("data-uid"))||{}:{})},s.prototype.selectCell=function(e,i){if(this.isCellType()){var t=this.parent,r,n=t.getCellFromIndex(e.rowIndex,this.getColIndex(e.rowIndex,e.cellIndex));this.currentIndex=e.rowIndex;var a=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(!this.isCellType()||!n||this.isEditing())){var o=n.classList.contains("e-cellselectionbackground");if(i=i&&!Ae(this.prevCIdxs)&&e.rowIndex===this.prevCIdxs.rowIndex&&e.cellIndex===this.prevCIdxs.cellIndex&&o,i)this.successCallBack(r,i,e,n,a)(r);else{r={data:a,cellIndex:e,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,cancel:!1};var l="currentCell";r[""+l]=n;var h="previousRowCellIndex";r[""+h]=this.prevECIdxs,this.parent.trigger(wi,this.fDataUpdate(r),this.successCallBack(r,i,e,n,a)),this.cellselected=!0}}}},s.prototype.successCallBack=function(e,i,t,r,n){var a=this;return function(o){var l="cancel",h="currentCell";if(!(!c(o)&&o[""+l]===!0)&&(i||(o[""+h]=o[""+h]?o[""+h]:r),a.clearCell(),i||a.updateCellSelection(r,t.rowIndex,t.cellIndex),!i)){var p={data:n,cellIndex:t,currentCell:r,selectedRowCellIndex:a.selectedRowCellIndexes,previousRowCell:a.prevECIdxs?a.getCellIndex(a.prevECIdxs.rowIndex,a.prevECIdxs.cellIndex):void 0},d="previousRowCellIndex";p[""+d]=a.prevECIdxs,a.updateCellProps(t,t),a.onActionComplete(p,Ki)}}},s.prototype.getCellIndex=function(e,i){return this.parent.getCellFromIndex(e,i)},s.prototype.selectCellsByRange=function(e,i){var t=this;if(this.isCellType()){var r=this.parent,n=this.parent.isSpan?Zs(this.parent,e.rowIndex,e.cellIndex):r.getCellFromIndex(e.rowIndex,e.cellIndex),a,o,l=e,h=i=i||e,p;this.currentIndex=e.rowIndex;var d="cancel",u=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){var f={data:u,cellIndex:e,currentCell:n,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},m="previousRowCellIndex";f[""+m]=this.prevECIdxs,this.parent.trigger(wi,this.fDataUpdate(f),function(g){if(!(!c(g)&&g[""+d]===!0)){if(t.clearCell(),e.rowIndex>i.rowIndex){var y=e;e=i,i=y}for(var S=e.rowIndex;S<=i.rowIndex;S++){t.selectionSettings.cellSelectionMode.indexOf("Box")<0?(a=S===e.rowIndex?e.cellIndex:0,o=S===i.rowIndex?i.cellIndex:t.getLastColIndex(S)):(a=e.cellIndex,o=i.cellIndex),p=[];for(var I=a<o?a:o,C=a>o?a:o;I<=C;I++)n=t.parent.isSpan?Zs(r,S,I):r.getCellFromIndex(S,I),n&&(p.push(I),t.updateCellSelection(n),t.addAttribute(n));t.selectedRowCellIndexes.push({rowIndex:S,cellIndexes:p})}var R={data:u,cellIndex:h,currentCell:r.getCellFromIndex(h.rowIndex,h.cellIndex),selectedRowCellIndex:t.selectedRowCellIndexes,previousRowCell:t.prevECIdxs?t.getCellIndex(t.prevECIdxs.rowIndex,t.prevECIdxs.cellIndex):void 0},T="previousRowCellIndex";R[""+T]=t.prevECIdxs,t.isDragged||(t.onActionComplete(R,Ki),t.cellselected=!0),t.updateCellProps(l,h)}})}}},s.prototype.selectCells=function(e){if(this.isCellType()){var i=this.parent,t=i.getCellFromIndex(e[0].rowIndex,e[0].cellIndexes[0]);this.currentIndex=e[0].rowIndex;var r=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){var n={data:r,cellIndex:e[0].cellIndexes[0],currentCell:t,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},a="previousRowCellIndex";n[""+a]=this.prevECIdxs,this.onActionBegin(n,wi);for(var o=0,l=e.length;o<l;o++)for(var h=0,p=e[parseInt(o.toString(),10)].cellIndexes.length;h<p;h++)t=i.getCellFromIndex(e[parseInt(o.toString(),10)].rowIndex,e[parseInt(o.toString(),10)].cellIndexes[parseInt(h.toString(),10)]),t&&(this.updateCellSelection(t),this.addAttribute(t),this.addRowCellIndex({rowIndex:e[parseInt(o.toString(),10)].rowIndex,cellIndex:e[parseInt(o.toString(),10)].cellIndexes[parseInt(h.toString(),10)]}));this.updateCellProps({rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]},{rowIndex:e[0].rowIndex,cellIndex:e[0].cellIndexes[0]});var d={data:r,cellIndex:e[0].cellIndexes[0],currentCell:t,selectedRowCellIndex:this.selectedRowCellIndexes,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},u="previousRowCellIndex";d[""+u]=this.prevECIdxs,this.onActionComplete(d,Ki)}}},s.prototype.addCellsToSelection=function(e){if(this.isCellType()){var i=this.parent,t,r;this.currentIndex=e[0].rowIndex;var n="cancel",a=this.getCurrentBatchRecordChanges()[this.currentIndex];if(!(this.isSingleSel()||!this.isCellType()||this.isEditing())){this.hideAutoFill();var o;o=i.getRowsObject()[e[0].rowIndex],i.groupSettings.columns.length>0&&(o=i.getRowObjectFromUID(this.target.parentElement.getAttribute("data-uid")));for(var l=[],h=0,p=e;h<p.length;h++){for(var d=p[h],u=0,f=this.selectedRowCellIndexes.length;u<f;u++)if(this.selectedRowCellIndexes[parseInt(u.toString(),10)].rowIndex===d.rowIndex){r=u;break}t=i.getCellFromIndex(d.rowIndex,this.getColIndex(d.rowIndex,d.cellIndex));var m=d.cellIndex;i.groupSettings.columns.length>0?l.push(o.cells[m+i.groupSettings.columns.length].foreignKeyData):l.push(o.cells[parseInt(m.toString(),10)].foreignKeyData);var g={cancel:!1,data:a,cellIndex:e[0],isShiftPressed:this.isMultiShiftRequest,currentCell:t,isCtrlPressed:this.isMultiCtrlRequest,previousRowCell:this.prevECIdxs?i.getCellFromIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0},y="previousRowCellIndex";g[""+y]=this.prevECIdxs;var S=r>-1;if(S){var I=this.selectedRowCellIndexes[parseInt(r.toString(),10)].cellIndexes;I.indexOf(d.cellIndex)>-1||this.selectionSettings.mode==="Both"&&t.classList.contains("e-gridchkbox")&&!t.getAttribute("aria-selected")?(this.cellDeselect(Ds,[{rowIndex:d.rowIndex,cellIndexes:[d.cellIndex]}],a,[t],l),I.splice(I.indexOf(d.cellIndex),1),I.length===0&&this.selectedRowCellIndexes.splice(r,1),t.classList.remove("e-cellselectionbackground"),t.removeAttribute("aria-selected"),this.cellDeselect(Fs,[{rowIndex:d.rowIndex,cellIndexes:[d.cellIndex]}],a,[t],l)):(S=!1,this.onActionBegin(g,wi),this.addRowCellIndex({rowIndex:d.rowIndex,cellIndex:d.cellIndex}),this.updateCellSelection(t),this.addAttribute(t))}else{if(this.onActionBegin(g,wi),!c(g)&&g[""+n]===!0)return;this.updateCellSelection(t,d.rowIndex,d.cellIndex)}if(!S){var C={data:a,cellIndex:e[0],currentCell:t,previousRowCell:this.prevECIdxs?this.getCellIndex(this.prevECIdxs.rowIndex,this.prevECIdxs.cellIndex):void 0,selectedRowCellIndex:this.selectedRowCellIndexes};C[""+y]=this.prevECIdxs,this.onActionComplete(C,Ki),this.cellselected=!0}this.updateCellProps(d,d)}}}},s.prototype.getColIndex=function(e,i){var t=this.parent.getColumnByIndex(i),r=La(this.parent,t,e);if(r)for(var n=0;n<r.length;n++){var a=parseInt(r[parseInt(n.toString(),10)].getAttribute(pe),10);if(a===i)return n}return-1},s.prototype.getLastColIndex=function(e){var i=this.parent.getDataRows()[parseInt(e.toString(),10)].querySelectorAll("td.e-rowcell");return parseInt(i[i.length-1].getAttribute(pe),10)},s.prototype.clearCell=function(){this.clearCellSelection()},s.prototype.cellDeselect=function(e,i,t,r,n){var a="cancel";if(r&&r.length>0)for(var o=0,l=r;o<l.length;o++){var h=l[o];h&&h.classList.contains(oi)&&this.updateCheckBoxes(k(h,"tr"))}var p={cells:r,data:t,cellIndexes:i,foreignKeyData:n,cancel:!1};this.parent.trigger(e,p),this.isPreventCellSelect=p[""+a]},s.prototype.updateCellSelection=function(e,i,t){c(i)||this.addRowCellIndex({rowIndex:i,cellIndex:t}),e.classList.add("e-cellselectionbackground"),e.classList.contains(oi)&&this.updateCheckBoxes(k(e,"tr"),!0),this.addAttribute(e)},s.prototype.addAttribute=function(e){this.target=e,c(e)||(e.setAttribute("aria-selected","true"),this.preventFocus||this.focus.onClick({target:e},!0))},s.prototype.updateCellProps=function(e,i){this.prevCIdxs=e,this.prevECIdxs=i,this.isCellSelected=this.selectedRowCellIndexes.length&&!0},s.prototype.addRowCellIndex=function(e){for(var i,t,r=0,n=this.selectedRowCellIndexes.length;r<n;r++)if(this.selectedRowCellIndexes[parseInt(r.toString(),10)].rowIndex===e.rowIndex){i=!0,t=r;break}i?this.selectedRowCellIndexes[parseInt(t.toString(),10)].cellIndexes.indexOf(e.cellIndex)<0&&this.selectedRowCellIndexes[parseInt(t.toString(),10)].cellIndexes.push(e.cellIndex):this.selectedRowCellIndexes.push({rowIndex:e.rowIndex,cellIndexes:[e.cellIndex]})},s.prototype.clearCellSelection=function(){if(this.isCellSelected){var e=this.parent,i=this.getSelectedCellsElement(),t=this.selectedRowCellIndexes,r=[],n=[],a=[],o=this.getCurrentBatchRecordChanges();this.hideAutoFill();for(var l=0,h=t.length;l<h;l++){r.push(o[t[parseInt(l.toString(),10)].rowIndex]);for(var p=this.getRowObj(t[parseInt(l.toString(),10)].rowIndex),d=0,u=t[parseInt(l.toString(),10)].cellIndexes.length;d<u;d++)p.cells&&a.push(p.cells[t[parseInt(l.toString(),10)].cellIndexes[parseInt(d.toString(),10)]].foreignKeyData),n.push(e.getCellFromIndex(t[parseInt(l.toString(),10)].rowIndex,t[parseInt(l.toString(),10)].cellIndexes[parseInt(d.toString(),10)]))}if(this.cellDeselect(Ds,t,r,n,a),this.isPreventCellSelect===!0)return;for(var l=0,h=i.length;l<h;l++)i[parseInt(l.toString(),10)].classList.remove("e-cellselectionbackground"),i[parseInt(l.toString(),10)].removeAttribute("aria-selected");this.bdrElement&&this.showHideBorders("none"),this.selectedRowCellIndexes=[],this.isCellSelected=!1,!this.isDragged&&this.cellselected&&this.cellDeselect(Fs,t,r,n,a)}},s.prototype.getSelectedCellsElement=function(){for(var e=this.parent,i=e.getDataRows(),t=[],r=0,n=i.length;r<n;r++)t=t.concat([].slice.call(i[parseInt(r.toString(),10)].getElementsByClassName("e-cellselectionbackground")));return t},s.prototype.mouseMoveHandler=function(e){e.preventDefault(),this.stopTimer();var i=this.parent.element.getBoundingClientRect(),t=this.x,r=this.y,n=un(e),a=n.x-i.left,o=n.y-i.top,l,h=k(e.target,"tr");if(this.isDragged=!0,this.isCellDrag||(h||(h=k(document.elementFromPoint(this.parent.element.offsetLeft+2,e.clientY),"tr")),t>a&&(l=a,a=t,t=l),r>o&&(l=o,o=r,r=l),this.element.style.left=t+"px",this.element.style.top=r+"px",this.element.style.width=a-t+"px",this.element.style.height=o-r+"px"),h&&!e.ctrlKey&&!e.shiftKey){var p=parseInt(h.getAttribute(Z),10);if(!this.isCellDrag)this.hideAutoFill(),this.selectRowsByRange(this.startDIndex,p),this.isRowDragSelected=!0;else{var d=b(e.target,U);d&&(this.startAFCell=this.startCell,this.endAFCell=b(e.target,U),p>-1&&this.selectLikeExcel(e,p,parseInt(d.getAttribute(pe),10)))}}!e.ctrlKey&&!e.shiftKey&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&!this.parent.enableColumnVirtualization&&!this.parent.groupSettings.columns.length&&this.isCellDrag&&this.updateScrollPosition(e,n,this.parent.getContent())},s.prototype.updateScrollPosition=function(e,i,t){var r=this,n=t.getBoundingClientRect();n.left>=i.x-20-(this.parent.enableRtl&&this.parent.height!=="auto"?Ne():0)?this.timer1=window.setInterval(function(){r.setScrollPosition(t.firstElementChild,r.parent.enableRtl?"right":"left",e)},200):n.left+t.clientWidth-20-(!this.parent.enableRtl&&this.parent.height!=="auto"?Ne():0)<i.x&&(this.timer1=window.setInterval(function(){r.setScrollPosition(t.firstElementChild,r.parent.enableRtl?"left":"right",e)},200)),n.top>=i.y-this.parent.getRowHeight()*.5?this.timer2=window.setInterval(function(){r.setScrollPosition(t.firstElementChild,"up",e)},200):n.top+t.clientHeight-this.parent.getRowHeight()*.5-(t.firstElementChild.scrollWidth>t.firstElementChild.offsetWidth?Ne():0)<=i.y&&(this.timer2=window.setInterval(function(){r.setScrollPosition(t.firstElementChild,"down",e)},200))},s.prototype.stopTimer=function(){this.timer1&&(window.clearInterval(this.timer1),this.timer1=null),this.timer2&&(window.clearInterval(this.timer2),this.timer2=null),this.preventFocus=!1},s.prototype.setScrollPosition=function(e,i,t){var r=-1,n=-1;switch((this.endAFCell||this.prevECIdxs)&&(r=this.endAFCell?parseInt(this.endAFCell.getAttribute("index"),10):this.prevECIdxs.rowIndex,n=this.endAFCell?parseInt(this.endAFCell.getAttribute("data-colindex"),10):this.prevECIdxs.cellIndex),i){case"up":if(t&&k(t.target,".e-headercontent"))return;this.isAutoFillSel&&this.startAFCell&&this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes.length===1&&this.startAFCell!==this.startCell||this.selectedRowCellIndexes.length>1&&this.startAFCell.getBoundingClientRect().top>0)&&(r=parseInt(this.startAFCell.getAttribute("index"),10)),r-=1,this.parent.frozenRows&&(r+=this.parent.frozenRows+1),r<1?e.scrollTop=0:e.scrollTop-=this.parent.getRowByIndex(r).offsetHeight;break;case"down":this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(r=parseInt(this.startAFCell.getAttribute("index"),10)),r<this.parent.getRows().length-1?(r+=1,this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(this.startAFCell=this.parent.getCellFromIndex(r,this.selectedRowCellIndexes[0].cellIndexes[0])),e.scrollTop+=this.parent.getRowByIndex(r).offsetHeight):e.scrollTop=e.scrollHeight;break;case"left":if(n>0&&r>-1){this.isAutoFillSel&&this.startAFCell&&this.selectedRowCellIndexes.length&&(this.selectedRowCellIndexes[0].cellIndexes.length>0&&this.startAFCell!==this.startCell||this.selectedRowCellIndexes[0].cellIndexes.length>1&&(!this.parent.enableRtl&&this.startAFCell.getBoundingClientRect().left>0||this.parent.enableRtl&&this.startAFCell.getBoundingClientRect().left<this.parent.element.offsetWidth))&&(n=parseInt(this.startAFCell.getAttribute("data-colindex"),10));var a=this.findNextCell(e,i,n,r);n=a?parseInt(a.getAttribute("data-colindex"),10):-1,this.parent.enableRtl&&a?n<1?e.scrollLeft=e.scrollWidth:e.scrollLeft+=a.offsetWidth:a&&(n<1?e.scrollLeft=0:e.scrollLeft-=a.offsetWidth)}break;case"right":this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(n=parseInt(this.startAFCell.getAttribute("data-colindex"),10));var o=this.parent.getCellFromIndex(r,n),l=this.findNextCell(e,i,n,r);l&&this.isAutoFillSel&&this.startAFCell&&this.startAFCell!==this.startCell&&(this.startAFCell=this.parent.getCellFromIndex(this.selectedRowCellIndexes[0].rowIndex,parseInt(l.getAttribute("data-colindex"),10))),n=l?parseInt(l.getAttribute("data-colindex"),10):-1,this.parent.enableRtl&&l?n<this.parent.columns.length-1?e.scrollLeft-=o.offsetWidth:e.scrollLeft=-e.scrollWidth:l&&(n<this.parent.columns.length-1?e.scrollLeft+=o.offsetWidth:e.scrollLeft=e.scrollWidth),this.isAutoFillSel&&(n===this.parent.columns.length-1||n===-1)&&this.startAFCell&&this.endAFCell&&(this.positionAFBorders(),e.scrollLeft=this.parent.enableRtl?-e.scrollWidth:e.scrollWidth);break}if(r>-1&&r<this.parent.getRows().length&&n>-1){var h={target:this.parent.getCellFromIndex(r,n)};if(this.isAutoFillSel&&h.target.classList.contains("e-cellselectionbackground")&&(i==="down"&&parseInt(h.target.getAttribute("index"),10)===this.parent.getRows().length-1||i==="right"&&parseInt(h.target.getAttribute("data-colindex"),10)===this.parent.columns.length-1))return;this.endAFCell=h.target,this.preventFocus=!0,this.selectLikeExcel(h,r,n)}},s.prototype.findNextCell=function(e,i,t,r){var n=this.parent.getCellFromIndex(r,i==="left"?t-1:t+1);if(n&&n.classList.contains("e-hide")){var a=n.closest("tr").querySelectorAll(".e-rowcell:not(.e-hide)"),o=Array.from(a).indexOf(n.nextElementSibling);return o>0&&o<a.length-1?(n=a[o+(i==="left"?-1:1)],n):(e.scrollLeft=0,null)}return n},s.prototype.selectLikeExcel=function(e,i,t){this.isAutoFillSel?(this.showAFBorders(),this.selectLikeAutoFill(e)):(this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:i,cellIndex:t}),this.drawBorders())},s.prototype.setFrozenBorders=function(e,i,t){var r=i.style.borderWidth.toString().split(" "),n=["","e-leftfreeze","e-unfreeze","e-leftfreeze","e-unfreeze","e-rightfreeze","e-rightfreeze"],a=[].slice.call(e.querySelectorAll(".e-cellselectionbackground."+n[""+t])).filter(function(I){return I.style.display===""}),o=[].slice.call(e.querySelectorAll(".e-cellselectionbackground.e-fixedfreeze")).filter(function(I){return I.style.display===""}),l=this.parent.enableRtl;if(a.length)for(var h=a[0].getAttribute("index"),p=a[0].getAttribute("data-colindex"),d=a[a.length-1].getAttribute("index"),u=a[a.length-1].getAttribute("data-colindex"),f=0;f<a.length;f++)a[parseInt(f.toString(),10)].getAttribute("index")===h&&(r.length===1||r.length===3&&parseInt(r[0],10)===2||r.length===4&&parseInt(r[0],10)===2)&&a[parseInt(f.toString(),10)].classList.add("e-xlsel-top-border"),a[parseInt(f.toString(),10)].getAttribute("data-colindex")===p&&(r.length===1||r.length===3&&parseInt(r[1],10)===2||r.length===4&&(!l&&parseInt(r[3],10)===2||l&&parseInt(r[1],10)===2))&&a[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-right-border":"e-xlsel-left-border"),a[parseInt(f.toString(),10)].getAttribute("index")===d&&(r.length===1||r.length===3&&parseInt(r[2],10)===2||r.length===4&&parseInt(r[2],10)===2)&&a[parseInt(f.toString(),10)].classList.add("e-xlsel-bottom-border"),a[parseInt(f.toString(),10)].getAttribute("data-colindex")===u&&(r.length===1||r.length===3&&parseInt(r[1],10)===2||r.length===4&&!l&&parseInt(r[1],10)===2||l&&parseInt(r[3],10)===2)&&a[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-left-border":"e-xlsel-right-border");if(o.length)for(var h=o[0].getAttribute("index"),p=o[0].getAttribute("data-colindex"),d=o[o.length-1].getAttribute("index"),u=o[o.length-1].getAttribute("data-colindex"),f=0;f<o.length;f++){var m=o[parseInt(f.toString(),10)].getAttribute("index"),g=o[parseInt(f.toString(),10)].getAttribute("data-colindex");m===h&&(!this.parent.getHeaderContent().querySelector(".e-cellselectionbackground.e-fixedfreeze")&&b(e,"e-content")||!b(e,"e-content"))&&o[parseInt(f.toString(),10)].classList.add("e-xlsel-top-border"),m===d&&(!this.parent.getContent().querySelector(".e-cellselectionbackground.e-fixedfreeze")&&b(e,"e-headercontent")||!b(e,"e-headercontent"))&&o[parseInt(f.toString(),10)].classList.add("e-xlsel-bottom-border");var y=o[parseInt(f.toString(),10)].parentElement.children[parseInt(g,10)-1];g===p&&(!y||y&&!y.classList.contains("e-cellselectionbackground"))&&o[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-right-border":"e-xlsel-left-border");var S=o[parseInt(f.toString(),10)].parentElement.children[parseInt(g,10)+1];g===u&&(!S||S&&!S.classList.contains("e-cellselectionbackground"))&&o[parseInt(f.toString(),10)].classList.add(l?"e-xlsel-left-border":"e-xlsel-right-border")}},s.prototype.refreshFrozenBorders=function(){this.bdrElement&&(this.setFrozenBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&this.parent.getFrozenMode()===et&&this.setFrozenBorders(this.parent.getContentTable(),this.frcBdrElement,"5"),this.parent.frozenRows&&(this.setFrozenBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&this.parent.getFrozenMode()===et&&this.setFrozenBorders(this.parent.getHeaderTable(),this.frhBdrElement,"6")))},s.prototype.drawBorders=function(){this.selectionSettings.cellSelectionMode==="BoxWithBorder"&&this.selectedRowCellIndexes.length&&!this.parent.isEdit?(this.parent.element.classList.add("e-enabledboxbdr"),this.bdrElement||this.createBorders(),this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders())):this.showHideBorders("none")},s.prototype.isLastCell=function(e){var i=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return i[i.length-1]===e},s.prototype.isLastRow=function(e){var i=[].slice.call(k(e,N).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===i[i.length-1]},s.prototype.isFirstRow=function(e){var i=[].slice.call(k(e,N).querySelectorAll(".e-row:not(.e-hiddenrow)"));return e.parentElement===i[0]},s.prototype.isFirstCell=function(e){var i=[].slice.call(e.parentElement.querySelectorAll(".e-rowcell:not(.e-hide)"));return i[0]===e},s.prototype.setBorders=function(e,i,t){var r=[].slice.call(e.getElementsByClassName("e-cellselectionbackground")).filter(function(y){return y.style.display===""});if(r.length&&this.parent.isFrozenGrid()){var n=["","e-leftfreeze","e-unfreeze","e-leftfreeze","e-unfreeze","e-rightfreeze","e-rightfreeze"];r=[].slice.call(e.querySelectorAll(".e-cellselectionbackground."+n[""+t]+":not(.e-hide)")).filter(function(y){return y.style.display===""})}if(r.length){var a=this.parent.isFrozenGrid(),o=r[0],l=r[r.length-1],h=o.getBoundingClientRect(),p=l.getBoundingClientRect(),d=o.offsetParent.getBoundingClientRect();(o.offsetParent.classList.contains("e-content")||o.offsetParent.classList.contains("e-headercontent"))&&(d=o.offsetParent.querySelector("table").getBoundingClientRect());var u=!a&&this.isLastRow(l)&&(t==="1"||t==="2"||t==="5")?2:0,f=0,m=a&&(t==="2"||t==="4")&&this.isFirstCell(o)?1:0,g=(this.parent.getFrozenMode()==="Right"&&(t==="1"||t==="3")||this.parent.getFrozenMode()===et&&(t==="5"||t==="6"))&&this.isFirstCell(o)?1:0;this.parent.enableRtl?(i.style.right=d.right-h.right-m+"px",i.style.width=h.right-p.left+m+1+"px"):(i.style.left=h.left-d.left-m-g+"px",i.style.width=p.right-h.left+m-g+1+"px"),i.style.top=h.top-d.top-f+"px",i.style.height=p.top-h.top>0?p.top-d.top+p.height+(a?0:1)-(h.top-d.top)-u+f+"px":p.height+f-u+(a?0:1)+"px",this.selectDirection+=t}else i.style.display="none"},s.prototype.positionBorders=function(){this.updateStartEndCells(),!(!this.startCell||!this.bdrElement||!this.selectedRowCellIndexes.length)&&(this.selectDirection="",this.showHideBorders(""),this.setBorders(this.parent.getContentTable(),this.bdrElement,"1"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.getContentTable(),this.mcBdrElement,"2"),this.parent.getFrozenMode()===et&&this.setBorders(this.parent.getContentTable(),this.frcBdrElement,"5")),this.parent.frozenRows&&(this.setBorders(this.parent.getHeaderTable(),this.fhBdrElement,"3"),this.parent.isFrozenGrid()&&(this.setBorders(this.parent.getHeaderTable(),this.mhBdrElement,"4"),this.parent.getFrozenMode()===et&&this.setBorders(this.parent.getHeaderTable(),this.frhBdrElement,"6"))),this.applyBorders(this.selectDirection))},s.prototype.applyBothFrozenBorders=function(e){var i=this.parent.enableRtl;switch(e.length){case 6:this.bdrElement.style.borderWidth=i?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=this.bottom,this.fhBdrElement.style.borderWidth=i?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=this.top,this.frcBdrElement.style.borderWidth=i?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=i?this.top_left:this.top_right;break;case 4:e.includes("1")&&e.includes("2")&&e.includes("3")&&e.includes("4")&&(this.fhBdrElement.style.borderWidth=i?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=i?this.top_left:this.top_right,this.bdrElement.style.borderWidth=i?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=i?this.bottom_left:this.right_bottom),e.includes("2")&&e.includes("4")&&e.includes("5")&&e.includes("6")&&(this.mcBdrElement.style.borderWidth=i?this.right_bottom:this.bottom_left,this.mhBdrElement.style.borderWidth=i?this.top_right:this.top_left,this.frcBdrElement.style.borderWidth=i?this.bottom_left:this.right_bottom,this.frhBdrElement.style.borderWidth=i?this.top_left:this.top_right);break;case 3:this.bdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.mcBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.mhBdrElement.style.borderWidth=this.top_bottom,this.frcBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom);break;case 2:e.includes("1")&&(this.mcBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.top_right_left)),e.includes("2")&&(this.bdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom,this.parent.frozenRows&&(this.mhBdrElement.style.borderWidth=this.top_right_left)),e.includes("3")&&(this.mhBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom,this.bdrElement.style.borderWidth=this.right_bottom_left),e.includes("4")&&(this.fhBdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.frhBdrElement.style.borderWidth=i?this.top_bottom_left:this.top_right_bottom,this.mcBdrElement.style.borderWidth=this.right_bottom_left),e.includes("5")&&(this.mcBdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.parent.frozenRows&&(this.frhBdrElement.style.borderWidth=this.top_right_left)),e.includes("6")&&(this.mhBdrElement.style.borderWidth=i?this.top_right_bottom:this.top_bottom_left,this.frcBdrElement.style.borderWidth=this.right_bottom_left);break;default:this.bdrElement.style.borderWidth=this.all_border,this.mcBdrElement.style.borderWidth=this.all_border,this.frcBdrElement.style.borderWidth=this.all_border,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.mhBdrElement.style.borderWidth=this.all_border,this.frhBdrElement.style.borderWidth=this.all_border);break}},s.prototype.applyBorders=function(e){var i=this.parent.enableRtl;if(this.parent.getFrozenMode()===et)this.applyBothFrozenBorders(e);else switch(e.length){case 4:this.parent.getFrozenMode()==="Right"?(this.bdrElement.style.borderWidth=i?this.bottom_left:this.right_bottom,this.mcBdrElement.style.borderWidth=i?this.right_bottom:this.bottom_left,this.fhBdrElement.style.borderWidth=i?this.top_left:this.top_right,this.mhBdrElement.style.borderWidth=i?this.top_right:this.top_left):(this.bdrElement.style.borderWidth=i?this.right_bottom:this.bottom_left,this.mcBdrElement.style.borderWidth=i?this.bottom_left:this.right_bottom,this.fhBdrElement.style.borderWidth=i?this.top_right:this.top_left,this.mhBdrElement.style.borderWidth=i?this.top_left:this.top_right);break;case 2:this.parent.getFrozenMode()==="Right"?(this.bdrElement.style.borderWidth=e.includes("2")?i?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left,this.mcBdrElement.style.borderWidth=e.includes("1")?i?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:i?this.top_bottom_left:this.top_right_bottom,this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:i?this.top_right_bottom:this.top_bottom_left)):(this.bdrElement.style.borderWidth=e.includes("2")?i?this.top_right_bottom:this.top_bottom_left:this.right_bottom_left,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=e.includes("1")?i?this.top_bottom_left:this.top_right_bottom:this.right_bottom_left),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=e.includes("1")?this.top_right_left:i?this.top_right_bottom:this.top_bottom_left,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=e.includes("2")?this.top_right_left:i?this.top_bottom_left:this.top_right_bottom)));break;default:this.bdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mcBdrElement.style.borderWidth=this.all_border),this.parent.frozenRows&&(this.fhBdrElement.style.borderWidth=this.all_border,this.parent.isFrozenGrid()&&(this.mhBdrElement.style.borderWidth=this.all_border));break}},s.prototype.createBorders=function(){this.bdrElement||(this.bdrElement=this.parent.getContentTable().parentElement.appendChild(Ce("div",{className:"e-xlsel",id:this.parent.element.id+"_bdr",styles:"width: 2px; border-width: 0;"})),this.parent.isFrozenGrid()&&(this.mcBdrElement=this.parent.getContentTable().parentElement.appendChild(Ce("div",{className:"e-xlsel",id:this.parent.element.id+"_mcbdr",styles:"height: 2px; border-width: 0;"})),this.parent.getFrozenMode()===et&&(this.frcBdrElement=this.parent.getContentTable().parentElement.appendChild(Ce("div",{className:"e-xlsel",id:this.parent.element.id+"_frcbdr",styles:"height: 2px; border-width: 0;"})))),this.parent.frozenRows&&(this.fhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(Ce("div",{className:"e-xlsel",id:this.parent.element.id+"_fhbdr",styles:"height: 2px;"}))),this.parent.frozenRows&&this.parent.isFrozenGrid()&&(this.mhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(Ce("div",{className:"e-xlsel",id:this.parent.element.id+"_mhbdr",styles:"height: 2px;"})),this.parent.getFrozenMode()===et&&(this.frhBdrElement=this.parent.getHeaderTable().parentElement.appendChild(Ce("div",{className:"e-xlsel",id:this.parent.element.id+"_frhbdr",styles:"height: 2px;"})))))},s.prototype.showHideBorders=function(e,i){if(this.bdrElement){if(this.bdrElement.style.display=e,this.parent.isFrozenGrid()){var t=this.parent.getContentTable();z(t.querySelectorAll(".e-xlsel-top-border"),"e-xlsel-top-border"),z(t.querySelectorAll(".e-xlsel-left-border"),"e-xlsel-left-border"),z(t.querySelectorAll(".e-xlsel-right-border"),"e-xlsel-right-border"),z(t.querySelectorAll(".e-xlsel-bottom-border"),"e-xlsel-bottom-border"),i||(this.mcBdrElement.style.display=e),this.parent.getFrozenMode()===et&&(this.frcBdrElement.style.display=e)}if(this.parent.frozenRows){var t=this.parent.getHeaderTable();z(t.querySelectorAll(".e-xlsel-top-border"),"e-xlsel-top-border"),z(t.querySelectorAll(".e-xlsel-left-border"),"e-xlsel-left-border"),z(t.querySelectorAll(".e-xlsel-right-border"),"e-xlsel-right-border"),z(t.querySelectorAll(".e-xlsel-bottom-border"),"e-xlsel-bottom-border"),this.fhBdrElement.style.display=e}this.parent.frozenRows&&this.parent.isFrozenGrid()&&(i||(this.mhBdrElement.style.display=e),this.parent.getFrozenMode()===et&&(this.frhBdrElement.style.display=e))}},s.prototype.drawAFBorders=function(){this.bdrAFBottom||this.createAFBorders(),this.positionAFBorders()},s.prototype.positionAFBorders=function(){if(!(!this.startCell||!this.bdrAFLeft)){var e=this.startAFCell.getBoundingClientRect(),i=this.endAFCell.getBoundingClientRect(),t=i.top-e.top>0?1:0,r=i.top-e.top>=0&&(b(this.startAFCell,Xi)||b(this.startAFCell,"e-frozencontent"))&&this.isFirstRow(this.startAFCell)?1.5:0,n=(b(this.startAFCell,Xi)||b(this.startAFCell,lr))&&this.isFirstCell(this.startAFCell)?1:0,a=this.isLastRow(this.endAFCell)&&(b(this.endAFCell,Xi)||b(this.endAFCell,"e-frozencontent"))?2:0,o=this.startAFCell.offsetParent.getBoundingClientRect(),l=this.parent.element.getBoundingClientRect(),h=this.startAFCell.offsetParent.parentElement.scrollTop,p=this.startAFCell.offsetParent.parentElement.scrollLeft,d=h-this.startAFCell.offsetTop,u=p-this.startAFCell.offsetLeft,f=this.parent.element.clientHeight-Ne();this.parent.allowPaging&&(f-=this.parent.element.querySelector(".e-pager").offsetHeight),this.parent.aggregates.length&&(f-=this.parent.getFooterContent().offsetHeight);var m=this.parent.element.clientWidth-(this.parent.height!=="auto"?Ne():0);d=d>0?Math.floor(d)-1:0,u=u>0?u:0;var g=e.left-l.left;if(this.parent.enableRtl){var S=b(this.startAFCell,Xi)||b(this.startAFCell,lr)?e.right-this.startAFCell.offsetParent.parentElement.getBoundingClientRect().width-l.left:0;this.bdrAFLeft.style.right=l.right-i.right-2+i.width+"px",this.bdrAFLeft.style.width=m<=parseInt(this.bdrAFLeft.style.right,10)?"0px":"2px";var I=l.right-e.right-n+S-1;I>0?this.bdrAFRight.style.right=I+"px":this.bdrAFRight.style.right="0px",this.bdrAFTop.style.left=i.left-l.left-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFLeft.style.right,10)-parseInt(this.bdrAFRight.style.right,10)-n+1+"px",parseInt(this.bdrAFTop.style.left,10)<0&&(this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)+"px",this.parent.height!=="auto"&&Ne()?(this.bdrAFTop.style.left=Ne()+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-Ne()+"px"):this.bdrAFTop.style.left="0px")}else if(this.bdrAFLeft.style.left=g-n+u-1+"px",this.bdrAFRight.style.left=i.left-l.left-2+i.width+"px",this.bdrAFRight.style.width=m<=parseInt(this.bdrAFRight.style.left,10)?"0px":"2px",this.bdrAFTop.style.left=g+u-.5+"px",this.bdrAFTop.style.width=parseInt(this.bdrAFRight.style.left,10)-parseInt(this.bdrAFLeft.style.left,10)-n+1+"px",m<=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)){var y=parseInt(this.bdrAFTop.style.width,10)+parseInt(this.bdrAFTop.style.left,10)-m;this.bdrAFTop.style.width=parseInt(this.bdrAFTop.style.width,10)-y+"px"}if(this.bdrAFLeft.style.top=e.top-l.top-r+d+"px",this.bdrAFLeft.style.height=i.top-e.top>0?i.top-o.top+i.height+1-(e.top-o.top)+r-a-d+"px":i.height+r-a-d+"px",this.bdrAFRight.style.top=this.bdrAFLeft.style.top,this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px",this.bdrAFTop.style.top=this.bdrAFRight.style.top,this.bdrAFBottom.style.left=this.bdrAFTop.style.left,this.bdrAFBottom.style.top=parseFloat(this.bdrAFLeft.style.top)+parseFloat(this.bdrAFLeft.style.height)-t-1+"px",this.bdrAFBottom.style.width=f<=parseFloat(this.bdrAFBottom.style.top)?"0px":this.bdrAFTop.style.width,f<=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)){var C=parseInt(this.bdrAFLeft.style.height,10)+parseInt(this.bdrAFLeft.style.top,10)-f;this.bdrAFLeft.style.height=parseInt(this.bdrAFLeft.style.height,10)-C+"px",this.bdrAFRight.style.height=parseInt(this.bdrAFLeft.style.height,10)+"px"}}},s.prototype.createAFBorders=function(){this.bdrAFLeft||(this.bdrAFLeft=this.parent.element.appendChild(Ce("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafleft",styles:"width: 2px;"})),this.bdrAFRight=this.parent.element.appendChild(Ce("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafright",styles:"width: 2px;"})),this.bdrAFBottom=this.parent.element.appendChild(Ce("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdrafbottom",styles:"height: 2px;"})),this.bdrAFTop=this.parent.element.appendChild(Ce("div",{className:"e-xlselaf",id:this.parent.element.id+"_bdraftop",styles:"height: 2px;"})))},s.prototype.destroyAutoFillElements=function(){this.bdrAFLeft&&(this.bdrAFLeft.remove(),this.bdrAFRight.remove(),this.bdrAFBottom.remove(),this.bdrAFTop.remove(),this.bdrAFLeft=this.bdrAFRight=this.bdrAFBottom=this.bdrAFTop=null),this.autofill&&(this.autofill.remove(),this.autofill=null)},s.prototype.showAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="",this.bdrAFRight.style.display="",this.bdrAFBottom.style.display="",this.bdrAFTop.style.display="")},s.prototype.hideAFBorders=function(){this.bdrAFLeft&&(this.bdrAFLeft.style.display="none",this.bdrAFRight.style.display="none",this.bdrAFBottom.style.display="none",this.bdrAFTop.style.display="none")},s.prototype.updateValue=function(e,i,t){var r=this.createBeforeAutoFill(e,i,t);if(!r.cancel){var n=this.parent.getColumnByIndex(i);this.parent.editModule&&t&&(n.type==="number"?this.parent.editModule.updateCell(e,n.field,parseFloat(r.value)):this.parent.editModule.updateCell(e,n.field,r.value))}},s.prototype.createBeforeAutoFill=function(e,i,t){var r=this.parent.getColumnByIndex(i),n={column:r,value:t.innerText};return this.parent.trigger(go,n),n},s.prototype.getAutoFillCells=function(e,i){var t=".e-cellselectionbackground",r=[].slice.call(this.parent.getDataRows()[parseInt(e.toString(),10)].querySelectorAll(t));return r},s.prototype.selectLikeAutoFill=function(e,i){var t=parseInt(b(this.startAFCell,xe).getAttribute(Z),10),r=parseInt(this.startAFCell.getAttribute(pe),10),n=parseInt(b(this.endAFCell,xe).getAttribute(Z),10),a=parseInt(this.endAFCell.getAttribute(pe),10),o=this.selectedRowCellIndexes.length-1,l=this.selectedRowCellIndexes[0].cellIndexes.length-1;switch(!0){case(!i&&this.endAFCell.classList.contains("e-cellselectionbackground")&&!!b(e.target,U)):this.startAFCell=this.parent.getCellFromIndex(t,r),this.endAFCell=this.parent.getCellFromIndex(t+o,r+l),this.drawAFBorders();break;case(this.autoFillRLselection&&r+l<a&&a-r-l+1>n-t-o&&a-r-l+1>t-n):if(this.endAFCell=this.parent.getCellFromIndex(t+o,a),n=parseInt(b(this.endAFCell,xe).getAttribute(Z),10),a=parseInt(this.endAFCell.getAttribute(pe),10),!i)this.drawAFBorders();else{for(var h=parseInt(this.endCell.getAttribute(pe),10),p=t;p<=n;p++)for(var d=this.getAutoFillCells(p,r),u=0,f=h+1;f<=a;f++)u>l&&(u=0),this.updateValue(p,f,d[parseInt(u.toString(),10)]),u++;this.selectCellsByRange({rowIndex:t,cellIndex:this.startCellIndex},{rowIndex:n,cellIndex:a})}break;case(this.autoFillRLselection&&r>a&&r-a+1>n-t-o&&r-a+1>t-n):if(this.startAFCell=this.parent.getCellFromIndex(t,a),this.endAFCell=this.endCell,!i)this.drawAFBorders();else{for(var p=t;p<=t+o;p++){var d=this.getAutoFillCells(p,r);d.reverse();for(var u=0,f=this.startCellIndex-1;f>=a;f--)u>l&&(u=0),this.updateValue(p,f,d[parseInt(u.toString(),10)]),u++}this.selectCellsByRange({rowIndex:t,cellIndex:a},{rowIndex:t+o,cellIndex:this.startCellIndex+l})}break;case t>n:if(this.startAFCell=this.parent.getCellFromIndex(n,r),this.endAFCell=this.endCell,!i)this.drawAFBorders();else{for(var m=parseInt(this.endCell.parentElement.getAttribute(Z),10),g=m,p=t-1;p>=n;p--){g===this.startIndex-1&&(g=m);var d=this.getAutoFillCells(g,r),u=0;g--;for(var f=this.startCellIndex;f<=this.startCellIndex+l;f++)this.updateValue(p,f,d[parseInt(u.toString(),10)]),u++}this.selectCellsByRange({rowIndex:n,cellIndex:r+l},{rowIndex:t+o,cellIndex:r})}break;default:if(this.endAFCell=this.parent.getCellFromIndex(n,r+l),!i)this.drawAFBorders();else{for(var m=parseInt(this.endCell.parentElement.getAttribute(Z),10),g=this.startIndex,p=m+1;p<=n;p++){g===m+1&&(g=this.startIndex);var d=this.getAutoFillCells(g,r);g++;for(var u=0,y=this.startCellIndex;y<=this.startCellIndex+l;y++)this.updateValue(p,y,d[parseInt(u.toString(),10)]),u++}this.selectCellsByRange({rowIndex:m-o,cellIndex:r},{rowIndex:n,cellIndex:r+l})}break}},s.prototype.mouseUpHandler=function(e){this.stopTimer(),document.body.classList.remove("e-disableuserselect"),this.element&&!c(this.element.parentElement)&&B(this.element),this.isDragged&&this.selectedRowCellIndexes.length===1&&this.selectedRowCellIndexes[0].cellIndexes.length===1?this.mUPTarget=b(e.target,U):this.mUPTarget=null;var i=k(e.target,".e-rowcell");if(this.isDragged&&!this.isAutoFillSel&&this.selectionSettings.mode==="Cell"&&i&&i.classList.contains(U)){var t=parseInt(i.parentElement.getAttribute(Z),10),r=parseInt(i.getAttribute(pe),10);this.isDragged=!1,this.clearCellSelection(),this.selectCellsByRange({rowIndex:this.startDIndex,cellIndex:this.startDCellIndex},{rowIndex:t,cellIndex:r})}if(this.isDragged=!1,this.updateAutoFillPosition(),this.isAutoFillSel){this.preventFocus=!0;var n=b(e.target,U);this.endAFCell=n||(this.endCell===this.endAFCell?this.startAFCell:this.endAFCell),this.startAFCell=this.startCell,!c(this.endAFCell)&&!c(this.startAFCell)&&(this.updateStartCellsIndex(),this.selectLikeAutoFill(e,!0),this.updateAutoFillPosition(),this.hideAFBorders(),this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders()),this.parent.aggregates.length>0&&this.parent.notify(Yr,{})),this.isAutoFillSel=!1,this.preventFocus=!1}x.remove(this.parent.getContent(),"mousemove",this.mouseMoveHandler),this.parent.frozenRows&&x.remove(this.parent.getHeaderContent(),"mousemove",this.mouseMoveHandler),x.remove(document,"mouseup",this.mouseUpHandler)},s.prototype.hideAutoFill=function(){this.autofill&&(this.autofill.style.display="none")},s.prototype.updateAutoFillPosition=function(){if(this.parent.enableAutoFill&&!this.parent.isEdit&&this.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel()&&this.selectedRowCellIndexes.length){var e=parseInt(this.target.getAttribute(pe),10),i=parseInt(this.target.getAttribute("index"),10),t=this.selectedRowCellIndexes[this.selectedRowCellIndexes.length-1].rowIndex,r=this.getAutoFillCells(t,e).filter(function(m){return m.style.display===""}),n=this.parent.getColumnByIndex(e),a=n.getFreezeTableName()==="movable",o=i<this.parent.frozenRows,l=this.parent.getFrozenMode()===et&&n.getFreezeTableName()===Al;vi("#"+this.parent.element.id+"_autofill",b(this.target,gt))||(vi("#"+this.parent.element.id+"_autofill",this.parent.element)&&vi("#"+this.parent.element.id+"_autofill",this.parent.element).remove(),this.autofill=Ce("div",{className:"e-autofill",id:this.parent.element.id+"_autofill"}),this.autofill.style.display="none",(this.target.classList.contains("e-leftfreeze")||this.target.classList.contains("e-rightfreeze")||this.target.classList.contains("e-fixedfreeze"))&&this.autofill.classList.add("e-freeze-autofill"),o?a?this.parent.getHeaderTable().parentElement.appendChild(this.autofill):this.parent.getHeaderTable().parentElement.appendChild(this.autofill):a?this.parent.getContentTable().parentElement.appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill),l&&(o?this.parent.getHeaderTable().parentElement.appendChild(this.autofill):this.parent.getContentTable().parentElement.appendChild(this.autofill)));var h=r[r.length-1];if(h&&h.offsetParent){var p=h.getBoundingClientRect(),d=h.offsetParent.getBoundingClientRect();(h.offsetParent.classList.contains("e-content")||h.offsetParent.classList.contains("e-headercontent"))&&(d=h.offsetParent.querySelector("table").getBoundingClientRect());var u=this.isLastCell(h)?4:0,f=this.isLastRow(h)?3:0;this.parent.enableRtl?this.autofill.style.right=d.right-p.right+p.width-4-u+"px":this.autofill.style.left=p.left-d.left+p.width-4-u+"px",this.autofill.style.top=p.top-d.top+p.height-5-f+"px"}this.autofill.style.display=""}else this.hideAutoFill()},s.prototype.mouseDownHandler=function(e){this.mouseButton=e.button;var i=e.target,t=this.parent,r,n=b(i,"e-grid");if(!(n&&n.id!==t.element.id||b(i,Re)&&!this.parent.frozenRows||b(i,"e-editedbatchcell")||b(i,Ii))){if((e.shiftKey||e.ctrlKey)&&e.preventDefault(),b(i,U)&&!e.shiftKey&&!e.ctrlKey){if(t.selectionSettings.cellSelectionMode.indexOf("Box")>-1&&!this.isRowType()&&!this.isSingleSel())this.isCellDrag=!0,r=!0;else if(t.allowRowDragAndDrop&&!t.isEdit&&!this.parent.selectionSettings.checkboxOnly){if(this.isRowDragSelected=!1,!this.isRowType()||this.isSingleSel()||k(i,"td").classList.contains("e-selectionbackground")){this.isDragged=!1;return}r=!0,this.element=this.parent.createElement("div",{className:"e-griddragarea"}),t.getContent().appendChild(this.element)}r&&this.enableDrag(e,!0)}this.updateStartEndCells(),(i.classList.contains("e-autofill")||i.classList.contains("e-xlsel"))&&(this.isCellDrag=!0,this.isAutoFillSel=!0,this.enableDrag(e))}},s.prototype.updateStartEndCells=function(){var e=[].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground"));this.startCell=e[0],this.endCell=e[e.length-1],this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(Z),10),this.startCellIndex=parseInt(b(this.startCell,U).getAttribute(pe),10))},s.prototype.updateStartCellsIndex=function(){this.startCell&&(this.startIndex=parseInt(this.startCell.parentElement.getAttribute(Z),10),this.startCellIndex=parseInt(b(this.startCell,U).getAttribute(pe),10))},s.prototype.enableDrag=function(e,i){var t=this.parent;if(i){var r=k(e.target,"tr");this.startDIndex=parseInt(r.getAttribute(Z),10),this.startDCellIndex=parseInt(b(e.target,U).getAttribute(pe),10)}document.body.classList.add("e-disableuserselect");var n=t.element.getBoundingClientRect(),a=un(e);this.x=a.x-n.left,this.y=a.y-n.top,x.add(t.getContent(),"mousemove",this.mouseMoveHandler,this),this.parent.frozenRows&&x.add(t.getHeaderContent(),"mousemove",this.mouseMoveHandler,this),x.add(document,"mouseup",this.mouseUpHandler,this)},s.prototype.clearSelAfterRefresh=function(e){var i=this.parent.enableInfiniteScrolling&&e.requestType==="infiniteScroll";if(e.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&!i&&this.clearSelection(),(e.requestType==="virtualscroll"||i)&&this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){var t=this.parent.getRowsObject().filter(function(o){return o.isSelectable}),r=[];this.selectedRowState={},this.persistSelectedData=[];for(var n=0;n<t.length;n++){r.push(t[parseInt(n.toString(),10)].index);var a=this.getPkValue(this.primaryKey,t[parseInt(n.toString(),10)].data);this.selectedRowState[""+a]=!0,this.persistSelectedData.push(t[parseInt(n.toString(),10)].data)}this.selectedRowIndexes=r}},s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:ve,handler:this.enableAfterRender},{event:yn,handler:this.initializeSelection},{event:wo,handler:this.onActionComplete},{event:bo,handler:this.onActionComplete},{event:Ue,handler:this.onPropertyChanged},{event:$r,handler:this.onCellFocused},{event:oa,handler:this.clearSelAfterRefresh},{event:na,handler:this.columnPositionChanged},{event:ce,handler:this.initialEnd},{event:en,handler:this.rowsRemoved},{event:Rt,handler:this.refreshHeader},{event:Jr,handler:this.destroyAutoFillElements},{event:Ft,handler:this.destroy}],Et(this.parent,this.evtHandlers,!0,this),this.actionBeginFunction=this.actionBegin.bind(this),this.actionCompleteFunction=this.actionComplete.bind(this),this.parent.addEventListener(vt,this.actionBeginFunction),this.parent.addEventListener(Le,this.actionCompleteFunction),this.addEventListener_checkbox())},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(x.remove(document,"mouseup",this.mouseUpHandler),x.remove(this.parent.getContent(),"mousedown",this.mouseDownHandler),x.remove(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler),Et(this.parent,this.evtHandlers,!1),this.parent.removeEventListener(vt,this.actionBeginFunction),this.parent.removeEventListener(Le,this.actionCompleteFunction),this.removeEventListener_checkbox(),this.parent.off(Jr,this.destroyAutoFillElements))},s.prototype.wireEvents=function(){this.isMacOS=navigator.userAgent.indexOf("Mac OS")!==-1,this.isMacOS?(x.add(this.parent.element,"keydown",this.keyDownHandler,this),x.add(this.parent.element,"keyup",this.keyUpHandler,this)):this.parent.allowKeyboard||x.add(this.parent.element,"keydown",this.keyDownHandler,this)},s.prototype.unWireEvents=function(){this.isMacOS?(x.remove(this.parent.element,"keydown",this.keyDownHandler),x.remove(this.parent.element,"keyup",this.keyUpHandler)):this.parent.allowKeyboard||x.remove(this.parent.element,"keydown",this.keyDownHandler)},s.prototype.columnPositionChanged=function(){this.parent.isPersistSelection||this.clearSelection()},s.prototype.refreshHeader=function(){this.setCheckAllState()},s.prototype.rowsRemoved=function(e){for(var i=0;i<e.records.length;i++){var t=this.getPkValue(this.primaryKey,e.records[parseInt(i.toString(),10)]);delete this.selectedRowState[""+t],--this.totalRecordsCount}this.setCheckAllState()},s.prototype.beforeFragAppend=function(e){e.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&this.clearSelection()},s.prototype.getCheckAllBox=function(){return this.parent.getHeaderContent().querySelector(".e-checkselectall")},s.prototype.enableAfterRender=function(e){e.module===this.getModuleName()&&e.enable&&(this.render(),this.initPerisistSelection())},s.prototype.render=function(e){x.add(this.parent.getContent(),"mousedown",this.mouseDownHandler,this),x.add(this.parent.getHeaderContent(),"mousedown",this.mouseDownHandler,this)},s.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){var i=this.parent;c(e.properties.type)||(this.selectionSettings.type==="Single"?(i.element.removeAttribute("aria-multiselectable"),this.selectedRowCellIndexes.length>1&&(this.clearCellSelection(),this.prevCIdxs=void 0),this.selectedRowIndexes.length>1&&(this.clearRowSelection(),this.prevRowIndex=void 0),this.selectedColumnsIndexes.length>1&&(this.clearColumnSelection(),this.prevColIndex=void 0),this.enableSelectMultiTouch=!1,this.hidePopUp()):this.selectionSettings.type==="Multiple"&&i.element.setAttribute("aria-multiselectable","true")),(!c(e.properties.mode)||!c(e.properties.cellSelectionMode))&&(this.clearSelection(),this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevColIndex=void 0),this.isPersisted=!0,this.checkBoxSelectionChanged(),this.isPersisted=!1,this.parent.isCheckBoxSelection||this.initPerisistSelection();var t=this.parent.getColumns().filter(function(r){return r.type==="checkbox"});t.length&&(i.isCheckBoxSelection=this.selectionSettings.checkboxMode!=="ResetOnRowClick"),this.drawBorders()}},s.prototype.hidePopUp=function(){this.parent.element.querySelector(".e-gridpopup").getElementsByClassName("e-rowselect").length&&(this.parent.element.querySelector(".e-gridpopup").style.display="none")},s.prototype.initialEnd=function(){this.selectedRowIndexes.length||(this.parent.off(ce,this.initialEnd),this.selectRow(this.parent.selectedRowIndex))},s.prototype.checkBoxSelectionChanged=function(){var e=this.parent;e.off(ce,this.checkBoxSelectionChanged);var i=e.getColumns().filter(function(t){return t.type==="checkbox"});i.length>0&&(e.isCheckBoxSelection=!0,this.chkField=i[0].field,this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount,c(this.totalRecordsCount)&&(this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.isSingleSel()?(e.selectionSettings.type="Multiple",e.dataBind()):this.initPerisistSelection()),!e.isCheckBoxSelection&&!this.isPersisted&&(this.chkField=null,this.initPerisistSelection())},s.prototype.initPerisistSelection=function(){var e=this.parent;this.parent.selectionSettings.persistSelection&&this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!0,this.ensureCheckboxFieldSelection()):this.parent.getPrimaryKeyFieldNames().length>0?(e.isPersistSelection=!1,this.ensureCheckboxFieldSelection()):(e.isPersistSelection=!1,this.selectedRowState={})},s.prototype.ensureCheckboxFieldSelection=function(){var e=this.parent;if(this.primaryKey=this.parent.getPrimaryKeyFieldNames()[0],!e.enableVirtualization&&this.chkField&&(e.isPersistSelection&&Object.keys(this.selectedRowState).length===0||!e.isPersistSelection)){var i=this.parent.getDataModule(),t=new fe().where(this.chkField,"equal",!0);t.params||(t.params=this.parent.query.params);var r=i.getData({},t),n=this;this.parent.showSpinner(),r.then(function(a){n.dataSuccess(a.result),n.refreshPersistSelection(),n.parent.hideSpinner()})}},s.prototype.dataSuccess=function(e){for(var i=this.parent.getDataModule().isRemote()&&!c(e.result)?e.result:e,t=0;t<i.length;t++){var r=this.getPkValue(this.primaryKey,i[parseInt(t.toString(),10)]);c(this.selectedRowState[""+r])&&i[parseInt(t.toString(),10)][this.chkField]&&(this.selectedRowState[""+r]=i[parseInt(t.toString(),10)][this.chkField])}this.persistSelectedData=i},s.prototype.setRowSelection=function(e){if(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)if(e){var u=Object.keys(this.selectedRowState),f=Object.keys(this.unSelectedRowState);if(!this.isCheckboxReset)for(var m=this.parent.groupSettings.columns.length&&this.parent.isPersistSelection?this.parent.currentViewData.records:this.parent.currentViewData,g=0,y=m;g<y.length;g++){var h=y[g];if(!c(h[this.primaryKey])){var S=h[this.primaryKey].toString();u.indexOf(S)===-1&&f.indexOf(S)===-1&&(this.selectedRowState[h[this.primaryKey]]=!0)}}}else this.selectedRowState={},this.unSelectedRowState={},this.rmtHdrChkbxClicked=!1;else if(e)if(this.isPartialSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling))for(var i=this.parent.getRowsObject().filter(function(I){return I.isSelectable}),t=0,r=i;t<r.length;t++){var n=r[t];this.selectedRowState[this.getPkValue(this.primaryKey,n.data)]=!0}else{var a=this.isPartialSelection?this.parent.partialSelectedRecords:this.getData();if(this.parent.groupSettings.columns.length)for(var o=0,l=this.isPartialSelection?a:a.records;o<l.length;o++){var h=l[o];this.selectedRowState[this.getPkValue(this.primaryKey,h)]=!0}else for(var p=0,d=a;p<d.length;p++){var h=d[p];this.selectedRowState[this.getPkValue(this.primaryKey,h)]=!0}}else this.selectedRowState={}},s.prototype.getData=function(){return this.parent.getDataModule().dataManager.executeLocal(this.parent.getDataModule().generateQuery(!0))},s.prototype.getAvailableSelectedData=function(){var e=new _(this.persistSelectedData).executeLocal(this.parent.getDataModule().generateQuery(!0));return this.parent.groupSettings.columns.length&&e&&e.records&&(e=e.records.slice()),e},s.prototype.refreshPersistSelection=function(){var e=this.parent.getRows();if(this.totalRecordsCount=this.parent.getCurrentViewRecords().length,this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),!c(e)&&e.length>0&&(this.parent.isPersistSelection||this.chkField)){for(var i=[],t=0;t<e.length;t++){var r=this.getRowObj(e[parseInt(t.toString(),10)]),n=r&&r.data?this.getPkValue(this.primaryKey,r.data):null;if(n===null)return;if(!(this.isPartialSelection&&!r.isSelectable)){var a=void 0,o=e[parseInt(t.toString(),10)].querySelector(".e-checkselect");this.selectedRowState[""+n]||this.parent.checkAllRows==="Check"&&this.selectedRowState[""+n]&&this.totalRecordsCount===Object.keys(this.selectedRowState).length&&this.chkAllCollec.indexOf(n)<0||this.parent.checkAllRows==="Uncheck"&&this.chkAllCollec.indexOf(n)>0&&!this.parent.selectedRowIndex||this.parent.checkAllRows==="Intermediate"&&!c(this.chkField)&&r.data[this.chkField]?(i.push(parseInt(e[parseInt(t.toString(),10)].getAttribute(Z),10)),a=!0):(a=!1,this.checkedTarget!==o&&this.parent.isCheckBoxSelection&&o&&rr(o.nextElementSibling,a)),this.updatePersistCollection(e[parseInt(t.toString(),10)],a)}}this.isSingleSel()&&i.length>0?this.selectRow(i[0],!0):this.selectRows(i)}(this.parent.isCheckBoxSelection||this.parent.selectionSettings.checkboxMode==="ResetOnRowClick")&&this.getCurrentBatchRecordChanges().length>0&&this.setCheckAllState()},s.prototype.actionBegin=function(e){if(e.requestType==="save"&&this.parent.isPersistSelection){var i=this.parent.element.querySelector(".e-edit-checkselect");if(!c(i)){var t=k(i,"."+Ii);if(t){this.parent.editSettings.mode==="Dialog"&&(t=this.parent.element.querySelector(".e-dlgeditrow"));var r=this.getRowObj(t);if(!r)return;this.selectedRowState[this.getPkValue(this.primaryKey,r.data)]=r.isSelected=i.checked}else this.isCheckedOnAdd=i.checked}}this.parent.isPersistSelection&&this.isPartialSelection&&(e.requestType==="paging"&&(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.selectedRowIndexes=[]),(e.requestType==="filtering"||e.requestType==="searching")&&(this.parent.partialSelectedRecords=[],this.parent.disableSelectedRecords=[]))},s.prototype.actionComplete=function(e){if(e.requestType==="save"&&this.parent.isPersistSelection){if(e.action==="add"){if(this.isCheckedOnAdd){var i=this.parent.getRowObjectFromUID(this.parent.getRows()[e.selectedRow].getAttribute("data-uid"));this.selectedRowState[this.getPkValue(this.primaryKey,i.data)]=i.isSelected=this.isCheckedOnAdd}this.isHdrSelectAllClicked=!1,this.setCheckAllState()}this.refreshPersistSelection()}if(e.requestType==="delete"&&this.parent.isPersistSelection){for(var t=e.data,r=t.slice(),n=0;n<r.length;n++){var a=this.getPkValue(this.primaryKey,r[parseInt(n.toString(),10)]);c(a)||this.updatePersistDelete(a,this.isPartialSelection)}this.isHdrSelectAllClicked=!1,this.setCheckAllState(),this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount}if(e.requestType==="paging"){if(this.parent.isPersistSelection&&this.isPartialSelection&&this.isHdrSelectAllClicked){for(var o=this.parent.getRowsObject(),l=[],n=0;n<o.length;n++)o[parseInt(n.toString(),10)].isSelectable&&l.push(o[parseInt(n.toString(),10)].index);l.length&&this.selectRows(l)}this.prevRowIndex=void 0,this.prevCIdxs=void 0,this.prevECIdxs=void 0}},s.prototype.onDataBound=function(){if(!this.parent.enableVirtualization&&this.parent.isPersistSelection&&this.selectedRecords.length&&(this.isPrevRowSelection=!0),(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&this.rmtHdrChkbxClicked&&(this.parent.checkAllRows==="Intermediate"?this.setRowSelection(!0):this.parent.checkAllRows==="Uncheck"&&this.setRowSelection(!1)),this.parent.enableVirtualization&&this.setCheckAllState(),this.parent.isPersistSelection&&this.refreshPersistSelection(),this.initialRowSelection=!!(this.isRowType()&&this.parent.element.querySelectorAll(".e-selectionbackground")&&this.parent.getSelectedRows().length),this.parent.isCheckBoxSelection&&!this.initialRowSelection){for(var e=this.parent.getRowsObject(),i=[],t=0;t<e.length;t++)e[parseInt(t.toString(),10)].isSelected&&i.push(t);i.length&&this.selectRows(i),this.initialRowSelection=!0}},s.prototype.updatePersistSelectedData=function(e){if(this.parent.isPersistSelection){for(var i=this.parent.getRows(),t=0;t<i.length;t++)this.updatePersistCollection(i[parseInt(t.toString(),10)],e);this.parent.checkAllRows==="Uncheck"?(this.setRowSelection(!1),this.persistSelectedData=this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result?this.persistSelectedData:[]):this.parent.checkAllRows==="Check"&&(this.setRowSelection(!0),this.persistSelectedData=!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection?this.parent.groupSettings.columns.length?this.getData().records.slice():this.getData().slice():this.persistSelectedData)}},s.prototype.checkSelectAllAction=function(e){var i=this.getRenderer(),t=this.parent.element.querySelector(".e-gridform");if(this.checkedTarget=this.getCheckAllBox(),e&&this.getCurrentBatchRecordChanges().length?(this.parent.checkAllRows="Check",this.updatePersistSelectedData(e),this.selectRowsByRange(i.getVirtualRowIndex(0),i.getVirtualRowIndex(this.getCurrentBatchRecordChanges().length-1))):(this.parent.checkAllRows="Uncheck",this.updatePersistSelectedData(e),this.clearSelection()),this.chkAllCollec=[],!c(t)){var r=t.querySelector(".e-edit-checkselect");c(r)||rr(r.nextElementSibling,e)}},s.prototype.checkSelectAll=function(e){var i=this,t=this.getCheckAllStatus(e),r=t==="Check";if(this.isHeaderCheckboxClicked=!0,(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&(t==="Uncheck"||this.isCheckboxReset||t==="Intermediate"&&this.parent.isPersistSelection)?this.rmtHdrChkbxClicked=!0:this.rmtHdrChkbxClicked=!1,this.rmtHdrChkbxClicked&&this.isCheckboxReset&&(this.unSelectedRowState={}),this.isCheckboxReset=!1,t==="Intermediate"&&(!this.chkField&&!this.parent.isPersistSelection&&(r=this.getCurrentBatchRecordChanges().some(function(a){return i.getPkValue(i.primaryKey,a)in i.selectedRowState})),(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.isPersistSelection)){for(var n=0;n<this.getCurrentBatchRecordChanges().length;n++)if(!c(this.getPkValue(this.primaryKey,this.getCurrentBatchRecordChanges()[""+n])))if(Object.keys(this.selectedRowState).includes(this.getPkValue(this.primaryKey,this.getCurrentBatchRecordChanges()[""+n]).toString()))r=!0;else{r=!1;break}}this.parent.isPersistSelection&&this.parent.allowPaging&&(this.totalRecordsCount=this.parent.pageSettings.totalRecordsCount),this.checkSelectAllAction(!r),this.target=null,this.getCurrentBatchRecordChanges().length>0&&(this.setCheckAllState(),this.updateSelectedRowIndexes()),this.triggerChkChangeEvent(e,!r)},s.prototype.getCheckAllStatus=function(e){var i=e?e.nextElementSibling.classList:this.getCheckAllBox().nextElementSibling.classList,t;return i.contains("e-check")?t="Check":i.contains("e-uncheck")?t="Uncheck":i.contains("e-stop")?t="Intermediate":t="None",t},s.prototype.checkSelect=function(e){var i=k(this.checkedTarget,"."+U),t=this.parent;this.isMultiCtrlRequest=!0;var r=0;if(this.isHeaderCheckboxClicked=!1,it(t)){var n=i.parentElement.getAttribute("data-uid");this.parent.enableVirtualization&&this.parent.groupSettings.columns.length?r=parseInt(i.parentElement.getAttribute(Z),10):r=t.getRows().map(function(a){return a.getAttribute("data-uid")}).indexOf(n)}else r=parseInt(i.parentElement.getAttribute(Z),10);this.parent.isPersistSelection&&this.parent.element.getElementsByClassName(li).length>0&&this.parent.editSettings.newRowPosition==="Top"&&!this.parent.editSettings.showAddNewRow&&++r,this.rowCellSelectionHandler(r,parseInt(i.getAttribute(pe),10)),this.moveIntoUncheckCollection(k(i,"."+xe)),this.setCheckAllState(),this.isMultiCtrlRequest=!1,this.triggerChkChangeEvent(e,e.nextElementSibling.classList.contains("e-check"))},s.prototype.moveIntoUncheckCollection=function(e){if(this.parent.checkAllRows==="Check"||this.parent.checkAllRows==="Uncheck"){var i=this.getRowObj(e),t=i&&i.data?this.getPkValue(this.primaryKey,i.data):null;if(!t)return;this.chkAllCollec.indexOf(t)<0?this.chkAllCollec.push(t):this.chkAllCollec.splice(this.chkAllCollec.indexOf(t),1)}},s.prototype.triggerChkChangeEvent=function(e,i){this.parent.trigger(co,{checked:i,selectedRowIndexes:this.parent.getSelectedRowIndexes(),target:e}),this.parent.isEdit||(this.checkedTarget=null)},s.prototype.updateSelectedRowIndexes=function(){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&this.isPartialSelection&&!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&this.parent.selectionSettings.persistSelection&&this.parent.checkAllRows!=="Uncheck")for(var e=this.parent.getRowsObject().filter(function(o){return o.isSelectable}),i=0,t=e;i<t.length;i++){var r=t[i];this.selectedRowIndexes.push(r.index)}if(this.parent.isCheckBoxSelection&&this.parent.enableVirtualization&&!this.isPartialSelection&&(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.parent.isPersistSelection&&this.parent.checkAllRows==="Check"){var e=this.parent.getRowsObject().filter(function(l){return l.isSelectable});if(e.length!==this.selectedRowIndexes.length)for(var n=0,a=e;n<a.length;n++){var r=a[n];this.selectedRowIndexes.indexOf(r.index)<=-1&&this.selectedRowIndexes.push(r.index)}}},s.prototype.updateSelectedRowIndex=function(e){if(this.parent.isCheckBoxSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection)if(this.parent.checkAllRows==="Check"){this.selectedRowIndexes=[];for(var i=this.parent.groupSettings.columns.length?this.getData().records.length:this.getData().length,t=0;t<i;t++)this.selectedRowIndexes.push(t)}else if(this.parent.checkAllRows==="Uncheck")this.selectedRowIndexes=[];else{var r=this.parent.getRowByIndex(e);if(e&&r&&r.getAttribute("aria-selected")==="false"){var n=this.selectedRowIndexes.indexOf(e);this.selectedRowIndexes.splice(n,1)}}},s.prototype.isAllSelected=function(e){if(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)return this.getAvailableSelectedData().length===(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling?this.parent.totalDataRecordsCount:this.totalRecordsCount);if(this.isPartialSelection)if(this.parent.allowPaging&&this.parent.pageSettings.pageSize<this.parent.pageSettings.totalRecordsCount){for(var i=this.parent.partialSelectedRecords,t=0;t<i.length;t++){var r=this.getPkValue(this.primaryKey,i[parseInt(t.toString(),10)]);if(!this.selectedRowState[""+r])return!1}return!0}else return this.isSelectAllRowCount(e);else{for(var i=this.parent.groupSettings.columns.length?this.getData().records:this.getData(),t=0;t<i.length;t++){var r=this.getPkValue(this.primaryKey,i[parseInt(t.toString(),10)]);if(!this.selectedRowState[""+r])return!1}return!0}},s.prototype.someDataSelected=function(){if((this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length))for(var e=this.getAvailableSelectedData(),i=0;i<e.length;i++){var t=this.getPkValue(this.primaryKey,e[parseInt(i.toString(),10)]);if(this.selectedRowState[""+t])return!1}for(var r=this.isPartialSelection?this.parent.partialSelectedRecords:this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result?[]:this.getData(),i=0;i<r.length;i++){var t=this.getPkValue(this.primaryKey,r[parseInt(i.toString(),10)]);if(this.selectedRowState[""+t])return!1}return!0},s.prototype.setCheckAllState=function(e,i){if(this.parent.isCheckBoxSelection||this.parent.selectionSettings.checkboxMode==="ResetOnRowClick"){var t=!1,r=!1,n=Object.keys(this.selectedRowState).length;this.parent.isPersistSelection||(n=this.selectedRowIndexes.length,this.totalRecordsCount=this.getCurrentBatchRecordChanges().length),this.parent.isPersistSelection&&!((this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&this.isPartialSelection)&&(this.parent.searchSettings.key.length||this.parent.filterSettings.columns.length)&&(r=!0,t=this.isAllSelected(n));var a=this.getCheckAllBox();if(a){var o=a.nextElementSibling;z([o],["e-check","e-stop","e-uncheck"]),_t(a,!1),a.indeterminate=!1;var l=this.parent.getDataModule().isRemote()?[]:this.parent.groupSettings.columns.length?this.getData().records:this.getData();if(t&&r&&(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result||l.length)||!r&&(n===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&(!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)||this.parent.allowPaging)||!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&this.isPartialSelection&&(this.isSelectAllRowCount(n)||this.isHdrSelectAllClicked)||(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&(!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&l.length&&n===l.length||(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&!this.isPartialSelection&&(n===this.parent.totalDataRecordsCount||(this.isSelectAllRowCount(n)||n===this.totalRecordsCount)&&!this.parent.isPersistSelection)||this.isPartialSelection&&(this.isHdrSelectAllClicked||this.isSelectAllRowCount(n)))||n===this.totalRecordsCount&&this.totalRecordsCount&&!this.isPartialSelection&&!this.parent.allowPaging&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling)?(L([o],["e-check"]),_t(a,!0),i&&this.getRenderer().setSelection(null,!0,!0),this.parent.checkAllRows="Check"):(!this.selectedRowIndexes.length&&(!this.parent.enableVirtualization||!this.persistSelectedData.length&&!r||r&&this.someDataSelected())||n===0&&this.getCurrentBatchRecordChanges().length===0)&&!this.parent.allowPaging||this.parent.allowPaging&&(n===0||n&&r&&this.someDataSelected())?(L([o],["e-uncheck"]),i&&this.getRenderer().setSelection(null,!1,!0),this.parent.checkAllRows="Uncheck"):(L([o],["e-stop"]),this.parent.checkAllRows="Intermediate",a.indeterminate=!0),n===0&&this.getCurrentBatchRecordChanges().length===0?L([o.parentElement],["e-checkbox-disabled"]):z([o.parentElement],["e-checkbox-disabled"]),this.isPartialSelection){var h=this.parent.getRowsObject().filter(function(p){return p.isSelectable}).length;h===0&&o.parentElement.querySelector(".e-frame").classList.contains("e-uncheck")?L([o.parentElement],["e-checkbox-disabled"]):z([o.parentElement],["e-checkbox-disabled"])}(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)&&!this.parent.allowPaging&&!(this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result)&&this.updateSelectedRowIndex(e)}}},s.prototype.isSelectAllRowCount=function(e){var i=0,t=this.parent.getRowsObject();if(this.parent.selectionSettings.persistSelection&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling)){var r=this.parent.getDataModule().isRemote()||!c(this.parent.dataSource)&&this.parent.dataSource.result?this.parent.totalDataRecordsCount:this.getData()&&this.getData().length;return r===t.length?(i=t.filter(function(n){return n.isSelectable}).length,i&&e===i):!1}else return this.parent.allowPaging&&this.parent.selectionSettings.persistSelection?(i=this.parent.partialSelectedRecords.length+this.parent.disableSelectedRecords.length,i===this.totalRecordsCount?this.parent.partialSelectedRecords.length&&e===this.parent.partialSelectedRecords.length:!1):(i=t.filter(function(n){return n.isSelectable}).length,i&&e===i)},s.prototype.keyDownHandler=function(e){((Y.info.name==="chrome"||Y.info.name==="safari")&&(e.keyCode===91||e.keyCode===93)||Y.info.name==="opera"&&e.keyCode===17||Y.info.name==="mozilla"&&e.keyCode===224)&&(this.cmdKeyPressed=!0);var i=b(e.target,"e-headercell"),t=b(e.target,U),r=i?i.children[0].classList.contains("e-headerchkcelldiv"):t?t.classList.contains("e-gridchkbox"):!1;r&&!this.parent.allowKeyboard&&e.keyCode===32&&e.preventDefault()},s.prototype.keyUpHandler=function(e){((Y.info.name==="chrome"||Y.info.name==="safari")&&(e.keyCode===91||e.keyCode===93)||Y.info.name==="opera"&&e.keyCode===17||Y.info.name==="mozilla"&&e.keyCode===224)&&(this.cmdKeyPressed=!1)},s.prototype.clickHandler=function(e){var i=e.target;this.actualTarget=i,!this.isAutoFillSel&&!e.ctrlKey&&!e.shiftKey&&(this.startAFCell=this.endAFCell=null),this.selectionSettings.persistSelection&&(this.deSelectedData=_r(this.persistSelectedData)),(b(i,xe)||b(i,"e-headerchkcelldiv")||this.selectionSettings.allowColumnSelection&&i.classList.contains("e-headercell"))&&(this.isInteracted=!0),this.cmdKeyPressed=e.metaKey,this.isMultiCtrlRequest=e.ctrlKey||this.enableSelectMultiTouch||this.isMacOS&&this.cmdKeyPressed,this.parent.allowKeyboard?this.isMultiShiftRequest=e.shiftKey:(this.isMultiShiftRequest=!1,this.isMultiCtrlRequest=!1),this.isMultiCtrlRequestCell=this.isMultiCtrlRequest,this.popUpClickHandler(e);var t=!1;this.preventFocus=!0;var r,n=b(i,"e-checkbox-wrapper");if(this.checkSelectAllClicked=!!(n&&n.getElementsByClassName("e-checkselectall")||this.selectionSettings.persistSelection&&b(i,xe)),this.selectionSettings.persistSelection&&this.isPartialSelection&&b(i,"e-headerchkcelldiv")&&!i.querySelector(".e-checkbox-disabled")&&(this.isHdrSelectAllClicked=!0),n&&n.querySelectorAll(".e-checkselect,.e-checkselectall").length>0&&(r=n.querySelector('input[type="checkbox"]'),t=!0),this.drawBorders(),this.updateAutoFillPosition(),i=b(i,U),this.parent.isReact&&i&&!i.parentElement&&i.classList.contains("e-rowcell")&&(i=this.parent.getCellFromIndex(parseInt(i.getAttribute("index"),10),parseInt(i.getAttribute("data-colindex"),10))),this.isRowDragSelected&&c(i)&&this.parent.allowRowDragAndDrop&&this.selectionSettings.persistSelection&&this.checkSelectAllClicked&&(this.isRowDragSelected=!1),(i&&i.parentElement.classList.contains(xe)&&!this.parent.selectionSettings.checkboxOnly||t)&&!this.isRowDragSelected){if(this.parent.isCheckBoxSelection&&(this.isMultiCtrlRequest=!0),this.target=i,!c(r))this.checkedTarget=r,r.classList.contains("e-checkselectall")?this.checkSelectAll(r):this.checkSelect(r);else{var a=this.parent,o=0;if(it(a)){var l=i.parentElement.getAttribute("data-uid");o=a.getRows().map(function(h){return h.getAttribute("data-uid")}).indexOf(l)}else o=parseInt(i.parentElement.getAttribute(Z),10);this.parent.isPersistSelection&&!this.parent.editSettings.showAddNewRow&&this.parent.element.getElementsByClassName(li).length>0&&++o,(!this.mUPTarget||!this.mUPTarget.isEqualNode(i))&&this.rowCellSelectionHandler(o,parseInt(i.getAttribute(pe),10)),this.parent.isCheckBoxSelection&&(this.moveIntoUncheckCollection(k(i,"."+xe)),this.setCheckAllState())}!this.parent.isCheckBoxSelection&&Y.isDevice&&!this.isSingleSel()&&this.showPopup(e)}else if(e.target.classList.contains("e-headercell")&&!e.target.classList.contains("e-stackedheadercell")){var l=e.target.querySelector(".e-headercelldiv").getAttribute("e-mappinguid");this.headerSelectionHandler(this.parent.getColumnIndexByUid(l))}this.isMultiCtrlRequest=!1,this.isMultiCtrlRequestCell=this.isMultiCtrlRequest,this.isMultiShiftRequest=!1,c(k(e.target,".e-unboundcell"))&&(this.preventFocus=!1)},s.prototype.popUpClickHandler=function(e){var i=e.target;k(i,".e-headercell")||e.target.classList.contains(U)||k(i,".e-gridpopup")?i.classList.contains("e-rowselect")&&(i.classList.contains("e-spanclicked")?(i.classList.remove("e-spanclicked"),this.enableSelectMultiTouch=!1,this.parent.element.querySelector(".e-gridpopup").style.display="none"):(i.classList.add("e-spanclicked"),this.enableSelectMultiTouch=!0)):this.parent.element.querySelector(".e-gridpopup").style.display="none"},s.prototype.showPopup=function(e){this.selectionSettings.enableSimpleMultiRowSelection||qh(this.parent.element.querySelector(".e-gridpopup"),e,"e-rowselect e-icons e-icon-rowselect"+(!this.isSingleSel()&&(this.selectedRecords.length>1||this.selectedRowCellIndexes.length>1)?" e-spanclicked":""))},s.prototype.rowCellSelectionHandler=function(e,i){if(!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel())this.isDragged||this.selectRow(e,this.selectionSettings.enableToggle),this.selectCell({rowIndex:e,cellIndex:i},this.selectionSettings.enableToggle),this.selectedRowCellIndexes.length&&this.updateAutoFillPosition(),this.drawBorders();else if(this.isMultiShiftRequest)this.parent.isCheckBoxSelection||!this.parent.isCheckBoxSelection&&!k(this.target,"."+U).classList.contains(oi)?this.selectRowsByRange(Ae(this.prevRowIndex)?e:this.prevRowIndex,e):this.addRowsToSelection([e]),this.selectCellsByRange(Ae(this.prevCIdxs)?{rowIndex:e,cellIndex:i}:this.prevCIdxs,{rowIndex:e,cellIndex:i}),this.updateAutoFillPosition(),this.drawBorders();else{if(this.addRowsToSelection([e]),this.selectionSettings.mode==="Both"){var t=this.parent.getColumns().find(function(n){return n.type==="checkbox"}),r=t&&t.index!==i;r&&!this.isMultiCtrlRequestCell?this.selectCell({rowIndex:e,cellIndex:i},this.selectionSettings.enableToggle):(!t||r)&&this.addCellsToSelection([{rowIndex:e,cellIndex:i}])}else this.addCellsToSelection([{rowIndex:e,cellIndex:i}]);this.showHideBorders("none")}this.isDragged=!1},s.prototype.onCellFocused=function(e){if(this.parent.frozenRows&&e.container.isHeader&&e.byKey)if(e.keyArgs.action==="upArrow")this.parent.allowFiltering?e.isJump=e.element.tagName==="INPUT":e.isJump=e.element.tagName==="TH";else if(e.keyArgs.action==="downArrow"){var i=Number(e.element.parentElement.getAttribute(Z));e.isJump=i===0}else e.keyArgs.action==="ctrlHome"&&(e.isJump=!0);var t=(e.container.isHeader&&e.isJump||e.container.isContent&&!e.container.isSelectable)&&!(e.byKey&&e.keyArgs.action==="space")&&!(e.element.classList.contains("e-detailrowexpand")||e.element.classList.contains("e-detailrowcollapse")),r=e.container.isHeader&&e.element.tagName!=="TD"&&!k(e.element,"."+U)&&!(e.byKey&&e.keyArgs.action==="space");if(!e.byKey||t){t&&!this.parent.isCheckBoxSelection&&this.clearSelection();return}var n=e.container.isContent?e.container.indexes:e.indexes,a=n[0],o=n[1],l=this.focus.getPrevIndexes();if((e.element.parentElement.querySelector(".e-rowcelldrag")||e.element.parentElement.querySelector(".e-dtdiagonalright")||e.element.parentElement.querySelector(".e-dtdiagonaldown"))&&(l.cellIndex=l.cellIndex-1),this.parent.frozenRows)if(e.container.isHeader&&(e.element.tagName==="TD"||k(e.element,"."+U))){var h=this.parent.getHeaderTable().querySelector("thead").childElementCount;this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Top"&&e.keyArgs.action==="upArrow"&&h++,a-=h,l.rowIndex=c(l.rowIndex)?null:l.rowIndex-h}else a+=this.parent.frozenRows,l.rowIndex=l.rowIndex===0||!c(l.rowIndex)?l.rowIndex+this.parent.frozenRows:null;if(this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache&&(a=parseInt(e.element.parentElement.getAttribute("data-rowindex"),10)),!((r||["ctrlPlusA","escape"].indexOf(e.keyArgs.action)===-1&&e.keyArgs.action!=="space"&&a===l.rowIndex&&o===l.cellIndex)&&!this.selectionSettings.allowColumnSelection)){this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Top"&&!this.parent.enableVirtualization&&!this.parent.enableInfiniteScrolling&&e.keyArgs.action==="downArrow"&&a--,this.preventFocus=!0;var p=this.getKeyColIndex(e);if(this.needColumnSelection&&(o=p),this.parent.element.classList.contains("e-gridcell-read")&&(e.keyArgs.action==="tab"||e.keyArgs.action==="shiftTab"||e.keyArgs.action==="rightArrow"||e.keyArgs.action==="leftArrow")){var d=this.target.getAttribute("aria-label");d=this.target.innerHTML+" column header "+this.parent.getColumnByIndex(o).field,this.target.setAttribute("aria-label",d)}switch(e.keyArgs.action){case"downArrow":case"upArrow":case"enter":case"shiftEnter":this.target=e.element,this.isKeyAction=!0,this.applyDownUpKey(a,o);break;case"rightArrow":case"leftArrow":this.applyRightLeftKey(a,o);break;case"shiftDown":case"shiftUp":this.shiftDownKey(a,o);break;case"shiftLeft":case"shiftRight":this.applyShiftLeftRightKey(a,o);break;case"home":case"end":o=e.keyArgs.action==="end"?this.getLastColIndex(a):0,this.applyHomeEndKey(a,o);break;case"ctrlHome":case"ctrlEnd":this.applyCtrlHomeEndKey(a,o);break;case"escape":this.clearSelection(),this.parent.clipboardModule&&window.navigator.clipboard.writeText("");break;case"ctrlPlusA":this.ctrlPlusA();break;case"space":this.applySpaceSelection(e.element);break;case"tab":this.parent.editSettings.allowNextRowEdit&&this.selectRow(a);break}this.needColumnSelection=!1,this.preventFocus=!1,this.positionBorders(),this.parent.isFrozenGrid()&&(this.showHideBorders("none",!0),this.refreshFrozenBorders()),this.updateAutoFillPosition()}},s.prototype.getKeyColIndex=function(e){var i,t=null,r=e.element.querySelector(".e-stackedheadercelldiv");if(this.selectionSettings.allowColumnSelection&&b(e.element,"e-columnheader"))if(this.needColumnSelection=!!e.container.isHeader,r){if(e.keyArgs.action==="rightArrow"||e.keyArgs.action==="leftArrow")return t;i=r.getAttribute("e-mappinguid");var n=this.getstackedColumns(this.parent.getColumnByUid(i).columns),a=this.parent.getColumnIndexByUid(n[n.length-1].uid),o=this.parent.getColumnIndexByUid(n[0].uid);t=this.prevColIndex>=a?o:a}else t=this.parent.getColumnIndexByUid(e.element.querySelector(".e-headercelldiv").getAttribute("e-mappinguid"));return t},s.prototype.ctrlPlusA=function(){this.isRowType()&&!this.isSingleSel()&&this.selectRowsByRange(0,this.getCurrentBatchRecordChanges().length-1),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange({rowIndex:0,cellIndex:0},{rowIndex:this.parent.getRows().length-1,cellIndex:this.parent.getColumns().length-1})},s.prototype.applySpaceSelection=function(e){e.classList.contains("e-checkselectall")?(this.checkedTarget=e,this.checkSelectAll(this.checkedTarget)):e.classList.contains("e-checkselect")&&(this.checkedTarget=e,this.checkSelect(this.checkedTarget))},s.prototype.applyDownUpKey=function(e,i){var t=this.parent;this.parent.isCheckBoxSelection&&this.parent.checkAllRows==="Check"&&!this.selectionSettings.persistSelection&&!this.selectionSettings.checkboxOnly&&(this.checkSelectAllAction(!1),this.checkedTarget=null),this.isRowType()&&!this.selectionSettings.checkboxOnly&&(this.parent.frozenRows?(this.selectRow(e,!0),this.applyUpDown(t.selectedRowIndex)):(this.selectRow(e,!0),this.applyUpDown(t.selectedRowIndex))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:i},!0),this.selectionSettings.allowColumnSelection&&this.needColumnSelection&&this.selectColumn(i)},s.prototype.applyUpDown=function(e){if(!(e<0)){this.target||(this.target=this.parent.getRows()[0].children[this.parent.groupSettings.columns.length||0]);var i=parseInt(this.target.getAttribute(pe),10),t=this.contentRenderer.getRowByIndex(e);if(t&&(this.target=t.getElementsByClassName(U)[parseInt(i.toString(),10)]),this.addAttribute(this.target),this.parent.element.classList.contains("e-gridcell-read")){var r=this.target.getAttribute("aria-label");r=this.target.innerHTML,this.target.setAttribute("aria-label",r)}}},s.prototype.applyRightLeftKey=function(e,i){this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumn(i):this.isCellType()&&(this.selectCell({rowIndex:e,cellIndex:i},!0),this.addAttribute(this.target))},s.prototype.applyHomeEndKey=function(e,i){this.isCellType()?this.selectCell({rowIndex:e,cellIndex:i},!0):this.addAttribute(this.parent.getCellFromIndex(e,i))},s.prototype.shiftDownKey=function(e,i){this.isMultiShiftRequest=!0,this.isRowType()&&!this.isSingleSel()&&(Ae(this.prevRowIndex)?this.isPartialSelection?this.selectRow(e,!0):this.selectRow(0,!0):(this.selectRowsByRange(this.prevRowIndex,e),this.applyUpDown(e))),this.isCellType()&&!this.isSingleSel()&&this.selectCellsByRange(this.prevCIdxs||{rowIndex:0,cellIndex:0},{rowIndex:e,cellIndex:i}),this.isMultiShiftRequest=!1},s.prototype.applyShiftLeftRightKey=function(e,i){this.isMultiShiftRequest=!0,this.selectionSettings.allowColumnSelection&&this.needColumnSelection?this.selectColumnsByRange(this.prevColIndex,i):this.selectCellsByRange(this.prevCIdxs,{rowIndex:e,cellIndex:i}),this.isMultiShiftRequest=!1},s.prototype.getstackedColumns=function(e){for(var i=[],t=0,r=e.length;t<r;t++)e[parseInt(t.toString(),10)].columns?this.getstackedColumns(e[parseInt(t.toString(),10)].columns):i.push(e[parseInt(t.toString(),10)]);return i},s.prototype.applyCtrlHomeEndKey=function(e,i){this.isRowType()&&(this.selectRow(e,!0),this.addAttribute(this.parent.getCellFromIndex(e,i))),this.isCellType()&&this.selectCell({rowIndex:e,cellIndex:i},!0)},s.prototype.addRemoveClassesForRow=function(e,i,t){for(var r=[],n=3;n<arguments.length;n++)r[n-3]=arguments[n];if(e){var a=[].slice.call(e.getElementsByClassName(U)),o=e.querySelector(".e-detailrowcollapse")||e.querySelector(".e-detailrowexpand"),l=e.querySelector(".e-rowdragdrop");o&&a.push(o),l&&a.push(l),Vt.apply(void 0,[a,i].concat(r))}this.getRenderer().setSelection(e?e.getAttribute("data-uid"):null,i,t)},s.prototype.isRowType=function(){return this.selectionSettings.mode==="Row"||this.selectionSettings.mode==="Both"},s.prototype.isCellType=function(){return this.selectionSettings.mode==="Cell"||this.selectionSettings.mode==="Both"},s.prototype.isSingleSel=function(){return this.selectionSettings.type==="Single"},s.prototype.getRenderer=function(){return c(this.contentRenderer)&&(this.contentRenderer=this.factory.getRenderer(We.Content)),this.contentRenderer},s.prototype.getSelectedRecords=function(){var e=[];return!this.selectionSettings.persistSelection&&this.selectedRecords.length?e=this.parent.getRowsObject().filter(function(i){return i.isSelected}).map(function(i){return i.data}):e=this.persistSelectedData,e},s.prototype.selectColumn=function(e){var i=this.parent;if(!c(i.getColumns()[parseInt(e.toString(),10)])){var t=i.getColumnByIndex(e),r=i.getColumnHeaderByUid(t.uid),n=r.classList.contains("e-columnselection");if(i.selectionSettings.allowColumnSelection){var a=this.selectedColumnsIndexes.length>1&&this.selectedColumnsIndexes.indexOf(e)>-1;if(this.clearColDependency(),!n||!this.selectionSettings.enableToggle||a){var o={columnIndex:e,headerCell:r,column:t,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(o,Nr),o.cancel){this.disableInteracted();return}(!(i.selectionSettings.enableToggle&&e===this.prevColIndex&&n)||a)&&this.updateColSelection(r,e);var l={columnIndex:e,headerCell:r,column:t,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(l,Vr)}this.updateColProps(e)}}},s.prototype.selectColumnsByRange=function(e,i){var t=this.parent;if(!c(t.getColumns()[parseInt(e.toString(),10)])){var r=[];if(t.selectionSettings.type==="Single"||c(i))r[0]=e;else for(var n=e<i,a=e;n?a<=i:a>=i;n?a++:a--)r.push(a);this.selectColumns(r)}},s.prototype.selectColumns=function(e){var i=this.parent,t=this.getselectedCols();if(i.selectionSettings.type==="Single"&&(e=[e[0]]),!!i.selectionSettings.allowColumnSelection){this.clearColDependency();var r={columnIndex:e[0],headerCell:t,columnIndexes:e,column:i.getColumnByIndex(e[0]),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(r,Nr),r.cancel){this.disableInteracted();return}for(var n=0,a=e.length;n<a;n++)this.updateColSelection(i.getColumnHeaderByUid(i.getColumnByIndex(e[parseInt(n.toString(),10)]).uid),e[parseInt(n.toString(),10)]);t=this.getselectedCols();var o={columnIndex:e[0],headerCell:t,columnIndexes:e,column:i.getColumnByIndex(e[0]),target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(o,Vr),this.updateColProps(e[0])}},s.prototype.selectColumnWithExisting=function(e){var i=this.parent;if(!c(i.getColumns()[parseInt(e.toString(),10)])){var t=i.getColumnHeaderByUid(i.getColumnByIndex(e).uid),r=this.getselectedCols();if(i.selectionSettings.type==="Single"&&this.clearColDependency(),!!i.selectionSettings.allowColumnSelection){if(this.selectedColumnsIndexes.indexOf(e)>-1)this.clearColumnSelection(e);else{var n={columnIndex:e,headerCell:r,columnIndexes:this.selectedColumnsIndexes,column:i.getColumnByIndex(e),cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex,isCtrlPressed:this.isMultiCtrlRequest,isShiftPressed:this.isMultiShiftRequest};if(this.onActionBegin(n,Nr),n.cancel){this.disableInteracted();return}this.updateColSelection(t,e),r=this.getselectedCols();var a={columnIndex:e,headerCell:r,column:i.getColumnByIndex(e),columnIndexes:this.selectedColumnsIndexes,target:this.actualTarget,isInteracted:this.isInteracted,previousColumnIndex:this.prevColIndex};this.onActionComplete(a,Vr)}this.updateColProps(e)}}},s.prototype.clearColumnSelection=function(e){if(this.isColumnSelected){var i=this.parent;if(!c(e)&&this.selectedColumnsIndexes.indexOf(e)===-1)return;var t=c(e)?this.selectedColumnsIndexes[this.selectedColumnsIndexes.length-1]:e,r=i.getColumnByIndex(t),n=i.getColumnHeaderByUid(r.uid),a={columnIndex:t,headerCell:n,columnIndexes:this.selectedColumnsIndexes,column:r,cancel:!1,target:this.actualTarget,isInteracted:this.isInteracted},o=this.columnDeselect(a,$a);if(o){this.disableInteracted();return}for(var l=c(e)?[].slice.call(i.getHeaderContent().getElementsByClassName("e-columnselection")):[n],h=this.getSelectedColumnCells(e),p=0,d=l.length;p<d;p++)Vt([l[parseInt(p.toString(),10)]],!1,"e-columnselection");for(var p=0,d=h.length;p<d;p++)Vt([h[parseInt(p.toString(),10)]],!1,"e-columnselection");c(e)?(this.columnDeselect(a,eo),this.selectedColumnsIndexes=[],this.isColumnSelected=!1,this.parent.getColumns().filter(function(u){return u.isSelected=!1})):(this.selectedColumnsIndexes.splice(this.selectedColumnsIndexes.indexOf(e),1),this.parent.getColumns()[parseInt(e.toString(),10)].isSelected=!1)}},s.prototype.getselectedCols=function(){var e=this.parent,i;if(this.selectedColumnsIndexes.length>1){i=[];for(var t=0;t<this.selectedColumnsIndexes.length;t++)i.push(e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[parseInt(t.toString(),10)]).uid))}else i=e.getColumnHeaderByUid(e.getColumnByIndex(this.selectedColumnsIndexes[0]).uid);return i},s.prototype.getSelectedColumnCells=function(e){for(var i=this.parent,t=!c(this.parent.rowTemplate),r=t?i.getRows():i.getDataRows(),n=[],a=c(e)?".e-columnselection":'[data-colindex="'+e+'"]',o=0,l=r.length;o<l;o++)n=n.concat([].slice.call(r[parseInt(o.toString(),10)].querySelectorAll(a)));return n},s.prototype.columnDeselect=function(e,i){return i==="columnDeselected"&&delete e.cancel,this.onActionComplete(e,i),e.cancel},s.prototype.updateColProps=function(e){this.prevColIndex=e,this.isColumnSelected=this.selectedColumnsIndexes.length&&!0},s.prototype.clearColDependency=function(){this.clearColumnSelection(),this.selectedColumnsIndexes=[]},s.prototype.updateColSelection=function(e,i){if(!c(this.parent.getColumns()[parseInt(i.toString(),10)])){var t=!c(this.parent.rowTemplate),r=t?this.parent.getRows():this.parent.getDataRows();this.selectedColumnsIndexes.push(i),this.parent.getColumns()[parseInt(i.toString(),10)].isSelected=!0,i=i+this.parent.getIndentCount(),Vt([e],!0,"e-columnselection");for(var n=0,a=r.length;n<a;n++)if(r[parseInt(n.toString(),10)].classList.contains(xe))if((r[parseInt(n.toString(),10)].classList.contains(Ii)||r[parseInt(n.toString(),10)].classList.contains(li))&&this.parent.editSettings.mode==="Normal"&&!c(r[parseInt(n.toString(),10)].querySelector("tr").childNodes[parseInt(i.toString(),10)]))Vt([r[parseInt(n.toString(),10)].querySelector("tr").childNodes[parseInt(i.toString(),10)]],!0,"e-columnselection");else if(this.parent.isSpan&&this.parent.isFrozenGrid())for(var o=r[parseInt(n.toString(),10)].querySelectorAll(".e-rowcell"),l=0;l<o.length;l++)o[parseInt(l.toString(),10)].getAttribute("aria-colindex")===e.getAttribute("aria-colindex")&&Vt([o[parseInt(l.toString(),10)]],!0,"e-columnselection");else c(r[parseInt(n.toString(),10)].childNodes[parseInt(i.toString(),10)])||Vt([r[parseInt(n.toString(),10)].childNodes[parseInt(i.toString(),10)]],!0,"e-columnselection")}},s.prototype.headerSelectionHandler=function(e){!this.isMultiCtrlRequest&&!this.isMultiShiftRequest||this.isSingleSel()?this.selectColumn(e):this.isMultiShiftRequest?this.selectColumnsByRange(Ae(this.prevColIndex)?e:this.prevColIndex,e):this.selectColumnWithExisting(e)},s.prototype.addEventListener_checkbox=function(){var e=this;this.parent.on(xi,this.dataReady,this),this.onDataBoundFunction=this.onDataBound.bind(this),this.parent.addEventListener(At,this.onDataBoundFunction),this.parent.on(Ws,this.onDataBoundFunction),this.parent.on(ce,this.checkBoxSelectionChanged,this),this.parent.on(ln,this.initPerisistSelection,this),this.parent.on(yt,this.setCheckAllForEmptyGrid,this),this.actionCompleteFunc=this.actionCompleteHandler.bind(this),this.parent.addEventListener(Le,this.actionCompleteFunc),this.parent.on(hi,this.clickHandler,this),this.resizeEndFn=function(){e.updateAutoFillPosition(),e.drawBorders()},this.resizeEndFn.bind(this),this.parent.addEventListener(po,this.resizeEndFn)},s.prototype.removeEventListener_checkbox=function(){this.parent.off(xi,this.dataReady),this.parent.removeEventListener(At,this.onDataBoundFunction),this.parent.removeEventListener(Le,this.actionCompleteFunc),this.parent.off(Ws,this.onDataBoundFunction),this.parent.off(yt,this.setCheckAllForEmptyGrid),this.parent.off(hi,this.clickHandler),this.parent.off(ln,this.initPerisistSelection)},s.prototype.setCheckAllForEmptyGrid=function(){var e=this.getCheckAllBox();if(e){this.parent.isCheckBoxSelection=!0;var i=e.nextElementSibling;z([i],["e-check","e-stop","e-uncheck"]),L([i.parentElement],["e-checkbox-disabled"])}},s.prototype.dataReady=function(e){this.isHeaderCheckboxClicked=!1;var i=this.parent.enableInfiniteScrolling&&e.requestType==="infiniteScroll";e.requestType!=="virtualscroll"&&!this.parent.isPersistSelection&&!i&&(this.disableUI=!this.parent.enableImmutableMode&&!(e.requestType==="save"&&e.action==="add"),this.clearSelection(),this.setCheckAllState(),this.disableUI=!1)},s.prototype.actionCompleteHandler=function(e){e.requestType==="save"&&this.parent.isPersistSelection&&this.refreshPersistSelection()},s.prototype.selectRowIndex=function(e){this.parent.isSelectedRowIndexUpdating=!0,c(this.parent.selectedRowIndex)||this.parent.selectedRowIndex===-1||!this.parent.enablePersistence?this.parent.selectedRowIndex=e:this.parent.selectedRowIndex=-1},s.prototype.disableInteracted=function(){this.isInteracted=!1},s.prototype.activeTarget=function(){this.actualTarget=this.isInteracted?this.actualTarget:null},s}(),ba=function(){function s(e){this.parent=e,this.addEventListener()}return s.prototype.search=function(e){var i=this.parent;if(e=c(e)?"":e,Fa(i)){i.notify(ko,{instance:this,handler:this.search,arg1:e});return}e!==i.searchSettings.key?(i.searchSettings.key=isNaN(parseFloat(e))?e.toString():parseFloat(e).toString(),i.dataBind()):this.refreshSearch&&i.refresh()},s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(Ue,this.onPropertyChanged,this),this.parent.on(Es,this.onSearchComplete,this),this.parent.on(Ft,this.destroy,this),this.actionCompleteFunc=this.onActionComplete.bind(this),this.parent.addEventListener(Le,this.actionCompleteFunc),this.parent.on(an,this.cancelBeginEvent,this))},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(Ue,this.onPropertyChanged),this.parent.off(Es,this.onSearchComplete),this.parent.off(Ft,this.destroy),this.parent.removeEventListener(Le,this.actionCompleteFunc),this.parent.off(an,this.cancelBeginEvent))},s.prototype.destroy=function(){this.removeEventListener()},s.prototype.onPropertyChanged=function(e){e.module===this.getModuleName()&&(c(e.properties.key)?this.parent.notify(ar,{requestType:"searching",type:vt}):this.parent.notify(ar,{requestType:"searching",type:vt,searchString:this.parent.searchSettings.key}))},s.prototype.onSearchComplete=function(e){this.parent.trigger(Le,O(e,{searchString:this.parent.searchSettings.key,requestType:"searching",type:Le}))},s.prototype.onActionComplete=function(e){this.refreshSearch=e.requestType!=="searching"},s.prototype.cancelBeginEvent=function(e){e.requestType==="searching"&&this.parent.setProperties({searchSettings:{key:""}},!0)},s.prototype.getModuleName=function(){return"search"},s}(),fh=function(){function s(e){this.colName=[],this.isShowHide=!1,this.parent=e,this.addEventListener()}return s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.evtHandlers=[{event:ea,handler:this.batchChanges},{event:Fl,handler:this.resetColumnState}],Et(this.parent,this.evtHandlers,!0,this))},s.prototype.removeEventListener=function(){this.parent.isDestroyed||Et(this.parent,this.evtHandlers,!1)},s.prototype.batchChanges=function(){this.isShowHide&&(this.isShowHide=!1,this.setVisible(this.colName,this.changedCol),this.changedCol=this.colName=[])},s.prototype.show=function(e,i){var t=this.getToggleFields(e),r=this.getColumns(t,i);this.parent.notify(rn,{module:"edit"});for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)].visible=!0;this.setVisible(r)},s.prototype.hide=function(e,i){var t=this.getToggleFields(e),r=this.getColumns(t,i);this.parent.notify(rn,{module:"edit"});for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)].visible=!1;this.setVisible(r)},s.prototype.getToggleFields=function(e){var i=[];return typeof e=="string"?i=[e]:i=e,i},s.prototype.getColumns=function(e,i){var t=this,r=jt(e,function(n){return jt(t.parent.columnModel,function(a){if(a[""+i]===n)return a})[0]});return r},s.prototype.batchActionPrevent=function(e,i){return i===void 0&&(i=[]),Fa(this.parent)?(this.colName=e,this.changedCol=i,this.parent.closeEdit(),!1):!0},s.prototype.resetColumnState=function(){if(this.isShowHide)for(var e=0;e<this.colName.length;e++)this.colName[parseInt(e.toString(),10)].visible=!this.colName[parseInt(e.toString(),10)].visible},s.prototype.setVisible=function(e,i){var t=this;if(i===void 0&&(i=[]),this.isShowHide=!0,!!this.batchActionPrevent(e,i)){i=i.length>0?i:e;var r={requestType:"columnstate",cancel:!1,columns:i},n="cancel";this.parent.enableInfiniteScrolling&&this.parent.allowGrouping&&this.parent.groupModule.groupSettings.columns.length>0&&(this.parent.contentModule.visibleRows=[]),this.parent.trigger(vt,r,function(a){var o=t.parent.getColumns();if(e=c(e)?o:e,a[""+n]){t.parent.notify(rl,{showHideArgs:a}),e.length>0&&(e[0].visible=!0);return}it(t.parent)&&t.parent.contentModule.emptyVcRows();var l=t.parent.element.querySelector(".e-addedrow");if(t.parent.editSettings.showAddNewRow&&l&&(B(l),(t.parent.enableVirtualization||t.parent.enableInfiniteScrolling)&&(t.parent.isAddNewRow=!0),t.parent.addNewRowFocus=!0,t.parent.isEdit=!1),t.parent.allowSelection&&t.parent.getSelectedRecords().length&&!t.parent.selectionSettings.persistSelection&&t.parent.clearSelection(),t.parent.enableColumnVirtualization){var h=e.filter(function(u){return o.some(function(f){return u.field===f.field})});h.length&&t.parent.notify(or,e)}else t.parent.isFrozenGrid()&&e.length&&t.parent.notify(pn,{isModeChg:!0}),t.parent.notify(or,e);var p={requestType:"columnstate",columns:i};t.parent.trigger(Le,p);var d=!t.parent.element.querySelector(".e-addedrow");t.parent.editSettings.showAddNewRow&&d&&(t.parent.isEdit=!1,t.parent.addRecord(),t.parent.enableVirtualization||t.parent.enableInfiniteScrolling||t.parent.notify(ai,{})),t.parent.columnQueryMode!=="All"&&t.parent.refresh()}),this.parent.autoFit&&!this.parent.groupSettings.columns.length&&this.parent.preventAdjustColumns()}},s}(),gh=function(){function s(e){this.previousValues={top:0,left:0},this.oneTimeReady=!0,this.parent=e,this.widthService=new Sa(e),this.addEventListener()}return s.prototype.getModuleName=function(){return"scroll"},s.prototype.setWidth=function(e){if(this.parent.element.style.width=$t(this.parent.width),e&&this.widthService.setWidthToColumns(),this.parent.toolbarModule&&this.parent.toolbarModule.toolbar&&this.parent.toolbarModule.toolbar.element){var i=this.parent.toolbarModule.toolbar.element,t=i.querySelector(".e-toolbar-left"),r=i.querySelector(".e-toolbar-center"),n=i.querySelector(".e-toolbar-right"),a=i.querySelector(".e-toolbar-items"),o=t?t.clientWidth:0,l=r?r.clientWidth:0,h=n?n.clientWidth:0,p=a?a.clientWidth:0,d=i?i.clientWidth:0;(!this.parent.enableAdaptiveUI||o>d||l>d||h>d||p>d)&&this.parent.toolbarModule.toolbar.refreshOverflow()}},s.prototype.setHeight=function(){var e=0,i=this.parent.getContent().querySelector("."+we),t=this.parent.height;if(this.parent.enableColumnVirtualization&&this.parent.isFrozenGrid()&&this.parent.height!=="auto"&&this.parent.height.toString().indexOf("%")<0&&(t=parseInt(t,10)-s.getScrollBarWidth()),!this.parent.enableVirtualization&&this.parent.frozenRows&&this.parent.height!=="auto"){var r=this.parent.getHeaderContent().querySelector(N+":not(.e-masked-tbody)");if(e=r?r.offsetHeight:0,r&&e){var n=r.getElementsByClassName(li).length,a=n*this.parent.getRowHeight();e-=a}else!this.parent.isInitialLoad&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&this.parent.getHeaderContent().querySelector(".e-masked-table")&&(t=parseInt(t,10)-this.parent.frozenRows*this.parent.getRowHeight());i.style.height=$t(t-e)}else i.style.height=$t(t);this.ensureOverflow(i),this.parent.isFrozenGrid()&&this.refresh()},s.prototype.setPadding=function(){var e=this.parent.getHeaderContent(),i=s.getScrollBarWidth()-this.getThreshold(),t=this.getCssProperties();e.querySelector("."+Re).style[t.border]=i>0?"1px":"0px",e.style[t.padding]=i>0?i+"px":"0px"},s.prototype.removePadding=function(e){var i=this.getCssProperties(e),t=this.parent.getHeaderContent().querySelector("."+Re);t.style[i.border]="",t.parentElement.style[i.padding]="";var r=this.parent.getFooterContent();r&&r.classList.contains("e-footerpadding")&&r.classList.remove("e-footerpadding")},s.prototype.refresh=function(){if(this.parent.height==="100%"){var e=this.parent.getContent();this.parent.element.style.height="100%";var i=this.widthService.getSiblingsHeight(e);e.style.height="calc(100% - "+i+"px)"}},s.prototype.getThreshold=function(){var e=Y.info.name;return e==="mozilla"?.5:1},s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(yt,this.wireEvents,this),this.parent.on(ce,this.wireEvents,this),this.parent.on(ve,this.onPropertyChanged,this),this.parent.on(Hs,this.wireEvents,this),this.parent.on(Rt,this.setScrollLeft,this))},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(yt,this.wireEvents),this.parent.off(ce,this.wireEvents),this.parent.off(ve,this.onPropertyChanged),this.parent.off(Hs,this.wireEvents),this.parent.off(Rt,this.setScrollLeft),this.unwireEvents())},s.prototype.unwireEvents=function(){this.parent.frozenRows&&this.header&&(x.remove(this.header,"touchstart pointerdown",this.setPageXY),x.remove(this.header,"touchmove pointermove",this.onTouchScroll));var e=this.parent.getContent()?this.parent.getContent().querySelector(".e-movablescrollbar"):null;this.parent.isFrozenGrid()&&this.parent.enableColumnVirtualization&&(e&&x.remove(e,"scroll",this.onCustomScrollbarScroll),this.content&&(x.remove(this.content,"scroll",this.onCustomScrollbarScroll),x.remove(this.content,"touchstart pointerdown",this.setPageXY),/macintosh|ipad/.test(Y.userAgent.toLowerCase())&&Y.isDevice||x.remove(this.content,"touchmove pointermove",this.onTouchScroll)),this.header&&(x.remove(this.header,"scroll",this.onCustomScrollbarScroll),x.remove(this.header,"touchstart pointerdown",this.setPageXY),x.remove(this.header,"touchmove pointermove",this.onTouchScroll))),this.content&&x.remove(this.content,"scroll",this.contentScrollHandler),this.header&&x.remove(this.header,"scroll",this.headerScrollHandler),this.contentScrollHandler=null,this.headerScrollHandler=null,this.parent.aggregates.length&&this.parent.getFooterContent()&&x.remove(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll)},s.prototype.setScrollLeft=function(){this.parent.getHeaderContent().querySelector("."+Re).scrollLeft=this.previousValues.left},s.prototype.onContentScroll=function(e){var i=this,t=e,r=t.classList.contains(Re);return function(n){if(!(i.content.querySelector(N)===null||i.parent.isPreventScrollEvent)){var a=n.target;if(i.parent.frozenRows&&(i.content.scrollTop>0&&i.parent.frozenRows?L([i.parent.element],"e-top-shadow"):z([i.parent.element],"e-top-shadow")),i.parent.element.querySelectorAll(".e-leftfreeze,.e-fixedfreeze,.e-rightfreeze").length){var o=i.parent.getContent().querySelectorAll('.e-freezeerror:not([style*="display: none"])'),l=i.parent.getContent().querySelectorAll('.e-fixederror:not([style*="display: none"])');a.scrollLeft!==0&&i.parent.getVisibleFrozenLeftCount()?L([i.parent.element],"e-left-shadow"):z([i.parent.element],"e-left-shadow");var h=Math.round((i.parent.enableRtl?a.scrollWidth+a.scrollLeft:a.scrollWidth-a.scrollLeft)+(i.parent.height==="auto"?0:1));h===a.offsetWidth&&i.parent.getVisibleFrozenRightCount()?z([i.parent.element],"e-right-shadow"):L([i.parent.element],"e-right-shadow");var p=[].slice.call(i.parent.getContent().querySelectorAll(".e-row:not(.e-hiddenrow)"));if((p.length===1&&o.length||i.parent.element.querySelector('.e-freeze-autofill:not([style*="display: none"])')||l.length)&&a.scrollLeft!==i.previousValues.left){a.scrollLeft=i.previousValues.left;return}if(p.length!==1&&(o.length||l.length)&&a.scrollTop!==i.previousValues.top){a.scrollTop=i.previousValues.top;return}}var d=a.scrollLeft;if(!c(i.parent.infiniteScrollModule)&&i.parent.enableInfiniteScrolling&&(!i.parent.isEdit||i.parent.editSettings.showAddNewRow&&!i.parent.element.querySelector(".e-editedrow"))&&i.parent.notify(Yo,{target:n.target,isLeft:i.previousValues.left!==d}),i.parent.groupSettings.columns.length&&i.parent.groupSettings.enableLazyLoading){var u=i.previousValues.top<i.parent.getContent().firstElementChild.scrollTop;i.parent.notify(sl,{scrollDown:u})}i.parent.notify(Uo,{});var f=a.classList.contains("e-summarycontent");if(i.previousValues.left===d){i.previousValues.top=r?a.scrollTop:i.previousValues.top;return}i.parent.notify(il,n),t.scrollLeft=d,f&&(i.header.scrollLeft=d),i.previousValues.left=d,i.parent.notify(zs,{left:d})}}},s.prototype.onCustomScrollbarScroll=function(e,i){var t=this,r=e,n=i;return function(a){if(t.content.querySelector(N)!==null){var o=a.target,l=o.scrollLeft;t.previousValues.left!==l&&(r.scrollLeft=l,n.scrollLeft=l,t.previousValues.left=l,t.parent.notify(zs,{left:l}),t.parent.isDestroyed)}}},s.prototype.onTouchScroll=function(e){var i=this,t=e;return function(r){if(r.pointerType!=="mouse"){var n=i.parent.isFrozenGrid(),a=i.getPointXY(r),o=t.scrollLeft+(i.pageXY.x-a.x),l=i.parent.getHeaderContent().querySelector("."+Re),h=i.parent.getContent().querySelector("."+we);if(!(i.previousValues.left===o||o<0||l.scrollWidth-l.clientWidth<o)){if(r.preventDefault(),l.scrollLeft=o,h.scrollLeft=o,n&&i.parent.enableColumnVirtualization){var p=i.parent.getContent().querySelector(".e-movablescrollbar");p.scrollLeft=o}i.pageXY.x=a.x,i.previousValues.left=o}}}},s.prototype.setPageXY=function(){var e=this;return function(i){i.pointerType!=="mouse"&&(e.pageXY=e.getPointXY(i))}},s.prototype.getPointXY=function(e){var i={x:0,y:0};return e.touches&&e.touches.length?(i.x=e.touches[0].pageX,i.y=e.touches[0].pageY):(i.x=e.pageX,i.y=e.pageY),i},s.prototype.getScrollbleParent=function(e){if(e===null)return null;var i=c(e.tagName)?e.scrollingElement:e,t=document.defaultView.getComputedStyle(i,null).overflowY;return i.scrollHeight>i.clientHeight&&t!=="hidden"&&t!=="visible"||e.tagName==="HTML"||e.tagName==="BODY"?e:this.getScrollbleParent(e.parentNode)},s.prototype.addStickyListener=function(e){this.parentElement=this.getScrollbleParent(this.parent.element.parentElement),e&&this.parentElement?(this.eventElement=this.parentElement.tagName==="HTML"||this.parentElement.tagName==="BODY"?document:this.parentElement,x.add(this.eventElement,"scroll",this.makeStickyHeader,this)):this.eventElement&&(x.remove(this.eventElement,"scroll",this.makeStickyHeader),this.eventElement=null)},s.prototype.resizeFrozenRowBorder=function(){var e;this.parent.element.querySelector(".e-frozenrow-border")?e=this.parent.element.querySelector(".e-frozenrow-border"):(e=this.parent.createElement("div",{className:"e-frozenrow-border"}),this.parent.element.insertBefore(e,this.parent.element.querySelector(".e-gridcontent")));var i=this.parent.height!=="auto"?s.getScrollBarWidth():0;e.style.width=this.parent.element.offsetWidth-i-.5+"px"},s.prototype.wireEvents=function(){var e=this;if(this.oneTimeReady){var i=this.parent.isFrozenGrid();this.content=this.parent.getContent().querySelector("."+we),this.header=this.parent.getHeaderContent().querySelector("."+Re);var t=this.parent.getContent().querySelector(".e-movablescrollbar");this.parent.frozenRows&&this.header&&this.content&&(x.add(this.header,"touchstart pointerdown",this.setPageXY(),this),x.add(this.header,"touchmove pointermove",this.onTouchScroll(this.content),this)),i&&t&&this.parent.enableColumnVirtualization&&(x.add(t,"scroll",this.onCustomScrollbarScroll(this.content,this.header),this),x.add(this.content,"scroll",this.onCustomScrollbarScroll(t,this.header),this),x.add(this.header,"scroll",this.onCustomScrollbarScroll(t,this.content),this),x.add(this.header,"touchstart pointerdown",this.setPageXY(),this),x.add(this.header,"touchmove pointermove",this.onTouchScroll(this.content),this),x.add(this.content,"touchstart pointerdown",this.setPageXY(),this),/macintosh|ipad/.test(Y.userAgent.toLowerCase())&&Y.isDevice||x.add(this.content,"touchmove pointermove",this.onTouchScroll(this.header),this)),this.contentScrollHandler=this.onContentScroll(this.header),this.headerScrollHandler=this.onContentScroll(this.content),x.add(this.content,"scroll",this.contentScrollHandler,this),x.add(this.header,"scroll",this.headerScrollHandler,this),this.parent.aggregates.length&&x.add(this.parent.getFooterContent().firstChild,"scroll",this.onContentScroll(this.content),this),this.parent.enableStickyHeader&&this.addStickyListener(!0),this.refresh(),this.oneTimeReady=!1}var r=this.parent.getContentTable(),n,a,o;Da(function(){n=e.header.scrollLeft,a=r.scrollHeight,o=e.parent.getContent().clientHeight},function(){var l={cancel:!1};e.parent.notify(hl,l),a<o&&e.parent.height!=="auto"&&e.setLastRowCell(),e.parent.frozenRows&&e.resizeFrozenRowBorder(),!e.parent.enableVirtualization&&!e.parent.enableInfiniteScrolling&&(l.cancel||(e.header.scrollLeft=e.previousValues.left,e.content.scrollLeft=e.previousValues.left,e.content.scrollTop=e.previousValues.top)),e.parent.enableColumnVirtualization||(e.content.scrollLeft=n,e.parent.isFrozenGrid()&&(e.previousValues.left=n))}),this.parent.isPreventScrollEvent=!1},s.prototype.setLastRowCell=function(){var e=this.parent.getContentTable();e.querySelector("tr:nth-last-child(2)")&&(z(e.querySelector("tr:nth-last-child(2)").querySelectorAll("td"),"e-lastrowcell"),this.parent.isSpan&&z(e.querySelectorAll(".e-row-span-lastrowcell"),"e-lastrowcell"),this.parent.editSettings.showAddNewRow&&this.parent.editSettings.newRowPosition==="Bottom"&&L(e.querySelector("tr:nth-last-child(2)").querySelectorAll("td"),"e-lastrowcell")),L(e.querySelectorAll("tr:last-child td"),"e-lastrowcell"),this.parent.isSpan&&L(e.querySelectorAll(".e-row-span-lastrowcell"),"e-lastrowcell")},s.prototype.getCssProperties=function(e){var i={},t=c(e)?this.parent.enableRtl:e;return i.border=t?"borderLeftWidth":"borderRightWidth",i.padding=t?"paddingLeft":"paddingRight",i},s.prototype.ensureOverflow=function(e){e.style.overflowY=this.parent.height==="auto"?"auto":"scroll"},s.prototype.onPropertyChanged=function(e){if(e.module===this.getModuleName()){this.setPadding(),this.oneTimeReady=!0,this.parent.height==="auto"&&this.removePadding(),this.wireEvents(),this.setHeight();var i="width";this.setWidth(!c(e.properties[""+i]))}},s.prototype.makeStickyHeader=function(){if(this.parent.enableStickyHeader&&this.parent.element&&this.parent.getContent()){var e=this.parent.getContent().getClientRects()[0];if(e){var i=this.parent.getHeaderContent(),t=this.parent.element.querySelector(".e-toolbar"),r=this.parent.element.querySelector(".e-groupdroparea"),n=i.offsetHeight+(t?t.offsetHeight:0)+(r?r.offsetHeight:0),a=this.parentElement.getClientRects()[0].top,o=e.top-(a<0?0:a),l=e.left,h=document.body.querySelector("#"+this.parent.element.id+"_columnmenu");if(o<n&&e.bottom>0){i.classList.add("e-sticky");var p=0;r&&this.parent.groupSettings.showDropArea&&(this.setSticky(r,p,e.width,l,!0),p+=r.getClientRects()[0].height),t&&(this.setSticky(t,p,e.width,l,!0),p+=t.getClientRects()[0].height),this.setSticky(i,p,e.width,l,!0),c(h)||(h.style.position="fixed",h.style.top=n+"px")}else if(i.classList.contains("e-sticky")){this.setSticky(i,null,null,null,!1),t&&this.setSticky(t,null,null,null,!1),r&&this.setSticky(r,null,null,null,!1);var d=this.parent.element.querySelector(".e-ccdlg");if(d&&d.classList.remove("e-sticky"),!c(h)){h.style.position="absolute";var u=e.top-a;h.style.top=u+"px"}}this.parent.notify(Il,{})}}},s.prototype.setSticky=function(e,i,t,r,n){n?(e.style.width=t+"px",e.classList.add("e-sticky")):e.classList.remove("e-sticky"),e.style.top=i!=null?i+"px":"",e.style.left=r!==null?parseInt(e.style.left,10)!==r?r+"px":e.style.left:""},s.prototype.destroy=function(){var e=this.parent.element;if(!(!e||!e.querySelector("."+ze)&&!e.querySelector("."+mt))){this.removeEventListener();var i=this.parent.getContent().querySelector("."+we);x.remove(i,"scroll",this.onContentScroll),this.parent.enableStickyHeader&&this.addStickyListener(!1),this.removePadding(),z([this.parent.getHeaderContent().querySelector("."+Re)],Re),z([i],we),i.style.height="",this.parent.element.style.width=""}},s.getScrollBarWidth=function(){return Ne()},s}(),Ia=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),xt=function(s,e,i,t){var r=arguments.length,n=r<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,i):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,e,i,t);else for(var o=s.length-1;o>=0;o--)(a=s[o])&&(n=(r<3?a(n):r>3?a(e,i,n):a(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n},mh=function(s){Ia(e,s);function e(){var i=s!==null&&s.apply(this,arguments)||this;return i.templateFn={},i}return e.prototype.setFormatter=function(i){this.formatFn=i},e.prototype.getFormatter=function(){return this.formatFn},e.prototype.setTemplate=function(i){i===void 0&&(i={}),this.footerTemplate!==void 0&&(this.templateFn[Ct(M,M.Summary)]={fn:kt(this.footerTemplate,i),property:"footerTemplate"}),this.groupFooterTemplate!==void 0&&(this.templateFn[Ct(M,M.GroupSummary)]={fn:kt(this.groupFooterTemplate,i),property:"groupFooterTemplate"}),this.groupCaptionTemplate!==void 0&&(this.templateFn[Ct(M,M.CaptionSummary)]={fn:kt(this.groupCaptionTemplate,i),property:"groupCaptionTemplate"})},e.prototype.getTemplate=function(i){return this.templateFn[Ct(M,i)]},e.prototype.setPropertiesSilent=function(i){this.setProperties(i,!0)},xt([w()],e.prototype,"type",void 0),xt([w()],e.prototype,"field",void 0),xt([w()],e.prototype,"columnName",void 0),xt([w()],e.prototype,"format",void 0),xt([w()],e.prototype,"footerTemplate",void 0),xt([w()],e.prototype,"groupFooterTemplate",void 0),xt([w()],e.prototype,"groupCaptionTemplate",void 0),xt([w()],e.prototype,"customAggregate",void 0),e}(ue),vh=function(s){Ia(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return xt([yi([],mh)],e.prototype,"columns",void 0),e}(ue),yh=function(){function s(e,i){this.copyContent="",this.isSelect=!1,this.parent=e,this.serviceLocator=i,this.addEventListener()}return s.prototype.addEventListener=function(){this.parent.isDestroyed||(this.parent.on(ce,this.initialEnd,this),this.parent.on(si,this.keyDownHandler,this),this.parent.on(hi,this.clickHandler,this),this.parent.on(yt,this.initialEnd,this),x.add(this.parent.element,"keydown",this.pasteHandler,this))},s.prototype.removeEventListener=function(){this.parent.isDestroyed||(this.parent.off(si,this.keyDownHandler),this.parent.off(ce,this.initialEnd),this.parent.off(hi,this.clickHandler),this.parent.off(yt,this.initialEnd),x.remove(this.parent.element,"keydown",this.pasteHandler))},s.prototype.clickHandler=function(e){var i=e.target;i=b(i,"e-rowcell")},s.prototype.pasteHandler=function(e){var i=this,t=this.parent,r=/(Mac)/i.test(navigator.platform),n=this.parent.getSelectedRowCellIndexes();if(e.keyCode===67&&r&&e.metaKey&&!t.isEdit&&this.copy(),n.length&&e.keyCode===86&&(!r&&e.ctrlKey||r&&e.metaKey)&&!t.isEdit){var a=k(document.activeElement,"."+U);if(!this.clipBoardTextArea||!a||!t.editSettings.allowEditing||t.editSettings.mode!=="Batch"||t.selectionSettings.mode!=="Cell"||t.selectionSettings.cellSelectionMode==="Flow")return;this.activeElement=document.activeElement;var o=window.scrollX,l=window.scrollY;this.clipBoardTextArea.focus(),setTimeout(function(){i.activeElement.focus(),window.scrollTo(o,l),i.paste(i.clipBoardTextArea.value,n[0].rowIndex,n[0].cellIndexes[0])},r?100:10)}},s.prototype.paste=function(e,i,t){for(var r=this.parent,n=t,a=i,o,l,h,p=e.split(`
`),d,u=0;u<p.length;u++){if(d=p[parseInt(u.toString(),10)].split("	"),n=t,u===p.length-1&&p[parseInt(u.toString(),10)]===""||Ae(r.getRowByIndex(a))){n++;break}for(var f=0;f<d.length;f++){if(h=r.getCellFromIndex(a,n),!h){n++;break}if(o=r.getColumnByIndex(n),l=o.getParser()?o.getParser()(d[parseInt(f.toString(),10)]):d[parseInt(f.toString(),10)],o.allowEditing&&!o.isPrimaryKey&&!o.template){var m={column:o,data:l,rowIndex:a};this.parent.trigger(fo,m),a=m.rowIndex,m.cancel||r.editModule&&(o.type==="number"?this.parent.editModule.updateCell(a,o.field,parseFloat(m.data)):r.editModule.updateCell(a,o.field,m.data))}n++}a++}r.selectionModule.selectCellsByRange({rowIndex:i,cellIndex:t},{rowIndex:a-1,cellIndex:n-1});var g=this.parent.getCellFromIndex(a-1,n-1);g&&Ie(g,["e-focus","e-focused"],[]),this.clipBoardTextArea.value=""},s.prototype.initialEnd=function(){this.l10n=this.serviceLocator.getService("localization"),this.parent.off(ce,this.initialEnd),this.clipBoardTextArea=this.parent.createElement("textarea",{className:"e-clipboard",styles:"opacity: 0",attrs:{tabindex:"-1","aria-label":this.l10n.getConstant("ClipBoard")}}),this.parent.element.appendChild(this.clipBoardTextArea)},s.prototype.keyDownHandler=function(e){e.action==="ctrlPlusC"?this.copy():e.action==="ctrlShiftPlusH"&&this.copy(!0)},s.prototype.setCopyData=function(e){if(window.getSelection().toString()===""){this.clipBoardTextArea.value=this.copyContent="";var i=this.parent.getDataRows();if(this.parent.selectionSettings.mode!=="Cell"){var t=this.parent.getSelectedRowIndexes().sort(function(f,m){return f-m});if(e){for(var r=[],n=0;n<this.parent.getVisibleColumns().length;n++)r[parseInt(n.toString(),10)]=this.parent.getVisibleColumns()[parseInt(n.toString(),10)].headerText;this.getCopyData(r,!1,"	",e),this.copyContent+=`
`}for(var n=0;n<t.length;n++){n>0&&(this.copyContent+=`
`);var a=[],o=t[parseInt(n.toString(),10)];!it(this.parent)&&(this.parent.enableVirtualization||this.parent.enableInfiniteScrolling&&this.parent.infiniteScrollSettings.enableCache||this.parent.groupSettings.columns.length&&this.parent.groupSettings.enableLazyLoading)&&(o=i.map(function(m){return m.getAttribute("data-rowindex")}).indexOf(t[parseInt(n.toString(),10)].toString())),a.push.apply(a,[].slice.call(i[parseInt(o.toString(),10)].querySelectorAll(".e-rowcell:not(.e-hide)"))),this.getCopyData(a,!1,"	",e)}}else{var l=this.checkBoxSelection();if(l.status){if(e){for(var h=[],n=0;n<l.colIndexes.length;n++){var p=this.parent.getColumnHeaderByIndex(l.colIndexes[parseInt(n.toString(),10)]);p.classList.contains("e-hide")||h.push(p)}this.getCopyData(h,!1,"	",e),this.copyContent+=`
`}for(var n=0;n<l.rowIndexes.length;n++){n>0&&(this.copyContent+=`
`);var d=[].slice.call(i[l.rowIndexes[parseInt(n.toString(),10)]].querySelectorAll(".e-cellselectionbackground:not(.e-hide)"));this.getCopyData(d,!1,"	",e)}}else this.getCopyData([].slice.call(this.parent.element.getElementsByClassName("e-cellselectionbackground")),!0,`
`,e)}var u={data:this.copyContent,cancel:!1};if(this.parent.trigger(uo,u),u.cancel)return;this.clipBoardTextArea.value=this.copyContent=u.data,Y.userAgent.match(/ipad|ipod|iphone/i)?this.clipBoardTextArea.setSelectionRange(0,this.clipBoardTextArea.value.length):this.clipBoardTextArea.select(),this.isSelect=!0}},s.prototype.getCopyData=function(e,i,t,r){for(var n=typeof e[0]!="string",a=0;a<e.length;a++){if(r&&i){var o=parseInt(e[parseInt(a.toString(),10)].getAttribute(pe),10);this.copyContent+=this.parent.getColumns()[parseInt(o.toString(),10)].headerText+`
`}n?e[parseInt(a.toString(),10)].classList.contains("e-hide")||(this.copyContent+=e[parseInt(a.toString(),10)].innerText):this.copyContent+=e[parseInt(a.toString(),10)],a<e.length-1&&(this.copyContent+=t)}},s.prototype.copy=function(e){document.queryCommandSupported("copy")&&this.clipBoardTextArea&&(this.setCopyData(e),document.execCommand("copy"),this.clipBoardTextArea.blur()),this.isSelect&&(window.getSelection().removeAllRanges(),this.isSelect=!1)},s.prototype.getModuleName=function(){return"clipboard"},s.prototype.destroy=function(){this.removeEventListener(),this.clipBoardTextArea&&(B(this.clipBoardTextArea),this.clipBoardTextArea=null)},s.prototype.checkBoxSelection=function(){var e=this.parent,i={status:!1};if(e.selectionSettings.mode==="Cell"){var t=e.getSelectedRowCellIndexes(),r=void 0,n=[],a=void 0;for(a=0;a<t.length&&(t[parseInt(a.toString(),10)].cellIndexes.length&&n.push(t[parseInt(a.toString(),10)].rowIndex),!(t[parseInt(a.toString(),10)].cellIndexes.length&&(r||(r=JSON.stringify(t[parseInt(a.toString(),10)].cellIndexes.sort())),r!==JSON.stringify(t[parseInt(a.toString(),10)].cellIndexes.sort()))));a++);n.sort(function(o,l){return o-l}),a===t.length&&(i={status:!0,rowIndexes:n,colIndexes:t[0].cellIndexes})}return i},s}(),bt="https://ej2.syncfusion.com/documentation/grid",pr="https://ej2.syncfusion.com/documentation/",It="[EJ2Grid.Warning]",Nt="[EJ2Grid.Error]",Yi="[EJ2Grid.Info]",Sh=function(){function s(e){this.parent=e,this.parent.on("initial-end",this.patchadaptor,this)}return s.prototype.getModuleName=function(){return"logger"},s.prototype.log=function(e,i){e instanceof Array||(e=[e]);for(var t=e,r=0;r<t.length;r++){var n=Ch[t[parseInt(r.toString(),10)]],a=n.check(i,this.parent);a.success&&console[n.logType](n.generateMessage(i,this.parent,a.options))}},s.prototype.patchadaptor=function(){var e=this.parent.getDataModule().dataManager.adaptor,i=e.beforeSend;i&&(e.beforeSend=function(t,r,n){i.call(e,t,r,n)})},s.prototype.destroy=function(){this.parent.isDestroyed||this.parent.off("initial-end",this.patchadaptor)},s}(),Ch={module_missing:{type:"module_missing",logType:"warn",check:function(s,e){var i=e.getInjectedModules().map(function(r){return r.prototype.getModuleName()}),t=e.requiredModules().map(function(r){return r.member}).filter(function(r){return i.indexOf(r)===-1});return{success:t.filter(function(r){return r!=="resize"}).length>0,options:t}},generateMessage:function(s,e,i){return i=i.filter(function(t){return t!=="resize"}).reduce(function(t,r){return t+("* "+r+`
`)},""),It+`: MODULES MISSING
The following modules are not injected:.
`+(""+i)+("Refer to "+bt+"/module.html for documentation on importing feature modules.")}},promise_enabled:{type:"promise_enabled",logType:"error",check:function(){return{success:typeof Promise>"u"}},generateMessage:function(){return Nt+`: PROMISE UNDEFINED
Promise object is not present in the global environment,please use polyfil to support Promise object in your environment.
`+("Refer to "+pr+"/base/browser.html?#required-polyfills for more information.")}},primary_column_missing:{type:"primary_column_missing",logType:"warn",check:function(s,e){return{success:e.enableColumnVirtualization?e.getPrimaryKeyFieldNames().length===0:e.getColumns().filter(function(i){return i.isPrimaryKey}).length===0}},generateMessage:function(){return It+`: PRIMARY KEY MISSING
Editing is enabled but primary key column is not specified.
`+("Refer to "+bt+"/api-column.html?#isprimarykey for documentation on providing primary key columns.")}},selection_key_missing:{type:"selection_key_missing",logType:"warn",check:function(s,e){return{success:e.selectionSettings.persistSelection&&e.getColumns().filter(function(i){return i.isPrimaryKey}).length===0}},generateMessage:function(){return It+`: PRIMARY KEY MISSING
selectionSettings.persistSelection property is enabled. It requires one primary key column to persist selection.
`+("Refer to "+bt+"/api-column.html?#isprimarykey for documentation on providing primary key columns.")}},actionfailure:{type:"actionfailure",logType:"error",check:function(){return{success:!0}},generateMessage:function(s,e){var i="",t=wh(s,e),r=bh(s,e);return r!==""?i=r:t!==""?i=t:i=s.error,It+": "+i}},locale_missing:{type:"locale_missing",logType:"warn",check:function(s,e){var i=me.getObject("locale."+e.locale+".grid",Er);return{success:e.locale!=="en-US"&&c(i)}},generateMessage:function(s,e){return It+`: LOCALE CONFIG MISSING
`+("Locale configuration for '"+e.locale+`' is not provided.
`)+("Refer to "+bt+`/globalization-and-localization.html?#localization 
             for documentation on setting locale configuration.`)}},limitation:{type:"limitation",logType:"warn",check:function(s,e){var i=s,t;switch(i){case"freeze":t={success:e.allowGrouping||!Ae(e.detailTemplate)||!Ae(e.childGrid)||!Ae(e.rowTemplate)||e.enableVirtualization,options:{name:"freeze"}};break;case"virtualization":t={success:!Ae(e.detailTemplate)||!Ae(e.childGrid)||e.frozenRows!==0||e.frozenColumns!==0,options:{name:"virtualization"}};break;default:t={success:!1};break}return t},generateMessage:function(s,e,i){var t=i.name,r;switch(t){case"freeze":r=`Frozen rows and columns do not support the following features:
* Virtualization
* Row Template
* Details Template
* Hierarchy Grid
* Grouping`;break;case"virtualization":r=`Virtualization does not support the following features.
* Freeze rows and columns.
* Details Template.
* Hierarchy Grid.
`;break;default:r="";break}return It+(": "+t.toUpperCase()+` LIMITATIONS
`)+r}},check_datasource_columns:{type:"check_datasource_columns",logType:"warn",check:function(s,e){return{success:!(e.columns.length||e.dataSource instanceof _||e.dataSource.length)}},generateMessage:function(){return It+`: GRID CONFIG MISSING
dataSource and columns are not provided in the grid. At least one of either must be provided for grid configuration.
`+("Refer to "+bt+"/columns.html for documentation on configuring the grid data and columns.")}},virtual_height:{type:"virtual_height",logType:"error",check:function(s,e){return{success:c(e.height)||e.height==="auto"}},generateMessage:function(){return Nt+`: GRID HEIGHT MISSING 
height property is required to use virtualization.
`+("Refer to "+bt+"/virtual.html for documentation on configuring the virtual grid.")}},grid_remote_edit:{type:"grid_remote_edit",logType:"error",check:function(s){return{success:Array.isArray(s)||Array.isArray(s.result)}},generateMessage:function(){return Nt+`: RETRUN VALUE MISSING  
Remote service returns invalid data. 
`+("Refer to "+bt+"/edit.html for documentation on configuring editing with remote data.")}},grid_sort_comparer:{type:"grid_sort_comparer",logType:"warn",check:function(s,e){return{success:e.getDataModule().isRemote()}},generateMessage:function(){return It+`: SORT COMPARER NOT WORKING  
Sort comparer will not work with remote data.`+("Refer to "+bt+"/sorting/#custom-sort-comparer for documentation on using the sort comparer.")}},resize_min_max:{type:"resize_min_max",logType:"info",check:function(s){return{success:s.column.minWidth&&s.column.minWidth>=s.width||s.column.maxWidth&&s.column.maxWidth<=s.width}},generateMessage:function(){return Yi+`: RESIZING COLUMN REACHED MIN OR MAX  
The column resizing width is at its min or max.`}},action_disabled_column:{type:"action_disabled_column",logType:"info",check:function(s){var e=!0,i;switch(s.moduleName){case"reorder":c(s.destColumn)?i="reordering action is disabled for the "+s.column.headerText+" column":i="reordering action is disabled for the "+(s.column.allowReordering?s.destColumn.headerText:s.column.headerText)+" column";break;case"group":i="grouping action is disabled for the "+s.columnName+" column.";break;case"filter":i="filtering action is disabled for the "+s.columnName+" column.";break;case"sort":i="sorting action is disabled for the "+s.columnName+" column.";break}return{success:e,options:{fn:i}}},generateMessage:function(s,e,i){return Yi+(`: ACTION DISABLED 
 `+i.fn)}},exporting_begin:{type:"exporting_begin",logType:"info",check:function(s){return{success:!0,options:{args:s}}},generateMessage:function(s,e,i){return Yi+(`: EXPORTNIG INPROGRESS 
 Grid `+i.args+"ing is in progress")}},exporting_complete:{type:"exporting_complete",logType:"info",check:function(s){return{success:!0,options:{args:s}}},generateMessage:function(s,e,i){return Yi+(`: EXPORTNIG COMPLETED 
 Grid `+i.args+"ing is complete")}},foreign_key_failure:{type:"foreign_key_failure",logType:"error",check:function(){return{success:!0}},generateMessage:function(){return Nt+`: FOREIGNKEY CONFIG 
  Grid foreign key column needs a valid data source/service.`+("Refer to "+bt+"/columns/#foreign-key-column for documentation on configuring foreign key columns.")}},initial_action:{type:"initial_action",logType:"error",check:function(s){var e=!0,i;switch(s.moduleName){case"group":i="The "+s.columnName+" column is not available in the grid's column model.Please provide a valid field name to group the column";break;case"filter":i="The "+s.columnName+" column is not available in the grid's column model.Please provide a valid field name to filter the column.";break;case"sort":i="The "+s.columnName+" column is not available in the grid's column model.Please provide a valid field name to sort the column.";break}return{success:e,options:{fn:i}}},generateMessage:function(s,e,i){return Nt+(`: INITIAL ACTION FAILURE 
 `+i.fn)}},frozen_rows_columns:{type:"frozen_rows_columns",logType:"error",check:function(s,e){return{success:e.getColumns().length<=e.frozenColumns||e.currentViewData.length&&e.frozenRows>=e.currentViewData.length}},generateMessage:function(s,e){return Nt+(`: OUT OF RANGE ERROR-
 `+(e.getColumns().length<=e.frozenColumns?"FROZEN COLUMNS,":""))+((e.frozenRows>=e.currentViewData.length?"FROZEN ROWS":"")+" invalid")}},column_type_missing:{type:"column_type_missing",logType:"error",check:function(s){return{success:c(s.column.type),options:s.column.headerText}},generateMessage:function(s,e,i){return Nt+(`: COLUMN TYPE MISSING-
  `+i+" column type was invalid or not defined.")+("Please go through below help link: "+pr+"/grid/columns/#column-type")}},datasource_syntax_mismatch:{type:"datasource_syntax_mismatch",logType:"warn",check:function(s){return{success:s.dataState.dataSource&&!(s.dataState.dataSource instanceof _||"result"in s.dataState.dataSource||s.dataState.dataSource instanceof Array)&&!c(s.dataState.dataStateChange)}},generateMessage:function(){return It+`: DATASOURCE SYNTAX WARNING
DataSource should be in the form of {result: Object[], count: number}when dataStateChangeEvent used`}}},wh=function(s){var e=s.error;return e.indexOf&&e.indexOf("Format options")!==0?"":`INVALID FORMAT
For more information, refer to the following documentation links:
`+("Number format: "+pr+`/base/intl.html?#supported-format-string.
`)+("Date format: "+pr+`/base/intl.html?#manipulating-datetime.
`)+("Message: "+e)},bh=function(s){var e=me.getObject("error.error",s);if(c(e))return"";var i="";try{i=JSON.parse(e.responseText)}catch{i=""}return`XMLHTTPREQUEST FAILED
`+("Url: "+e.responseURL+`
`)+("Status: "+e.status+" - "+e.statusText+`
`)+(i!==""?"Message: "+i:"")},Be=function(){var s=function(e,i){return s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var n in r)r.hasOwnProperty(n)&&(t[n]=r[n])},s(e,i)};return function(e,i){s(e,i);function t(){this.constructor=e}e.prototype=i===null?Object.create(i):(t.prototype=i.prototype,new t)}}(),v=function(s,e,i,t){var r=arguments.length,n=r<3?e:t===null?t=Object.getOwnPropertyDescriptor(e,i):t,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(s,e,i,t);else for(var o=s.length-1;o>=0;o--)(a=s[o])&&(n=(r<3?a(n):r>3?a(e,i,n):a(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n},Ih=function(s){Be(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([w()],e.prototype,"field",void 0),v([w()],e.prototype,"direction",void 0),v([w(!1)],e.prototype,"isFromGroup",void 0),e}(ue),xh=function(s){Be(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([yi([],Ih)],e.prototype,"columns",void 0),v([w(!0)],e.prototype,"allowUnsort",void 0),e}(ue),Rh=function(s){Be(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([w()],e.prototype,"field",void 0),v([w()],e.prototype,"operator",void 0),v([w()],e.prototype,"value",void 0),v([w()],e.prototype,"matchCase",void 0),v([w(!1)],e.prototype,"ignoreAccent",void 0),v([w()],e.prototype,"predicate",void 0),v([w({})],e.prototype,"actualFilterValue",void 0),v([w({})],e.prototype,"actualOperator",void 0),v([w()],e.prototype,"type",void 0),v([w()],e.prototype,"ejpredicate",void 0),v([w()],e.prototype,"uid",void 0),v([w()],e.prototype,"isForeignKey",void 0),v([w()],e.prototype,"condition",void 0),e}(ue),Dh=function(s){Be(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([w(!1)],e.prototype,"enableCache",void 0),v([w(3)],e.prototype,"maxBlocks",void 0),v([w(3)],e.prototype,"initialBlocks",void 0),e}(ue),Fh=function(s){Be(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([yi([],Rh)],e.prototype,"columns",void 0),v([w("FilterBar")],e.prototype,"type",void 0),v([w("OnEnter")],e.prototype,"mode",void 0),v([w(!0)],e.prototype,"showFilterBarStatus",void 0),v([w(1500)],e.prototype,"immediateModeDelay",void 0),v([w()],e.prototype,"operators",void 0),v([w(!1)],e.prototype,"ignoreAccent",void 0),v([w(!1)],e.prototype,"enableInfiniteScrolling",void 0),v([w(50)],e.prototype,"itemsCount",void 0),v([w("Shimmer")],e.prototype,"loadingIndicator",void 0),v([w(!1)],e.prototype,"enableCaseSensitivity",void 0),v([w(!1)],e.prototype,"showFilterBarOperator",void 0),e}(ue),Th=function(s){Be(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([w("Row")],e.prototype,"mode",void 0),v([w("Flow")],e.prototype,"cellSelectionMode",void 0),v([w("Single")],e.prototype,"type",void 0),v([w(!1)],e.prototype,"checkboxOnly",void 0),v([w(!1)],e.prototype,"persistSelection",void 0),v([w("Default")],e.prototype,"checkboxMode",void 0),v([w(!1)],e.prototype,"enableSimpleMultiRowSelection",void 0),v([w(!0)],e.prototype,"enableToggle",void 0),v([w(!1)],e.prototype,"allowColumnSelection",void 0),e}(ue),kh=function(s){Be(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([w([])],e.prototype,"fields",void 0),v([w("")],e.prototype,"key",void 0),v([w("contains")],e.prototype,"operator",void 0),v([w(!0)],e.prototype,"ignoreCase",void 0),v([w(!1)],e.prototype,"ignoreAccent",void 0),e}(ue),Mh=function(s){Be(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([w()],e.prototype,"targetID",void 0),e}(ue),Ah=function(s){Be(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([w("Both")],e.prototype,"wrapMode",void 0),e}(ue),Eh=function(s){Be(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([w("Normal")],e.prototype,"mode",void 0),e}(ue),Lh=function(s){Be(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([w(!0)],e.prototype,"showDropArea",void 0),v([w(!1)],e.prototype,"allowReordering",void 0),v([w(!1)],e.prototype,"showToggleButton",void 0),v([w(!1)],e.prototype,"showGroupedColumn",void 0),v([w(!0)],e.prototype,"showUngroupButton",void 0),v([w(!1)],e.prototype,"disablePageWiseAggregates",void 0),v([w([])],e.prototype,"columns",void 0),v([w()],e.prototype,"captionTemplate",void 0),v([w(!1)],e.prototype,"enableLazyLoading",void 0),e}(ue),zh=function(s){Be(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([w(!1)],e.prototype,"allowAdding",void 0),v([w(!1)],e.prototype,"allowEditing",void 0),v([w(!1)],e.prototype,"allowDeleting",void 0),v([w("Normal")],e.prototype,"mode",void 0),v([w(!0)],e.prototype,"allowEditOnDblClick",void 0),v([w(!0)],e.prototype,"showConfirmDialog",void 0),v([w(!1)],e.prototype,"showDeleteConfirmDialog",void 0),v([w()],e.prototype,"template",void 0),v([w()],e.prototype,"headerTemplate",void 0),v([w()],e.prototype,"footerTemplate",void 0),v([w("Top")],e.prototype,"newRowPosition",void 0),v([w({})],e.prototype,"dialog",void 0),v([w(!1)],e.prototype,"allowNextRowEdit",void 0),v([w(!1)],e.prototype,"showAddNewRow",void 0),e}(ue),Bh=function(s){Be(e,s);function e(){return s!==null&&s.apply(this,arguments)||this}return v([w("Spinner")],e.prototype,"indicatorType",void 0),e}(ue),Cn=function(s){Be(e,s);function e(t,r){var n=s.call(this,t,r)||this;return n.isPreventScrollEvent=!1,n.inViewIndexes=[],n.keyA=!1,n.frozenRightCount=0,n.freezeColumnRefresh=!0,n.rightcount=0,n.frozenLeftCount=0,n.leftcount=0,n.tablesCount=1,n.movableCount=0,n.movablecount=0,n.fixedcount=0,n.fixedCount=0,n.visibleFrozenLeft=0,n.visibleFrozenFixed=0,n.isPreparedFrozenColumns=!1,n.visibleFrozenRight=0,n.visibleMovable=0,n.frozenLeftColumns=[],n.frozenRightColumns=[],n.movableColumns=[],n.fixedColumns=[],n.stackedLeft=[],n.stackedRight=[],n.stackedFixed=[],n.stackedMovable=[],n.stackedarrayLeft=[],n.stackedarrayRight=[],n.stackedarrayFixed=[],n.stackedarrayMovable=[],n.media={},n.autoFitColumnsResize=!1,n.tableIndex=0,n.componentRefresh=Ni.prototype.refresh,n.isChangeDataSourceCall=!1,n.mergedColumns=!1,n.isVirtualAdaptive=!1,n.requireTemplateRef=!0,n.vRows=[],n.vcRows=[],n.vGroupOffsets={},n.rowUid=0,n.translateX=0,n.isManualRefresh=!1,n.isAutoFitColumns=!1,n.enableDeepCompare=!1,n.totalDataRecordsCount=0,n.disableSelectedRecords=[],n.partialSelectedRecords=[],n.isSpan=!1,n.islazyloadRequest=!1,n.isAddNewRow=!1,n.addNewRowFocus=!0,n.lockcolPositionCount=0,n.prevPageMoving=!1,n.pageTemplateChange=!1,n.isAutoGen=!1,n.isAutoGenerateColumns=!1,n.mediaBindInstance={},n.commandDelIndex=void 0,n.asyncTimeOut=50,n.isExportGrid=!1,n.enableLogger=!1,n.needsID=!0,i.Inject(wa),dt("mergePersistData",n.mergePersistGridData,n),n}i=e,e.prototype.getPersistData=function(){for(var t=["pageSettings","sortSettings","filterSettings","groupSettings","columns","searchSettings","selectedRowIndex","scrollPosition"],r={pageSettings:["template","pageSizes","enableQueryString","totalRecordsCount","pageCount"],filterSettings:["type","mode","showFilterBarStatus","immediateModeDelay","ignoreAccent"],groupSettings:["showDropArea","showToggleButton","showGroupedColumn","showUngroupButton","disablePageWiseAggregates","hideCaptionCount"],searchSettings:["fields","operator","ignoreCase"],sortSettings:[],columns:[],selectedRowIndex:[],scrollPosition:[]},n=0;n<t.length;n++)for(var a=this[t[parseInt(n.toString(),10)]],o=0,l=r[t[parseInt(n.toString(),10)]];o<l.length;o++){var h=l[o];delete a[""+h]}var p=this.pageSettings.template,d=Object.assign({template:void 0},this.pageSettings);this.setProperties({pageSettings:d},!0),this.isAngular&&delete this.groupSettings.properties.captionTemplate,this.pageTemplateChange=!c(this.pagerTemplate);var u=this.addOnPersist(t);return d.template=p,this.setProperties({pageSettings:d},!0),u},e.prototype.requiredModules=function(){this.setFrozenCount(),this.enableInfiniteAggrgate();var t=[];return this.isDestroyed||(this.allowFiltering&&t.push({member:"filter",args:[this,this.filterSettings,this.serviceLocator],name:"Filter"}),this.allowExcelExport&&t.push({member:"ExcelExport",args:[this,this.serviceLocator],name:"ExcelExport"}),this.allowPdfExport&&t.push({member:"PdfExport",args:[this],name:"PdfExport"}),this.allowSorting&&t.push({member:"sort",args:[this,this.sortSettings,this.sortedColumns,this.serviceLocator],name:"Sort"}),this.allowPaging&&t.push({member:"pager",args:[this,this.pageSettings],name:"Page"}),this.allowSelection&&t.push({member:"selection",args:[this,this.selectionSettings,this.serviceLocator],name:"Selection"}),this.resizeCheck()&&t.push({member:"resize",args:[this],name:"Resize"}),this.allowReordering&&t.push({member:"reorder",args:[this],name:"Reorder"}),this.allowRowDragAndDrop&&t.push({member:"rowDragAndDrop",args:[this],name:"RowDD"}),this.allowGrouping&&t.push({member:"group",args:[this,this.groupSettings,this.sortedColumns,this.serviceLocator],name:"Group"}),this.aggregates.length&&t.push({member:"aggregate",args:[this,this.serviceLocator],name:"Aggregate"}),this.isDetail()&&t.push({member:"detailRow",args:[this,this.serviceLocator],name:"DetailRow"}),(this.toolbar||this.toolbarTemplate)&&t.push({member:"toolbar",args:[this,this.serviceLocator],name:"Toolbar"}),(this.enableVirtualization||this.enableColumnVirtualization)&&t.push({member:"virtualscroll",args:[this,this.serviceLocator],name:"VirtualScroll"}),(this.getFrozenColumns()||this.frozenRows||this.frozenRightCount||this.frozenLeftCount)&&t.push({member:"freeze",args:[this,this.serviceLocator],name:"Freeze"}),this.isCommandColumn(this.columns)&&t.push({member:"commandColumn",args:[this,this.serviceLocator],name:"CommandColumn"}),(this.editSettings.allowAdding||this.editSettings.allowDeleting||this.editSettings.allowEditing)&&t.push({member:"edit",args:[this,this.serviceLocator],name:"Edit"}),this.extendRequiredModules(t)),t},e.prototype.extendRequiredModules=function(t){this.enableInfiniteScrolling&&t.push({member:"infiniteScroll",args:[this,this.serviceLocator],name:"InfiniteScroll"}),this.groupSettings.enableLazyLoading&&t.push({member:"lazyLoadGroup",args:[this,this.serviceLocator],name:"LazyLoadGroup"}),this.contextMenuItems&&t.push({member:"contextMenu",args:[this,this.serviceLocator],name:"ContextMenu"}),this.showColumnMenu&&t.push({member:"columnMenu",args:[this,this.serviceLocator],name:"ColumnMenu"}),this.showColumnChooser&&t.push({member:"columnChooser",args:[this,this.serviceLocator],name:"ColumnChooser"}),this.isForeignKeyEnabled(this.columns)&&t.push({member:"foreignKey",args:[this,this.serviceLocator],name:"ForeignKey"}),this.enableLogger&&t.push({member:"logger",args:[this],name:"Logger"})},e.prototype.resizeCheck=function(){var t=!!this.getColumns().filter(function(a){return a.autoFit===!0}).length;!c(this.columnModel)&&this.columnModel.length&&!(this.columnModel[0]instanceof ye)&&(this.columnModel=[]);var r=!!(this.showColumnMenu&&(!this.columnMenuItems||this.columnMenuItems.filter(function(a){return a==="AutoFit"||a==="AutoFitAll"}).length)),n=!!(this.contextMenuItems&&this.contextMenuItems.filter(function(a){return a==="AutoFit"||a==="AutoFitAll"}).length);return this.allowResizing||this.autoFitColumnsResize||t||r||n},e.prototype.preRender=function(){this.serviceLocator=new nh,this.initProperties(),this.initializeServices()},e.prototype.initProperties=function(){this.isInitial=!0,this.sortedColumns=[],this.inViewIndexes=[],this.mediaCol=[],this.isInitialLoad=!1,this.allowServerDataBinding=!1,this.ignoreCollectionWatch=!0,this.mergeCells={},this.isEdit=!1,this.checkAllRows="None",this.isCheckBoxSelection=!1,this.isPersistSelection=!1,this.componentRefresh=Ni.prototype.refresh,this.freezeColumnRefresh=!0,this.filterOperators={contains:"contains",endsWith:"endswith",equal:"equal",greaterThan:"greaterthan",greaterThanOrEqual:"greaterthanorequal",lessThan:"lessthan",lessThanOrEqual:"lessthanorequal",notEqual:"notequal",startsWith:"startswith",wildCard:"wildcard",isNull:"isnull",notNull:"notnull",like:"like"},this.defaultLocale={EmptyRecord:"No records to display",True:"true",False:"false",InvalidFilterMessage:"Invalid Filter Data",GroupDropArea:"Drag a column header here to group its column",UnGroup:"Click here to ungroup",UnGroupButton:"Click here to ungroup",GroupDisable:"Grouping is disabled for this column",FilterbarTitle:"'s filter bar cell",EmptyDataSourceError:"DataSource must not be empty at initial load since columns are generated from dataSource in AutoGenerate Column Grid",Add:"Add",Edit:"Edit",Cancel:"Cancel",Update:"Update",Delete:"Delete",Print:"Print",Pdfexport:"PDF Export",Excelexport:"Excel Export",Wordexport:"Word Export",Csvexport:"CSV Export",Search:"Search",Columnchooser:"Columns",Save:"Save",Item:"item",Items:"items",EditOperationAlert:"No records selected for edit operation",DeleteOperationAlert:"No records selected for delete operation",SaveButton:"Save",OKButton:"OK",CancelButton:"Cancel",EditFormTitle:"Details of ",AddFormTitle:"Add New Record",BatchSaveConfirm:"Are you sure you want to save changes?",BatchSaveLostChanges:"Unsaved changes will be lost. Are you sure you want to continue?",ConfirmDelete:"Are you sure you want to Delete Record?",CancelEdit:"Are you sure you want to Cancel the changes?",ChooseColumns:"Choose Column",ColumnMenu:"Column Menu",SearchColumns:"search columns",Matchs:"No matches found",FilterButton:"Filter",ClearButton:"Clear",StartsWith:"Starts With",NotStartsWith:"Does Not Start With",Like:"Like",EndsWith:"Ends With",NotEndsWith:"Does Not End With",Contains:"Contains",NotContains:"Does Not Contain",IsNull:"Null",NotNull:"Not Null",IsEmpty:"Empty",IsNotEmpty:"Not Empty",Equal:"Equal",NotEqual:"Not Equal",LessThan:"Less Than",LessThanOrEqual:"Less Than Or Equal",GreaterThan:"Greater Than",GreaterThanOrEqual:"Greater Than Or Equal",ChooseDate:"Choose a Date",EnterValue:"Enter the value",Copy:"Copy",Group:"Group by this column",Ungroup:"Ungroup by this column",GroupButton:"Group button",UnGroupAria:"ungroup button",GroupSeperator:"Separator for the grouped columns",UnGroupIcon:"ungroup the grouped column ",GroupedSortIcon:"sort the grouped column ",GroupedDrag:"Drag the grouped column",GroupCaption:" is groupcaption cell",CheckBoxLabel:"checkbox",SelectAllCheckbox:"Select all checkbox",SelectRow:"Select row",autoFitAll:"Autofit all columns",autoFit:"Autofit this column",AutoFitAll:"Autofit all columns",AutoFit:"Autofit this column",Export:"Export",FirstPage:"First Page",LastPage:"Last Page",PreviousPage:"Previous Page",NextPage:"Next Page",SortAscending:"Sort Ascending",SortDescending:"Sort Descending",EditRecord:"Edit Record",DeleteRecord:"Delete Record",FilterMenu:"Filter",SelectAll:"Select All",AddCurrentSelection:"Add current selection to filter",Blanks:"Blanks",FilterTrue:"True",FilterFalse:"False",NoResult:"No matches found",ClearFilter:"Clear Filter",Clear:"Clear",NumberFilter:"Number Filters",TextFilter:"Text Filters",DateFilter:"Date Filters",DateTimeFilter:"DateTime Filters",MatchCase:"Match Case",Between:"Between",CustomFilter:"Custom Filter",CustomFilterPlaceHolder:"Enter the value",CustomFilterDatePlaceHolder:"Choose a date",AND:"AND",OR:"OR",ShowRowsWhere:"Show rows where:",ToolbarMenuDialogARIA:"Toolbar menu dialog",FilterMenuDialogARIA:"Filter menu",ExcelFilterDialogARIA:"Excel filter",CheckBoxFilterDialogARIA:"Checkbox filter",DialogEditARIA:"Edit dialog",ColumnMenuDialogARIA:"Column menu dialog",CustomFilterDialogARIA:"Customer filter dialog",SortAtoZ:"Sort A to Z",SortZtoA:"Sort Z to A",SortByOldest:"Sort by Oldest",SortByNewest:"Sort by Newest",SortSmallestToLargest:"Sort Smallest to Largest",SortLargestToSmallest:"Sort Largest to Smallest",Sort:"Sort",FilterDescription:"Press Alt Down to open filter Menu",SortDescription:"Press Enter to sort",ColumnMenuDescription:"Press Alt Down to open Column Menu",GroupDescription:"Press Ctrl space to group",ColumnHeader:" column header ",TemplateCell:" is template cell",CommandColumnAria:"is Command column column header ",DialogEdit:"Dialog edit",ClipBoard:"clipboard",AscendingText:"Ascending",DescendingText:"Descending",NoneText:"None",Expanded:"Expanded",Collapsed:"Collapsed"},this.keyConfigs={downArrow:"downarrow",upArrow:"uparrow",rightArrow:"rightarrow",leftArrow:"leftarrow",shiftDown:"shift+downarrow",shiftUp:"shift+uparrow",shiftRight:"shift+rightarrow",shiftLeft:"shift+leftarrow",home:"home",end:"end",escape:"escape",ctrlHome:"ctrl+home",ctrlEnd:"ctrl+end",pageUp:"pageup",pageDown:"pagedown",ctrlAltPageUp:"ctrl+alt+pageup",ctrlAltPageDown:"ctrl+alt+pagedown",altPageUp:"alt+pageup",altPageDown:"alt+pagedown",altDownArrow:"alt+downarrow",altUpArrow:"alt+uparrow",ctrlDownArrow:"ctrl+downarrow",ctrlUpArrow:"ctrl+uparrow",ctrlPlusA:"ctrl+A",ctrlPlusP:"ctrl+P",insert:"insert",delete:"delete",f2:"f2",enter:"enter",ctrlEnter:"ctrl+enter",shiftEnter:"shift+enter",tab:"tab",shiftTab:"shift+tab",space:"space",ctrlPlusC:"ctrl+C",ctrlShiftPlusH:"ctrl+shift+H",ctrlSpace:"ctrl+space",ctrlLeftArrow:"ctrl+leftarrow",ctrlRightArrow:"ctrl+rightarrow"}},e.prototype.render=function(){if(this.log(["module_missing","promise_enabled","locale_missing","check_datasource_columns"]),this.ariaService.setOptions(this.element,{role:"grid"}),Vi({target:this.element,cssClass:this.cssClass?this.cssClass:null},this.createElement),this.renderModule=new th(this,this.serviceLocator),this.searchModule=new ba(this),this.scrollModule=new gh(this),this.notify(ta,{}),(this.getDataModule().dataManager.dataSource.offline===!0||this.getDataModule().dataManager.dataSource.url===void 0)&&!(!c(this.dataSource)&&this.dataSource.result)&&(this.isVirtualAdaptive=!0),this.isReact){var t={requireTemplateRef:this.requireTemplateRef};this.trigger(Kr,t),t.requireTemplateRef||(this.requireTemplateRef=t.requireTemplateRef)}else this.trigger(Kr);dr(this.columns,this.enableColumnVirtualization,this),this.enableColumnVirtualization&&this.isChangeDataSourceCall&&this.columnModel&&(this.columnModel=[],this.updateColumnModel(this.columns)),this.isPreparedFrozenColumns=!0,this.enablePersistence&&this.notify(on,{}),this.getMediaColumns(),ir(this.columns),this.isFrozenGrid()&&!this.mergedColumns&&this.setInitialFrozenColumnIndex(this.columns),this.checkLockColumns(this.columns),this.getColumns(),this.processModel(),this.gridRender(),this.wireEvents(),this.addListener(),this.updateDefaultCursor(),this.updateStackedFilter(),this.loadingIndicator.indicatorType==="Spinner"&&this.showSpinner(),this.notify(yn,{}),this.loadingIndicator.indicatorType==="Shimmer"&&this.refreshMaskRow(),this.refreshing&&this.trigger("created")},e.prototype.setInitialFrozenColumnIndex=function(t){for(var r=0;r<t.length;r++){var n=t[parseInt(r.toString(),10)];n[""+Qs]=n.index,n.columns&&this.setInitialFrozenColumnIndex(n.columns)}},e.prototype.showSpinner=function(){this.isExportGrid||ni(this.element)},e.prototype.hideSpinner=function(){this.isExportGrid||Gi(this.element)},e.prototype.showMaskRow=function(t,r){if(!(c(this.headerModule)||c(this.contentModule))){var n=this.getHeaderContent().firstChild,a=this.getContent().firstChild,o=this.getFooterContent();if(r){var l=r.querySelector(".e-checkboxlist"),h=Math.floor(l.getBoundingClientRect().height/this.getRowHeight()),p='<div class="e-ftrchk e-mask-ftrchk" style="width: 100%;"><div class="e-checkbox-wrapper" style="width: 100%;"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";l.innerHTML="";for(var d=0;d<h;d++){l.innerHTML+=p;var u=[].slice.call(l.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));u[0].classList.add("e-mask-checkbox-filter-intent"),u[1].classList.add("e-mask-checkbox-filter-span-intent")}return}if((!this.enableRtl&&!this.getHeaderContent().style.paddingRight||this.enableRtl&&!this.getHeaderContent().style.paddingLeft)&&(a.style.overflowY="hidden"),!this.isInitialLoad&&!this.getColumns().length){var f=a.getBoundingClientRect().height,m=f===0?this.allowPaging?this.pageSettings.pageSize*this.getRowHeight():window.innerHeight:f,g=Math.ceil(m/this.getRowHeight());this.rowRenderingMode!=="Vertical"&&(this.headerMaskTable=this.createEmptyMaskTable(n,1)),this.contentMaskTable=this.createEmptyMaskTable(a,g);return}if(this.maskRowContentScroll=!!((this.enableVirtualization||this.enableColumnVirtualization)&&t),!this.contentMaskTable){var y=a;(this.enableVirtualization||this.enableColumnVirtualization)&&(y=y.querySelector(".e-virtualtable")),c(y.querySelector("tbody"))||(this.contentMaskTable=this.createMaskTable(y,this.getContentMaskColumns(),t))}if(!this.headerMaskTable&&(this.isFrozenGrid()||this.enableColumnVirtualization&&t==="X")){var y=n;this.enableColumnVirtualization&&t==="X"&&(y=y.querySelector(".e-virtualtable")),this.headerMaskTable=this.createMaskTable(y,this.getContentMaskColumns(),t)}if(o&&o.querySelector(".e-summaryrow")){var S=o.firstChild;if(!this.footerContentMaskTable){var I=S;this.footerContentMaskTable=this.createMaskTable(I)}}this.enableVirtualization&&t||x.add(a,"scroll",this.translateMaskRow,this)}},e.prototype.getContentMaskColumns=function(){return this.getColumns()},e.prototype.createEmptyMaskTable=function(t,r){var n=this.createElement("table",{className:"e-table e-masked-table"}),a=this.createElement("tbody",{className:"e-masked-tbody"}),o=this.createElement("tr",{className:"e-masked-row e-row",attrs:{style:"height: "+this.getRowHeight()+"px;"}}),l=this.createElement("td",{className:"e-masked-cell e-rowcell"});l.innerHTML=this.getShimmerTemplate(),o.appendChild(l);for(var h=0;h<r;h++)a.appendChild(o.cloneNode(!0));return n.appendChild(a),t.appendChild(n),n},e.prototype.createMaskTable=function(t,r,n){var a=t,o=!!k(a,".e-gridheader"),l=!!k(a,".e-gridcontent"),h=!!k(a,".e-gridfooter"),p=this.getContent().firstChild,d=p.scrollHeight,u=a.querySelector("table"),f=u.cloneNode();f.removeAttribute("role"),f.removeAttribute("id"),f.style.position="absolute",f.style.zIndex="5",f.style.width=u.getBoundingClientRect().width+"px",o&&!(this.enableColumnVirtualization&&n==="X")&&(f.style.transform="translate(0px,"+u.querySelector("thead").getBoundingClientRect().height+"px)"),f.setAttribute("class","e-table e-masked-table");var m=u.querySelector("colgroup").cloneNode(!0);if(m.removeAttribute("id"),m.setAttribute("class","e-masked-colgroup"),f.appendChild(m),o&&this.enableColumnVirtualization&&n==="X"){var g=this.createMaskRow(m,r);if(this.isFrozenGrid())for(var y=[].slice.call(g.querySelectorAll(".e-rowcell")),S=0;S<y.length;S++)S<this.frozenLeftCount?(this.frozenLeftCount-1===S&&y[parseInt(S.toString(),10)].classList.add("e-freezeleftborder"),y[parseInt(S.toString(),10)].classList.add("e-leftfreeze"),y[parseInt(S.toString(),10)].setAttribute("data-colindex",S.toString()),y[parseInt(S.toString(),10)].style.left=r[parseInt(S.toString(),10)].valueX-this.translateX+"px"):y.length-this.frozenRightCount<=S&&r[parseInt(S.toString(),10)]&&(y.length-this.frozenRightCount===S&&y[parseInt(S.toString(),10)].classList.add("e-freezerightborder"),y[parseInt(S.toString(),10)].classList.add("e-rightfreeze"),y[parseInt(S.toString(),10)].setAttribute("data-colindex",S.toString()),y[parseInt(S.toString(),10)].style.right=this.translateX+r[parseInt(S.toString(),10)].valueX+"px");var I=u.querySelector("thead"),C=[].slice.call(I.querySelectorAll("tr")),R=I.cloneNode();R.removeAttribute("role"),R.setAttribute("class","e-masked-thead");for(var T=C.length,S=0;S<T;S++)R.appendChild(g.cloneNode(!0)),R.childNodes[parseInt(S.toString(),10)].style.height=C[parseInt(S.toString(),10)].getBoundingClientRect().height+"px";f.appendChild(R)}var F=u.querySelector("tbody").cloneNode();F.removeAttribute("role"),F.setAttribute("class","e-masked-tbody");var X=u.querySelector("tbody");if(l||o){var W=p,T=Math.ceil(W.getBoundingClientRect().height/this.getRowHeight());if(X.querySelector(".e-emptyrow")||!X.childNodes.length||l&&this.childGrid){var g=this.createMaskRow(m,r),q=g.cloneNode(!0);q.classList.add("e-altrow");for(var S=0;S<T;S++){var K=1;F.appendChild((S+K)%2===0?q.cloneNode(!0):g.cloneNode(!0))}}else{var te='tr:not([style*="display:none"]):not([style*="display: none"])',C=[].slice.call(X.querySelectorAll(te)),se=X.querySelector(".e-addedrow, .e-editedrow"),ne=void 0;if(se){if(ne=C.indexOf(se),this.isFrozenGrid()&&this.enableColumnVirtualization)for(var y=[].slice.call(C[ne+1].querySelectorAll(".e-rowcell")),S=0;S<y.length;S++)S<this.frozenLeftCount?(y[parseInt(S.toString(),10)].classList.add("e-leftfreeze"),y[parseInt(S.toString(),10)].setAttribute("data-colindex",S.toString()),y[parseInt(S.toString(),10)].style.left=r[parseInt(S.toString(),10)].valueX-this.translateX+"px"):y.length-this.frozenRightCount<=S&&r[parseInt(S.toString(),10)]&&(y[parseInt(S.toString(),10)].classList.add("e-rightfreeze"),y[parseInt(S.toString(),10)].setAttribute("data-colindex",S.toString()),y[parseInt(S.toString(),10)].style.right=this.translateX+r[parseInt(S.toString(),10)].valueX+"px");se.classList.contains("e-addedrow")?C.splice(ne,2):C.splice(ne,1)}T=(this.enableVirtualization||this.enableColumnVirtualization)&&n?C.length:T<=C.length?T:C.length;for(var S=0;S<T;S++)F.appendChild(this.applyMaskRow(C[parseInt(S.toString(),10)].cloneNode(!0),C[parseInt(S.toString(),10)].getBoundingClientRect().height));if(se&&se.classList.contains("e-editedrow")&&ne<T){var St=F.childNodes[parseInt(ne.toString(),10)];St.style.height=this.getRowHeight()+"px",St.classList.add("e-row"),se.classList.contains("e-altrow")&&St.classList.add("e-altrow")}}}if(f.appendChild(F),h){var Pe=u.querySelector("tfoot"),ke=Pe.cloneNode();ke.setAttribute("class","e-masked-tfoot");for(var C=[].slice.call(Pe.querySelectorAll("tr")),S=0;S<C.length;S++)ke.appendChild(this.applyMaskRow(C[parseInt(S.toString(),10)].cloneNode(!0),C[parseInt(S.toString(),10)].getBoundingClientRect().height));f.appendChild(ke)}if(o&&this.isFrozenGrid()&&!this.enableColumnVirtualization&&(this.getHeaderContent().querySelector("."+Re).style.position="relative"),a.insertBefore(f,a.firstChild),l&&!(this.enableVirtualization&&n)){var Me=d-f.getBoundingClientRect().height;Me=Me<0?0:Me;var rt=p.scrollTop<=Me?p.scrollTop:Me;this.enableVirtualization&&(rt-=gn(k(a,".e-virtualtable")).height),f.style.transform="translate(0px,"+rt+"px)"}return f},e.prototype.applyMaskRow=function(t,r){var n=t;n.removeAttribute("role"),n.removeAttribute("aria-rowindex"),n.removeAttribute("data-rowindex"),n.removeAttribute("data-uid"),n.classList.add("e-masked-row"),n.style.height=r+"px";for(var a=[].slice.call(n.childNodes),o=0;o<a.length;o++){var l=a[parseInt(o.toString(),10)],h=l.firstChild&&l.firstChild.classList&&l.firstChild.classList.contains("e-checkbox-wrapper");l.removeAttribute("role"),l.removeAttribute("tabindex"),l.removeAttribute("aria-label"),this.enableColumnVirtualization&&l.classList.contains("e-fixedfreeze")&&(z([l],["e-fixedfreeze","e-freezeleftborder","e-freezerightborder"]),L([l],["e-unfreeze"])),this.enableColumnVirtualization&&(l.classList.contains("e-leftfreeze")||l.classList.contains("e-rightfreeze"))||l.removeAttribute("data-colindex"),l.removeAttribute("aria-colindex"),l.removeAttribute("index"),l.removeAttribute("ej-mappingname"),l.removeAttribute("ej-mappingvalue"),l.removeAttribute("e-mappinguid"),l.removeAttribute("aria-expanded"),l.classList.add("e-masked-cell"),l.innerHTML=this.getShimmerTemplate(),l.classList.contains("e-recordplusexpand")||l.classList.contains("e-recordpluscollapse")?l.firstChild.classList.add("e-mask-group-intent"):l.classList.contains("e-gridchkbox")||h?l.firstChild.classList.add("e-mask-checkbox-intent"):l.classList.contains("e-rowdragdrop")?l.firstChild.classList.add("e-mask-drag-intent"):l.classList.contains("e-indentcell")&&(l.innerHTML="")}return n},e.prototype.createMaskRow=function(t,r){var n=t,a=r,o=this.createElement("tr",{className:"e-masked-row e-row"});this.rowRenderingMode!=="Vertical"&&(o.style.height=this.getRowHeight()+"px");for(var l=this.createElement("td",{className:"e-masked-cell e-rowcell"}),h=0,p=0;h<n.childNodes.length;h++){var d=n.childNodes[parseInt(h.toString(),10)],u=l.cloneNode();u.innerHTML=this.getShimmerTemplate(),d.classList.contains("e-group-intent")||d.classList.contains("e-detail-intent")||d.classList.contains("e-drag-intent")?d.classList.contains("e-group-intent")?u.firstChild.classList.add("e-mask-group-intent"):d.classList.contains("e-detail-intent")?u.firstChild.classList.add("e-mask-detail-intent"):d.classList.contains("e-drag-intent")&&u.firstChild.classList.add("e-mask-drag-intent"):(this.rowRenderingMode==="Vertical"&&a[parseInt(p.toString(),10)]&&u.setAttribute("data-cell",a[parseInt(p.toString(),10)].headerText?a[parseInt(p.toString(),10)].headerText:a[parseInt(p.toString(),10)].field),d.style.display==="none"?u.classList.add("e-hide"):(u.style.textAlign=a[parseInt(p.toString(),10)]&&a[parseInt(p.toString(),10)].textAlign?a[parseInt(p.toString(),10)].textAlign.toLowerCase():this.enableRtl?"right":"left",a[parseInt(p.toString(),10)]&&(a[parseInt(p.toString(),10)].type==="checkbox"||a[parseInt(p.toString(),10)].displayAsCheckBox)&&u.firstChild.classList.add("e-mask-checkbox-intent")),p++),o.appendChild(u)}return o},e.prototype.getShimmerTemplate=function(){return this.maskRowContentScroll?'<span class="e-mask e-skeleton e-skeleton-text"></span>':'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},e.prototype.addShimmerEffect=function(){this.maskRowContentScroll=!1;for(var t=[].slice.call(this.element.querySelectorAll(".e-mask:not(.e-shimmer-wave)")),r=0;r<t.length;r++)t[parseInt(r.toString(),10)]&&t[parseInt(r.toString(),10)].classList.add("e-shimmer-wave")},e.prototype.translateMaskRow=function(t){for(var r=t.target,n=r.querySelectorAll(".e-masked-table"),a=0;a<n.length;a++){var o=n[parseInt(a.toString(),10)];if(o){var l=r.scrollHeight-o.getBoundingClientRect().height;l=l<0?0:l;var h=r.scrollTop<=l?r.scrollTop:l;this.enableVirtualization&&(h-=gn(k(o,".e-virtualtable")).height),o.style.transform="translate(0px,"+h+"px)"}}},e.prototype.removeMaskRow=function(){if(!c(this.contentModule)){var t=this.getContent().firstChild;x.remove(t,"scroll",this.translateMaskRow)}this.headerMaskTable&&this.isFrozenGrid()&&!this.enableColumnVirtualization&&(this.getHeaderContent().querySelector("."+Re).style.position="");for(var r=[this.headerMaskTable,this.contentMaskTable,this.footerContentMaskTable],n=0;n<r.length;n++){var a=r[parseInt(n.toString(),10)];a&&B(a)}this.headerMaskTable=null,this.contentMaskTable=null,this.footerContentMaskTable=null},e.prototype.refreshMaskRow=function(){var t=this.getContent().firstChild;if(!(!this.isInitialLoad&&!this.getColumns().length)&&this.contentMaskTable&&t.querySelector(".e-masked-table")){var r=t;this.enableVirtualization&&(r=r.querySelector(".e-virtualtable")),this.refreshMaskRowColgroupWidth(r)}},e.prototype.refreshMaskRowColgroupWidth=function(t){var r=t.querySelector("table:not(.e-masked-table)"),n=r.querySelector(Ke).cloneNode(!0),a=t.querySelector(".e-masked-table");n.removeAttribute("id"),n.setAttribute("class","e-masked-colgroup");for(var o=0;o<n.childNodes.length;o++)n.childNodes[parseInt(o.toString(),10)].removeAttribute("class");B(a.querySelector(".e-masked-colgroup")),a.insertBefore(n,a.firstChild),a.style.width=r.getBoundingClientRect().width+"px"},e.prototype.updateStackedFilter=function(){this.allowFiltering&&this.filterSettings.type==="FilterBar"&&this.getHeaderContent().getElementsByClassName("e-stackedheadercell").length?this.getHeaderContent().classList.add("e-stackedfilter"):this.getHeaderContent().classList.remove("e-stackedfilter")},e.prototype.getMediaColumns=function(){if(!this.enableColumnVirtualization){var t=this.getColumns();if(this.getShowHideService=this.serviceLocator.getService("showHideService"),!c(t))for(var r=0;r<t.length;r++)!c(t[parseInt(r.toString(),10)].hideAtMedia)&&(c(t[parseInt(r.toString(),10)].visible)||t[parseInt(r.toString(),10)].visible)&&this.pushMediaColumn(t[parseInt(r.toString(),10)],r)}this.updateFrozenColumnsWidth()},e.prototype.pushMediaColumn=function(t,r){this.mediaCol.push(t),this.media[t.uid]=window.matchMedia(t.hideAtMedia),this.mediaQueryUpdate(r,this.media[t.uid]),this.mediaBindInstance[parseInt(r.toString(),10)]=this.mediaQueryUpdate.bind(this,r),this.media[t.uid].addListener(this.mediaBindInstance[parseInt(r.toString(),10)])},e.prototype.updateMediaColumns=function(t){if(!this.enableColumnVirtualization){for(var r=this.getColumnIndexByUid(t.uid),n=0;n<this.mediaCol.length;n++)if(t.uid===this.mediaCol[parseInt(n.toString(),10)].uid){this.mediaCol.splice(n,1);return}this.pushMediaColumn(t,r)}},e.prototype.mediaQueryUpdate=function(t,r){var n=this.getColumns()[parseInt(t.toString(),10)];this.mediaCol.some(function(a){return a.uid===n.uid})&&(n.visible=r.matches,this.isInitialLoad&&(this.invokedFromMedia=!0,n.visible?this.showHider.show(n.headerText,"headerText"):this.showHider.hide(n.headerText,"headerText")))},e.prototype.refreshMediaCol=function(){this.isInitialLoad=!0;var t=this.element.querySelector("."+tr);this.aggregates.length&&this.element.scrollHeight>parseInt(this.height.toString(),10)&&t&&L([t],["e-footerpadding"]);var r=this.getColumns().filter(function(n){return n.type==="checkbox"});(r.length===0||r.length&&this.selectionSettings.checkboxMode==="ResetOnRowClick")&&(this.isCheckBoxSelection=!1),this.rowRenderingMode==="Vertical"&&this.enableHover&&(this.setProperties({enableAdaptiveUI:!0,enableHover:!1},!0),z([this.element],"e-gridhover")),this.enableAdaptiveUI&&this.scrollModule&&this.scrollModule.refresh(),this.isFrozenGrid()&&this.isAutoGenerateColumns&&(this.widthService.setWidthToColumns(),this.isAutoGenerateColumns=!1)},e.prototype.removeMediaListener=function(){for(var t=0;t<this.mediaCol.length;t++)this.media[this.mediaCol[parseInt(t.toString(),10)].uid].removeListener(this.mediaBindInstance[this.mediaCol[parseInt(t.toString(),10)].index])},e.prototype.eventInitializer=function(){},e.prototype.destroy=function(){var t=this.element;if(t){var r=!!(t.querySelector("."+ze)&&t.querySelector("."+mt));r&&this.unwireEvents(),this.removeListener(),this.removeMediaListener(),this.notify(Ft,{}),this.destroyDependentModules(),this.isReact&&this.destroyTemplate(["template"]),this.isVue&&this.destroyTemplate(),r&&s.prototype.destroy.call(this),this.toolTipObj.destroy(),this.isReact&&!Y.isIE&&(this.element.innerHTML="");for(var n=["renderModule","headerModule","contentModule","valueFormatterService","serviceLocator","ariaService","keyboardModule","widthService","searchModule","showHider","scrollModule","printModule","clipboardModule","focusModule"],a=0;a<n.length;a++)this[n[parseInt(a.toString(),10)]]&&(this[n[parseInt(a.toString(),10)]]=null);this.element.innerHTML="",Ie(this.element,[],["e-rtl","e-gridhover","e-responsive","e-default","e-device","e-grid-min-height"])}},e.prototype.destroyDependentModules=function(){var t=this.element;!t||!t.querySelector("."+ze)&&!t.querySelector("."+mt)||(this.scrollModule.destroy(),this.keyboardModule.destroy(),this.focusModule.destroy(),this.clipboardModule.destroy(),this.printModule.destroy())},e.prototype.getModuleName=function(){return"grid"},e.prototype.enableBoxSelection=function(){this.enableAutoFill?(this.selectionSettings.cellSelectionMode="BoxWithBorder",this.element.classList.add("e-afenabled")):(this.element.classList.remove("e-afenabled"),this.notify(Jr,{}))},e.prototype.setCSSClass=function(t){this.cssClass&&L([this.element],this.cssClass.split(" ")),t&&z([this.element],t.split(" "))},e.prototype.onPropertyChanged=function(t,r){var n=!1,a=!1,o=!1,l,h={requestType:"refresh"},p=null,d=null;if(!this.isDestroyed){this.log("module_missing"),this.isEllipsisTooltip()&&this.toolTipObj.close();var u=Object.keys(t);u.indexOf("columns")>-1&&(this.enableColumnVirtualization&&(this.columnModel=[]),this.updateColumnObject(),a=!0);for(var f=0,m=u;f<m.length;f++){var g=m[f];switch(g){case"allowPaging":this.notify(ve,{module:"pager",enable:this.allowPaging}),n=!0,this.height==="100%"&&this.scrollModule.refresh();break;case"pageSettings":if(this.pageTemplateChange){this.pageTemplateChange=!1,this.notify(Ue,{module:"pager",properties:t.pageSettings});break}if(this.pagerModule&&this.pagerModule.isCancel){this.pagerModule.isCancel=!1;return}this.notify(Ue,{module:"pager",properties:t.pageSettings}),(c(t.pageSettings.currentPage)&&c(t.pageSettings.pageSize)&&c(t.pageSettings.totalRecordsCount)||!c(r.pageSettings)&&t.pageSettings.currentPage!==r.pageSettings.currentPage&&!this.enableColumnVirtualization&&!this.enableVirtualization&&this.pageSettings.totalRecordsCount<=this.pageSettings.pageSize)&&(n=!0),this.pagerModule&&this.pagerModule.isCancel&&(this.pagerModule.isCancel=!1);break;case"allowSorting":this.notify(ve,{module:"sort",enable:this.allowSorting}),n=!0,l=!0;break;case"allowFiltering":this.updateStackedFilter(),this.notify(ve,{module:"filter",enable:this.allowFiltering}),n=!0,this.filterSettings.type!=="FilterBar"||this.editSettings.showAddNewRow&&this.filterSettings.type==="FilterBar"?this.refreshHeader():this.height==="100%"&&this.scrollModule.refresh();break;case"height":case"width":this.notify(ve,{module:"scroll",properties:{width:t.width,height:t.height}}),this.allowPaging&&this.pagerModule.refresh();break;case"allowReordering":this.headerModule.refreshUI(),l=!0;break;case"allowRowDragAndDrop":this.notify(ve,{module:"rowDragAndDrop",enable:this.allowRowDragAndDrop}),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"allowSelection":this.notify(ve,{module:"selection",enable:this.allowSelection});break;case"cssClass":this.setCSSClass(r.cssClass);break;case"enableAutoFill":this.selectionModule&&(this.enableBoxSelection(),this.selectionModule.updateAutoFillPosition());break;case"rowTemplate":this.rowTemplateFn=de(this.rowTemplate),n=!0;break;case"emptyRecordTemplate":this.emptyRecordTemplateFn=de(this.emptyRecordTemplate),n=!0;break;case"detailTemplate":this.detailTemplateFn=de(this.detailTemplate),n=!0;break;case"allowGrouping":this.notify(ve,{module:"group",enable:this.allowGrouping}),this.headerModule.refreshUI(),n=!0,l=!0,this.height==="100%"&&this.scrollModule.refresh();break;case"enableInfiniteScrolling":case"childGrid":if(n=!0,p=this.parentDetails?document.querySelector("#"+this.parentDetails.parentID):null,d=p?p.ej2_instances[0]:null,this.childGrid&&d&&c(d.childGrid.childGrid)){var y=Object.assign({},d.childGrid,{childGrid:t.childGrid});for(d.setProperties({childGrid:y},!0);!c(d.parentDetails);){var S=document.querySelector("#"+d.parentDetails.parentID),I=S?S.ej2_instances[0]:null;if(I){var C=Object.assign({},I.childGrid);C.childGrid=d.childGrid,I.setProperties({childGrid:C},!0)}d=I}}this.headerModule.refreshUI();break;case"toolbar":this.notify(ve,{module:"toolbar"}),this.height==="100%"&&this.scrollModule.refresh();break;case"groupSettings":this.notify(Ue,{module:"group",properties:t.groupSettings,oldProperties:r.groupSettings});break;case"aggregates":!this.aggregates.length&&this.allowGrouping&&this.groupSettings.columns.length&&(n=!0),this.notify(ve,{module:"aggregate",properties:t}),this.height==="100%"&&this.scrollModule.refresh();break;case"frozenColumns":case"frozenRows":case"enableVirtualization":case"enableColumnVirtualization":case"currencyCode":case"locale":this.isFrozenGrid()&&this.log("frozen_rows_columns"),o=!0,a=!0,this.addNewRowFocus=!0;break;case"query":this.getDataModule().isQueryInvokedFromData||(n=!0),this.getDataModule().isQueryInvokedFromData=!1;break;case"autoFit":this.autoFit?this.preventAdjustColumns():this.restoreAdjustColumns();break;default:this.extendedPropertyChange(g,t,a)}}l&&this.updateDefaultCursor(),a?o||this.getFrozenColumns()||this.frozenRows||this.frozenLeftColumns.length||this.frozenRightColumns.length?this.freezeRefresh():this.refresh():n&&(this.notify(ar,h),n=!1,this.maintainSelection(t.selectedRowIndex))}},e.prototype.extendedPropertyChange=function(t,r,n){switch(t){case"enableRtl":this.updateRTL(),this.allowPaging&&(this.element.querySelector(".e-gridpager").ej2_instances[0].enableRtl=r.enableRtl,this.element.querySelector(".e-gridpager").ej2_instances[0].dataBind()),this.height!=="auto"&&(this.scrollModule.removePadding(!r.enableRtl),this.scrollModule.setPadding()),this.toolbar&&this.toolbarModule&&(this.toolbarModule.getToolbar().ej2_instances[0].enableRtl=r.enableRtl,this.toolbarModule.getToolbar().ej2_instances[0].dataBind()),this.contextMenuItems&&this.contextMenuModule&&(this.contextMenuModule.getContextMenu().ej2_instances[0].enableRtl=r.enableRtl,this.contextMenuModule.getContextMenu().ej2_instances[0].dataBind()),this.showColumnMenu&&this.columnMenuModule&&!this.enableAdaptiveUI&&(this.columnMenuModule.getColumnMenu().ej2_instances[0].enableRtl=r.enableRtl,this.columnMenuModule.getColumnMenu().ej2_instances[0].dataBind()),this.filterSettings.type==="FilterBar"&&this.filterSettings.showFilterBarOperator&&this.refreshHeader(),this.notify(Bo,{});break;case"enableAltRow":this.renderModule.refresh();break;case"allowResizing":this.headerModule.refreshUI(),this.updateResizeLines();break;case"rowHeight":this.rowHeight?L([this.element],"e-grid-min-height"):z([this.element],"e-grid-min-height"),this.renderModule.refresh(),this.headerModule.refreshUI();break;case"gridLines":this.updateGridLines();break;case"showColumnMenu":this.headerModule.refreshUI(),this.notify(ve,{module:"columnMenu",enable:!0});break;case"columnMenuItems":this.notify(ve,{module:"columnMenu",enable:this.columnMenuItems});break;case"contextMenuItems":this.notify(ve,{module:"contextMenu",enable:this.contextMenuItems});break;case"showColumnChooser":this.notify(ve,{module:"columnChooser",enable:this.showColumnChooser});break;case"filterSettings":this.updateStackedFilter(),this.notify(Ue,{module:"filter",properties:r.filterSettings});break;case"searchSettings":this.notify(Ue,{module:"search",properties:r.searchSettings});break;case"sortSettings":this.notify(Ue,{module:"sort"});break;case"selectionSettings":this.notify(Ue,{module:"selection",properties:r.selectionSettings});break;case"editSettings":this.notify(Ue,{module:"edit",properties:r.editSettings});break;case"allowTextWrap":case"textWrapSettings":this.allowTextWrap?this.applyTextWrap():this.removeTextWrap(),this.notify(Zi,{case:"textwrap",isModeChg:t==="textWrapSettings"});break;case"dataSource":var a=this.getDataModule().getState();if(this.allowSelection&&this.isPersistSelection&&!(a&&a.isPending)&&this.clearSelection(),!c(this.dataSource)&&this.dataSource.result&&(this.isVirtualAdaptive=!1),Object.getPrototypeOf(r).deepWatch)for(var o=this.getPrimaryKeyFieldNames()[0],l=0,h=Object.keys(r.dataSource);l<h.length;l++)this.setRowData(oe(o,this.dataSource[h[parseInt(l.toString(),10)]]),this.dataSource[h[parseInt(l.toString(),10)]]);else if(a.isPending){var p=c(this.dataSource)?[]:this.dataSource.result,d=a.group||[];if(d.length&&!this.groupSettings.enableLazyLoading&&!(p.length&&p[0].field))for(var l=0;l<d.length;l++)p=me.group(p,d[parseInt(l.toString(),10)],a.aggregates||[]);this.dataSource={result:p,count:this.dataSource.count,aggregates:this.dataSource.aggregates},this.getDataModule().setState({}),a.resolver(this.dataSource)}else{if(!c(this.dataSource)&&this.dataSource.result&&this.dataSource.count&&this.groupSettings.columns.length){var p=this.dataSource.result,d=this.groupSettings.columns;if(d.length&&!(p.length&&p[0].field))for(var l=0;l<d.length;l++)p=me.group(p,d[parseInt(l.toString(),10)]);this.dataSource={result:p,count:this.dataSource.count}}this.getDataModule().setState({isDataChanged:!1}),this.notify(tn,{}),n||(this.renderModule.refresh(),this.isCheckBoxSelection&&this.notify(ln,{}))}this.scrollRefresh();break;case"enableHover":var u=r.enableHover?L:z;u([this.element],"e-gridhover");break;case"selectedRowIndex":this.isSelectedRowIndexUpdating||this.selectRow(r.selectedRowIndex),this.isSelectedRowIndexUpdating=!1;break;case"resizeSettings":this.widthService.setWidthToTable();break;case"enableAdaptiveUI":this.notify(ml,{});break;case"rowRenderingMode":this.enableVerticalRendering(),this.notify(vl,{}),this.refresh();break;case"enableStickyHeader":this.scrollModule.addStickyListener(r.enableStickyHeader);break}},e.prototype.maintainSelection=function(t){var r=this;if(t!==-1){var n=function(){r.selectRow(t),r.off(ce,n)};this.on(ce,n,this)}},e.prototype.setProperties=function(t,r){s.prototype.setProperties.call(this,t,r);var n="filterSettings";t[""+n]&&this.filterModule&&r&&this.filterModule.refreshFilter()},e.prototype.getTablesCount=function(){return this.tablesCount},e.prototype.updateDefaultCursor=function(){for(var t=[].slice.call(this.getHeaderContent().querySelectorAll(".e-headercell:not(.e-stackedheadercell)")),r=[].slice.call(this.getHeaderContent().getElementsByClassName("e-stackedheadercell")),n=this.getColumns(),a=0;a<t.length;a++){var o=t[parseInt(a.toString(),10)];(this.allowGrouping||this.allowReordering||this.allowSorting)&&(!n[parseInt(a.toString(),10)].allowReordering||!n[parseInt(a.toString(),10)].allowSorting||!n[parseInt(a.toString(),10)].allowGrouping?o.classList.add("e-defaultcursor"):o.classList.add("e-mousepointer"))}for(var l=0;l<r.length;l++)this.allowReordering&&r[parseInt(l.toString(),10)].classList.add("e-mousepointer")},e.prototype.updateColumnModel=function(t,r){for(var n=0,a=t.length;n<a;n++)t[parseInt(n.toString(),10)].columns?this.updateColumnModel(t[parseInt(n.toString(),10)].columns,!0):this.columnModel.push(t[parseInt(n.toString(),10)]);(c(r)||!r)&&this.updateLockableColumns()},e.prototype.getFrozenLeftCount=function(){return this.getFrozenColumns()||this.getFrozenLeftColumnsCount()},e.prototype.isFrozenGrid=function(){return this.getFrozenColumns()!==0||this.frozenLeftColumns.length!==0||this.frozenRightColumns.length!==0||this.fixedColumns.length!==0},e.prototype.getFrozenMode=function(){return this.frozenName},e.prototype.updateLockableColumns=function(){for(var t=this.columnModel,r=0,n=0,a=this.getFrozenColumns(),o=0;o<t.length;o++)t[parseInt(o.toString(),10)].lockColumn&&(o<a?(t.splice(r,0,t.splice(o,1)[0]),r++):(t.splice(a+n,0,t.splice(o,1)[0]),n++))},e.prototype.checkLockColumns=function(t){for(var r=0;r<t.length;r++)t[parseInt(r.toString(),10)].columns?this.checkLockColumns(t[parseInt(r.toString(),10)].columns):t[parseInt(r.toString(),10)].lockColumn&&this.lockcolPositionCount++},e.prototype.leftrightColumnWidth=function(t){var r=t==="left"?this.getFrozenLeftColumns():t==="right"?this.getFrozenRightColumns():[],n=0;return r.filter(function(a){a.visible&&(n+=parseInt(a.width.toString(),10))}),n},e.prototype.getColumns=function(t){var r=this,n=this.inViewIndexes.map(function(f){return f-r.groupSettings.columns.length}).filter(function(f){return f>-1}),a=n.length;(!this.enableColumnVirtualization||c(this.columnModel)||this.columnModel.length===0||t)&&(this.columnModel=[],this.updateColumnModel(this.columns));var o=a===0?this.columnModel:this.columnModel.slice(n[0],n[a-1]+1),l=[],h=[],p=[],d=this.enableColumnVirtualization&&this.isPreparedFrozenColumns&&a===0;d&&(this.frozenRightColumns=[],this.frozenLeftColumns=[]);for(var u=0;u<o.length;u++)o[parseInt(u.toString(),10)].freeze==="Left"||o[parseInt(u.toString(),10)].isFrozen?(l.push(o[parseInt(u.toString(),10)]),d&&this.frozenLeftColumns.push(o[parseInt(u.toString(),10)])):o[parseInt(u.toString(),10)].freeze==="Right"?(h.push(o[parseInt(u.toString(),10)]),d&&this.frozenRightColumns.push(o[parseInt(u.toString(),10)])):p.push(o[parseInt(u.toString(),10)]);return this.enableColumnVirtualization&&this.isFrozenGrid()&&(this.frozenLeftColumns.length&&(l=this.frozenLeftColumns),this.frozenRightColumns.length&&(h=this.frozenRightColumns)),l.concat(p).concat(h)},e.prototype.getStackedHeaderColumnByHeaderText=function(t,r){for(var n=0;n<r.length;n++){var a=r[parseInt(n.toString(),10)];if(a.field===t||a.headerText===t){this.stackedColumn=a;break}else a.columns&&this.getStackedHeaderColumnByHeaderText(t,a.columns)}return this.stackedColumn},e.prototype.getColumnIndexesInView=function(){return this.inViewIndexes},e.prototype.getQuery=function(){return this.query},e.prototype.getLocaleConstants=function(){return this.defaultLocale},e.prototype.setColumnIndexesInView=function(t){this.inViewIndexes=t},e.prototype.getVisibleColumns=function(){return this.getCurrentVisibleColumns()},e.prototype.getHeaderContent=function(){return this.headerModule.getPanel()},e.prototype.setGridHeaderContent=function(t){this.headerModule.setPanel(t)},e.prototype.getContentTable=function(){return this.contentModule.getTable()},e.prototype.setGridContentTable=function(t){this.contentModule.setTable(t)},e.prototype.getContent=function(){return this.contentModule.getPanel()},e.prototype.setGridContent=function(t){this.contentModule.setPanel(t)},e.prototype.getHeaderTable=function(){return this.headerModule.getTable()},e.prototype.setGridHeaderTable=function(t){this.headerModule.setTable(t)},e.prototype.getFooterContent=function(){return this.footerElement=this.element.getElementsByClassName(tr)[0],this.footerElement},e.prototype.getFooterContentTable=function(){return this.footerElement=this.element.getElementsByClassName(tr)[0],this.footerElement.firstChild.firstChild},e.prototype.getPager=function(){return this.gridPager},e.prototype.setGridPager=function(t){this.gridPager=t},e.prototype.getRowByIndex=function(t){return this.enableVirtualization&&this.groupSettings.enableLazyLoading?this.lazyLoadRender.getRowByIndex(t):this.contentModule.getRowByIndex(t)},e.prototype.getMovableRowByIndex=function(t){return this.contentModule.getRowByIndex(t)},e.prototype.getFrozenRowByIndex=function(t){return this.contentModule.getRowByIndex(t)},e.prototype.getRows=function(){return this.contentModule.getRowElements()},e.prototype.getFrozenRightRowByIndex=function(t){return this.contentModule.getRowByIndex(t)},e.prototype.getRowInfo=function(t){var r=t,n={target:t};if(!c(t)&&c(b(r,"e-detailrowcollapse")&&c(b(r,"e-recordplusexpand")))){var a=k(r,"."+U);if(!a){var o=k(r,"."+xe);if(!c(o)&&!o.classList.contains("e-addedrow")){var l=this.getRowObjectFromUID(o.getAttribute("data-uid")),h=parseInt(o.getAttribute(Z),10);n={row:o,rowData:l.data,rowIndex:h}}return n}var p=parseInt(a.getAttribute(pe),10),d=k(a,"."+xe);if(!c(a)&&!isNaN(p)&&!c(d)){var h=parseInt(d.getAttribute(Z),10),u=this.contentModule.getRows(),f=p+this.getIndentCount(),m=u.filter(function(I){return I.uid===d.getAttribute("data-uid")}),g={},y=void 0;Object.keys(m).length&&(g=m[0].data,y=m[0].cells[parseInt(f.toString(),10)].column),n={cell:a,cellIndex:p,row:d,rowIndex:h,rowData:g,column:y,target:t}}}return n},e.prototype.getMovableRows=function(){return this.contentModule.getRowElements()},e.prototype.getFrozenRightRows=function(){return this.contentModule.getRowElements()},e.prototype.getDataRows=function(){return this.getAllDataRows()},e.prototype.getAllDataRows=function(t){if(c(this.getContentTable().querySelector(N)))return[];var r=this.getContentTable().querySelector(N),n=[].slice.call(r.children);if(this.editSettings.showAddNewRow&&(n[0].classList.contains("e-addedrow")?n.shift():n[n.length-1].classList.contains("e-addedrow")&&n.pop()),this.frozenRows){var a=this.getHeaderTable().querySelector(N),o=[].slice.call(a.children);n=this.addMovableRows(o,n),this.editSettings.showAddNewRow&&o[0].classList.contains("e-addedrow")&&o.shift()}var l=this.generateDataRows(n,t);return l},e.prototype.addMovableRows=function(t,r){for(var n=0,a=r.length;n<a;n++)t.push(r[parseInt(n.toString(),10)]);return t},e.prototype.generateDataRows=function(t,r){for(var n=[],a=0,o=t.length;a<o;a++)t[parseInt(a.toString(),10)].classList.contains(xe)&&(!t[parseInt(a.toString(),10)].classList.contains("e-hiddenrow")||r)&&(this.isCollapseStateEnabled()?n[parseInt(t[parseInt(a.toString(),10)].getAttribute("data-rowindex"),10)]=t[parseInt(a.toString(),10)]:n.push(t[parseInt(a.toString(),10)]));return n},e.prototype.getMovableDataRows=function(){return this.getAllMovableDataRows()},e.prototype.getAllMovableDataRows=function(t){return this.getAllDataRows(t)},e.prototype.getFrozenDataRows=function(){return this.getAllFrozenDataRows()},e.prototype.getAllFrozenDataRows=function(t){return this.getAllDataRows(t)},e.prototype.getFrozenRightDataRows=function(){return this.getAllFrozenRightDataRows()},e.prototype.getAllFrozenRightDataRows=function(t){return this.getAllDataRows(t)},e.prototype.setCellValue=function(t,r,n){var a="cells",o="data",l="index",h="uid",p=this.getPrimaryKeyFieldNames()[0],d=new Ve(this,this.serviceLocator),u=this.getColumnIndexByField(r),f=this.getColumnByField(r),m=this.contentModule.getRows(),g=m.filter(function(R){return oe(p,R.data)===t})[0],y=g?this.element.querySelector("[data-uid="+g[""+h]+"]"):null;if(!c(y)){typeof n=="string"&&(n=this.sanitize(n)),dt(r,n,g[""+o]);var S=this.enableVirtualization?y.children[parseInt(u.toString(),10)]:this.getCellFromIndex(g[""+l],u);if(!c(S)){var I=0;this.groupSettings.columns.length&&(u=u+this.groupSettings.columns.length),(this.childGrid||this.detailTemplate)&&u++,this.isRowDragable()&&u++;var C=g[""+a][u-I];d.refreshTD(S,C,g[""+o],{index:g[""+l]}),this.isReact&&(S=this.enableVirtualization?y.children[parseInt(u.toString(),10)]:this.getCellFromIndex(g[""+l],u)),this.aggregates.length>0&&(this.notify(Yr,{}),this.groupSettings.columns.length>0&&this.notify(Ls,{})),!c(g)&&!c(g.changes)&&(g.changes[""+r]=n),this.trigger(Qr,{cell:S,column:f,data:g[""+o]}),this.isReact&&S.getAttribute("tabindex")==="0"&&S.classList.contains("e-focused")&&S.focus()}}},e.prototype.refreshReactColumnTemplateByUid=function(t,r){var n=this;this.isReact&&this.clearTemplate(["columnTemplate"],void 0,function(){var a=!!(n.childGrid&&n.element.querySelectorAll(".e-childgrid").length),o=a?n.getContentTable().querySelectorAll(".e-row"):n.getDataRows();n.refreshReactTemplateTD(o,a),r&&n.renderTemplates()})},e.prototype.refreshReactTemplateTD=function(t,r,n){for(var a="cells",o="index",l=this.getIndentCount(),h=0,p=!1,d=0;d<t.length;d++){var u=this.getRowObjectFromUID(t[parseInt(d.toString(),10)].getAttribute("data-uid"));if(r&&!u&&b(t[parseInt(d.toString(),10)],"e-childgrid")){var f=b(t[parseInt(d.toString(),10)],"e-childgrid").ej2_instances[0];u=f.getRowObjectFromUID(t[parseInt(d.toString(),10)].getAttribute("data-uid")),h=f.getIndentCount(),p=!0}if(u&&u.isDataRow&&!c(u.index)&&!t[parseInt(d.toString(),10)].classList.contains("e-editedrow"))for(var m=0;m<u[""+a].length;m++){var g=u[""+a][parseInt(m.toString(),10)];if(g.isTemplate){var y=new Ve(this,this.serviceLocator),S=r?t[parseInt(d.toString(),10)].children[g.index+(p?h:l)]:this.getCellFromIndex(d,n?g.index:m-l);y.refreshTD(S,g,u.data,{index:u[""+o]})}}p=!1}},e.prototype.refreshGroupCaptionFooterTemplate=function(){for(var t=!!(this.childGrid&&this.element.querySelectorAll(".e-childgrid").length),r=this.getContentTable().querySelectorAll(".e-groupcaptionrow, .e-groupfooterrow"),n=0;n<r.length;n++){var a=this,o=this.getRowObjectFromUID(r[parseInt(n.toString(),10)].getAttribute("data-uid"));if(t&&!o&&b(r[parseInt(n.toString(),10)],"e-childgrid")&&(a=b(r[parseInt(n.toString(),10)],"e-childgrid").ej2_instances[0],o=a.getRowObjectFromUID(r[parseInt(n.toString(),10)].getAttribute("data-uid"))),o){var l=o.cells.filter(function(p){return p.isDataCell}),h={cells:l,data:o.data,dataUid:o.uid};a.notify(Co,h)}}},e.prototype.refreshReactHeaderTemplateByUid=function(t){if(this.isReact)for(var r="cells",n=this.headerModule.rows,a=this.getNormalizedColumnIndex(t),o=function(p){var d=n[parseInt(p.toString(),10)][""+r][parseInt(a.toString(),10)];if(d&&d.column.uid===t){var u=new va(l,l.serviceLocator),f=b(l.element.querySelectorAll("[e-mappinguid="+t+"]")[0],"e-templatecell");u.refresh(d,f);var m=l.sortSettings.columns,g=m.findIndex(function(I){return I.field===d.column.field});if(g!==-1){var y=l.getColumnHeaderByField(d.column.field);l.ariaService.setSort(y,m[parseInt(g.toString(),10)].direction.toLowerCase()),m.length>1&&y.querySelector(".e-headercelldiv").insertBefore(l.createElement("span",{className:"e-sortnumber",innerHTML:(g+1).toString()}),y.querySelector(".e-headertext"));var S=y.querySelector(".e-sortfilterdiv");m[parseInt(g.toString(),10)].direction==="Ascending"?Ie(S,["e-ascending","e-icon-ascending"],[]):Ie(S,["e-descending","e-icon-descending"],[])}}},l=this,h=0;h<n.length;h++)o(h)},e.prototype.setRowData=function(t,r){var n="uid",a=this.contentModule.getRows(),o=this.getPrimaryKeyFieldNames()[0];this.groupSettings.columns.length>0&&this.aggregates.length>0&&(a=a.filter(function(d){return d.isDataRow}));var l=a.filter(function(d){return oe(o,d.data)===t})[0],h=l?[].slice.call(this.element.querySelectorAll("[data-uid="+l[""+n]+"]")):void 0;if(!c(l)&&h.length){if(l.changes=r,this.frozenRows){var p=this.getRowsObject()[l.index];this.setFrozenRowData(p,r)}else this.setFrozenRowData(l,r);this.aggregates.length>0&&(this.notify(Yr,{}),this.groupSettings.columns.length>0&&this.notify(Ls,{}))}else return},e.prototype.setFrozenRowData=function(t,r){var n=new Fi(this.serviceLocator,null,this);t.changes=r,Wh(t,this.getForeignKeyColumns(),t.changes),n.refresh(t,this.getColumns(),!0)},e.prototype.getCellFromIndex=function(t,r){var n=this.getColumnByIndex(r);return np(this,n,t,r)},e.prototype.getMovableCellFromIndex=function(t,r){return this.getCellFromIndex(t,r)},e.prototype.getFrozenRightCellFromIndex=function(t,r){return this.getCellFromIndex(t,r)},e.prototype.getColumnHeaderByIndex=function(t){return this.getHeaderTable().getElementsByClassName("e-headercell")[parseInt(t.toString(),10)]},e.prototype.getMovableColumnHeaderByIndex=function(t){return this.getColumnHeaderByIndex(t)},e.prototype.getFrozenRightColumnHeaderByIndex=function(t){return this.getColumnHeaderByIndex(t)},e.prototype.getFrozenLeftColumnHeaderByIndex=function(t){return this.getColumnHeaderByIndex(t)},e.prototype.getRowObjectFromUID=function(t){var r=this.contentModule.getRows(),n=this.rowObject(r,t);return c(n)&&this.enableVirtualization&&this.groupSettings.columns.length>0&&(n=this.rowObject(this.vRows,t)),n},e.prototype.rowObject=function(t,r){if(t)for(var n=0,a=t;n<a.length;n++){var o=a[n];if(o.uid===r)return o}return null},e.prototype.getRowsObject=function(){return this.contentModule.getRows()},e.prototype.getMovableRowsObject=function(){return this.contentModule.getRows()},e.prototype.getFrozenRightRowsObject=function(){return this.contentModule.getRows()},e.prototype.getColumnHeaderByField=function(t){var r=this.getColumnByField(t);return r?this.getColumnHeaderByUid(r.uid):void 0},e.prototype.getColumnHeaderByUid=function(t){var r=this.getHeaderContent().querySelector("[e-mappinguid="+t+"]");return r?r.parentElement:void 0},e.prototype.getColumnByIndex=function(t){var r;return this.getColumns().some(function(n,a){return r=n,a===t}),r},e.prototype.getColumnByField=function(t){return jt(this.getColumns(),function(r){if(r.field===t)return r})[0]},e.prototype.getColumnIndexByField=function(t){for(var r=this.getColumns(),n=0;n<r.length;n++)if(r[parseInt(n.toString(),10)].field===t)return n;return-1},e.prototype.getColumnByUid=function(t){return jt(this.getColumns().concat(this.getStackedColumns(this.columns)),function(r){if(r.uid===t)return r})[0]},e.prototype.getStackedColumns=function(t,r){r===void 0&&(r=[]);for(var n=0,a=t;n<a.length;n++){var o=a[n];o.columns&&(r.push(o),this.getStackedColumns(o.columns,r))}return r},e.prototype.getColumnIndexByUid=function(t){var r=jt(this.getColumns(),function(n,a){if(n.uid===t)return a})[0];return c(r)?-1:r},e.prototype.getUidByColumnField=function(t){return jt(this.getColumns(),function(r){if(r.field===t)return r.uid})[0]},e.prototype.getNormalizedColumnIndex=function(t){var r=this.getColumnIndexByUid(t);return r+this.getIndentCount()},e.prototype.getIndentCount=function(){var t=0;return this.allowGrouping&&(t+=this.groupSettings.columns.length),this.isDetail()&&t++,this.isRowDragable()&&c(this.rowDropSettings.targetID)&&t++,t},e.prototype.getColumnFieldNames=function(){for(var t=[],r,n=0,a=this.getColumns().length;n<a;n++)r=this.getColumns()[parseInt(n.toString(),10)],r.visible&&t.push(r.field);return t},e.prototype.getRowTemplate=function(){return this.rowTemplateFn},e.prototype.getEmptyRecordTemplate=function(){return this.emptyRecordTemplateFn},e.prototype.getDetailTemplate=function(){return this.detailTemplateFn},e.prototype.getEditTemplate=function(){return this.editTemplateFn},e.prototype.getEditHeaderTemplate=function(){return this.editHeaderTemplateFn},e.prototype.getEditFooterTemplate=function(){return this.editFooterTemplateFn},e.prototype.getPrimaryKeyFieldNames=function(){for(var t=[],r=0;r<this.columnModel.length;r++)this.columnModel[parseInt(r.toString(),10)].isPrimaryKey&&t.push(this.columnModel[parseInt(r.toString(),10)].field);return t},e.prototype.refresh=function(){this.isDestroyed||(this.isManualRefresh=!0,this.headerModule.refreshUI(),this.updateStackedFilter(),this.renderModule.refresh())},e.prototype.refreshHeader=function(){this.headerModule.refreshUI()},e.prototype.getSelectedRows=function(){return this.selectionModule?this.selectionModule.selectedRecords:[]},e.prototype.getSelectedRowIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowIndexes:[]},e.prototype.getSelectedRowCellIndexes=function(){return this.selectionModule?this.selectionModule.selectedRowCellIndexes:[]},e.prototype.getSelectedRecords=function(){return this.selectionModule?this.selectionModule.getSelectedRecords():[]},e.prototype.getSelectedColumnsUid=function(){var t=this,r=[];return this.selectionModule&&this.selectionModule.selectedColumnsIndexes.filter(function(n){return r.push(t.getColumns()[parseInt(n.toString(),10)].uid)}),r},e.prototype.getDataModule=function(){return this.renderModule.data},e.prototype.showColumns=function(t,r){r=r||"headerText",this.showHider.show(t,r)},e.prototype.hideColumns=function(t,r){r=r||"headerText",this.showHider.hide(t,r)},e.prototype.getFrozenColumns=function(){return this.frozenColumns+this.getFrozenCount(this.columns,0,0)},e.prototype.getFrozenRightColumnsCount=function(){return this.frozenRightCount||this.rightcount},e.prototype.getFrozenLeftColumnsCount=function(){return this.frozenLeftCount||this.leftcount},e.prototype.getMovableColumnsCount=function(){return this.movableCount||this.movablecount},e.prototype.updateFrozenColumnsWidth=function(){if(this.isFrozenGrid()&&!this.enableColumnVirtualization)for(var t=this.getColumns(),r=!0,n=0,a=0,o=0,l=function(d){var u=t[parseInt(d.toString(),10)];if(c(u.width)&&(u.freeze==="Left"||u.freeze==="Right"||u.freeze==="Fixed"||u.isFrozen)&&(u.width=Math.max(200,u.minWidth?parseFloat(u.minWidth.toString()):0)),u.width==="auto"){var f=0;if(r){t.filter(function(g){if(g.visible&&(g.width==="auto"&&n++,g.width!=="auto")){var y=c(g.width)?Math.max(200,g.minWidth?parseFloat(g.minWidth.toString()):0):parseFloat(g.width.toString());f+=y}});var m=h.isPercentageWidthGrid()||h.width==="auto"?h.element.getBoundingClientRect().width:parseFloat(h.width.toString());a=h.height==="auto"?m-f:m-f-Ne(),a<0&&(a=0),o=parseFloat((a/n).toString()),t.filter(function(g){g.visible&&g.minWidth&&parseFloat(g.minWidth.toString())>o&&(a=a-parseFloat(g.minWidth.toString()),n--)}),r=!1}u.minWidth&&parseFloat(u.minWidth.toString())>o?u.width=parseFloat(u.minWidth.toString()):u.width=a/n}},h=this,p=0;p<t.length;p++)l(p)},e.prototype.refreshSplitFrozenColumn=function(){this.splitFrozenCount(this.columns),this.updateFrozenColumnsWidth(),this.isAutoGenerateColumns=!0},e.prototype.setFrozenCount=function(){this.frozenLeftCount=this.frozenRightCount=this.movableCount=0,this.visibleFrozenLeft=this.visibleFrozenRight=this.visibleMovable=0,this.frozenLeftColumns=[],this.frozenRightColumns=[],this.movableColumns=[],this.fixedColumns=[],this.splitFrozenCount(this.columns),this.leftcount=this.frozenLeftCount,this.rightcount=this.frozenRightCount,this.movablecount=this.movableCount,this.frozenLeftCount&&!this.frozenRightCount?this.frozenName="Left":this.frozenRightCount&&!this.frozenLeftCount?this.frozenName="Right":this.frozenLeftCount&&this.frozenRightCount?this.frozenName="Left-Right":this.frozenColumns||this.frozenRows?this.frozenName="Left":this.frozenName=void 0},e.prototype.getVisibleFrozenLeftCount=function(){return this.visibleFrozenLeft},e.prototype.getVisibleFrozenRightCount=function(){return this.visibleFrozenRight},e.prototype.getVisibleMovableCount=function(){return this.visibleMovable},e.prototype.getFrozenRightColumns=function(){return this.frozenRightColumns},e.prototype.getFrozenLeftColumns=function(){return this.frozenLeftColumns},e.prototype.getMovableColumns=function(){return this.movableColumns},e.prototype.splitStackedColumns=function(t){for(var r=0;r<t.length;r++)t[parseInt(r.toString(),10)].columns?this.splitStackedColumns(t[parseInt(r.toString(),10)].columns):t[parseInt(r.toString(),10)].freeze==="Left"||t[parseInt(r.toString(),10)].isFrozen?(t[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenLeft++,this.leftcount++):t[parseInt(r.toString(),10)].freeze==="Right"?(t[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenRight++,this.rightcount++):t[parseInt(r.toString(),10)].freeze==="Fixed"?(t[parseInt(r.toString(),10)].visible!==!1&&this.visibleFrozenFixed++,this.fixedcount++):(t[parseInt(r.toString(),10)].visible!==!1&&this.visibleMovable++,this.movablecount++)},e.prototype.pushStackedColumns=function(t,r,n,a,o){n[parseInt(r.toString(),10)]=a.headerText;for(var l=0;l<t.length;l++)if(t[parseInt(l.toString(),10)].columns)r=r+1,this.pushStackedColumns(t[parseInt(l.toString(),10)].columns,r,n,t[parseInt(l.toString(),10)],o),r=r-1;else{var h=[];h=n.slice().slice(0,r+1),t[parseInt(l.toString(),10)].freeze==="Left"||t[parseInt(l.toString(),10)].isFrozen?(this.stackedLeft.push(h),this.stackedarrayLeft.push(t[parseInt(l.toString(),10)])):t[parseInt(l.toString(),10)].freeze==="Right"?(this.stackedRight.push(h),this.stackedarrayRight.push(t[parseInt(l.toString(),10)])):t[parseInt(l.toString(),10)].freeze==="Fixed"?(this.stackedFixed.push(h),this.stackedarrayFixed.push(t[parseInt(l.toString(),10)])):(this.stackedMovable.push(h),this.stackedarrayMovable.push(t[parseInt(l.toString(),10)]))}},e.prototype.pushallcol=function(t,r,n,a,o){if(n.headerText===r)o?n.columns.push(a):n.columns.push({headerText:t,columns:[]});else if(n.columns&&n.columns.length)for(var l=0;l<n.columns.length;l++)this.pushallcol(t,r,n.columns[parseInt(l.toString(),10)],a,o)},e.prototype.resetStackedColumns=function(t,r,n){for(var a={},o=[],l=1;l<=t.length;l++)for(var h=t[l-1],p=0;p<h.length;p++)if(!a.columns&&l===1?(a={headerText:h[parseInt(p.toString(),10)],columns:[]},o.push(h[parseInt(p.toString(),10)])):o.indexOf(h[parseInt(p.toString(),10)])===-1&&(this.pushallcol(h[parseInt(p.toString(),10)],h[p-1],a),o.push(h[parseInt(p.toString(),10)])),p===h.length-1){this.pushallcol(null,h[parseInt(p.toString(),10)],a,r[l-1],!0);for(var d=0;d!==t.length-1&&l!==t.length;)h.toString()===t[parseInt(l.toString(),10)].toString()&&(l++,this.pushallcol(null,h[parseInt(p.toString(),10)],a,r[l-1],!0)),d++}n==="Left"?this.frozenLeftColumns.push(a):n==="Right"?this.frozenRightColumns.push(a):this.movableColumns.push(a)},e.prototype.splitFrozenCount=function(t){if(this.frozenColumns||this.changedProperties&&this.changedProperties.frozenColumns===0){var r=!this.enableColumnVirtualization||this.enableColumnVirtualization&&this.isPreparedFrozenColumns?this.enableColumnVirtualization&&this.columnModel&&this.columnModel.length?this.columnModel:this.getColumns():this.columns;if(!this.changedProperties||this.changedProperties&&!this.changedProperties.frozenColumns)for(var n=0;n<r.length;n++)this.frozenColumns>n?r[parseInt(n.toString(),10)].freeze="Left":r[parseInt(n.toString(),10)].freeze==="Right"||r[parseInt(n.toString(),10)].freeze==="Fixed"?r[parseInt(n.toString(),10)].freeze=r[parseInt(n.toString(),10)].freeze:r[parseInt(n.toString(),10)].freeze=void 0}for(var n=0;n<t.length;n++)if(t[parseInt(n.toString(),10)].columns){this.leftcount=0,this.rightcount=0,this.movablecount=0,this.fixedcount=0;var a=[];this.splitStackedColumns(t[parseInt(n.toString(),10)].columns),this.leftcount&&!this.rightcount&&!this.movablecount&&!this.fixedcount?(this.frozenLeftCount+=this.leftcount,this.frozenLeftColumns.push(t[parseInt(n.toString(),10)])):this.rightcount&&!this.leftcount&&!this.movablecount&&!this.fixedcount?(this.frozenRightCount+=this.rightcount,this.frozenRightColumns.push(t[parseInt(n.toString(),10)])):this.movablecount&&!this.leftcount&&!this.rightcount&&!this.fixedcount?(this.movableCount+=this.movablecount,this.movableColumns.push(t[parseInt(n.toString(),10)])):this.fixedcount&&!this.leftcount&&!this.rightcount&&!this.movablecount?(this.fixedCount+=this.fixedcount,this.fixedColumns.push(t[parseInt(n.toString(),10)]),this.movableCount+=this.movablecount,this.movableColumns.push(t[parseInt(n.toString(),10)])):(this.frozenLeftCount+=this.leftcount,this.frozenRightCount+=this.rightcount,this.movableCount+=this.movablecount,this.fixedCount+=this.fixedcount,this.leftcount=0,this.rightcount=0,this.movablecount=0,this.fixedcount=0,this.stackedLeft=[],this.stackedRight=[],this.stackedFixed=[],this.stackedMovable=[],this.stackedarrayLeft=[],this.stackedarrayRight=[],this.stackedarrayFixed=[],this.stackedarrayMovable=[],this.pushStackedColumns(t[parseInt(n.toString(),10)].columns,0,a,t[parseInt(n.toString(),10)],{headerText:t[parseInt(n.toString(),10)].headerText,columns:[]}),this.stackedarrayLeft.length&&this.resetStackedColumns(this.stackedLeft,this.stackedarrayLeft,"Left"),this.stackedarrayRight.length&&this.resetStackedColumns(this.stackedRight,this.stackedarrayRight,"Right"),this.stackedarrayFixed.length&&this.resetStackedColumns(this.stackedFixed,this.stackedarrayFixed,"Fixed"),this.stackedarrayMovable.length&&this.resetStackedColumns(this.stackedMovable,this.stackedarrayMovable,"Movable"),this.stackedLeft=[],this.stackedRight=[],this.stackedMovable=[],this.stackedFixed=[],this.stackedarrayLeft=[],this.stackedarrayRight=[],this.stackedarrayMovable=[],this.stackedarrayFixed=[])}else t[parseInt(n.toString(),10)].freeze==="Right"?(t[parseInt(n.toString(),10)].visible!==!1&&this.visibleFrozenRight++,this.frozenRightColumns.push(t[parseInt(n.toString(),10)]),this.frozenRightCount++):t[parseInt(n.toString(),10)].freeze==="Left"||t[parseInt(n.toString(),10)].isFrozen?(t[parseInt(n.toString(),10)].visible!==!1&&this.visibleFrozenLeft++,this.frozenLeftColumns.push(t[parseInt(n.toString(),10)]),this.frozenLeftCount++):t[parseInt(n.toString(),10)].freeze==="Fixed"?(this.fixedColumns.push(t[parseInt(n.toString(),10)]),this.fixedCount++,this.movableColumns.push(t[parseInt(n.toString(),10)]),this.movableCount++):(t[parseInt(n.toString(),10)].visible!==!1&&this.visibleMovable++,this.movableColumns.push(t[parseInt(n.toString(),10)]),this.movableCount++);if(this.frozenLeftColumns.length){var r=this.frozenLeftColumns[this.frozenLeftColumns.length-1];this.removeBorder(this.frozenLeftColumns),this.frozenLeftBorderColumns(r instanceof ye?this.lastVisibleLeftCol(this.frozenLeftColumns):r)}if(this.frozenRightColumns.length){var r=this.frozenRightColumns[0];this.removeBorder(this.frozenRightColumns),this.frozenRightBorderColumns(r instanceof ye?this.firstVisibleRightCol(this.frozenRightColumns):r)}if((this.frozenLeftColumns.length||this.frozenRightColumns.length)&&this.freezeColumnRefresh){var r=this.frozenLeftColumns.concat(this.movableColumns).concat(this.frozenRightColumns);this.setProperties({columns:r},!0),this.freezeColumnRefresh=!1}},e.prototype.removeBorder=function(t){for(var r=0;r<t.length;r++)t[parseInt(r.toString(),10)].columns&&t[parseInt(r.toString(),10)].columns.length?((t[parseInt(r.toString(),10)].border==="Right"||t[parseInt(r.toString(),10)].border==="Left")&&(t[parseInt(r.toString(),10)].border=void 0),this.removeBorder(t[parseInt(r.toString(),10)].columns)):(t[parseInt(r.toString(),10)].border==="Right"||t[parseInt(r.toString(),10)].border==="Left")&&(t[parseInt(r.toString(),10)].border=void 0)},e.prototype.isVisibleColumns=function(t,r){if(t.columns&&t.columns.length)for(var n=0;n<t.columns.length;n++)this.isVisibleColumns(t.columns[parseInt(n.toString(),10)],r),t.columns[parseInt(n.toString(),10)].visible&&c(t.columns[parseInt(n.toString(),10)].columns)&&(!c(t.columns[parseInt(n.toString(),10)].freeze)||t.columns[parseInt(n.toString(),10)].isFrozen)&&r.push("true");else t.visible&&(!c(t.freeze)||t.isFrozen)&&r.push("true")},e.prototype.lastVisibleLeftCol=function(t){for(var r,n=t.length-1;n>=0;n--){var a=[];if(this.isVisibleColumns(t[parseInt(n.toString(),10)],a),t[parseInt(n.toString(),10)].visible&&a.indexOf("true")!==-1){r=t[parseInt(n.toString(),10)];break}}return r},e.prototype.firstVisibleRightCol=function(t){for(var r,n=0;n<t.length;n++){var a=[];if(this.isVisibleColumns(t[parseInt(n.toString(),10)],a),t[parseInt(n.toString(),10)].visible&&a.indexOf("true")!==-1){r=t[parseInt(n.toString(),10)];break}}return r},e.prototype.frozenLeftBorderColumns=function(t){if(!c(t))if(t.columns&&t.columns.length){t.border="Left";var r=t.columns[t.columns.length-1];this.frozenLeftBorderColumns(r instanceof ye&&r.columns?this.lastVisibleLeftCol(t.columns):r)}else t.border="Left"},e.prototype.frozenRightBorderColumns=function(t){if(!c(t))if(t.columns&&t.columns.length){t.border="Right";var r=t.columns[0];this.frozenRightBorderColumns(r instanceof ye&&r.columns?this.firstVisibleRightCol(t.columns):r)}else t.border="Right"},e.prototype.getVisibleFrozenColumns=function(){return this.getVisibleFrozenColumnsCount()+this.getVisibleFrozenCount(this.columns,0)},e.prototype.getFilterUIInfo=function(){return this.filterModule?this.filterModule.getFilterUIInfo():{}},e.prototype.getVisibleFrozenColumnsCount=function(){for(var t=0,r=this.columnModel,n=0;n<this.frozenColumns;n++)r[parseInt(n.toString(),10)].visible&&t++;if(this.frozenLeftCount||this.leftcount||this.frozenRightCount||this.rightcount)for(var n=0;n<r.length;n++)r[parseInt(n.toString(),10)].visible&&(r[parseInt(n.toString(),10)].freeze==="Left"||r[parseInt(n.toString(),10)].freeze==="Right")&&t++;return t},e.prototype.getVisibleFrozenCount=function(t,r){if(!this.frozenLeftCount&&!this.leftcount&&(!this.frozenRightCount||!this.rightcount))for(var n=0,a=t.length;n<a;n++)t[parseInt(n.toString(),10)].columns?r=this.getVisibleFrozenCount(t[parseInt(n.toString(),10)].columns,r):t[parseInt(n.toString(),10)].isFrozen&&t[parseInt(n.toString(),10)].visible&&r++;return r},e.prototype.getFrozenCount=function(t,r,n){for(var a=0,o=t.length;a<o;a++)t[parseInt(a.toString(),10)].columns?r=this.getFrozenCount(t[parseInt(a.toString(),10)].columns,r,n):(t[parseInt(a.toString(),10)].isFrozen&&n>this.frozenColumns-1&&r++,n++);return r},e.prototype.goToPage=function(t){this.pagerModule&&this.pagerModule.goToPage(t)},e.prototype.updateExternalMessage=function(t){this.pagerModule&&!this.pagerTemplate&&this.pagerModule.updateExternalMessage(t)},e.prototype.sortColumn=function(t,r,n){this.sortModule&&this.sortModule.sortColumn(t,r,n)},e.prototype.changeDataSource=function(t,r){this.isChangeDataSourceCall=!0,this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping&&this.setProperties({groupSettings:{columns:[]}},!0),r&&r.length&&this.setProperties({columns:r},!0),t&&(c(r)&&this.setProperties({columns:[]},!0),this.setProperties({dataSource:t},!0)),this.freezeRefresh(),this.isChangeDataSourceCall=!1},e.prototype.clearSorting=function(){this.sortModule&&this.sortModule.clearSorting()},e.prototype.removeSortColumn=function(t){this.sortModule&&this.sortModule.removeSortColumn(t)},e.prototype.clearGridActions=function(){this.setProperties({sortSettings:{columns:[]}},!0),this.setProperties({filterSettings:{columns:[]}},!0),this.setProperties({searchSettings:{key:""}},!0),this.allowGrouping?this.setProperties({groupSettings:{columns:[]}},!1):this.freezeRefresh()},e.prototype.filterByColumn=function(t,r,n,a,o,l,h,p){this.filterModule&&this.filterModule.filterByColumn(t,r,n,a,o,l,h,p)},e.prototype.clearFiltering=function(t){this.filterModule&&this.filterModule.clearFiltering(t)},e.prototype.removeFilteredColsByField=function(t,r){this.filterModule&&this.filterModule.removeFilteredColsByField(t,r)},e.prototype.selectRow=function(t,r){this.selectionModule&&this.selectionModule.selectRow(t,r)},e.prototype.selectRows=function(t){this.selectionModule&&this.selectionModule.selectRows(t)},e.prototype.clearSelection=function(){this.selectionModule&&this.selectionModule.clearSelection()},e.prototype.selectCell=function(t,r){this.selectionModule&&this.selectionModule.selectCell(t,r)},e.prototype.selectCellsByRange=function(t,r){this.selectionModule.selectCellsByRange(t,r)},e.prototype.search=function(t){this.searchModule&&this.searchModule.search(t)},e.prototype.print=function(){this.printModule&&this.printModule.print()},e.prototype.deleteRecord=function(t,r){this.editModule&&this.editModule.deleteRecord(t,r)},e.prototype.startEdit=function(){this.editModule&&this.editModule.startEdit()},e.prototype.endEdit=function(){this.editModule&&this.editModule.endEdit()},e.prototype.closeEdit=function(){this.editModule&&this.editModule.closeEdit()},e.prototype.addRecord=function(t,r){this.editModule&&this.editModule.addRecord(t,r)},e.prototype.deleteRow=function(t){this.editModule&&this.editModule.deleteRow(t)},e.prototype.editCell=function(t,r){this.editModule&&this.editModule.editCell(t,r)},e.prototype.saveCell=function(){this.editModule&&this.editModule.saveCell()},e.prototype.updateCell=function(t,r,n){this.editModule&&this.editModule.updateCell(t,r,n)},e.prototype.updateRow=function(t,r){this.editModule&&this.editModule.updateRow(t,r)},e.prototype.getBatchChanges=function(){return this.editModule?this.editModule.getBatchChanges():{}},e.prototype.enableToolbarItems=function(t,r){this.toolbarModule&&this.toolbarModule.enableItems(t,r)},e.prototype.copy=function(t){this.clipboardModule&&this.clipboardModule.copy(t)},e.prototype.recalcIndentWidth=function(){var t=this;if(this.getHeaderTable().querySelector(".e-emptycell")&&!(!this.groupSettings.columns.length&&!this.isDetail()&&!this.isRowDragable()||this.getHeaderTable().querySelector(".e-emptycell").getAttribute("indentRefreshed")||!this.getContentTable())){var r=this.getHeaderTable().querySelector(".e-emptycell").parentElement.offsetWidth,n=[].slice.call(this.getHeaderTable().querySelector(Ke).childNodes),a=[].slice.call(this.getContentTable().querySelector(Ke).childNodes),o=r/30,l=this.getFrozenMode()==="Right"?this.groupSettings.columns.length+this.getColumns().length:0,h=this.element.offsetWidth,p=function(d,u){if(mn(t)){var f=(u/h*100).toFixed(1)+"%";n[parseInt(d.toString(),10)].style.width=f,a[parseInt(d.toString(),10)].style.width=f}else n[parseInt(d.toString(),10)].style.width=u+"px",a[parseInt(d.toString(),10)].style.width=u+"px";t.notify(ra,{index:d,width:u})};for(o>=1&&(r=30/o),r<1&&(r=1),(this.enableColumnVirtualization||this.isAutoGen||this.columns.length===this.groupSettings.columns.length)&&(r=30);l<this.groupSettings.columns.length;)p(l,r),l++;this.isDetail()&&(p(l,r),l++),this.isRowDragable()&&p(l,r),this.isAutoGen=!1,this.getHeaderTable().querySelector(".e-emptycell").setAttribute("indentRefreshed","true")}},e.prototype.resetIndentWidth=function(){if(!this.isDestroyed){if(mn(this)&&(this.getHeaderTable().querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.widthService.setWidthToColumns(),this.recalcIndentWidth(),this.autoFit&&this.preventAdjustColumns()),(this.width==="auto"||typeof this.width=="string"&&this.width.indexOf("%")!==-1)&&this.getColumns().filter(function(r){return(!r.width||r.width==="auto")&&r.minWidth}).length>0){var t=this.widthService.getTableWidth(this.getColumns());this.widthService.setMinwidthBycalculation(t)}this.isFrozenGrid()&&this.enableColumnVirtualization&&this.widthService&&this.widthService.refreshFrozenScrollbar(),this.allowTextWrap&&this.textWrapSettings.wrapMode!=="Content"&&this.notify(Gr,{}),this.frozenRows&&this.scrollModule&&this.scrollModule.resizeFrozenRowBorder()}},e.prototype.isRowDragable=function(){return this.allowRowDragAndDrop&&!this.rowDropSettings.targetID},e.prototype.reorderColumns=function(t,r){this.reorderModule&&this.reorderModule.reorderColumns(t,r)},e.prototype.reorderColumnByIndex=function(t,r){this.reorderModule&&this.reorderModule.reorderColumnByIndex(t,r)},e.prototype.reorderColumnByTargetIndex=function(t,r){this.reorderModule&&this.reorderModule.reorderColumnByTargetIndex(t,r)},e.prototype.reorderRows=function(t,r){this.rowDragAndDropModule&&this.rowDragAndDropModule.reorderRows(t,r)},e.prototype.refreshDataSource=function(t){this.notify("refreshdataSource",t)},e.prototype.disableRowDD=function(t){var r=this.getHeaderTable(),n=this.getContentTable(),a=r.querySelectorAll("th.e-rowdragheader, th.e-mastercell"),o=this.getRows(),l=t?"none":"";wt(r.querySelector(Ke).childNodes[0],{display:l}),wt(n.querySelector(Ke).childNodes[0],{display:l});for(var h=0;h<this.getRows().length;h++){var p=o[parseInt(h.toString(),10)].firstElementChild;t?L([p],"e-hide"):z([p],["e-hide"])}for(var d=0;d<r.querySelectorAll("th.e-rowdragheader, th.e-mastercell").length;d++){var p=a[parseInt(d.toString(),10)];t?L([p],"e-hide"):z([p],["e-hide"])}},e.prototype.autoFitColumns=function(t,r,n){var a=this.getInjectedModules(),o=a.find(function(l){return typeof l=="function"&&!c(l.prototype)?l.prototype.getModuleName()==="resize":l.name==="Resize"});!this.resizeModule&&o&&(this.autoFitColumnsResize=!0,this.injectModules()),this.resizeModule&&this.resizeModule.autoFitColumns(t,r,n)},e.prototype.preventAdjustColumns=function(){if(!(this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"||this.allowResizing&&this.resizeSettings.mode==="Auto")){for(var t=this.getColumns(),r=this.getHeaderTable(),n=0,a=0;a<t.length;a++)if(t[parseInt(a.toString(),10)].visible){if(this.groupSettings.columns.length&&this.groupSettings.columns.indexOf(t[parseInt(a.toString(),10)].field)>-1){var o=[].slice.call(r.querySelector("colgroup").querySelectorAll(":not(.e-group-intent):not(.e-detail-intent):not(.e-drag-intent)"));if(o[parseInt(a.toString(),10)].style.display==="none")continue}if(t[parseInt(a.toString(),10)].width)n+=parseFloat(t[parseInt(a.toString(),10)].width.toString());else{n=0;break}}if(n){var l=this.isPercentageWidthGrid(),h=this.widthUnit(l),p=this.getContentTable();if(this.groupSettings.columns.length||this.isDetail()||this.isRowDragable())for(var d=this.defaultIndentWidth(l),u=d.toString()+h,f=[].slice.call(r.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")),m=[].slice.call(p.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent")),a=0;a<f.length;a++)f[parseInt(a.toString(),10)].style.setProperty("width",u),m[parseInt(a.toString(),10)].style.setProperty("width",u),n+=d;(l&&n<100||!l&&n<p.parentElement.clientWidth)&&(c(p.querySelector(".e-emptyrow"))?L([r,p],["e-tableborder"]):(L([r],["e-tableborder"]),z([p],["e-tableborder"])));var g=n.toString()+h;r.style.setProperty("width",g),p.style.setProperty("width",g)}else this.restoreAdjustColumns()}},e.prototype.restoreAdjustColumns=function(){if(!(this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"||this.allowResizing&&this.resizeSettings.mode==="Auto")){var t=this.getHeaderTable(),r=this.getContentTable();if(z([t,r],["e-tableborder"]),t.style.removeProperty("width"),r.style.removeProperty("width"),this.groupSettings.columns.length||this.isDetail()||this.isRowDragable()){var n=this.isPercentageWidthGrid(),a=this.defaultIndentWidth(n).toString()+this.widthUnit(n),o=[].slice.call(t.querySelector("colgroup").querySelectorAll(".e-group-intent, .e-detail-intent, .e-drag-intent"));o.forEach(function(l){l.style.setProperty("width",a)}),t.querySelector(".e-emptycell").removeAttribute("indentRefreshed"),this.recalcIndentWidth()}}},e.prototype.widthUnit=function(t){return t?"%":"px"},e.prototype.defaultIndentWidth=function(t){return t?parseFloat((30/this.element.offsetWidth*100).toFixed(1)):30},e.prototype.isPercentageWidthGrid=function(){return this.getColumns()[0].width.toString().indexOf("%")>-1},e.prototype.createColumnchooser=function(t,r,n){this.columnChooserModule&&this.columnChooserModule.renderColumnChooser(t,r,n)},e.prototype.initializeServices=function(){this.serviceLocator.register("widthService",this.widthService=new Sa(this)),this.serviceLocator.register("cellRendererFactory",new ih),this.serviceLocator.register("rendererFactory",new sh),this.serviceLocator.register("localization",this.localeObj=new Er(this.getModuleName(),this.defaultLocale,this.locale)),this.serviceLocator.register("valueFormatter",this.valueFormatterService=new Ti(this.locale)),this.serviceLocator.register("showHideService",this.showHider=new fh(this)),this.serviceLocator.register("ariaService",this.ariaService=new ma),this.serviceLocator.register("focus",this.focusModule=new oh(this))},e.prototype.processModel=function(){var t=this.groupSettings.columns,r=this.sortSettings.columns,n,a;if(this.allowGrouping)for(var o=function(u,f){a=0;for(var m=r.length;a<m;a++)if(r[parseInt(a.toString(),10)].field===t[parseInt(u.toString(),10)]){n=!0;break}if(n?l.allowSorting?l.sortedColumns.push(r[parseInt(a.toString(),10)].field):r[parseInt(a.toString(),10)].direction="Ascending":r.push({field:t[parseInt(u.toString(),10)],direction:"Ascending",isFromGroup:!0}),!l.groupSettings.showGroupedColumn){var g=l.enableColumnVirtualization?l.columns.filter(function(y){return y.field===t[parseInt(u.toString(),10)]})[0]:l.getColumnByField(t[parseInt(u.toString(),10)]);g?g.visible=!1:l.log("initial_action",{moduleName:"group",columnName:t[parseInt(u.toString(),10)]})}},l=this,h=0,p=t.length;h<p;h++)o(h,p);if(!t.length)for(var h=0;h<r.length;h++)this.sortedColumns.push(r[parseInt(h.toString(),10)].field);if(this.rowTemplateFn=de(this.rowTemplate),this.emptyRecordTemplateFn=de(this.emptyRecordTemplate),this.detailTemplateFn=de(this.detailTemplate),this.editTemplateFn=de(this.editSettings.template),this.editHeaderTemplateFn=de(this.editSettings.headerTemplate),this.editFooterTemplateFn=de(this.editSettings.footerTemplate),!c(this.parentDetails)){var d=c(this.parentDetails.parentKeyFieldValue)?"undefined":this.parentDetails.parentKeyFieldValue;this.query.where(this.queryString,"equal",d,!0)}this.initForeignColumn()},e.prototype.initForeignColumn=function(){this.isForeignKeyEnabled(this.getColumns())&&this.notify(zo,this.getForeignKeyColumns())},e.prototype.enableVerticalRendering=function(){this.rowRenderingMode==="Vertical"?this.element.classList.add("e-row-responsive"):this.element.classList.remove("e-row-responsive")},e.prototype.gridRender=function(){var t;this.updateRTL(),this.rowRenderingMode==="Vertical"&&this.element.classList.add("e-row-responsive"),this.enableHover&&this.element.classList.add("e-gridhover"),Y.isDevice&&this.element.classList.add("e-device"),this.rowHeight&&this.element.classList.add("e-grid-min-height"),this.cssClass&&(this.cssClass.indexOf(" ")!==-1?(t=this.element.classList).add.apply(t,this.cssClass.split(" ")):this.element.classList.add(this.cssClass)),this.allowRowDragAndDrop&&this.rowDropSettings.targetID&&Y.info.name==="mozilla"&&this.element.classList.add("e-disableuserselect"),this.editSettings.showAddNewRow&&(this.enableVirtualization||this.enableInfiniteScrolling)&&(this.editSettings.newRowPosition="Top"),Ie(this.element,["e-responsive","e-default"],[]);var r=this.serviceLocator.getService("rendererFactory");this.headerModule=r.getRenderer(We.Header),this.contentModule=r.getRenderer(We.Content),this.printModule=new xa(this,this.scrollModule),this.clipboardModule=new yh(this,this.serviceLocator),this.renderModule.render(),this.eventInitializer(),this.createGridPopUpElement(),this.widthService.setWidthToColumns(),this.updateGridLines(),this.applyTextWrap(),this.createTooltip(),this.enableBoxSelection()},e.prototype.dataReady=function(){this.scrollModule.setWidth(),this.scrollModule.setHeight(),this.height!=="auto"&&this.scrollModule.setPadding()},e.prototype.updateRTL=function(){this.enableRtl?this.element.classList.add("e-rtl"):this.element.classList.remove("e-rtl")},e.prototype.createGridPopUpElement=function(){var t=this.createElement("div",{className:"e-gridpopup",styles:"display:none;"}),r=this.createElement("div",{className:we,attrs:{tabIndex:"-1"}});kr([r,this.createElement("div",{className:"e-uptail e-tail"})],t),r.appendChild(this.createElement("span")),kr([r,this.createElement("div",{className:"e-downtail e-tail"})],t),this.element.appendChild(t)},e.prototype.updateGridLines=function(){switch(Ie(this.element,[],["e-verticallines","e-horizontallines","e-hidelines","e-bothlines"]),this.gridLines){case"Horizontal":this.element.classList.add("e-horizontallines");break;case"Vertical":this.element.classList.add("e-verticallines");break;case"None":this.element.classList.add("e-hidelines");break;case"Both":this.element.classList.add("e-bothlines");break}this.updateResizeLines()},e.prototype.updateResizeLines=function(){this.allowResizing&&!(this.gridLines==="Vertical"||this.gridLines==="Both")?this.element.classList.add("e-resize-lines"):this.element.classList.remove("e-resize-lines")},e.prototype.applyTextWrap=function(){if(this.allowTextWrap){var t=[].slice.call(this.element.getElementsByClassName("e-columnheader"));switch(this.textWrapSettings.wrapMode){case"Header":He(this.element,!1),He(this.getContent(),!1),He(t,!0);break;case"Content":He(this.getContent(),!0),He(this.element,!1),He(t,!1);break;default:He(this.element,!0),He(this.getContent(),!1),He(t,!1)}this.textWrapSettings.wrapMode!=="Content"&&this.notify(Gr,{})}},e.prototype.removeTextWrap=function(){He(this.element,!1);var t=[].slice.call(this.element.getElementsByClassName("e-columnheader"));He(t,!1),He(this.getContent(),!1),this.textWrapSettings.wrapMode!=="Content"&&this.notify(Gr,{})},e.prototype.createTooltip=function(){this.toolTipObj=new ds({opensOn:"custom",content:"",cssClass:this.cssClass?this.cssClass:null},this.element)},e.prototype.freezeRefresh=function(){(this.enableVirtualization||this.enableInfiniteScrolling)&&(this.pageSettings.currentPage=1),this.componentRefresh()},e.prototype.getTooltipStatus=function(t){var r=this.getHeaderTable(),n=this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"?"e-gridcontent":"e-gridheader",a=this.createTable(r,n,"header"),o=this.createTable(r,n,"content"),l=t.classList.contains("e-headercell")?a:o,h=t.classList.contains("e-headercell")?"th":"tr";l.querySelector(h).className=t.className,l.querySelector(h).innerHTML=t.innerHTML;var p=l.querySelector(h).getBoundingClientRect().width;return document.body.removeChild(a),document.body.removeChild(o),!!(p>t.getBoundingClientRect().width&&!t.classList.contains("e-editedbatchcell")||this.enableAdaptiveUI&&this.rowRenderingMode==="Vertical"&&p>t.getBoundingClientRect().width*.55-(this.height!=="auto"?16:0))},e.prototype.mouseMoveHandler=function(t){if(this.isEllipsisTooltip()){var r=b(t.target,"e-ellipsistooltip");(this.prevElement!==r||t.type==="mouseout")&&this.toolTipObj.close();var n=t.target.tagName,a=["A","BUTTON","INPUT"];if(r&&t.type!=="mouseout"&&!(Y.isDevice&&a.indexOf(n)!==-1)&&this.getTooltipStatus(r)){var o=this.getColumns()[parseInt(r.getAttribute(pe),10)],l=o.disableHtmlEncode?"innerText":"innerHTML",h=this.createElement("div");if(r.getElementsByClassName("e-headertext").length){var p=r.getElementsByClassName("e-headertext")[0];h[""+l]=this.sanitize(p.innerText),this.toolTipObj.content=h}else h[""+l]=this.sanitize(r.innerText),this.toolTipObj.content=h;this.prevElement=r,this.enableHtmlSanitizer&&(this.toolTipObj.enableHtmlSanitizer=!0),o.disableHtmlEncode&&(this.toolTipObj.enableHtmlParse=!1),this.toolTipObj.open(r)}}},e.prototype.isEllipsisTooltip=function(){var t=this.getColumns();if(this.clipMode==="EllipsisWithTooltip")return!0;for(var r=0;r<t.length;r++)if(t[parseInt(r.toString(),10)].clipMode==="EllipsisWithTooltip")return!0;return!1},e.prototype.scrollHandler=function(){this.isEllipsisTooltip()&&this.toolTipObj.close()},e.prototype.createTable=function(t,r,n){var a=this.createElement("div");a.className=this.element.className,a.style.cssText="display: inline-block;visibility:hidden;position:absolute";var o=this.createElement("div");o.className=r;var l=this.createElement("table");l.className=t.className,l.style.cssText="table-layout: auto;width: auto";var h=n==="header"?"th":"td",p=this.createElement("tr",{attrs:{role:"row"}}),d=this.createElement(h);return p.appendChild(d),l.appendChild(p),o.appendChild(l),a.appendChild(o),document.body.appendChild(a),a},e.prototype.onKeyPressed=function(t){(t.action==="tab"||t.action==="shiftTab")&&this.toolTipObj.close()},e.prototype.wireEvents=function(){x.add(this.element,"click",this.mouseClickHandler,this),x.add(this.element,"touchend",this.mouseClickHandler,this),x.add(this.element,"focusout",this.focusOutHandler,this),x.add(this.element,"dblclick",this.dblClickHandler,this),x.add(this.element,"keydown",this.keyPressHandler,this),x.add(window,"resize",this.resetIndentWidth,this),this.allowKeyboard&&(this.element.tabIndex=this.element.tabIndex===-1?0:this.element.tabIndex),this.keyboardModule=new as(this.element,{keyAction:this.keyActionHandler.bind(this),keyConfigs:this.keyConfigs,eventName:"keydown"}),x.add(this.getContent().firstElementChild,"scroll",this.scrollHandler,this),x.add(this.element,"mouseover",this.mouseMoveHandler,this),x.add(this.element,"mouseout",this.mouseMoveHandler,this),x.add(this.getContent(),"touchstart",this.tapEvent,this),x.add(document.body,"keydown",this.keyDownHandler,this)},e.prototype.unwireEvents=function(){x.remove(this.element,"click",this.mouseClickHandler),x.remove(this.element,"touchend",this.mouseClickHandler),x.remove(this.element,"focusout",this.focusOutHandler),x.remove(this.element,"dblclick",this.dblClickHandler),x.remove(this.getContent().firstElementChild,"scroll",this.scrollHandler),x.remove(this.element,"mouseover",this.mouseMoveHandler),x.remove(this.element,"mouseout",this.mouseMoveHandler),x.remove(this.element,"keydown",this.keyPressHandler),x.remove(this.getContent(),"touchstart",this.tapEvent),x.remove(document.body,"keydown",this.keyDownHandler),x.remove(window,"resize",this.resetIndentWidth)},e.prototype.addListener=function(){this.isDestroyed||(this.on(xi,this.dataReady,this),this.on(ce,this.recalcIndentWidth,this),this.on(Rt,this.recalcIndentWidth,this),this.on(pn,this.refreshFrozenPosition,this),this.on(dn,this.refreshSplitFrozenColumn,this),this.dataBoundFunction=this.refreshMediaCol.bind(this),this.addEventListener(At,this.dataBoundFunction),this.on(si,this.onKeyPressed,this))},e.prototype.removeListener=function(){this.isDestroyed||(this.off(xi,this.dataReady),this.off(ce,this.recalcIndentWidth),this.off(Rt,this.recalcIndentWidth),this.on(pn,this.refreshFrozenPosition,this),this.on(dn,this.refreshSplitFrozenColumn,this),this.removeEventListener(At,this.dataBoundFunction),this.off(si,this.onKeyPressed))},e.prototype.getCurrentViewRecords=function(){return it(this)?c(this.currentViewData.records)?this.currentViewData:this.currentViewData.records:this.groupSettings.enableLazyLoading?this.currentViewData:this.allowGrouping&&this.groupSettings.columns.length&&this.currentViewData.length&&this.currentViewData.records?this.currentViewData.records:this.currentViewData},e.prototype.mouseClickHandler=function(t){if(!(this.isChildGrid(t)||b(t.target,"e-gridpopup")&&t.touches||this.element.getElementsByClassName("e-cloneproperties").length||this.checkEdit(t))&&!((!this.allowRowDragAndDrop&&(b(t.target,mt)||t.target.tagName==="TD")||b(t.target,"e-headercell")&&b(t.target,"e-headercell").querySelector(".e-checkselectall")||!(this.allowGrouping||this.allowReordering)&&b(t.target,"e-gridheader"))&&t.touches)){b(t.target,"e-gridheader")&&this.allowRowDragAndDrop&&!b(t.target,"e-filterbarcell")&&t.target&&["A","BUTTON","INPUT"].indexOf(t.target.tagName)===-1&&t.preventDefault();var r=this.getRowInfo(t.target),n="cancel";r[""+n]=!1;var a=!1,o=k(t.target,"tr");if(o&&o.getAttribute("data-uid")){var l=this.getRowObjectFromUID(o.getAttribute("data-uid"));a=l?l.isDataRow:!1}a&&this.trigger(lo,r),this.notify(hi,t)}},e.prototype.checkEdit=function(t){var r=b(t.target,xe),n=this.editSettings.mode!=="Batch"&&this.isEdit&&r&&(r.classList.contains(Ii)||r.classList.contains(li)&&!this.editSettings.showAddNewRow);return!b(t.target,"e-unboundcelldiv")&&(n||b(t.target,U)&&b(t.target,U).classList.contains("e-editedbatchcell"))},e.prototype.dblClickHandler=function(t){var r=b(t.target,"e-grid");if(!(c(r)||r.id!==this.element.id||k(t.target,".e-unboundcelldiv"))){var n=!1,a=k(t.target,"tr");if(a&&a.getAttribute("data-uid")){var o=this.getRowObjectFromUID(a.getAttribute("data-uid"));n=o?o.isDataRow:!1}var l=this.getRowInfo(t.target);l.target=t.target,n&&this.trigger(oo,l),this.notify(Do,t)}},e.prototype.focusOutHandler=function(t){if(!this.isChildGrid(t)){b(t.target,"e-grid")||(this.element.querySelector(".e-gridpopup").style.display="None");var r=this.element.querySelector(".e-cancel:not(.e-hide)");r&&!r.parentElement.classList.contains("e-tbar-btn")&&r.classList.add("e-hide");var n=t.relatedTarget,a=n?n.getAttribute("aria-owns"):null;(!n||!b(n,"e-grid")&&(!c(a)&&a)!==t.target.getAttribute("aria-owns"))&&!this.keyPress&&this.isEdit&&!Y.isDevice&&(this.editSettings.mode==="Batch"&&!((b(n,"e-ddl")||b(n,"e-ddt"))&&(b(n,"e-multi-select-list-wrapper")||b(n,"e-input-filter"))&&b(n,"e-input-group"))&&(b(n,"e-uploader")||!(n&&c(b(n,"e-input-group"))))&&(this.editModule.saveCell(),this.notify(Po,{})),this.editSettings.mode==="Normal"&&this.editModule.editFormValidate()),this.editSettings.showAddNewRow&&(this.editModule.isShowAddedRowValidate=!1),this.keyPress=!1}},e.prototype.isChildGrid=function(t){var r=b(t.target,"e-grid");return!!(r&&r.id!==this.element.id||b(t.target,"e-unboundcelldiv")&&c(r))},e.prototype.mergePersistGridData=function(t){var r=this.getLocalData();if(!(c(r)||r==="")||!c(t)){var n=c(t)?JSON.parse(r):t;this.enableVirtualization&&n.pageSettings&&(n.pageSettings.currentPage=1);var a=Object.keys(n);this.isProtectedOnChange=!0;for(var o=0,l=a;o<l.length;o++){var h=l[o];typeof this[""+h]=="object"&&!c(this[""+h])?Array.isArray(this[""+h])&&h==="columns"?(this.setFrozenCount(),ir(this[""+h]),this.mergeColumns(n[""+h],this[""+h]),this.mergedColumns=!0,this[""+h]=n[""+h]):O(this[""+h],n[""+h]):this[""+h]=n[""+h]}this.isProtectedOnChange=!1}},e.prototype.mergeColumns=function(t,r){for(var n=t,a=this.isFrozenGrid(),o=function(p){var d=r.filter(function(u){return a?u.index===n[parseInt(p.toString(),10)][""+Qs]:u.index===n[parseInt(p.toString(),10)].index})[0];c(d)||(a&&(d=O({},d,{},!0),d.freeze=n[parseInt(p.toString(),10)].freeze),d.columns&&d.columns.length?(l.mergeColumns(n[parseInt(p.toString(),10)].columns,d.columns),n[parseInt(p.toString(),10)]=O(d,n[parseInt(p.toString(),10)],{},!0)):n[parseInt(p.toString(),10)]=O(d,n[parseInt(p.toString(),10)],{},!0))},l=this,h=0;h<n.length;h++)o(h)},e.prototype.isDetail=function(){return!c(this.detailTemplate)||!c(this.childGrid)},e.prototype.isCommandColumn=function(t){var r=this;return t.some(function(n){return n.columns?r.isCommandColumn(n.columns):!!(n.commands||n.commandsTemplate)})},e.prototype.isForeignKeyEnabled=function(t){var r=this;return t.some(function(n){return n.columns?r.isForeignKeyEnabled(n.columns):!!(n.dataSource&&n.foreignKeyValue)})},e.prototype.keyPressHandler=function(t){var r=O(t,{cancel:!1});this.trigger("keyPressed",r),r.cancel===!0&&t.stopImmediatePropagation()},e.prototype.keyDownHandler=function(t){if(t.altKey){if(t.keyCode===74&&(this.keyA?(this.notify(Us,{target:t.target,collapse:!1}),this.keyA=!1):(this.focusModule&&this.focusModule.currentInfo&&this.focusModule.currentInfo.element&&(z([this.focusModule.currentInfo.element,this.focusModule.currentInfo.elementToFocus],["e-focused","e-focus"]),this.focusModule.currentInfo.element.tabIndex=-1),this.element.classList.contains("e-childgrid")||this.element.focus())),t.keyCode===87){var r=this.focusModule;if(r){if(!this.currentViewData.length)return;r.focusContent(),r.addOutline()}}t.keyCode===65&&(this.keyA=!0),t.keyCode===72&&this.keyA&&(this.notify(Us,{target:t.target,collapse:!0}),this.keyA=!1)}t.keyCode===13&&this.notify(er,t)},e.prototype.keyActionHandler=function(t){this.isChildGrid(t)||this.isEdit&&(!this.editSettings.showAddNewRow||this.editSettings.showAddNewRow&&this.element.querySelector(Ii))&&t.action!=="escape"&&t.action!=="enter"&&t.action!=="shiftEnter"&&t.action!=="tab"&&t.action!=="shiftTab"||(this.keyPress=!0,this.allowKeyboard&&(t.action==="ctrlPlusP"&&(t.preventDefault(),this.print()),this.notify(si,t)))},e.prototype.setInjectedModules=function(t){this.injectedModules=t},e.prototype.updateColumnObject=function(){dr(this.columns,this.enableColumnVirtualization,this),ir(this.columns),this.initForeignColumn(),this.notify(Ri,{})},e.prototype.refreshFrozenPosition=function(t){t&&t.isModeChg?(this.refreshColumns(),this.notify(Tl,{})):this.refreshColumns()},e.prototype.getForeignKeyColumns=function(){return this.getColumns().filter(function(t){return t.isForeignColumn()})},e.prototype.getRowHeight=function(){return this.rowHeight?this.rowHeight:jh(this.element)},e.prototype.refreshColumns=function(){if(this.freezeColumnRefresh=!0,this.setFrozenCount(),this.updateFrozenColumnsWidth(),this.isFrozenGrid()&&(this.isPreventScrollEvent=!0),this.updateColumnObject(),this.checkLockColumns(this.getColumns()),this.refresh(),this.isFrozenGrid()&&this.enableColumnVirtualization){var t=this.getContent().querySelector(".e-movablescrollbar").scrollLeft;this.getHeaderContent().querySelector("."+Re).scrollLeft=t,this.getContent().querySelector("."+we).scrollLeft=t}},e.prototype.excelExport=function(t,r,n,a){if(this.exportGrids&&this.exportGrids.length){var o=this.exportGrids.slice();return this.exportMultipleExcelGrids(o,t,r,n,a)}else return this.excelExportModule?this.excelExportModule.Map(this,t,r,n,!1,a):null},e.prototype.csvExport=function(t,r,n,a){return this.excelExportModule?this.excelExportModule.Map(this,t,r,n,!0,a):null},e.prototype.pdfExport=function(t,r,n,a){if(this.exportGrids&&this.exportGrids.length){var o=this.exportGrids.slice();return this.exportMultiplePdfGrids(o,t,r,n,a)}else return this.pdfExportModule?this.pdfExportModule.Map(this,t,r,n,a):null},e.prototype.exportMultiplePdfGrids=function(t,r,n,a,o){var l=this;if(t.length!==0){var h=t.shift(),p=document.getElementById(h).ej2_instances[0],d=p.pdfExportModule?p.pdfExportModule.Map(p,r,n,a,o):Promise.resolve();return d.then(function(u){return n=t.length!==1,l.exportMultiplePdfGrids(t,r,n,u,o)})}return null},e.prototype.exportMultipleExcelGrids=function(t,r,n,a,o){var l=this;if(t.length!==0){var h=t.shift(),p=document.getElementById(h).ej2_instances[0],d=p.excelExportModule?p.excelExportModule.Map(p,r,n,a,!1,o):null;return d.then(function(u){return n=t.length!==1,l.exportMultipleExcelGrids(t,r,n,u,o)})}return null},e.prototype.groupColumn=function(t){this.groupModule&&this.groupModule.groupColumn(t)},e.prototype.groupExpandAll=function(){this.groupModule&&this.groupModule.expandAll()},e.prototype.groupCollapseAll=function(){this.groupModule&&this.groupModule.collapseAll()},e.prototype.clearGrouping=function(){this.groupModule&&this.groupModule.clearGrouping()},e.prototype.ungroupColumn=function(t){this.groupModule&&this.groupModule.ungroupColumn(t)},e.prototype.openColumnChooser=function(t,r){this.columnChooserModule&&this.columnChooserModule.openColumnChooser(t,r)},e.prototype.scrollRefresh=function(){var t=this,r=function(){t.scrollModule.refresh(),t.off(ce,r)};this.on(ce,r,this)},e.prototype.detailCollapseAll=function(){this.detailRowModule&&this.detailRowModule.collapseAll()},e.prototype.detailExpandAll=function(){this.detailRowModule&&this.detailRowModule.expandAll()},e.prototype.clearCellSelection=function(){this.selectionModule&&this.selectionModule.clearCellSelection()},e.prototype.clearRowSelection=function(){this.selectionModule&&this.selectionModule.clearRowSelection()},e.prototype.selectCells=function(t){this.selectionModule&&this.selectionModule.selectCells(t)},e.prototype.selectRowsByRange=function(t,r){this.selectionModule&&this.selectionModule.selectRowsByRange(t,r)},e.prototype.isContextMenuOpen=function(){return this.contextMenuModule&&this.contextMenuModule.isOpen},e.prototype.ensureModuleInjected=function(t){return this.getInjectedModules().indexOf(t)>=0},e.prototype.destroyTemplate=function(t,r){this.clearTemplate(t,r)},e.prototype.log=function(t,r){var n=this.getInjectedModules(),a=n.find(function(o){return o.name==="Logger"});a||(i.Inject(Sh),this.enableLogger=!0,this.injectModules()),this.loggerModule&&this.loggerModule.log(t,r)},e.prototype.applyBiggerTheme=function(t){this.element.classList.contains("e-bigger")&&t.classList.add("e-bigger")},e.prototype.getPreviousRowData=function(){var t=this.getRowsObject()[this.getRows().length-1].data;return t},e.prototype.hideScroll=function(){var t=this.getContent().querySelector("."+we);t.scrollHeight<=t.clientHeight&&(this.scrollModule.removePadding(),t.style.overflowY="auto")},e.prototype.getRowIndexByPrimaryKey=function(t){var r=this.getPrimaryKeyFieldNames()[0];t=typeof t=="object"?t[""+r]:t;for(var n=this.getRowsObject(),a=0;a<n.length;a++)if(!(n[parseInt(a.toString(),10)].isDetailRow||n[parseInt(a.toString(),10)].isCaptionRow)){var o=n[parseInt(a.toString(),10)].data[""+r];if(r.split(".").length>1&&(o=op(r,n[parseInt(a.toString(),10)].data)),o===t)return n[parseInt(a.toString(),10)].index}return-1},e.prototype.grabColumnByFieldFromAllCols=function(t,r){var n;this.columnModel=[],this.updateColumnModel(this.columns);for(var a=this.columnModel,o=0;o<a.length;o++)if(!r&&t===a[parseInt(o.toString(),10)].field||r&&a[parseInt(o.toString(),10)].isForeignColumn()&&t===a[parseInt(o.toString(),10)].foreignKeyValue){n=a[parseInt(o.toString(),10)];break}return n},e.prototype.grabColumnByUidFromAllCols=function(t){var r;this.columnModel=[],this.updateColumnModel(this.columns);for(var n=this.columnModel,a=0;a<n.length;a++)t===n[parseInt(a.toString(),10)].uid&&(r=n[parseInt(a.toString(),10)]);return r},e.prototype.getFilteredRecords=function(){if(this.allowFiltering&&this.filterSettings.columns.length||this.searchSettings.key.length){var t=this.renderModule.data.generateQuery(!0);return this.dataSource&&this.renderModule.data.isRemote()&&this.dataSource instanceof _?this.renderModule.data.getData(this.dataSource,t):this.dataSource instanceof _?this.dataSource.executeLocal(t):new _(this.dataSource,t).executeLocal(t)}return[]},e.prototype.getUserAgent=function(){var t=Y.userAgent.toLowerCase();return/iphone|ipod|ipad|macintosh/.test(t)},e.prototype.tapEvent=function(t){this.getUserAgent()&&(ft.timer?(clearTimeout(ft.timer),ft.timer=null,this.dblClickHandler(t),this.notify(Ao,t)):ft.timer=setTimeout(function(){ft.timer=null},300))},e.prototype.getRowUid=function(t){return""+t+this.rowUid++},e.prototype.getRowElementByUID=function(t){var r,n=[],a=[].slice.call(this.getContent().querySelector(N).children);this.frozenRows?(n=[].slice.call(this.getHeaderContent().querySelector(N).children),n=n.concat(a)):n=a;for(var o=0,l=n;o<l.length;o++){var h=l[o];if(h.getAttribute("data-uid")===t){r=h;break}}return r},e.prototype.getHiddenColumns=function(){for(var t=[],r=0,n=this.columnModel;r<n.length;r++){var a=n[r];a.visible===!1&&t.push(a)}return t},e.prototype.calculatePageSizeByParentHeight=function(t){if(this.allowPaging&&(this.allowTextWrap&&this.textWrapSettings.wrapMode==="Header"||!this.allowTextWrap)){var r=0;t.indexOf("%")!==-1&&(t=parseInt(t,10)/100*this.element.clientHeight);var n=this.getNoncontentHeight()+this.getRowHeight();if(t>n){var a=0;a=t-this.getNoncontentHeight(),r=a/this.getRowHeight()}if(r>0)return Math.floor(r)}return 0},e.prototype.getNoncontentHeight=function(){var t=0;if(c(this.getHeaderContent().clientHeight)||(t+=this.getHeaderContent().clientHeight),this.toolbar&&!c(this.element.querySelector(".e-toolbar").clientHeight)&&(t+=this.element.querySelector(".e-toolbar").clientHeight),this.allowPaging&&!c(this.element.querySelector(".e-gridpager").clientHeight)&&(t+=this.element.querySelector(".e-gridpager").clientHeight),this.showColumnChooser&&!c(this.element.querySelector(".e-columnheader").clientHeight)&&(t+=this.element.querySelector(".e-columnheader").clientHeight),this.allowGrouping&&this.groupSettings.showDropArea&&!c(this.element.querySelector(".e-groupdroparea").clientHeight)&&(t+=this.element.querySelector(".e-groupdroparea").clientHeight),this.aggregates.length>0&&!c(this.element.querySelector(".e-summaryrow").clientHeight))for(var r=0;r<this.element.getElementsByClassName("e-summaryrow").length;r++)t+=this.element.getElementsByClassName("e-summaryrow")[parseInt(r.toString(),10)].clientHeight;return t},e.prototype.getSummaryValues=function(t,r){return me.aggregates[t.type.toLowerCase()](r,t.field)},e.prototype.serverExcelExport=function(t){this.isExcel=!0,this.exportGrid(t)},e.prototype.serverPdfExport=function(t){this.isExcel=!1,this.exportGrid(t)},e.prototype.serverCsvExport=function(t){this.isExcel=!0,this.exportGrid(t)},e.prototype.exportGrid=function(t){var r=this,n=r.getDataModule().generateQuery(!0),a=new ti().processQuery(new _({url:""}),n),o=JSON.parse(a.data),l=JSON.parse(this.addOnPersist(["allowGrouping","allowPaging","pageSettings","sortSettings","allowPdfExport","allowExcelExport","aggregates","filterSettings","groupSettings","columns","locale","searchSettings"])),h=["field","headerText","type","format","visible","foreignKeyValue","foreignKeyField","template","index","width","textAlign","headerTextAlign","columns"];l.filterSettings.columns=o.where,l.searchSettings.fields=o.search&&o.search[0].fields||[],l.sortSettings.columns=o.sorted,l.columns=this.setHeaderText(l.columns,h);var p=this.createElement("form",{id:"ExportForm",styles:"display:none;"}),d=this.createElement("input",{id:"gridInput",attrs:{name:"gridModel"}});d.value=JSON.stringify(l),p.method="POST",p.action=t,p.appendChild(d),document.body.appendChild(p),p.submit(),p.remove()},e.prototype.setHeaderText=function(t,r){for(var n=0;n<t.length;n++){var a=this.getColumnByUid(t[parseInt(n.toString(),10)].uid);t[parseInt(n.toString(),10)].headerText=a.headerText,c(a.template)||(t[parseInt(n.toString(),10)].template="true"),t[parseInt(n.toString(),10)].format&&(t[parseInt(n.toString(),10)].format=sp(this.getFormat(t[parseInt(n.toString(),10)].format),t[parseInt(n.toString(),10)].type,this.isExcel,ts)),t[parseInt(n.toString(),10)].columns&&this.setHeaderText(t[parseInt(n.toString(),10)].columns,r);for(var o=Object.keys(t[parseInt(n.toString(),10)]),l=0;l<o.length;l++)r.indexOf(o[parseInt(l.toString(),10)])<0&&delete t[parseInt(n.toString(),10)][o[parseInt(l.toString(),10)]]}return t},e.prototype.getFormat=function(t){return typeof t=="object"?c(t.format)?t.skeleton:t.format:t},e.prototype.isCollapseStateEnabled=function(){var t="isExpanded";return this[""+t]===!1},e.prototype.updateRowValue=function(t,r){var n={requestType:"save",data:r};this.showSpinner(),this.notify(nn,n),this.refresh()},e.prototype.setForeignKeyData=function(){this.dataBind();var t=this.getDataModule().getForeignKeyDataState();t.isPending?(this.getDataModule().setForeignKeyDataState({}),t.resolver()):(this.getDataModule().setForeignKeyDataState({isDataChanged:!1}),(this.contentModule||this.headerModule)&&this.renderModule.render())},e.prototype.resetFilterDlgPosition=function(t){var r=this.getColumnHeaderByField(t);if(r){var n=r.querySelector(".e-filtermenudiv"),a=this.element.querySelector(".e-filter-popup");if(n&&a){var o=this.element.getBoundingClientRect(),l=n.getBoundingClientRect();a&&(a.offsetWidth+l.right>o.right?a.style.left=(l.right-a.offsetWidth-o.left).toString()+"px":a.style.left=(l.right-o.left).toString()+"px")}}},e.prototype.renderTemplates=function(t){var r=this.parentDetails&&this.parentDetails.parentInstObj&&this.parentDetails.parentInstObj.isReact;if(r&&this.portals)this.parentDetails.parentInstObj.portals=this.parentDetails.parentInstObj.portals.concat(this.portals),this.parentDetails.parentInstObj.renderTemplates(t),this.portals=void 0;else{var n="portals";this.notify("reactTemplateRender",this[""+n]),this.renderReactTemplates(t)}},e.prototype.batchUpdate=function(t){this.processRowChanges(t)},e.prototype.batchAsyncUpdate=function(t){this.processBulkRowChanges(t)},e.prototype.processBulkRowChanges=function(t){var r=this;if(!this.dataToBeUpdated)this.dataToBeUpdated=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},t),setTimeout(function(){r.processRowChanges(r.dataToBeUpdated),r.dataToBeUpdated=null},this.asyncTimeOut);else for(var n=[hr,Ml,ua],a=this.getPrimaryKeyFieldNames()[0],o=0;o<n.length;o++)t[n[parseInt(o.toString(),10)]]&&tp(this,t,n[parseInt(o.toString(),10)],a)},e.prototype.processRowChanges=function(t){var r=this,n=this.getPrimaryKeyFieldNames()[0];t=Object.assign({addedRecords:[],changedRecords:[],deletedRecords:[]},t);var a=this.getDataModule().saveChanges(t,n,{},this.getDataModule().generateQuery().requiresCount());this.getDataModule().isRemote()?a.then(function(){r.setNewData()}):this.setNewData()},e.prototype.setNewData=function(){var t=this,r=JSON.parse(JSON.stringify(this.getCurrentViewRecords())),n=this.getDataModule().getData({},this.getDataModule().generateQuery().requiresCount());n.then(function(a){t.bulkRefresh(a.result,r,a.count)})},e.prototype.deleteRowElement=function(t){var r=this.getRowElementByUID(t.uid);B(r)},e.prototype.bulkRefresh=function(t,r,n){for(var a=this,o=this.getRowsObject(),l=this.getPrimaryKeyFieldNames()[0],h=function(y){t.filter(function(S){return S[""+l]===o[parseInt(y.toString(),10)].data[""+l]}).length||(p.deleteRowElement(o[parseInt(y.toString(),10)]),o.splice(y,1),y--),d=y},p=this,d,u=0;u<o.length;u++)h(u),u=d;for(var f=function(y){var S;r.filter(function(I){I[""+l]===t[parseInt(y.toString(),10)][""+l]&&(I!==t[parseInt(y.toString(),10)]&&a.setRowData(t[parseInt(y.toString(),10)][""+l],t[parseInt(y.toString(),10)]),S=!0)}),S||m.renderRowElement(t[parseInt(y.toString(),10)],y)},m=this,u=0;u<t.length;u++)f(u);this.currentViewData=t;var g=[].slice.call(this.getContentTable().getElementsByClassName(xe));ep(this,this.getRowsObject(),g),ip(this),this.allowPaging&&this.notify(Ue,{module:"pager",properties:{totalRecordsCount:n}})},e.prototype.renderRowElement=function(t,r){var n=new Fi(this.serviceLocator,null,this),a=new fr(this),o=a.generateRows([t]),l=n.render(o[0],this.getColumns());this.addRowObject(o[0],r);var h=this.getContentTable().querySelector(N);if(h.querySelector(".e-emptyrow")){var p=h.querySelector(".e-emptyrow");p.parentNode.removeChild(p),this.frozenRows&&this.element.querySelector(".e-frozenrow-empty")&&this.element.querySelector(".e-frozenrow-empty").classList.remove("e-frozenrow-empty")}this.frozenRows&&r<this.frozenRows?h=this.getHeaderContent().querySelector(N):h=this.getContent().querySelector(N),h=this.getContent().querySelector(N),h.appendChild(l)},e.prototype.addRowObject=function(t,r){this.getRowsObject().splice(r,1,t)},e.prototype.updateVisibleExpandCollapseRows=function(){for(var t=this.getRowsObject(),r=0,n=t.length;r<n;r++)(t[parseInt(r.toString(),10)].isDataRow||t[parseInt(r.toString(),10)].isAggregateRow)&&this.getRowElementByUID(t[parseInt(r.toString(),10)].uid).style.display==="none"?t[parseInt(r.toString(),10)].visible=!1:t[parseInt(r.toString(),10)].visible=!0},e.prototype.sanitize=function(t){return this.enableHtmlSanitizer?zr.sanitize(t):t},e.prototype.getHeight=function(t){return!Number.isInteger(t)&&t.indexOf("%")!==-1?t=parseInt(t,10)/100*this.element.clientHeight:!Number.isInteger(t)&&this.height!=="auto"?t=parseInt(t,10):t=this.height,t},e.prototype.getFrozenRightContent=function(){return this.contentModule.getPanel()},e.prototype.getFrozenRightHeader=function(){return this.headerModule.getPanel()},e.prototype.getMovableHeaderTbody=function(){return this.getHeaderContent().querySelector(N)},e.prototype.getMovableContentTbody=function(){return this.getContent().querySelector(N)},e.prototype.getFrozenHeaderTbody=function(){return this.getHeaderContent().querySelector(N)},e.prototype.getFrozenLeftContentTbody=function(){return this.getContent().querySelector(N)},e.prototype.getFrozenRightHeaderTbody=function(){return this.getHeaderContent().querySelector(N)},e.prototype.getFrozenRightContentTbody=function(){return this.getContent().querySelector(N)},e.prototype.showResponsiveCustomFilter=function(t){this.filterModule&&this.filterModule.showCustomFilter(t||this.rowRenderingMode==="Vertical")},e.prototype.showResponsiveCustomSort=function(t){this.sortModule&&this.sortModule.showCustomSort(t||this.rowRenderingMode==="Vertical")},e.prototype.showResponsiveCustomColumnChooser=function(t){this.columnChooserModule&&this.columnChooserModule.showCustomColumnChooser(t||this.rowRenderingMode==="Vertical")},e.prototype.showAdaptiveFilterDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomFilter(!0)},e.prototype.showAdaptiveSortDialog=function(){this.enableAdaptiveUI&&this.showResponsiveCustomSort(!0)},e.prototype.getCurrentVisibleColumns=function(t){for(var r=[],n=t?this.getColumns():this.columnModel,a=0,o=n;a<o.length;a++){var l=o[a];l.visible&&r.push(l)}return r},e.prototype.enableInfiniteAggrgate=function(){this.enableInfiniteScrolling&&this.groupSettings.columns.length&&!this.groupSettings.disablePageWiseAggregates&&!this.groupSettings.enableLazyLoading&&this.setProperties({groupSettings:{disablePageWiseAggregates:!0}},!0)};var i;return v([w([])],e.prototype,"currentViewData",void 0),v([w()],e.prototype,"parentDetails",void 0),v([w()],e.prototype,"showHider",void 0),v([w([])],e.prototype,"columns",void 0),v([w(!0)],e.prototype,"enableAltRow",void 0),v([w(!0)],e.prototype,"enableHover",void 0),v([w(!1)],e.prototype,"enableAutoFill",void 0),v([w(!0)],e.prototype,"allowKeyboard",void 0),v([w(!1)],e.prototype,"enableStickyHeader",void 0),v([w(!1)],e.prototype,"enableHtmlSanitizer",void 0),v([w(!1)],e.prototype,"allowTextWrap",void 0),v([Ee({},Ah)],e.prototype,"textWrapSettings",void 0),v([Ee({},Eh)],e.prototype,"resizeSettings",void 0),v([w(!1)],e.prototype,"allowPaging",void 0),v([Ee({},dh)],e.prototype,"pageSettings",void 0),v([Ee({},Bh)],e.prototype,"loadingIndicator",void 0),v([w(!0)],e.prototype,"enableVirtualMaskRow",void 0),v([w(!1)],e.prototype,"enableVirtualization",void 0),v([w(!1)],e.prototype,"enableColumnVirtualization",void 0),v([w(!1)],e.prototype,"enableInfiniteScrolling",void 0),v([Ee({},kh)],e.prototype,"searchSettings",void 0),v([w(!1)],e.prototype,"allowSorting",void 0),v([w("Ellipsis")],e.prototype,"clipMode",void 0),v([w(!0)],e.prototype,"allowMultiSorting",void 0),v([w(!1)],e.prototype,"allowExcelExport",void 0),v([w(!1)],e.prototype,"allowPdfExport",void 0),v([Ee({},xh)],e.prototype,"sortSettings",void 0),v([Ee({},Dh)],e.prototype,"infiniteScrollSettings",void 0),v([w(!0)],e.prototype,"allowSelection",void 0),v([w(-1)],e.prototype,"selectedRowIndex",void 0),v([Ee({},Th)],e.prototype,"selectionSettings",void 0),v([w(!1)],e.prototype,"allowFiltering",void 0),v([w("Horizontal")],e.prototype,"rowRenderingMode",void 0),v([w(!1)],e.prototype,"enableAdaptiveUI",void 0),v([w(!1)],e.prototype,"allowReordering",void 0),v([w(!1)],e.prototype,"allowResizing",void 0),v([w(!1)],e.prototype,"allowRowDragAndDrop",void 0),v([Ee({},Mh)],e.prototype,"rowDropSettings",void 0),v([Ee({},Fh)],e.prototype,"filterSettings",void 0),v([w(!1)],e.prototype,"allowGrouping",void 0),v([w(!1)],e.prototype,"enableImmutableMode",void 0),v([w(!1)],e.prototype,"showColumnMenu",void 0),v([w(!1)],e.prototype,"autoFit",void 0),v([Ee({},Lh)],e.prototype,"groupSettings",void 0),v([Ee({},zh)],e.prototype,"editSettings",void 0),v([yi([],vh)],e.prototype,"aggregates",void 0),v([w(!1)],e.prototype,"showColumnChooser",void 0),v([Ee({},uh)],e.prototype,"columnChooserSettings",void 0),v([w(!1)],e.prototype,"enableHeaderFocus",void 0),v([w("auto")],e.prototype,"height",void 0),v([w("auto")],e.prototype,"width",void 0),v([w("Default")],e.prototype,"gridLines",void 0),v([w()],e.prototype,"rowTemplate",void 0),v([w()],e.prototype,"emptyRecordTemplate",void 0),v([w()],e.prototype,"detailTemplate",void 0),v([w()],e.prototype,"childGrid",void 0),v([w()],e.prototype,"queryString",void 0),v([w("AllPages")],e.prototype,"printMode",void 0),v([w("Expanded")],e.prototype,"hierarchyPrintMode",void 0),v([w([])],e.prototype,"dataSource",void 0),v([w(null)],e.prototype,"rowHeight",void 0),v([w()],e.prototype,"query",void 0),v([w("USD")],e.prototype,"currencyCode",void 0),v([w()],e.prototype,"exportGrids",void 0),v([w()],e.prototype,"toolbar",void 0),v([w()],e.prototype,"contextMenuItems",void 0),v([w()],e.prototype,"columnMenuItems",void 0),v([w()],e.prototype,"toolbarTemplate",void 0),v([w()],e.prototype,"pagerTemplate",void 0),v([w(0)],e.prototype,"frozenRows",void 0),v([w(0)],e.prototype,"frozenColumns",void 0),v([w("")],e.prototype,"cssClass",void 0),v([w("All")],e.prototype,"columnQueryMode",void 0),v([w({})],e.prototype,"currentAction",void 0),v([w("")],e.prototype,"ej2StatePersistenceVersion",void 0),v([D()],e.prototype,"created",void 0),v([D()],e.prototype,"destroyed",void 0),v([D()],e.prototype,"load",void 0),v([D()],e.prototype,"rowDataBound",void 0),v([D()],e.prototype,"queryCellInfo",void 0),v([D()],e.prototype,"headerCellInfo",void 0),v([D()],e.prototype,"actionBegin",void 0),v([D()],e.prototype,"actionComplete",void 0),v([D()],e.prototype,"actionFailure",void 0),v([D()],e.prototype,"dataBound",void 0),v([D()],e.prototype,"recordDoubleClick",void 0),v([D()],e.prototype,"recordClick",void 0),v([D()],e.prototype,"rowSelecting",void 0),v([D()],e.prototype,"rowSelected",void 0),v([D()],e.prototype,"rowDeselecting",void 0),v([D()],e.prototype,"rowDeselected",void 0),v([D()],e.prototype,"cellSelecting",void 0),v([D()],e.prototype,"cellSelected",void 0),v([D()],e.prototype,"cellDeselecting",void 0),v([D()],e.prototype,"cellDeselected",void 0),v([D()],e.prototype,"columnSelecting",void 0),v([D()],e.prototype,"columnSelected",void 0),v([D()],e.prototype,"columnDeselecting",void 0),v([D()],e.prototype,"columnDeselected",void 0),v([D()],e.prototype,"columnDragStart",void 0),v([D()],e.prototype,"columnDrag",void 0),v([D()],e.prototype,"columnDrop",void 0),v([D()],e.prototype,"printComplete",void 0),v([D()],e.prototype,"beforePrint",void 0),v([D()],e.prototype,"pdfQueryCellInfo",void 0),v([D()],e.prototype,"pdfHeaderQueryCellInfo",void 0),v([D()],e.prototype,"pdfAggregateQueryCellInfo",void 0),v([D()],e.prototype,"excelAggregateQueryCellInfo",void 0),v([D()],e.prototype,"exportDetailDataBound",void 0),v([D()],e.prototype,"exportDetailTemplate",void 0),v([D()],e.prototype,"excelQueryCellInfo",void 0),v([D()],e.prototype,"excelHeaderQueryCellInfo",void 0),v([D()],e.prototype,"beforeExcelExport",void 0),v([D()],e.prototype,"excelExportComplete",void 0),v([D()],e.prototype,"beforePdfExport",void 0),v([D()],e.prototype,"pdfExportComplete",void 0),v([D()],e.prototype,"rowDragStartHelper",void 0),v([D()],e.prototype,"detailDataBound",void 0),v([D()],e.prototype,"rowDragStart",void 0),v([D()],e.prototype,"rowDrag",void 0),v([D()],e.prototype,"rowDrop",void 0),v([D()],e.prototype,"toolbarClick",void 0),v([D()],e.prototype,"beforeOpenColumnChooser",void 0),v([D()],e.prototype,"beforeOpenAdaptiveDialog",void 0),v([D()],e.prototype,"batchAdd",void 0),v([D()],e.prototype,"batchDelete",void 0),v([D()],e.prototype,"batchCancel",void 0),v([D()],e.prototype,"beforeBatchAdd",void 0),v([D()],e.prototype,"beforeBatchDelete",void 0),v([D()],e.prototype,"beforeBatchSave",void 0),v([D()],e.prototype,"beginEdit",void 0),v([D()],e.prototype,"commandClick",void 0),v([D()],e.prototype,"cellEdit",void 0),v([D()],e.prototype,"cellSave",void 0),v([D()],e.prototype,"cellSaved",void 0),v([D()],e.prototype,"resizeStart",void 0),v([D()],e.prototype,"resizing",void 0),v([D()],e.prototype,"resizeStop",void 0),v([D()],e.prototype,"keyPressed",void 0),v([D()],e.prototype,"beforeDataBound",void 0),v([D()],e.prototype,"contextMenuOpen",void 0),v([D()],e.prototype,"contextMenuClick",void 0),v([D()],e.prototype,"columnMenuOpen",void 0),v([D()],e.prototype,"columnMenuClick",void 0),v([D()],e.prototype,"checkBoxChange",void 0),v([D()],e.prototype,"beforeCopy",void 0),v([D()],e.prototype,"beforePaste",void 0),v([D()],e.prototype,"beforeAutoFill",void 0),v([D()],e.prototype,"columnDataStateChange",void 0),v([D()],e.prototype,"dataStateChange",void 0),v([D()],e.prototype,"dataSourceChanged",void 0),v([D()],e.prototype,"exportGroupCaption",void 0),v([D()],e.prototype,"lazyLoadGroupExpand",void 0),v([D()],e.prototype,"lazyLoadGroupCollapse",void 0),e=i=v([rs],e),e}(Ni);function Ph(){return["aggregates","allowGrouping","allowFiltering","allowMultiSorting","allowReordering","allowSorting","allowTextWrap","childGrid","columns","currentViewData","dataSource","detailTemplate","enableAltRow","enableColumnVirtualization","filterSettings","gridLines","groupSettings","height","locale","pageSettings","printMode","query","queryString","enableRtl","rowHeight","rowTemplate","sortSettings","textWrapSettings","allowPaging","hierarchyPrintMode","searchSettings","queryCellInfo","beforeDataBound"]}var xa=function(){function s(e,i){this.isAsyncPrint=!1,this.defered=new $e,this.parent=e,!this.parent.isDestroyed&&(this.parent.on(ce,this.isContentReady(),this),this.actionBeginFunction=this.actionBegin.bind(this),this.parent.addEventListener(vt,this.actionBeginFunction),this.parent.on(yt,this.onEmpty.bind(this)),this.parent.on(Vs,this.hierarchyPrint,this),this.scrollModule=i)}return s.prototype.isContentReady=function(){var e=this;return this.isPrintGrid()&&(this.parent.hierarchyPrintMode==="None"||!this.parent.childGrid)?this.contentReady:function(){e.defered.promise.then(function(){e.contentReady()}),e.isPrintGrid()&&e.hierarchyPrint()}},s.prototype.hierarchyPrint=function(){this.removeColGroup(this.parent);var e=window.printGridObj;e&&!e.element.querySelector("[aria-busy=true")&&e.printModule.defered.resolve()},s.prototype.print=function(){this.renderPrintGrid()},s.prototype.onEmpty=function(){this.isPrintGrid()&&this.contentReady()},s.prototype.actionBegin=function(){this.isPrintGrid()&&(this.isAsyncPrint=!0)},s.prototype.renderPrintGrid=function(){var e=this.parent,i=Ce("div",{id:this.parent.element.id+"_print",className:e.element.className+" e-print-grid"});i.classList.remove("e-gridhover"),document.body.appendChild(i);for(var t=new Cn(Ta(e,e.hierarchyPrintMode)),r=0;r<t.columns.length;r++)t.columns[parseInt(r.toString(),10)]=O({},t.columns[parseInt(r.toString(),10)]),e.isFrozenGrid()&&!e.getFrozenColumns()&&(t.columns[parseInt(r.toString(),10)].freeze=void 0);this.parent.isAngular&&(t.viewContainerRef=this.parent.viewContainerRef),t.load=function(){},t.query=e.getQuery().clone(),window.printGridObj=t,t.isPrinting=!0;var n=t.getInjectedModules(),a=e.getInjectedModules();(!n||n.length!==a.length)&&t.setInjectedModules(a),e.notify(qo,{element:i,printgrid:t}),this.parent.log("exporting_begin",this.getModuleName()),t.registeredTemplate=this.parent.registeredTemplate,t.isVue=this.parent.isVue,t.appendTo(i),e.isVue3||(t.trigger=e.trigger)},s.prototype.contentReady=function(){if(this.isPrintGrid()){var e=this.parent;if(this.isAsyncPrint){this.printGrid();return}var i={requestType:"print",element:e.element,selectedRows:e.getContentTable().querySelectorAll('tr[aria-selected="true"]'),cancel:!1,hierarchyPrintMode:e.hierarchyPrintMode};if(this.isAsyncPrint||e.trigger(Ts,i),i.cancel){Mr(e.element);return}this.isAsyncPrint||this.printGrid()}},s.prototype.printGrid=function(){var e=this.parent;if(e.height!=="auto"){var i=this.scrollModule.getCssProperties(),t=e.element.querySelector("."+we),r=e.element.querySelector("."+ze);t.style.height="auto",t.style.overflowY="auto",r.style[i.padding]="",r.firstElementChild.style[i.border]=""}e.allowGrouping&&(e.groupSettings.columns.length?this.removeColGroup(e):e.element.querySelector(".e-groupdroparea").style.display="none");for(var n=0,a=[].slice.call(e.element.getElementsByClassName(we));n<a.length;n++){var o=a[n];o.style.overflowX="hidden"}for(var l=[].slice.call(e.element.getElementsByClassName("e-spin-show")),h=0,p=[].slice.call(l);h<p.length;h++){var o=p[h];Ie(o,["e-spin-hide"],["e-spin-show"])}this.printGridElement(e),e.isPrinting=!1,delete window.printGridObj;var d={element:e.element};e.trigger(ks,d),e.destroy(),this.parent.log("exporting_complete",this.getModuleName())},s.prototype.printGridElement=function(e){Ie(e.element,["e-print-grid-layout"],["e-print-grid"]),e.isPrinting&&Mr(e.element),this.printWind=window.open("","print","height="+window.outerHeight+",width="+window.outerWidth+",tabbar=no"),this.printWind.moveTo(0,0),this.printWind.resizeTo(screen.availWidth,screen.availHeight),this.printWind=es(e.element,this.printWind)},s.prototype.removeColGroup=function(e){var i=e.groupSettings.columns.length,t=e.element,r="#"+e.element.id;if(i){for(var n=Pt(".e-groupcaption",t),a=n[i-1].getAttribute("colspan"),o=0;o<n.length;o++)n[parseInt(o.toString(),10)].setAttribute("colspan",a);var l=Pt("colgroup"+r+"colgroup",t),h=Pt(".e-content colgroup",t),p=Pt(".e-summarycontent colgroup",t);this.hideColGroup(l,i),this.hideColGroup(h,i),this.hideColGroup(p,i)}},s.prototype.hideColGroup=function(e,i){for(var t=0;t<e.length;t++)for(var r=0;r<i;r++)e[parseInt(t.toString(),10)].children[parseInt(r.toString(),10)].style.display="none"},s.prototype.isPrintGrid=function(){return this.parent.element.id.indexOf("_print")>0&&this.parent.isPrinting},s.prototype.destroy=function(){this.parent.isDestroyed||(this.parent.off(ce,this.contentReady.bind(this)),this.parent.removeEventListener(vt,this.actionBeginFunction),this.parent.off(yt,this.onEmpty.bind(this)),this.parent.off(Vs,this.hierarchyPrint))},s.prototype.getModuleName=function(){return"print"},s.printGridProp=Ph().concat([Ts,ks,Kr]),s}();function Oh(s,e){return s.prototype&&e in s.prototype}function Ra(s,e,i){return c(s)||s===""?"":me.getObject(s,e)}function Da(s,e){requestAnimationFrame(function(){try{e(null,s())}catch(i){e(i)}})}function jt(s,e){for(var i=[],t=0,r=s.length;t<r;t++){var n=e(s[parseInt(t.toString(),10)],t);c(n)||i.push(n)}return i}function _r(s){for(var e=[],i=0;i<s.length;i++)e.push(O({},cr(s[parseInt(i.toString(),10)]),{},!0));return e}function de(s){if(s)try{var e=s[0]!=="<";return typeof s=="function"?kt(s):e&&document.querySelectorAll(s).length?kt(document.querySelector(s).innerHTML.trim()):kt(s)}catch{return kt(s)}}function ut(s,e){var i={},t=["style","class"];O(i,e,{}),"style"in i&&(wt(s,i[t[0]]),delete i[t[0]]),"class"in i&&(L([s],i[t[1]]),delete i[t[1]]),Bt(s,i)}function ir(s,e){e===void 0&&(e=0);for(var i=0,t=s.length;i<t;i++)s[parseInt(i.toString(),10)].columns?(s[parseInt(i.toString(),10)].index=c(s[parseInt(i.toString(),10)].index)?e:s[parseInt(i.toString(),10)].index,e++,e=ir(s[parseInt(i.toString(),10)].columns,e)):(s[parseInt(i.toString(),10)].index=c(s[parseInt(i.toString(),10)].index)?e:s[parseInt(i.toString(),10)].index,e++);return e}function dr(s,e,i){for(var t=0,r=s.length;t<r;t++){var n=void 0;typeof s[parseInt(t.toString(),10)]=="string"?n=new ye({field:s[parseInt(t.toString(),10)]},i):!(s[parseInt(t.toString(),10)]instanceof ye)||s[parseInt(t.toString(),10)].columns?s[parseInt(t.toString(),10)].columns?(s[parseInt(t.toString(),10)].columns=dr(s[parseInt(t.toString(),10)].columns,null,i),n=new ye(s[parseInt(t.toString(),10)],i)):n=new ye(s[parseInt(t.toString(),10)],i):n=s[parseInt(t.toString(),10)],n.type&&n.type.toLowerCase()==="checkbox"&&(n.allowReordering=!1),n.headerText=c(n.headerText)?n.foreignKeyValue||n.field||"":n.headerText,n.foreignKeyField=n.foreignKeyField||n.field,n.valueAccessor=(typeof n.valueAccessor=="string"?oe(n.valueAccessor,window):n.valueAccessor)||Ra,n.width=e&&c(n.width)?200:n.width,c(n.visible)&&(n.visible=!0),s[parseInt(t.toString(),10)]=n}return s}function qh(s,e,i){var t=s.querySelector("span"),r=s.parentElement.getBoundingClientRect(),n=e.target.getBoundingClientRect();t.className=i,s.style.display="";var a=(c(e.clientY)?e.changedTouches[0].clientY:e.clientY)>s.offsetHeight+10;s.style.top=n.top-r.top+(a?-(s.offsetHeight+10):s.offsetHeight+10)+"px",s.style.left=Hh(s,e,n,r.left)+"px",a?(s.querySelector(".e-downtail").style.display="",s.querySelector(".e-uptail").style.display="none"):(s.querySelector(".e-downtail").style.display="none",s.querySelector(".e-uptail").style.display="")}function Hh(s,e,i,t){var r=s.offsetWidth/2,n=un(e).x;return n-i.left<r?i.left-t:i.right-n<r?i.right-t-r*2:n-t-r}function cr(s){return s instanceof ue?oe("properties",s):s}function b(s,e,i){for(var t=s;t&&!(i?t.id===e:t.classList.contains(e));)t=t.parentElement;return t}function Nh(s){for(var e=[],i=0,t=s.length;i<t;i++)s[parseInt(i.toString(),10)].hasOwnProperty("properties")?e.push(s[parseInt(i.toString(),10)].properties):e.push(s[parseInt(i.toString(),10)]);return e}function un(s){var e={};return e.x=c(s.clientX)?s.changedTouches[0].clientX:s.clientX,e.y=c(s.clientY)?s.changedTouches[0].clientY:s.clientY,e}var Vh=0;function Mt(s){return s+Vh++}function Qe(s,e){for(var i=0,t=e.length;i<t;i++)t===e.length?s.appendChild(e[parseInt(i.toString(),10)]):s.appendChild(e[0]);return s}function Gh(s,e,i,t){if(s==="Custom"){var r=i.customAggregate;return typeof r=="string"&&(r=oe(r,window)),r?r.call(t,e,i):""}return i.field in e||e instanceof Array?me.aggregates[s.toLowerCase()](e,i.field):null}var Ur=null;function Ne(){if(Ur!==null)return Ur;var s=document.createElement("div"),e=0;return s.style.cssText="width:100px;height: 100px;overflow: scroll;position: absolute;top: -9999px;",document.body.appendChild(s),e=s.offsetWidth-s.clientWidth|0,document.body.removeChild(s),Ur=e}var Ji;function jh(s){if(Ji!==void 0)return Ji;var e=Ce("table",{className:gt,styles:"visibility: hidden",attrs:{role:"grid"}});e.innerHTML='<tr><td class="e-rowcell">A<td></tr>',s.appendChild(e);var i=e.querySelector("td").getBoundingClientRect();return s.removeChild(e),Ji=Math.ceil(i.height),Ji}function _h(s){return s.split(".").length>1}function Fa(s){var e=vi("#"+s.element.id+"EditConfirm",s.element);return s.editSettings.mode==="Batch"&&(Pt(".e-updatedtd",s.element).length||Pt(".e-gridform.e-formvalidator",s.element).length)&&s.editSettings.showConfirmDialog&&(e?e.classList.contains("e-popup-close"):!0)}function He(s,e){var i="e-wrap";s=s instanceof Array?s:[s];for(var t=0;t<s.length;t++)e?s[parseInt(t.toString(),10)].classList.add(i):s[parseInt(t.toString(),10)].classList.remove(i)}function fn(s,e){var i=s.getService("valueFormatter"),t="format",r;switch((e.type==="date"||e.type==="datetime"||e.type==="dateonly")&&(r={type:e.type==="dateonly"?"date":e.type,skeleton:e.format},typeof e.format=="string"&&e.format!=="yMd"&&(r[""+t]=e.format)),e.type){case"date":e.setFormatter(i.getFormatFunction(r)),e.setParser(i.getParserFunction(r));break;case"dateonly":e.setFormatter(i.getFormatFunction(r)),e.setParser(i.getParserFunction(r));break;case"datetime":e.setFormatter(i.getFormatFunction(r)),e.setParser(i.getParserFunction(r));break;case"number":e.setFormatter(i.getFormatFunction({format:e.format})),e.setParser(i.getParserFunction({format:e.format}));break}}function Vt(s,e){for(var i=[],t=2;t<arguments.length;t++)i[t-2]=arguments[t];for(var r=0,n=s.length;r<n;r++)e?(Ie(s[parseInt(r.toString(),10)],i.slice(),[]),s[parseInt(r.toString(),10)].setAttribute("aria-selected","true")):(Ie(s[parseInt(r.toString(),10)],[],i.slice()),s[parseInt(r.toString(),10)].removeAttribute("aria-selected"))}function Uh(s,e){var i=e.element.style.display;e.element.style.display="block";var t=e.width,r=ps(s,e.element);e.element.style.display=i,e.element.style.top=r.top+s.getBoundingClientRect().height-5+"px";var n=r.left-t+s.clientWidth;n<1?e.element.style.left=t+n-16+"px":e.element.style.left=n+-4+"px"}function bi(s){var e=s.querySelector(".e-frame"),i=e.previousSibling;e.classList.contains("e-check")?(i.checked=!1,Ie(e,["e-uncheck"],["e-check"])):(i.checked=!0,Ie(e,["e-check"],["e-uncheck"]))}function _t(s,e){s.checked=e}function Wr(s,e,i){var t=Ce("div",{className:i});return t.appendChild(e),t.setAttribute("uid",s),t}function rr(s,e){z([s],["e-check","e-stop","e-uncheck"]),e?s.classList.add("e-check"):s.classList.add("e-uncheck")}function Wh(s,e,i){for(var t=0;t<e.length;t++)dt(e[parseInt(t.toString(),10)].field,pi(e[parseInt(t.toString(),10)],i),s.foreignKeyData);for(var r=s.cells,t=0;t<r.length;t++)r[parseInt(t.toString(),10)].isForeignKey&&dt("foreignKeyData",oe(r[parseInt(t.toString(),10)].column.field,s.foreignKeyData),r[parseInt(t.toString(),10)])}function pi(s,e,i,t){var r=s.foreignKeyField,n=c(i)?Ra(s.field,e,s):i;n=c(n)?"":n;var a=new fe,o=t||(s.dataSource instanceof _&&s.dataSource.dataSource.json.length?s.dataSource.dataSource.json:s.columnData);return n.getDay?a.where(Gt({field:r,operator:"equal",value:n,matchCase:!1})):a.where(r,"==",n,!1),new _(o).executeLocal(a)}function wn(s,e){var i;return e.some(function(t){return i=t,t.foreignKeyValue===s})&&i}function ur(s){return s<10?"0"+s:String(s)}function Gt(s,e,i){var t,r,n,a=O({},cr(s)),o=O({},cr(s));if(c(s.value)||s.value==="")return t=new re(a.field,a.operator,a.value,!1),t;var l=new Date(s.value);if(e==="dateonly"&&!i){typeof a.value=="string"&&(a.value=new Date(a.value));var h=a.value.getFullYear()+"-"+ur(a.value.getMonth()+1)+"-"+ur(a.value.getDate()),p=new re(a.field,a.operator,h,!1);t=p}else if(s.operator==="equal"||s.operator==="notequal"){e==="datetime"?(r=new Date(l.setSeconds(l.getSeconds()-1)),n=new Date(l.setSeconds(l.getSeconds()+2)),s.value=new Date(l.setSeconds(n.getSeconds()-1))):(r=new Date(l.setHours(0)-1),n=new Date(l.setHours(24))),a.value=r,o.value=n,s.operator==="equal"?(a.operator="greaterthan",o.operator="lessthan"):s.operator==="notequal"&&(a.operator="lessthanorequal",o.operator="greaterthanorequal");var d=new re(a.field,a.operator,a.value,!1),u=new re(o.field,o.operator,o.value,!1);t=s.operator==="equal"?d.and(u):d.or(u)}else{e==="date"&&(s.operator==="lessthanorequal"||s.operator==="greaterthan")&&(a.value=new Date(l.setHours(24)-1)),typeof a.value=="string"&&(a.value=new Date(a.value));var p=new re(a.field,a.operator,a.value,!1);t=p}return s.setProperties?s.setProperties({ejpredicate:t},!0):s.ejpredicate=t,t}function it(s){return s.enableVirtualization&&s.groupSettings.columns.length>0&&s.isVirtualAdaptive&&!s.groupSettings.enableLazyLoading}function Dt(s,e){if(s===void 0&&(s=""),s){for(var i=e,t=s.split("."),r=0;r<t.length&&!c(i);r++)if(i=i[t[parseInt(r.toString(),10)]],Ae(i)){var n=t[parseInt(r.toString(),10)].charAt(0).toUpperCase()+t[parseInt(r.toString(),10)].slice(1);i=e[""+n]||e[(""+n).charAt(0).toLowerCase()+(""+n).slice(1)]}return i}}function Kh(s,e){for(var i=s.getRowsObject(),t={},r=0,n=i;r<n.length;r++){var a=n[r];if(a.isExpand&&!a.isDetailRow){var o=s.allowPaging&&s.printMode==="AllPages"?a.index+s.pageSettings.currentPage*s.pageSettings.pageSize-s.pageSettings.pageSize:a.index;c(o)||(t[parseInt(o.toString(),10)]={},t[parseInt(o.toString(),10)].isExpand=!0,s.childGrid&&(t[parseInt(o.toString(),10)].gridModel=Ta(a.childGrid,e),t[parseInt(o.toString(),10)].gridModel.query=s.childGrid.query))}}return t}function Ta(s,e){e===void 0&&(e="Expanded");var i={};if(!s)return i;for(var t=0,r=xa.printGridProp;t<r.length;t++){var n=r[t];n==="columns"?i[""+n]=Nh(s.getColumns()):n==="allowPaging"?i[""+n]=s.printMode==="CurrentPage":i[""+n]=cr(s[""+n])}return i.enableHover=!1,(s.childGrid||s.detailTemplate)&&e!=="None"&&(i.expandedRows=Kh(s,e)),i}function bn(s,e,i,t){var r=s||{},n=arguments.length;t&&(n=n-1);for(var a=1;a<n;a++)if(arguments[parseInt(a.toString(),10)])for(var o=arguments[parseInt(a.toString(),10)],l=Object.keys(Object.getPrototypeOf(o)).length?Object.keys(o).concat(Qh(o)):Object.keys(o),h=0;h<l.length;h++){var p=r[l[parseInt(h.toString(),10)]],d=o[l[parseInt(h.toString(),10)]],u=void 0;t&&(Tr(d)||Array.isArray(d))?Tr(d)?(u=p||{},r[l[parseInt(h.toString(),10)]]=O({},u,d,t)):(u=p||[],r[l[parseInt(h.toString(),10)]]=O([],u,d,t)):r[l[parseInt(h.toString(),10)]]=d}return r}function Qh(s){for(var e=[];Object.getPrototypeOf(s)&&Object.keys(Object.getPrototypeOf(s)).length;)e=e.concat(Object.keys(Object.getPrototypeOf(s))),s=Object.getPrototypeOf(s);return e}function Xh(s){for(var e=0,i=0;i<s.length;i++){var t=ka(s[parseInt(i.toString(),10)],0);e<t&&(e=t)}return e+1}function ka(s,e){var i=e,t=[];if(s.columns){e++;for(var r=0;r<s.columns.length;r++)t[parseInt(r.toString(),10)]=ka(s.columns[parseInt(r.toString(),10)],e);for(var n=0;n<t.length;n++)i<t[parseInt(n.toString(),10)]&&(i=t[parseInt(n.toString(),10)]);e=i}return e}function Yh(s,e){for(var i=0;i<e.length;i++)e[parseInt(i.toString(),10)].uid=e[parseInt(i.toString(),10)].isForeignKey?wn(e[parseInt(i.toString(),10)].field,s.getForeignKeyColumns()).uid:s.enableColumnVirtualization?hp(s,e[parseInt(i.toString(),10)].field).uid:s.getColumnByField(e[parseInt(i.toString(),10)].field).uid}var ft=function(s){return s.timer=null,s}(ft||{});function gn(s){var e=document.defaultView.getComputedStyle(s,null),i=e.getPropertyValue("transform"),t=i.replace(/,/g,""),r=parseFloat(t.split(" ")[4]),n=parseFloat(t.split(" ")[5]);return{width:r,height:n}}function In(s){var e=s.getContent().firstElementChild;return e.scrollWidth>e.offsetWidth?Ne():0}function Ma(s,e){var i=0,t=s.getColumns(),r=e*30;s.isRowDragable()&&(i++,r+=30),i+=s.groupSettings.columns.length-e,r+=30*(s.groupSettings.columns.length-e);for(var n=(s.width==="auto"?s.element.offsetWidth:parseInt(s.width.toString(),10))-In(s),a=0;a<t.length;a++)if(t[parseInt(a.toString(),10)].visible&&(r+=parseInt(t[parseInt(a.toString(),10)].width.toString(),10),i++),r>n){i--;break}return i}function Jh(s,e){for(var i=0,t=0;t<s.childNodes.length;t++){var r=s.childNodes[parseInt(t.toString(),10)];if(r.classList.add("e-leftfreeze"),De(r,i,e.enableRtl,"Left"),(r.classList.contains("e-indentcell")||r.classList.contains("e-recordplusexpand")||r.classList.contains("e-recordpluscollapse"))&&(i+=30),r.classList.contains("e-groupcaption")){var n=parseInt(r.getAttribute("colspan"),10);e.isRowDragable()&&(n--,i+=30),n=n-(e.groupSettings.columns.length-t),i=i+30*(e.groupSettings.columns.length-t);for(var a=e.getColumns(),o=0;o<a.length;o++){if(parseInt(r.getAttribute("colspan"),10)>1&&parseInt(a[parseInt(o.toString(),10)].width.toString(),10)+i>parseInt(e.width.toString(),10)-In(e)){var l=Ma(e,t);r.setAttribute("colspan",l.toString());break}if(a[parseInt(o.toString(),10)].visible&&(i+=parseInt(a[parseInt(o.toString(),10)].width.toString(),10),n--),n===0)break}}if(r.classList.contains("e-summarycell")){var h=r.getAttribute("e-mappinguid"),p=e.getColumnByUid(h);i+=parseInt(p.width.toString(),10)}}}function Zh(s,e){var i=$h(e),t=new $e;return i.dataSource=t.resolve,i.action=s,{state:i,deffered:t}}function $h(s){var e=new ti,i=new _({url:"",adaptor:new ti}),t=e.processQuery(i,s),r=JSON.parse(t.data);return r}function mn(s){for(var e=s.getVisibleColumns(),i=0,t=0,r=0;r<e.length;r++)Ae(e[parseInt(r.toString(),10)].width)?t++:e[parseInt(r.toString(),10)].width.toString().indexOf("%")!==-1&&i++;return(s.width==="auto"||typeof s.width=="string"&&s.width.indexOf("%")!==-1)&&!s.groupSettings.showGroupedColumn&&s.groupSettings.columns.length&&i&&!t}function ep(s,e,i,t,r){for(var n=t||0,a=r||0;a<e.length;a++)if(e[parseInt(a.toString(),10)]&&e[parseInt(a.toString(),10)].isDataRow){e[parseInt(a.toString(),10)].index=n,e[parseInt(a.toString(),10)].isAltRow=s.enableAltRow?n%2!==0:!1,i[parseInt(a.toString(),10)].setAttribute(Z,n.toString()),i[parseInt(a.toString(),10)].setAttribute(Sn,(n+1).toString()),e[parseInt(a.toString(),10)].isAltRow?i[parseInt(a.toString(),10)].classList.add("e-altrow"):i[parseInt(a.toString(),10)].classList.remove("e-altrow");for(var o=0;o<i[parseInt(a.toString(),10)].cells.length;o++)i[parseInt(a.toString(),10)].cells[parseInt(o.toString(),10)].setAttribute("index",n.toString());n++}e.length||s.renderModule.emptyRow(!0)}function tp(s,e,i,t){var r=s.dataToBeUpdated[""+i].concat(e[""+i]).reduce(function(n,a){return n[a[""+t]]=n[a[""+t]]===void 0?a:Object.assign(n[a[""+t]],a),n},{});s.dataToBeUpdated[""+i]=Object.keys(r).map(function(n){return r[""+n]})}function ip(s){s.contentModule.rowElements=[].slice.call(s.element.querySelectorAll(".e-row:not(.e-addedrow):not(.e-cloneproperties .e-row)"))}function Js(s,e){var i=[];return i.push(s.uid),Aa(s,i),i.indexOf(e)>-1}function Aa(s,e){for(var i=0;i<s.columns.length;i++)s.columns[parseInt(i.toString(),10)].uid&&e.push(s.columns[parseInt(i.toString(),10)].uid),s.columns[parseInt(i.toString(),10)].columns&&s.columns[parseInt(i.toString(),10)].columns.length&&Aa(s.columns[parseInt(i.toString(),10)],e)}function nr(s){return s.columns[0].freeze||s.columns[0].isFrozen?s.columns[0].freeze==="Left"||s.columns[0].isFrozen?"Left":s.columns[0].freeze==="Right"?"Right":s.columns[0].freeze==="Fixed"?"Fixed":"None":s.columns[0].columns&&s.columns[0].columns.length?nr(s.columns[0]):"None"}function vn(s){if(s.querySelector(".e-fixedfreeze"))for(var e=[].slice.call(s.querySelectorAll(".e-filterbarcell:not(.e-hide),.e-summarycell:not(.e-hide),.e-headercell:not(.e-hide),.e-rowcell:not(.e-hide)")),i=0;i<e.length;i++)e[parseInt(i.toString(),10)].classList.contains("e-fixedfreeze")&&(!e[i-1]||e[i-1]&&!e[i-1].classList.contains("e-fixedfreeze"))&&e[parseInt(i.toString(),10)].classList.add("e-freezeleftborder"),e[parseInt(i.toString(),10)].classList.contains("e-fixedfreeze")&&(!e[i+1]||e[i+1]&&!e[i+1].classList.contains("e-fixedfreeze"))&&e[parseInt(i.toString(),10)].classList.add("e-freezerightborder")}function De(s,e,i,t){t==="Left"&&(i?s.style.right=e+"px":s.style.left=e+"px"),t==="Right"&&(i?s.style.left=e+"px":s.style.right=e+"px")}function rp(s,e,i,t){var r=s.getColumns(),n=e.index;if(e.freeze==="Left"&&e.border!=="Left"){for(var a=n+(t-1);r[parseInt(a.toString(),10)].visible===!1;)a++;r[parseInt(a.toString(),10)].border==="Left"&&i.classList.add("e-freezeleftborder")}else if(e.freeze==="Right"||e.freeze==="Fixed"){for(var o=0,l=n+1;l<n+t&&l!==r.length;l++)r[parseInt(l.toString(),10)].visible?o+=parseInt(r[parseInt(l.toString(),10)].width.toString(),10):t++;s.enableRtl?i.style.left=parseInt(i.style.left,10)-o+"px":i.style.right=parseInt(i.style.right,10)-o+"px"}}function Zs(s,e,i){for(var t=s.getRowByIndex(e),r=0;r<t.cells.length;r++)if(t.cells[parseInt(r.toString(),10)].getAttribute("data-colindex")===i.toString())return t.cells[parseInt(r.toString(),10)];return null}function Ea(s,e,i){if(e.freeze==="Left"||e.isFrozen)if(i.classList.add("e-leftfreeze"),e.border==="Left"&&i.classList.add("e-freezeleftborder"),e.index===0)De(i,s.getIndentCount()*30,s.enableRtl,"Left"),s.enableColumnVirtualization&&(e.valueX=s.getIndentCount()*30);else{for(var t=s.getColumns(),r=s.getIndentCount()*30,n=0;n<t.length&&e.uid!==t[parseInt(n.toString(),10)].uid;n++)t[parseInt(n.toString(),10)].visible&&(r+=parseFloat(t[parseInt(n.toString(),10)].width.toString()));De(i,r,s.enableRtl,"Left"),s.enableColumnVirtualization&&(e.valueX=r)}else if(e.freeze==="Right"){i.classList.add("e-rightfreeze");var t=s.getColumns();if(e.border==="Right"&&i.classList.add("e-freezerightborder"),e.index===t[t.length-1].index){var r=s.getFrozenMode()==="Right"&&s.isRowDragable()?30:0;De(i,r,s.enableRtl,"Right"),s.enableColumnVirtualization&&(e.valueX=r)}else{for(var r=s.getFrozenMode()==="Right"&&s.isRowDragable()?30:0,n=t.length-1;n>=0&&e.uid!==t[parseInt(n.toString(),10)].uid;n--)t[parseInt(n.toString(),10)].visible&&(r+=parseFloat(t[parseInt(n.toString(),10)].width.toString()));De(i,r,s.enableRtl,"Right"),s.enableColumnVirtualization&&(e.valueX=r)}}else if(e.freeze==="Fixed"){i.classList.add("e-fixedfreeze");var t=s.getColumns(),r=0;s.getVisibleFrozenLeftCount()?r=s.getIndentCount()*30:s.getFrozenMode()==="Right"&&(r=s.groupSettings.columns.length*30);for(var n=0;n<t.length&&e.uid!==t[parseInt(n.toString(),10)].uid;n++)(t[parseInt(n.toString(),10)].freeze==="Left"||t[parseInt(n.toString(),10)].isFrozen||t[parseInt(n.toString(),10)].freeze==="Fixed")&&t[parseInt(n.toString(),10)].visible&&(r+=parseFloat(t[parseInt(n.toString(),10)].width.toString()));De(i,r-1,s.enableRtl,"Left"),r=s.getFrozenMode()==="Right"&&s.isRowDragable()?30:0;for(var n=t.length-1;n>=0&&e.uid!==t[parseInt(n.toString(),10)].uid;n--)(t[parseInt(n.toString(),10)].freeze==="Right"||t[parseInt(n.toString(),10)].freeze==="Fixed")&&t[parseInt(n.toString(),10)].visible&&(r+=parseFloat(t[parseInt(n.toString(),10)].width.toString()));De(i,r-1,s.enableRtl,"Right")}else i.classList.add("e-unfreeze")}function La(s,e,i){return[].slice.call(s.getDataRows()[parseInt(i.toString(),10)].getElementsByClassName(U))}function np(s,e,i,t){return La(s,e,i)[parseInt(t.toString(),10)]}function sp(s,e,i,t){var r,n=new Hi;if(e==="number")try{r=n.getNumberPattern({format:s,currency:t,useGrouping:!0},!0)}catch{r=s}else if(e==="date"||e==="time"||e==="datetime")try{if(r=n.getDatePattern({skeleton:s,type:e},i),c(r))throw"error"}catch{try{r=n.getDatePattern({format:s,type:e},i)}catch{r=s}}else r=s;if(e!=="number"){var a=/G|H|c|'| a|yy|y|EEEE|E/g,o={G:"",H:"h",c:"d","'":'"'," a":" AM/PM",yy:"yy",y:"yyyy",EEEE:"dddd",E:"ddd"};r=r.replace(a,function(l){return o[""+l]})}return r}function ap(s){if(s.enableAdaptiveUI)for(var e=document.getElementsByClassName("e-responsive-dialog"),i=0;i<e.length;i++)e[parseInt(i.toString(),10)].classList.add("e-bigger")}function op(s,e){for(var i,t=s.split(".").length,r=s.split("."),n=e,a=0;a<t;a++)i=n[r[parseInt(a.toString(),10)]],n=i;return i}function lp(s,e,i,t,r,n){for(var a=Object.keys(s),o=e,l=0;l<a.length;l++){var h=s[a[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)];if(r&&!r.isFrozenGrid()&&!r.isRowDragable()){if(h=!c(h)&&(parseInt(h.getAttribute("data-colindex"),10)===e||b(h,"e-addedrow")&&h.parentElement.childNodes[parseInt(e.toString(),10)]===h)?h:s[parseInt(l.toString(),10)].querySelector('td[data-colindex="'+e+'"]'),c(h))continue;e=r.getContentTable().querySelector(".e-detailrowcollapse, .e-detailrowexpand")?h.cellIndex-1:h.cellIndex}if(s[a[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell").length&&h){if(wt(s[a[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)],{display:i}),s[a[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)].classList.contains("e-hide")&&z([s[a[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)]],["e-hide"]),n&&r.isRowDragable()||r&&r.isDetail()){var p=e+1;t[a[parseInt(l.toString(),10)]].cells[parseInt(p.toString(),10)].visible=i===""}else c(t[a[parseInt(l.toString(),10)]])||(t[a[parseInt(l.toString(),10)]].cells[parseInt(e.toString(),10)].visible=i==="",t[a[parseInt(l.toString(),10)]].cells[parseInt(e.toString(),10)].visible===!1&&s[a[parseInt(l.toString(),10)]].querySelectorAll("td.e-rowcell")[parseInt(e.toString(),10)].classList.add("e-hide"));e=o}}}function Et(s,e,i,t){for(var r=0,n=e;r<n.length;r++){var a=n[r];i?s.on(a.event,a.handler,t):s.off(a.event,a.handler)}}function hp(s,e){var i;s.columnModel||s.getColumns();for(var t=0,r=s.columnModel;t<r.length;t++){var n=r[t];if(n.field===e){i=n;break}}return i}function xn(s,e){s.destroyTemplate(e),s.isReact&&s.renderTemplates()}function tt(s,e,i){var t=s,r=e,n=!1;if(i)for(var a=r[0];a<t.length;a++)for(var o=t[parseInt(a.toString(),10)],l=0;l<o.length;l++){if(n&&t[parseInt(a.toString(),10)][parseInt(l.toString(),10)]===1)return r=[a,l],r;!n&&r.toString()===[a,l].toString()&&(n=!0)}else for(var a=r[0];a>=0;a--)for(var o=t[parseInt(a.toString(),10)],l=o.length-1;l>=0;l--){if(n&&t[parseInt(a.toString(),10)][parseInt(l.toString(),10)]===1)return r=[a,l],r;!n&&r.toString()===[a,l].toString()&&(n=!0)}return r}var $s=function(){function s(e){this.isExecuteLocal=!1,this.existingPredicate={},this.foreignKeyQuery=new fe,this.filterState=!0,this.values={},this.renderEmpty=!1,this.isCheckboxFilterTemplate=!1,this.infiniteRenderMod=!1,this.infiniteInitialLoad=!1,this.infiniteSearchValChange=!1,this.infinitePermenantLocalData=[],this.infiniteQueryExecutionPending=!1,this.infiniteSkipCnt=0,this.infiniteScrollAppendDiff=0,this.prevInfiniteScrollDirection="",this.infiniteLoadedElem=[],this.infiniteDataCount=0,this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!1,this.localInfiniteSelectionInteracted=!1,this.infiniteManualSelectMaintainPred=[],this.parent=e,this.id=this.parent.element.id,this.valueFormatter=new Ti(this.parent.locale),this.cBoxTrue=ii(this.parent.createElement,!1,{checked:!0,label:" "}),this.cBoxFalse=ii(this.parent.createElement,!1,{checked:!1,label:" "}),this.cBoxTrue.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxTrue.firstChild),this.cBoxFalse.insertBefore(this.parent.createElement("input",{className:"e-chk-hidden",attrs:{type:"checkbox"}}),this.cBoxFalse.firstChild),this.cBoxFalse.querySelector(".e-frame").classList.add("e-uncheck"),this.parent.enableRtl&&L([this.cBoxTrue,this.cBoxFalse],["e-rtl"]),this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?L([this.cBoxTrue,this.cBoxFalse],this.parent.cssClass.split(" ")):L([this.cBoxTrue,this.cBoxFalse],[this.parent.cssClass]))}return s.prototype.destroy=function(){this.closeDialog()},s.prototype.wireEvents=function(){x.add(this.dlg,"click",this.clickHandler,this),x.add(this.dlg,"keyup",this.keyupHandler,this),this.searchHandler=$n(this.searchBoxKeyUp,200);var e=this.dialogObj.element.querySelector(".e-searchinput");e&&(x.add(e,"keyup",this.searchHandler,this),x.add(e,"input",this.searchHandler,this))},s.prototype.unWireEvents=function(){x.remove(this.dlg,"click",this.clickHandler),x.remove(this.dlg,"keyup",this.keyupHandler);var e=this.dialogObj.element.querySelector(".e-searchinput");e&&(x.remove(e,"keyup",this.searchHandler),x.remove(e,"input",this.searchHandler))},s.prototype.foreignKeyFilter=function(e,i,t){var r=this,n={},a=[],o=this.foreignKeyQuery.clone();this.options.column.dataSource.executeQuery(o.where(t)).then(function(l){r.options.column.columnData=l.result,r.parent.notify($i,{predicate:n,column:r.options.column}),e.ejpredicate=n.predicate.predicates;for(var h=n.predicate.predicates,p=0;p<h.length;p++)a.push({field:h[parseInt(p.toString(),10)].field,predicate:"or",matchCase:h[parseInt(p.toString(),10)].ignoreCase,ignoreAccent:h[parseInt(p.toString(),10)].ignoreAccent,operator:h[parseInt(p.toString(),10)].operator,value:h[parseInt(p.toString(),10)].value,type:r.options.type});e.filterCollection=a.length?a:i.filter(function(d){return d.field=r.options.field}),r.options.handler(e)})},s.prototype.foreignFilter=function(e,i){var t=this.options.isRemote?this.options.column.type==="string"?"contains":"equal":this.options.column.type?"contains":"equal",r=new re(this.options.column.foreignKeyValue,t,i,!0,this.options.ignoreAccent);this.foreignKeyFilter(e,[e.filterCollection],r)},s.prototype.searchBoxClick=function(e){var i=e.target;i.classList.contains("e-searchclear")&&(this.sInput.value=i.classList.contains("e-chkcancel-icon")?"":this.sInput.value,this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:e}):this.refreshCheckboxes(),this.updateSearchIcon(),this.sInput.focus())},s.prototype.searchBoxKeyUp=function(e){(c(e)||e.key!=="ArrowUp"&&e.key!=="ArrowDown"&&e.key!=="Tab"&&!(e.key==="Tab"&&e.shiftKey))&&(!c(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&this.parent.showMaskRow(void 0,this.dialogObj.element),this.isCheckboxFilterTemplate?this.parent.notify("refreshCheckbox",{event:e}):this.refreshCheckboxes(),this.updateSearchIcon())},s.prototype.updateSearchIcon=function(){this.sInput.value.length?(Ie(this.sIcon,["e-chkcancel-icon"],["e-search-icon"]),c(document.body.querySelector(".e-chkcancel-icon"))||document.body.querySelector(".e-chkcancel-icon").setAttribute("title",this.localeObj.getConstant("Clear"))):(Ie(this.sIcon,["e-search-icon"],["e-chkcancel-icon"]),c(document.body.querySelector(".e-searchclear.e-search-icon"))||document.body.querySelector(".e-searchclear.e-search-icon").setAttribute("title",this.localeObj.getConstant("Search")))},s.prototype.getLocalizedLabel=function(e){return this.localeObj.getConstant(e)},s.prototype.updateDataSource=function(){var e=this.options.dataSource,i="object";if(!(e instanceof _)){for(var t=0;t<e.length;t++)if(typeof e!==i){var r={};r[this.options.field]=e[parseInt(t.toString(),10)],e[parseInt(t.toString(),10)]=r}}},s.prototype.updateModel=function(e){this.options=e,this.existingPredicate=e.actualPredicate||{},this.options.dataSource=e.dataSource,this.options.dataManager=e.dataManager?e.dataManager:e.dataSource,this.updateDataSource(),this.options.type=e.type,this.options.format=e.format||"",this.options.ignoreAccent=e.ignoreAccent||!1,this.options.filteredColumns=e.filteredColumns||this.parent.filterSettings.columns,this.options.query=e.query||new fe,this.options.allowCaseSensitive=e.allowCaseSensitive||!1,this.options.uid=e.column.uid,this.options.disableHtmlEncode=e.column.disableHtmlEncode||!1,this.values={},this.localeObj=e.localeObj,this.isFiltered=e.filteredColumns.length,this.infiniteRenderMod=!!(this.parent.filterSettings&&this.parent.filterSettings.enableInfiniteScrolling),this.infiniteUnloadParentExistPred=this.infiniteRenderMod&&this.existingPredicate[this.options.column.field]?this.existingPredicate[this.options.column.field].slice():[]},s.prototype.getAndSetChkElem=function(e){if(this.dlg=this.parent.createElement("div",{id:this.id+this.options.type+"_excelDlg",attrs:{uid:this.options.column.uid},className:"e-checkboxfilter e-filter-popup"}),this.sBox=this.parent.createElement("div",{className:"e-searchcontainer"}),!e.hideSearchbox){this.sInput=this.parent.createElement("input",{id:this.id+"_SearchBox",className:"e-searchinput"}),this.sIcon=this.parent.createElement("span",{className:"e-searchclear e-search-icon e-icons e-input-group-icon",attrs:{type:"text",title:this.getLocalizedLabel("Search")}}),this.searchBox=this.parent.createElement("span",{className:"e-searchbox e-fields"}),this.searchBox.appendChild(this.sInput),this.sBox.appendChild(this.searchBox);var i={element:this.sInput,floatLabelType:"Never",properties:{placeholder:this.getLocalizedLabel("Search"),cssClass:this.parent.cssClass}};cs.createInput(i,this.parent.createElement),this.searchBox.querySelector(".e-input-group").appendChild(this.sIcon)}return this.spinner=this.parent.createElement("div",{className:"e-spinner"}),this.cBox=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxList",className:"e-checkboxlist e-fields"}),this.spinner.appendChild(this.cBox),this.sBox.appendChild(this.spinner),this.sBox},s.prototype.showDialog=function(e){var i={requestType:vo,columnName:this.options.field,columnType:this.options.type,cancel:!1},t="filterModel";if(i[""+t]=this,this.parent.notify(Vo,i),i.cancel){e.cancel=i.cancel;return}this.dialogObj=new Pr({visible:!1,content:this.sBox,close:this.closeDialog.bind(this),enableRtl:this.parent.enableRtl,width:!c(b(e.target,"e-bigger"))||this.parent.element.classList.contains("e-device")?260:255,target:this.parent.element,animationSettings:{effect:"None"},buttons:[{click:this.btnClick.bind(this),buttonModel:{content:this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton"),cssClass:this.parent.cssClass?"e-primary "+this.parent.cssClass:"e-primary",isPrimary:!0}},{click:this.btnClick.bind(this),buttonModel:{cssClass:this.parent.cssClass?"e-flat "+this.parent.cssClass:"e-flat",content:this.getLocalizedLabel(this.isExcel?"CancelButton":"ClearButton")}}],created:this.dialogCreated.bind(this),open:this.dialogOpen.bind(this),cssClass:this.parent.cssClass?this.parent.cssClass:""});var r="isStringTemplate";this.dialogObj[""+r]=!0,this.renderResponsiveFilter(e);var n=this.parent.filterSettings&&this.parent.filterSettings.type==="CheckBox"?this.getLocalizedLabel("CheckBoxFilterDialogARIA"):this.getLocalizedLabel("ExcelFilterDialogARIA");if(this.dlg.setAttribute("aria-label",n),e.isResponsiveFilter){var a=document.querySelector(".e-responsive-dialog > .e-dlg-content > .e-mainfilterdiv");a.appendChild(this.dlg)}else this.parent.element.appendChild(this.dlg);this.dialogObj.appendTo(this.dlg),this.dialogObj.element.style.maxHeight=e.isResponsiveFilter?"none":this.options.height+"px",this.dialogObj.show();var o=this.dialogObj.element.querySelector(".e-dlg-content");o.appendChild(this.sBox),this.wireEvents(),!c(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&!this.infiniteRenderMod?this.parent.showMaskRow(void 0,this.dialogObj.element):this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"?this.showMask():(this.infiniteRenderMod&&(this.cBox.style.marginTop=this.getListHeight(this.cBox)+"px"),Vi({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),ni(this.spinner)),this.getAllData()},s.prototype.renderResponsiveFilter=function(e){e.isResponsiveFilter&&(this.dialogObj.buttons=[{}],this.dialogObj.position={X:"",Y:""},this.dialogObj.target=document.querySelector(".e-resfilter > .e-dlg-content > .e-mainfilterdiv"),this.dialogObj.width="100%")},s.prototype.dialogCreated=function(e){this.options.isResponsiveFilter?this.dialogObj.element.style.left="0px":Y.isDevice?this.dialogObj.position={X:"center",Y:"center"}:Uh(this.options.target,this.dialogObj),this.options.column.showColumnMenu&&this.parent.notify(Eo,e)},s.prototype.openDialog=function(e){this.updateModel(e),this.getAndSetChkElem(e),this.showDialog(e)},s.prototype.closeDialog=function(){if(this.infiniteRenderMod&&this.infinitePermenantLocalData.length&&!this.options.isRemote&&(this.options.dataSource.dataSource.json=this.infinitePermenantLocalData),this.dialogObj&&!this.dialogObj.isDestroyed){this.isBlanks=!1;var e=this.options.columns.filter(function(t){return t.getFilterItemTemplate()}),i=this.parent.registeredTemplate;e.length&&!c(i)&&i.filterItemTemplate&&this.parent.destroyTemplate(["filterItemTemplate"]),(this.parent.isReact||this.parent.isVue)&&this.parent.destroyTemplate!==void 0&&xn(this.parent,["filterItemTemplate"]),this.parent.notify(Lo,{field:this.options.field}),this.unWireEvents(),this.dialogObj.destroy(),this.dlg&&this.dlg.parentElement&&B(this.dlg),this.dlg=null,this.parent.notify(pa,{})}},s.prototype.clearFilter=function(e){var i={instance:this,handler:this.clearFilter,cancel:!1};this.parent.notify(js,i),!i.cancel&&this.options.handler({action:"clear-filter",field:e?e.field:this.options.field})},s.prototype.btnClick=function(e){if(this.filterState){if(e.target.tagName.toLowerCase()==="input"&&e.target.classList.contains("e-searchinput")||e.keyCode===13)this.isCheckboxFilterTemplate||this.fltrBtnHandler();else{var i=e.target.firstChild.textContent.toLowerCase();this.getLocalizedLabel(this.isExcel?"OKButton":"FilterButton").toLowerCase()===i?this.isCheckboxFilterTemplate||this.fltrBtnHandler():this.getLocalizedLabel("ClearButton").toLowerCase()===i&&this.clearFilter()}this.closeDialog()}else e.target&&e.target.firstChild&&e.target.firstChild.textContent.toLowerCase()===this.getLocalizedLabel("CancelButton").toLowerCase()?this.closeDialog():e.target.tagName.toLowerCase()!=="input"&&(this.clearFilter(),this.closeDialog());this.options.column.showColumnMenu&&this.parent.notify(xl,{})},s.prototype.fltrBtnHandler=function(){var e=this;this.infiniteRenderMod&&(this.cBox.innerHTML="",Qe(this.cBox,this.infiniteLoadedElem.slice()));var i=[].slice.call(this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)")),t=i,r="equal",n=this.dialogObj.element.querySelector(".e-dropdownlist");n&&(this.options.operator=r=n.ej2_instances[0].value),this.isMenuNotEqual=this.options.operator==="notequal";var a;this.options.hideSearchbox||(a=this.searchBox.querySelector(".e-searchinput"));var o=this.options.allowCaseSensitive,l={field:this.options.field,predicate:this.isMenuNotEqual?"and":"or",uid:this.options.uid,operator:r,type:this.options.type,matchCase:o,ignoreAccent:this.options.ignoreAccent},h=this.itemsCnt!==i.length&&this.itemsCnt-i.length<i.length;h&&a&&a.value===""&&(r=this.isMenuNotEqual?"equal":"notequal",i=[].slice.call(this.cBox.querySelectorAll(".e-uncheck:not(.e-selectall)")),l.predicate=this.isMenuNotEqual?"or":"and",l.operator=r);var p,d,u,f,m=[];if(i.length!==this.itemsCnt||a&&a.value&&a.value!==""||this.infiniteRenderMod){if(this.infiniteRenderMod)this.infiniteRenderMod&&this.infiniteFltrBtnHandler(m);else for(var g=0;g<i.length;g++)p=this.values[b(i[parseInt(g.toString(),10)],"e-ftrchk").getAttribute("uid")],f=O({},{value:p},l),p&&!p.toString().length&&(f.operator=h?"notequal":"equal"),p===""||c(p)?m=m.concat(s.generateNullValuePredicates(l)):m.push(f),this.notifyFilterPrevEvent(f);(this.options.type==="date"||this.options.type==="datetime")&&t.length&&(u=t.length-1,d=this.values[b(t[parseInt(u.toString(),10)],"e-ftrchk").getAttribute("uid")],c(d)&&h&&m.push({field:l.field,matchCase:l.matchCase,operator:"equal",predicate:"and",value:null}));var y=this.infiniteRenderMod?this.sBox.querySelector(".e-add-current"):this.cBox.querySelector(".e-add-current");if(y&&y.classList.contains("e-check")){var S=this.existingPredicate[this.options.field];if(S)for(var I=function(T){m.some(function(F){return F.value===S[parseInt(T.toString(),10)].value})||m.push(S[parseInt(T.toString(),10)])},C=0;C<S.length;C++)I(C);else return}if(!this.infiniteRenderMod)this.initiateFilter(m);else if(m.length)this.initiateFilter(m);else if(this.sBox.querySelector(".e-selectall").classList.contains("e-check")&&!m.length){var R=this.options.filteredColumns.some(function(T){return e.options.field===T.field});R&&this.clearFilter()}}else{var R=this.options.filteredColumns.some(function(F){return e.options.field===F.field});R&&this.clearFilter()}},s.prototype.infiniteFltrBtnHandler=function(e){var i;if(this.infiniteManualSelectMaintainPred.length)for(var t=0;t<this.infiniteManualSelectMaintainPred.length;t++){var r=this.infiniteManualSelectMaintainPred[t];if(i=r.value+"",i===""||c(i)){var n={predicate:r.predicate,field:r.field,type:r.type,uid:r.uid,operator:r.operator,matchCase:r.matchCase,ignoreAccent:r.ignoreAccent};e.push.apply(e,s.generateNullValuePredicates(n))}else e.push(this.infiniteManualSelectMaintainPred[t]);this.notifyFilterPrevEvent(this.infiniteManualSelectMaintainPred[t])}if(!this.localInfiniteSelectAllClicked&&this.sInput.value===""&&!(!this.options.parentCurrentViewDataCount&&e.length))for(var t=0;t<this.infiniteUnloadParentExistPred.length;t++)e.unshift(this.infiniteUnloadParentExistPred[t]),this.notifyFilterPrevEvent(this.existingPredicate[this.options.field][t]);this.sInput.value!==""&&(!this.localInfiniteSelectAllClicked||this.infiniteLocalSelectAll)&&(this.infiniteSearchPred.predicate="or",e.unshift(this.infiniteSearchPred),this.notifyFilterPrevEvent(this.infiniteSearchPred))},s.prototype.notifyFilterPrevEvent=function(e){var i={instance:this,handler:this.fltrBtnHandler,arg1:e.field,arg2:e.predicate,arg3:e.operator,arg4:e.matchCase,arg5:e.ignoreAccent,arg6:e.value,cancel:!1};this.parent.notify(js,i),i.cancel},s.generateNullValuePredicates=function(e){var i=[];return e.type==="string"&&i.push({field:e.field,ignoreAccent:e.ignoreAccent,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:""}),i.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:null}),i.push({field:e.field,matchCase:e.matchCase,operator:e.operator,predicate:e.predicate,value:void 0}),i},s.prototype.initiateFilter=function(e){var i=e[0],t;if(!c(i)){t=i.ejpredicate?i.ejpredicate:new re(i.field,i.operator,i.value,!i.matchCase,i.ignoreAccent);for(var r=1;r<e.length;r++)t=e[parseInt(r.toString(),10)].ejpredicate!==void 0?t[e[parseInt(r.toString(),10)].predicate](e[parseInt(r.toString(),10)].ejpredicate):t[e[parseInt(r.toString(),10)].predicate](e[parseInt(r.toString(),10)].field,e[parseInt(r.toString(),10)].operator,e[parseInt(r.toString(),10)].value,!e[parseInt(r.toString(),10)].matchCase,e[parseInt(r.toString(),10)].ignoreAccent);var n={action:"filtering",filterCollection:e,field:this.options.field,ejpredicate:re.or(t)};this.options.handler(n)}},s.prototype.isForeignColumn=function(e){return e.isForeignColumn?e.isForeignColumn():!1},s.prototype.refreshCheckboxes=function(){var e=this,i=this.sInput.value,t=this.options.column,r=this.isForeignColumn(t)?this.foreignKeyQuery.clone():this.options.query.clone(),n=this.options.query.clone(),a=r.queries.filter(function(C){return C&&C.fn==="onWhere"})[0];r.queries=[],n.queries=[];var o=this.options.type!=="string"&&parseFloat(i)?parseFloat(i):i,l=this.options.isRemote?this.options.type==="string"?"contains":"equal":this.options.type?"contains":"equal",h=!0,p=this.options.ignoreAccent,d=this.isForeignColumn(t)?t.foreignKeyValue:t.field;o=o===""||o===void 0?void 0:o;var u=[],f={field:d,predicate:"or",uid:this.options.uid,operator:"equal",type:this.options.type,matchCase:h,ignoreAccent:p},m,g=this.options.dataManager.adaptor.getModuleName;if(this.options.type==="boolean"&&(o!==void 0&&this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(o.toLowerCase())!==-1?o="true":o!==void 0&&this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(o.toLowerCase())!==-1&&(o="false"),o!==void 0&&this.getLocalizedLabel("FilterTrue").toLowerCase().indexOf(o.toLowerCase())!==-1&&g?o=(g(),!0):o!==void 0&&this.getLocalizedLabel("FilterFalse").toLowerCase().indexOf(o.toLowerCase())!==-1&&g&&(o=(g(),!1)),l="equal"),(this.options.type==="date"||this.options.type==="datetime"||this.options.type==="dateonly")&&this.options.format){var y=new Hi,S=typeof this.options.format=="string"?this.options.format:this.options.format.format;S?o=y.parseDate(i,{format:S})||new Date(i):o=new Date(i),this.options.type==="dateonly"&&(o=o.getFullYear()+"-"+ur(o.getMonth()+1)+"-"+ur(o.getDate()))}this.infiniteSearchValChange=!0,this.infiniteLoadedElem=[],this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!1,this.localInfiniteSelectionInteracted=!1,this.infiniteSkipCnt=0,this.infiniteDataCount=0,this.infiniteManualSelectMaintainPred=[],this.sInput.value===""?this.infiniteUnloadParentExistPred=this.infiniteRenderMod&&this.existingPredicate[this.options.column.field]?this.existingPredicate[this.options.column.field].slice():[]:this.infiniteUnloadParentExistPred=[],this.addDistinct(r);var I={requestType:yo,filterModel:this,columnName:d,column:t,operator:l,matchCase:h,ignoreAccent:p,filterChoiceCount:null,query:r,value:o};this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(I.filterChoiceCount=this.parent.filterSettings.itemsCount),this.parent.trigger(vt,I,function(C){if(C.operator=C.operator,m=new re(d,C.operator,I.value,C.matchCase,C.ignoreAccent),e.options.type==="date"||e.options.type==="datetime"||e.options.type==="dateonly"){l="equal";var R={field:d,operator:l,value:o,matchCase:h,ignoreAccent:p};c(o)||(m=Gt(R,e.options.type))}if(i&&typeof i=="string"&&e.isBlanks&&e.getLocalizedLabel("Blanks").toLowerCase().indexOf(i.toLowerCase())>=0){u=u.concat(s.generateNullValuePredicates(f));var T=s.generatePredicate(u);T.predicates.push(m),m=T,r.where(T)}else i.length?(m=c(a)?m:m.and(a.e),r.where(m)):c(a)||(m=a.e,r.where(a.e));e.infiniteSearchPred=m,C.filterChoiceCount=c(C.filterChoiceCount)?1e3:C.filterChoiceCount,e.infiniteRenderMod&&e.parent.filterSettings.itemsCount!==C.filterChoiceCount&&(e.parent.filterSettings.itemsCount=I.filterChoiceCount);var F={};if(ni(e.spinner),e.renderEmpty=!1,e.isForeignColumn(t)&&i.length){var X="result"in t.dataSource?new _(t.dataSource.result):t.dataSource;X.executeQuery(r).then(function(W){var q=e.options.column.columnData;e.options.column.columnData=W.result,e.parent.notify($i,{predicate:F,column:t}),F.predicate.predicates.length?n.where(F.predicate):e.renderEmpty=!0,e.options.column.columnData=q,e.infiniteRenderMod?(e.infiniteInitialLoad=!!c(e.fullData),e.makeInfiniteScrollRequest(n),n.requiresCount()):n.take(C.filterChoiceCount),e.search(C,n)})}else e.infiniteRenderMod&&e.parent.filterSettings.itemsCount?(e.infiniteInitialLoad=!!c(e.fullData),e.makeInfiniteScrollRequest(r),r.requiresCount()):r.take(C.filterChoiceCount),e.search(C,r)})},s.prototype.search=function(e,i){this.parent.dataSource&&"result"in this.parent.dataSource?this.filterEvent(e,i):this.processSearch(i)},s.prototype.getPredicateFromCols=function(e,i){for(var t=s.getPredicate(e,i),r=[],n={},a=this.parent.getForeignKeyColumns!==void 0,o=a?this.parent.getForeignKeyColumns():[],l=0,h=Object.keys(t);l<h.length;l++){var p=h[l],d=void 0;a&&!this.parent.getColumnByField(p)&&(d=wn(p,o)),d?(this.parent.notify($i,{predicate:n,column:d}),n.predicate.predicates.length&&r.push(re.or(n.predicate.predicates))):r.push(t[""+p])}return r.length&&re.and(r)},s.prototype.getQuery=function(){return this.parent.getQuery?this.parent.getQuery().clone():new fe},s.prototype.getAllData=function(){var e=this;this.customQuery=!1;var i=this.getQuery();i.requiresCount(),this.addDistinct(i);var t={requestType:As,query:i,filterChoiceCount:null},r="filterModel";t[""+r]=this,this.infiniteRenderMod&&this.parent.filterSettings.itemsCount&&(t.filterChoiceCount=this.parent.filterSettings.itemsCount),this.parent.trigger(vt,t,function(n){n.filterChoiceCount=c(n.filterChoiceCount)?1e3:n.filterChoiceCount,e.infiniteRenderMod&&e.parent.filterSettings.itemsCount!==n.filterChoiceCount&&(e.parent.filterSettings.itemsCount=n.filterChoiceCount),e.infiniteRenderMod||i.take(n.filterChoiceCount),(!n.query.distincts.length||e.infiniteRenderMod)&&(e.customQuery=!0,e.queryGenerate(i)),e.infiniteRenderMod&&(e.infiniteInitialLoad=!!c(e.fullData),e.makeInfiniteScrollRequest(i)),e.parent.dataSource&&"result"in e.parent.dataSource?e.filterEvent(n,i):e.processDataOperation(i,!0)})},s.prototype.addDistinct=function(e){var i=this,t,r=me.distinct(this.options.filteredColumns,"field");if(r.indexOf(this.options.column.field)<=-1&&(r=r.concat(this.options.column.field)),this.infiniteRenderMod||e.distinct(r),this.infiniteRenderMod&&!this.options.isRemote&&this.sInput.value==="")this.options.dataSource=this.options.dataSource instanceof _?this.options.dataSource:new _(this.options.dataSource),this.infinitePermenantLocalData=this.options.dataSource.dataSource.json.slice(),this.options.dataSource.dataSource.json=me.distinct((t=this.options.parentFilteredLocalRecords).concat.apply(t,this.infinitePermenantLocalData),this.options.column.field,!0),this.isForeignColumn(this.options.column)&&(this.options.column.dataSource=this.options.column.dataSource instanceof _?this.options.column.dataSource:new _(this.options.column.dataSource),this.options.dataSource.dataSource.json=this.options.dataSource.dataSource.json.map(function(a,o){return Object.assign({},a,i.options.column.dataSource.dataSource.json[o])}));else if(this.infiniteRenderMod&&this.options.isRemote){e.select(this.options.column.field),e.sortBy(this.options.column.field,"ascending");var n=this.options.dataManager.adaptor.getModuleName;n&&n()&&(n()==="ODataV4Adaptor"||n()==="WebApiAdaptor"||n()==="CustomDataAdaptor"||n()==="GraphQLAdaptor"||n()==="ODataAdaptor")&&e.distinct(r)}return e},s.prototype.filterEvent=function(e,i){var t=this,r=Zh(e,i);this.parent.trigger(sn,r.state);var n=r.deffered;n.promise.then(function(a){t.dataSuccess(a)})},s.prototype.infiniteScrollMouseKeyDownHandler=function(){x.remove(this.cBox,"scroll",this.infiniteScrollHandler)},s.prototype.infiniteScrollMouseKeyUpHandler=function(e){var i=this;x.add(this.cBox,"scroll",this.infiniteScrollHandler,this);var t=this.cBox;t.children.length>1&&(t.scrollTop>=t.scrollHeight-t.offsetHeight||t.scrollTop<=0)&&this.infiniteScrollHandler(),ft.timer=setTimeout(function(){i.clickHandler(e),ft.timer=null},0)},s.prototype.getListHeight=function(e){var i=Ce("div",{className:"e-ftrchk",styles:"visibility: hidden"});i.innerHTML='<div class="e-checkbox-wrapper"><span class="e-label e-checkboxfiltertext">A</div></span>',e.appendChild(i);var t=i.getBoundingClientRect();e.removeChild(i);var r=Math.round(t.height);return r},s.prototype.getShimmerTemplate=function(){return'<span class="e-mask e-skeleton e-skeleton-text e-shimmer-wave"></span>'},s.prototype.showMask=function(){var e=5,i,t=this.parent.createElement("div",{id:this.id+this.options.type+"_CheckBoxMaskList",className:"e-checkboxlist e-fields e-infinite-list e-masklist",styles:"z-index: 10;"}),r=this.cBox;if(this.removeMask(),r){var n=getComputedStyle(r),a=r.children.length?parseInt(n.height,10):Math.floor(parseInt(n.height.split("px")[0],10))-5,o=this.isExcel&&!r.children.length&&!this.dlg.classList.contains("e-excelfilter")?"":getComputedStyle(this.dlg.querySelector(".e-dlg-content")).backgroundColor;t.style.cssText="width: "+n.width+"; min-height: "+n.minHeight+"; height: "+a+"px; margin: "+n.margin+"; border-style: "+n.borderStyle+"; border-width: "+n.borderWidth+"; border-color: "+n.borderColor+"; position: absolute; background-color: "+o+";";var l=this.getListHeight(r);e=Math.floor(a/l),e=r.children.length>e?r.children.length:e,i=l+"px"}var h='<div class="e-ftrchk e-mask-ftrchk" style="width: 100%; height:'+i+';"><div class="e-checkbox-wrapper" style="width: 100%;"><input class="e-chk-hidden">'+this.getShimmerTemplate()+this.getShimmerTemplate()+"</div></div>";if(t.innerHTML="",!r.children.length){this.spinner.insertAdjacentHTML("beforebegin",h);var p=[].slice.call(this.spinner.parentElement.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));p[0].classList.add("e-mask-checkbox-filter-intent"),p[1].classList.add("e-mask-checkbox-filter-span-intent")}this.spinner.insertBefore(t,this.cBox);for(var d=0;e&&d<e;d++){t.innerHTML+=h;var p=[].slice.call(t.querySelectorAll(".e-mask:not(.e-mask-checkbox-filter-intent):not(.e-mask-checkbox-filter-span-intent)"));p[0].classList.add("e-mask-checkbox-filter-intent"),p[1].classList.add("e-mask-checkbox-filter-span-intent")}this.cBox&&(t.scrollTop=this.cBox.scrollTop)},s.prototype.removeMask=function(){var e=this.dialogObj.element.querySelectorAll(".e-mask-ftrchk");if(e.length)for(var i=0;i<e.length;i++)B(e[i]);var t=this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist");t&&B(this.dialogObj.element.querySelector(".e-checkboxlist.e-masklist"))},s.prototype.infiniteScrollHandler=function(){var e=this.cBox;e.scrollTop>=e.scrollHeight-e.offsetHeight&&!this.infiniteQueryExecutionPending&&this.infiniteLoadedElem.length<=this.infiniteSkipCnt+this.parent.filterSettings.itemsCount&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3&&(!this.infiniteDataCount||this.infiniteDataCount>this.infiniteSkipCnt+this.parent.filterSettings.itemsCount)?(this.makeInfiniteScrollRequest(),this.prevInfiniteScrollDirection="down"):e.scrollTop>=e.scrollHeight-e.offsetHeight&&!this.infiniteQueryExecutionPending&&this.infiniteLoadedElem.length>this.infiniteSkipCnt+this.parent.filterSettings.itemsCount&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3?(this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(0,this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt+=this.prevInfiniteScrollDirection==="down"?this.parent.filterSettings.itemsCount:this.parent.filterSettings.itemsCount*3,Qe(this.cBox,this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.parent.filterSettings.itemsCount+this.infiniteSkipCnt)),this.prevInfiniteScrollDirection="down"):e.scrollTop===0&&!this.infiniteInitialLoad&&!this.infiniteSearchValChange&&this.infiniteSkipCnt&&this.infiniteLoadedElem.length&&this.infiniteLoadedElem.length>this.parent.filterSettings.itemsCount*3&&this.cBox.children.length===this.parent.filterSettings.itemsCount*3?(this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount*2,this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt-=this.prevInfiniteScrollDirection==="up"?this.parent.filterSettings.itemsCount:this.parent.filterSettings.itemsCount*3,this.infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.infiniteSkipCnt+this.parent.filterSettings.itemsCount))),this.cBox.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up"):e.scrollTop===0&&!this.infiniteInitialLoad&&!this.infiniteSearchValChange&&this.infiniteSkipCnt&&this.infiniteLoadedElem.length&&this.cBox.children.length<this.parent.filterSettings.itemsCount*3&&(this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(this.parent.filterSettings.itemsCount*2,this.infiniteDataCount%this.parent.filterSettings.itemsCount)),this.infiniteSkipCnt=(Math.floor(this.infiniteDataCount/this.parent.filterSettings.itemsCount)-3)*this.parent.filterSettings.itemsCount,this.infiniteAppendElements([].slice.call(this.infiniteLoadedElem.slice(this.infiniteSkipCnt,this.infiniteSkipCnt+this.parent.filterSettings.itemsCount))),this.cBox.scrollTop=this.infiniteScrollAppendDiff,this.prevInfiniteScrollDirection="up")},s.prototype.infiniteRemoveElements=function(e){for(var i=0;i<e.length;i++)B(e[i])},s.prototype.infiniteAppendElements=function(e){for(var i=0;i<e.length;i++)this.cBox.insertBefore(e[i],this.cBox.children[i])},s.prototype.makeInfiniteScrollRequest=function(e){var i=this;!this.infiniteInitialLoad&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"?setTimeout(function(){i.infiniteQueryExecutionPending&&i.showMask()},500):this.infiniteInitialLoad||(Vi({target:this.spinner,cssClass:this.parent.cssClass?this.parent.cssClass:null},this.parent.createElement),ni(this.spinner));var t="fn";if(this.infiniteQuery&&this.infiniteQuery.queries&&this.infiniteQuery.queries.length)for(var r=0;r<this.infiniteQuery.queries.length;r++)(this.infiniteQuery.queries[r][""+t]==="onTake"||this.infiniteQuery.queries[r][""+t]==="onSkip")&&(this.infiniteQuery.queries.splice(r,1),r--);var n=!!e;e=e||this.infiniteQuery,this.infiniteInitialLoad||this.infiniteSearchValChange?this.infiniteSkipCnt=0:this.infiniteSkipCnt+=this.parent.filterSettings.itemsCount,e.skip(this.infiniteSkipCnt),this.infiniteInitialLoad||this.infiniteSearchValChange?(e.take(this.parent.filterSettings.itemsCount*3),this.infiniteSkipCnt+=this.parent.filterSettings.itemsCount*2):e.take(this.parent.filterSettings.itemsCount),n||(this.processDataOperation(e),this.infiniteQueryExecutionPending=!0)},s.prototype.processDataOperation=function(e,i){var t=this;this.options.dataSource=this.options.dataSource instanceof _?this.options.dataSource:new _(this.options.dataSource);var r=[],n=[];if(this.isForeignColumn(this.options.column)&&i){var a="result"in this.options.column.dataSource?new _(this.options.column.dataSource.result):this.options.column.dataSource;this.foreignKeyQuery.params=e.params,r.push(a.executeQuery(this.foreignKeyQuery)),n.push(function(l){return t.foreignKeyData=l})}if(this.infiniteRenderMod&&(this.infiniteQuery=e.clone(),this.infiniteInitialLoad?(this.cBox.classList.add("e-checkbox-infinitescroll"),x.add(this.cBox,"scroll",this.infiniteScrollHandler,this),x.add(this.cBox,"mouseup",this.infiniteScrollMouseKeyUpHandler,this),x.add(this.cBox,"mousedown",this.infiniteScrollMouseKeyDownHandler,this)):this.infiniteSearchValChange&&(this.cBox.innerHTML="")),this.infiniteRenderMod&&this.infiniteInitialLoad&&!this.options.isRemote){var o=this.isForeignColumn(this.options.column)?this.options.foreignKeyValue:this.options.column.field;this.options.dataSource.executeQuery(new fe().sortBy(o,me.fnAscending)).then(function(l){t.options.dataSource.dataSource.json=l.result,t.executeQueryOperations(e,r,n)})}else this.executeQueryOperations(e,r,n)},s.prototype.executeQueryOperations=function(e,i,t){var r=this;i.push(this.options.dataSource.executeQuery(e)),t.push(this.dataSuccess.bind(this));var n=0;Promise.all(i).then(function(a){r.infiniteQueryExecutionPending=r.infiniteRenderMod?!1:r.infiniteQueryExecutionPending;for(var o=0;o<a.length;o++)r.infiniteDataCount=r.infiniteRenderMod&&!r.infiniteDataCount?a[o].count:r.infiniteDataCount,t[n++](a[parseInt(o.toString(),10)].result)}).catch(function(){r.infiniteRenderMod&&r.parent.filterSettings&&r.parent.filterSettings.loadingIndicator==="Shimmer"&&r.parent.showMaskRow(void 0,r.dialogObj.element)})},s.prototype.dataSuccess=function(e){if(!(!this.infiniteInitialLoad&&this.infiniteDataCount&&(this.infiniteSkipCnt>=this.infiniteDataCount&&!this.infiniteSearchValChange||e.length===0))){this.fullData=e;var i={dataSource:this.fullData,executeQuery:!0,field:this.options.field};if(this.parent.notify(al,i),i.executeQuery){var t=new fe;this.customQuery||(this.isExecuteLocal=!0,this.queryGenerate(t),this.isExecuteLocal=!1);var r=new _(i.dataSource).executeLocal(t),n=this.options.column;this.filteredData=s.getDistinct(r,this.options.field,n,this.foreignKeyData,this).records||[]}var a=i.executeQuery?this.filteredData:i.dataSource;this.processDataSource(null,!0,a,i),this.sInput&&(this.infiniteRenderMod&&this.infiniteInitialLoad||!this.infiniteRenderMod)&&this.sInput.focus(),(this.infiniteInitialLoad||this.infiniteSearchValChange)&&(this.infiniteInitialLoad=!1,this.infiniteSearchValChange=!1);var o={requestType:mo,columnName:this.options.field,columnType:this.options.type},l="filterModel";o[""+l]=this,this.parent.notify(Gs,o),this.isCheckboxFilterTemplate&&Gi(this.spinner)}},s.prototype.queryGenerate=function(e){if(this.parent.searchSettings&&this.parent.searchSettings.key.length)if(!c(this.parent.getDataModule)&&this.parent.getDataModule().isRemote()&&this.parent.getDataModule().dataManager.adaptor.getModuleName()==="ODataV4Adaptor")this.parent.getDataModule().searchQuery(e);else{var i=this.parent.searchSettings,t=i.fields.length?i.fields:this.options.columns.map(function(l){return l.field});e.search(i.key,t,i.operator,i.ignoreCase,i.ignoreAccent)}if(this.options.filteredColumns.length){for(var r=[],n=0;n<this.options.filteredColumns.length;n++){var a=this.options.filteredColumns[parseInt(n.toString(),10)];this.options.uid?(a.uid=a.uid||this.parent.getColumnByField(a.field).uid,a.uid!==this.options.uid&&r.push(this.options.filteredColumns[parseInt(n.toString(),10)])):a.field!==this.options.field&&r.push(this.options.filteredColumns[parseInt(n.toString(),10)])}var o=this.getPredicateFromCols(r,this.isExecuteLocal);o&&e.where(o)}},s.prototype.processDataSource=function(e,i,t,r){ni(this.spinner),this.isExecuteLocal=!0,this.updateResult(),this.isExecuteLocal=!1;var n={dataSource:this.fullData,isCheckboxFilterTemplate:!1,column:this.options.column,element:this.cBox,type:this.options.type,format:this.options.type,btnObj:this.options.isResponsiveFilter?null:this.dialogObj.btnObj[0],searchBox:this.searchBox};this.parent.notify(Rl,n),this.isCheckboxFilterTemplate=n.isCheckboxFilterTemplate,this.isCheckboxFilterTemplate?this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"&&this.removeMask():this.createFilterItems(t,i,r)},s.prototype.processSearch=function(e){this.processDataOperation(e)},s.prototype.updateResult=function(){this.result={};var e=this.infiniteRenderMod&&this.existingPredicate[this.options.field]?this.getPredicateFromCols(this.existingPredicate[this.options.field],this.isExecuteLocal):this.getPredicateFromCols(this.options.filteredColumns,this.isExecuteLocal),i=new fe;e&&i.where(e),this.parent.notify(wl,{query:i});for(var t=new _(this.fullData).executeLocal(i),r=0,n=t;r<n.length;r++){var a=n[r];this.result[Dt(this.options.field,a)]=!0}},s.prototype.clickHandler=function(e){var i;c(ft.timer)||clearTimeout(ft.timer);var t=e.target;if(!(!c(this.parent.loadingIndicator)&&this.parent.loadingIndicator.indicatorType==="Shimmer"&&b(t,"e-mask-ftrchk"))){var r=b(t,"e-checkbox-wrapper");if(b(t,"e-searchbox")&&this.searchBoxClick(e),r&&!this.isCheckboxFilterTemplate){var n=r.querySelector(".e-selectall");if(n)this.updateAllCBoxes(!n.classList.contains("e-check"));else if(bi(r.parentElement),this.infiniteRenderMod&&!r.parentElement.querySelector(".e-add-current")){this.localInfiniteSelectionInteracted=!0;var a=this.options.allowCaseSensitive,o=r.parentElement.querySelector(".e-frame"),l=o.previousSibling,h=l.checked?"equal":"notequal",p=l.checked?"or":"and",d={field:this.options.field,predicate:p,uid:this.options.uid,operator:h,type:this.options.type,matchCase:a,ignoreAccent:this.options.ignoreAccent},u=this.values[b(l,"e-ftrchk").getAttribute("uid")];if(this.updateInfiniteManualSelectPred(d,u),this.infiniteRenderMod&&!this.options.isRemote&&this.options.parentTotalDataCount&&this.infiniteUnloadParentExistPred.length){var f=this.getPredicateFromCols((i=this.options.filteredColumns).concat.apply(i,this.infiniteManualSelectMaintainPred),!0),m=new fe;f&&m.where(f);var g=new _(this.infinitePermenantLocalData).executeLocal(m);this.options.parentTotalDataCount!==g.length&&(this.options.parentTotalDataCount=g.length),!this.options.parentTotalDataCount&&this.infiniteUnloadParentExistPred.length&&(this.infiniteUnloadParentExistPred=[])}this.infiniteUnloadParentExistPred.length&&(this.options.parentTotalDataCount===this.infiniteDataCount||!this.options.parentTotalDataCount)&&(this.infiniteUnloadParentExistPred=[])}this.updateIndeterminatenBtn(),r.querySelector(".e-chk-hidden").focus()}this.setFocus(b(r,"e-ftrchk"))}},s.prototype.updateInfiniteManualSelectPred=function(e,i){for(var t=0;t<this.infiniteManualSelectMaintainPred.length;t++){var r=this.infiniteManualSelectMaintainPred[t];if(r.value+""==i+""&&(r.operator==="equal"||r.operator==="notequal")){this.infiniteManualSelectMaintainPred.splice(t,1);break}}(e.predicate==="or"&&(!this.localInfiniteSelectAllClicked||!this.infiniteLocalSelectAll)||e.predicate==="and"&&(!this.localInfiniteSelectAllClicked||this.infiniteLocalSelectAll))&&(this.infiniteManualSelectMaintainPred.push(O({},{value:i},e)),e.predicate==="or"?this.options.parentTotalDataCount++:this.options.parentTotalDataCount--)},s.prototype.focusNextOrPrev=function(e,i){var t=e.key==="ArrowUp"?i.indexOf(document.activeElement)-1:i.indexOf(document.activeElement)+1,r=i[(t+i.length)%i.length];if(r){r.focus();var n=r.classList.contains("e-chk-hidden")?b(r,"e-ftrchk"):r;this.setFocus(n)}},s.prototype.keyupHandler=function(e){if((e.key==="Tab"&&e.shiftKey||e.key==="Tab"||(e.key==="ArrowUp"||e.key==="ArrowDown")&&!e.altKey)&&this.setFocus(b(e.target,"e-ftrchk")),(e.key==="ArrowUp"||e.key==="ArrowDown")&&!e.altKey&&this.parent.filterSettings.type==="CheckBox"){e.preventDefault();var i=Array.from(this.dlg.querySelectorAll('input, button, [tabindex]:not([tabindex="-1"])'));this.focusNextOrPrev(e,i)}},s.prototype.setFocus=function(e){var i=this.dlg.querySelector(".e-chkfocus");i&&i.classList.remove("e-chkfocus"),e&&e!==i&&e.classList.add("e-chkfocus")},s.prototype.updateAllCBoxes=function(e){this.infiniteRenderMod&&(this.localInfiniteSelectAllClicked=!0,this.infiniteLocalSelectAll=e,this.infiniteUnloadParentExistPred=[],this.infiniteManualSelectMaintainPred=[]);for(var i=this.infiniteRenderMod?this.infiniteLoadedElem.map(function(a){return a.querySelector(".e-frame")}):[].slice.call(this.cBox.querySelectorAll(".e-frame:not(.e-add-current)")),t=0,r=i;t<r.length;t++){var n=r[t];rr(n,e),_t(n.previousSibling,e)}},s.prototype.dialogOpen=function(){this.parent.element.classList.contains("e-device")&&(this.dialogObj.element.querySelector(".e-input-group").classList.remove("e-input-focus"),this.options.isResponsiveFilter||this.dialogObj.element.querySelector(".e-btn").focus())},s.prototype.createCheckbox=function(e,i,t){var r=i?this.cBoxTrue.cloneNode(!0):this.cBoxFalse.cloneNode(!0);_t(r.querySelector("input"),i);var n=r.querySelector(".e-label"),a=bn({},t,{column:this.options.column,parent:this.parent}),o=this.options.disableHtmlEncode?"textContent":"innerHTML";n[""+o]=!c(e)&&e.toString().length?this.parent.enableHtmlSanitizer?zr.sanitize(e):e:this.getLocalizedLabel("Blanks");var l=Mt("cbox");if(n.setAttribute("id",l+"cboxLabel"),r.querySelector("input").setAttribute("aria-labelledby",n.id),n.innerHTML===this.getLocalizedLabel("Blanks")&&(this.isBlanks=!0),typeof e=="boolean"&&(n.innerHTML=e===!0?this.getLocalizedLabel("FilterTrue"):this.getLocalizedLabel("FilterFalse")),L([n],["e-checkboxfiltertext"]),this.options.template&&t[this.options.column.field]!==this.getLocalizedLabel("SelectAll")&&t[this.options.column.field]!==this.getLocalizedLabel("AddCurrentSelection")){n.innerHTML="";var h=this.parent.isReact&&this.options.column.filter&&typeof this.options.column.filter.itemTemplate!="string",p=this.parent.parentDetails&&this.parent.parentDetails.parentInstObj&&this.parent.parentDetails.parentInstObj.isReact;h||p?(this.options.template(a,this.parent,"filterItemTemplate",null,null,null,n),this.parent.renderTemplates()):Qe(n,this.options.template(a,this.parent,"filterItemTemplate"))}return r},s.prototype.updateIndeterminatenBtn=function(){var e=this.infiniteRenderMod?this.infiniteLoadedElem.length:this.cBox.children.length-1,i=[],t=!1,r=this.infiniteRenderMod?this.sBox.querySelector(".e-selectall"):this.cBox.querySelector(".e-selectall"),n=this.infiniteRenderMod?this.infiniteLoadedElem.filter(function(l){return l.querySelector(".e-check")}).length:this.cBox.querySelectorAll(".e-check:not(.e-selectall):not(.e-add-current)").length;this.cBox.querySelector(".e-add-current")&&(e-=1);var a;this.options.isResponsiveFilter||(a=this.dialogObj.btnObj[0],a.disabled=!1);var o=r.previousSibling;_t(o,!1),o.indeterminate=!1,this.infiniteRenderMod&&this.sInput.value===""&&!this.options.parentCurrentViewDataCount&&!this.localInfiniteSelectionInteracted&&(!this.localInfiniteSelectAllClicked||!this.infiniteLocalSelectAll&&!n)&&(e!==n||e===n)?n=0:this.infiniteRenderMod&&this.infiniteLoadedElem.length<this.infiniteDataCount&&this.infiniteUnloadParentExistPred.length&&(!n||e===n)&&this.infiniteLocalSelectAll&&(n?e+=this.infiniteUnloadParentExistPred.length:n+=this.infiniteUnloadParentExistPred.length),e===n?(this.infiniteRenderMod&&(this.infiniteLocalSelectAll=!0,this.localInfiniteSelectAllClicked=!0,this.infiniteManualSelectMaintainPred=[]),i=["e-check"],_t(o,!0)):n?(i=["e-stop"],o.indeterminate=!0):(this.infiniteRenderMod&&(this.infiniteLocalSelectAll=!1,this.localInfiniteSelectAllClicked=!0,this.infiniteManualSelectMaintainPred=[]),i=["e-uncheck"],t=!0,a&&(a.disabled=!0)),a&&(this.filterState=!a.disabled,a.dataBind()),z([r],["e-check","e-stop","e-uncheck"]),L([r],i),this.parent.notify(hn,{disabled:t})},s.prototype.createFilterItems=function(e,i,t){var r,n,a,o=this.parent.createElement("div"),l,h=!1;this.options.isResponsiveFilter||(l=this.dialogObj.btnObj[0]);var p=-1,d="ejValue";t.executeQuery||(d=t.field);for(var u=0;u<e.length;u++){var f=oe(d,e[parseInt(u.toString(),10)]);(f===""||c(f))&&(p=p+1)}if(this.infiniteRenderMod||(this.itemsCnt=p!==-1?e.length-p:e.length),this.infiniteRenderMod&&this.parent.filterSettings&&this.parent.filterSettings.loadingIndicator==="Shimmer"&&this.removeMask(),e.length&&!this.renderEmpty){var m=this.getLocalizedLabel("SelectAll"),g=this.cBox.querySelector(".e-checkfltrnmdiv");g&&g.classList.remove("e-checkfltrnmdiv");var y=this.createCheckbox(m,!1,(r={},r[this.options.field]=m,r));if(this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?L([y],this.parent.cssClass.split(" ")):L([y],[this.parent.cssClass])),this.infiniteInitialLoad||!this.infiniteRenderMod){var S=Wr(Mt("cbox"),y,"e-ftrchk");S.querySelector(".e-frame").classList.add("e-selectall"),this.infiniteRenderMod?this.sBox.insertBefore(S,this.spinner):o.appendChild(S)}else this.sBox.querySelector(".e-ftrchk .e-selectall")&&(this.sBox.querySelector(".e-ftrchk .e-selectall").previousSibling.disabled=!1,this.sBox.querySelector(".e-ftrchk .e-selectall").parentElement.classList.remove("e-checkbox-disabled"));var I=new re("field","equal",this.options.field);this.options.foreignKeyValue&&(I=I.or("field","equal",this.options.foreignKeyValue));var C=new _(this.options.filteredColumns).executeLocal(new fe().where(I)).length;if(this.sInput.value){var R=this.createCheckbox(this.getLocalizedLabel("AddCurrentSelection"),!1,(n={},n[this.options.field]=this.getLocalizedLabel("AddCurrentSelection"),n));if(this.parent.cssClass&&(this.parent.cssClass.indexOf(" ")!==-1?L([R],this.parent.cssClass.split(" ")):L([R],[this.parent.cssClass])),this.infiniteRenderMod&&!c(this.sBox.children[2])&&this.sBox.children[2].innerText!=="Add current selection to filter"||!this.infiniteRenderMod){var T=Wr(Mt("cbox"),R,"e-ftrchk");if(T.querySelector(".e-frame").classList.add("e-add-current"),this.infiniteRenderMod){this.sBox.insertBefore(T,this.spinner);var F=this.spinner.querySelector(".e-checkboxlist"),X=Math.ceil(T.getBoundingClientRect().height);F.style.height=parseInt(getComputedStyle(F).height.split("px")[0],10)-X+"px",F.style.minHeight=F.style.height}else o.appendChild(T)}else this.sBox.querySelector(".e-ftrchk .e-add-current")&&(this.sBox.querySelector(".e-ftrchk .e-add-current").previousSibling.disabled=!1,this.sBox.querySelector(".e-ftrchk .e-add-current").parentElement.classList.remove("e-checkbox-disabled"))}else if(this.infiniteRenderMod&&!c(this.sBox.children[2])&&this.sBox.children[2].innerText==="Add current selection to filter"){var F=this.spinner.querySelector(".e-checkboxlist"),W=Math.ceil(this.sBox.children[2].getBoundingClientRect().height);F.style.height=parseInt(getComputedStyle(F).height.split("px")[0],10)+W+"px",F.style.minHeight=F.style.height,B(this.sBox.children[2])}for(var q=void 0,u=0;u<e.length;u++){var K=Mt("cbox");this.values[""+K]=oe(d,e[parseInt(u.toString(),10)]);var te=oe(this.options.field,e[parseInt(u.toString(),10)]);this.options.formatFn&&(te=this.valueFormatter.toView(te,this.options.formatFn));var se={value:te,column:this.options.column,data:e[parseInt(u.toString(),10)]};if(this.parent.notify(Go,se),te=se.value,te===""||c(te)){if(q)continue;q=!0}this.infiniteRenderMod&&this.updateInfiniteUnLoadedCheckboxExistPred(te,this.infiniteUnloadParentExistPred);var ne=this.localInfiniteSelectAllClicked?this.createCheckbox(te,this.infiniteLocalSelectAll,oe("dataObj",e[u])):this.createCheckbox(te,this.getCheckedState(C,this.values[""+K]),oe("dataObj",e[u]));o.appendChild(Wr(K,ne,"e-ftrchk")),this.infiniteRenderMod&&(o.lastChild.style.height=this.getListHeight(this.cBox)+"px")}var St=this.cBox.scrollTop;!this.infiniteRenderMod||this.infiniteSearchValChange?this.cBox.innerHTML="":this.infiniteRenderMod&&this.cBox.children.length&&this.infiniteRemoveElements([].slice.call(this.cBox.children).splice(0,this.parent.filterSettings.itemsCount)),this.infiniteRenderMod&&((a=this.infiniteLoadedElem).push.apply(a,[].slice.call(o.children)),this.itemsCnt=p!==-1?this.infiniteLoadedElem.length-p:this.infiniteLoadedElem.length),this.infiniteUnloadParentExistPred.length&&(this.infiniteLoadedElem.length>=this.infiniteDataCount||!this.options.parentCurrentViewDataCount||this.options.parentTotalDataCount===this.infiniteDataCount&&this.options.parentCurrentViewDataCount)&&(this.infiniteUnloadParentExistPred=[]),Qe(this.cBox,[].slice.call(o.children)),this.infiniteRenderMod&&!this.infiniteScrollAppendDiff&&(this.infiniteScrollAppendDiff=Math.round(St-this.cBox.scrollTop)),this.updateIndeterminatenBtn(),this.infiniteRenderMod?l.disabled?h=!0:h=!1:(l&&(l.disabled=!1),h=!1)}else{if(o.appendChild(this.parent.createElement("span",{innerHTML:this.getLocalizedLabel("NoResult")})),this.cBox.innerHTML="",this.infiniteRenderMod){var S=this.sBox.querySelector(".e-ftrchk .e-selectall");if(S){var Pe=S.parentElement.parentElement;S.classList.contains("e-check")?bi(Pe):S.classList.contains("e-stop")&&(bi(Pe),S.classList.remove("e-stop"),bi(Pe)),S.previousSibling.disabled=!0,S.parentElement.classList.add("e-checkbox-disabled")}var ke=this.sBox.querySelector(".e-ftrchk .e-add-current");if(ke){var Me=ke.parentElement.parentElement;ke.classList.contains("e-check")&&bi(Me),ke.previousSibling.disabled=!0,ke.parentElement.classList.add("e-checkbox-disabled")}}this.cBox.appendChild(this.parent.createElement("div",{className:"e-checkfltrnmdiv"})),Qe(this.cBox.children[0],[].slice.call(o.children)),l&&(l.disabled=!0),h=!0,this.filterState=!h}l&&e.length&&(this.filterState=!l.disabled,l.dataBind());var rt={requestType:As,dataSource:this.renderEmpty?[]:e},Fe="filterModel";rt[""+Fe]=this,this.parent.notify(Gs,rt),this.parent.notify(hn,{disabled:h}),this.infiniteRenderMod&&this.infiniteInitialLoad&&(this.cBox.style.marginTop="0px"),Gi(this.spinner)},s.prototype.updateInfiniteUnLoadedCheckboxExistPred=function(e,i){for(var t=0;t<i.length;t++){var r=i[t];e===r.value&&(r.operator==="equal"||r.operator==="notequal")&&(this.infiniteManualSelectMaintainPred.push(i[t]),i.splice(t,1),t--)}},s.prototype.getCheckedState=function(e,i){if(!this.isFiltered||!e)return!0;var t=this.sInput.value?!0:this.result[""+i];return this.infiniteRenderMod?t:this.options.operator==="notequal"?!t:t},s.getDistinct=function(e,i,t,r,n){for(var a=e.length,o=[],l,h="ejValue",p={},d=t&&t.isForeignColumn?t.isForeignColumn():!1;a--;){if(l=e[parseInt(a.toString(),10)],t&&t.type==="dateonly"&&typeof l[""+i]=="string"&&l[""+i]){var u=l[""+i].split(/[^0-9.]/);l[""+i]=new Date(parseInt(u[0],10),parseInt(u[1],10)-1,parseInt(u[2],10))}l=Dt(i,l);var f=typeof l=="string"&&!c(n)&&!c(n.parent)&&!c(n.parent.filterSettings)&&!c(n.parent.filterSettings.enableCaseSensitivity)?l.toLowerCase():l;if(!(f in p)){var m={};if(m[""+h]=l,p[""+f]=!0,d){var g=pi(t,{},l,r)[0];dt(aa,g,e[parseInt(a.toString(),10)]),l=oe(t.foreignKeyValue,g)}dt(i,c(l)?null:l,m),dt("dataObj",e[parseInt(a.toString(),10)],m),o.push(m)}}return me.group(me.sort(o,i,me.fnAscending),"ejValue")},s.getPredicate=function(e,i){for(var t=me.distinct(e,"field",!0)||[],r=[],n={},a=0;a<t.length;a++)r=new _(e).executeLocal(new fe().where("field","equal",t[parseInt(a.toString(),10)].field)),r.length!==0&&(n[t[parseInt(a.toString(),10)].field]=s.generatePredicate(r,i));return n},s.generatePredicate=function(e,i){var t=e?e.length:0,r,n="or",a=s.updateDateFilter(e[0]);a.ignoreAccent=c(a.ignoreAccent)?!1:a.ignoreAccent,a.type==="date"||a.type==="datetime"||a.type==="dateonly"?r=Gt(a,a.type,i):r=a.ejpredicate?a.ejpredicate:new re(a.field,a.operator,a.value,!s.getCaseValue(a),a.ignoreAccent);for(var o=1;o<t;o++)e[parseInt(o.toString(),10)]=s.updateDateFilter(e[parseInt(o.toString(),10)]),t>2&&o>1&&(e[o].predicate==="or"&&e[o-1].predicate==="or"||e[o].predicate==="and"&&e[o-1].predicate==="and")?e[o].type==="date"||e[o].type==="datetime"||e[o].type==="dateonly"?r.predicates.push(Gt(e[parseInt(o.toString(),10)],e[o].type,i)):r.predicates.push(new re(e[o].field,e[parseInt(o.toString(),10)].operator,e[parseInt(o.toString(),10)].value,!s.getCaseValue(e[parseInt(o.toString(),10)]),e[parseInt(o.toString(),10)].ignoreAccent)):e[o].type==="date"||e[o].type==="datetime"||e[o].type==="dateonly"?e[parseInt(o.toString(),10)].predicate==="and"&&e[parseInt(o.toString(),10)].operator==="equal"?r=r[""+n](Gt(e[parseInt(o.toString(),10)],e[parseInt(o.toString(),10)].type,i),e[parseInt(o.toString(),10)].type,e[parseInt(o.toString(),10)].ignoreAccent):r=r[e[parseInt(o.toString(),10)].predicate](Gt(e[parseInt(o.toString(),10)],e[parseInt(o.toString(),10)].type,i),e[parseInt(o.toString(),10)].type,e[parseInt(o.toString(),10)].ignoreAccent):r=e[parseInt(o.toString(),10)].ejpredicate?r[e[parseInt(o.toString(),10)].predicate](e[parseInt(o.toString(),10)].ejpredicate):r[e[parseInt(o.toString(),10)].predicate](e[parseInt(o.toString(),10)].field,e[parseInt(o.toString(),10)].operator,e[parseInt(o.toString(),10)].value,!s.getCaseValue(e[parseInt(o.toString(),10)]),e[parseInt(o.toString(),10)].ignoreAccent);return r||null},s.getCaseValue=function(e){return c(e.matchCase)?!(e.type==="string"||c(e.type)&&typeof e.value=="string"):e.matchCase},s.updateDateFilter=function(e){return(e.type==="date"||e.type==="datetime"||e.type==="dateonly"||e.value instanceof Date)&&(e.type=e.type||"date"),e},s}();ys.Inject(Ss);var kd={header:"."+ze,content:"."+mt,edit:".e-inline-edit",batchEdit:".e-editedbatchcell",editIcon:"e-edit",pager:".e-gridpager",delete:"e-delete",save:"e-save",cancel:"e-cancel",copy:"e-copy",pdf:"e-pdfexport",group:"e-icon-group",ungroup:"e-icon-ungroup",csv:"e-csvexport",excel:"e-excelexport",fPage:"e-icon-first",nPage:"e-icon-next",lPage:"e-icon-last",pPage:"e-icon-prev",ascending:"e-icon-ascending",descending:"e-icon-descending",groupHeader:"e-groupdroparea",touchPop:"e-gridpopup"};var za=["template"],Ba=["headerTemplate"],Pa=["commandsTemplate"],Oa=["filterItemTemplate"],qa=["editTemplate"],Ha=["filterTemplate"],pp=["footerTemplate"],dp=["groupFooterTemplate"],cp=["groupCaptionTemplate"],up=["rowTemplate"],fp=["emptyRecordTemplate"],gp=["detailTemplate"],mp=["toolbarTemplate"],vp=["pagerTemplate"],yp=["editSettingsTemplate"],Sp=["groupSettingsCaptionTemplate"],Cp=["allowEditing","allowFiltering","allowGrouping","allowReordering","allowResizing","allowSearching","allowSorting","autoFit","clipMode","columns","commands","customAttributes","dataSource","defaultValue","disableHtmlEncode","displayAsCheckBox","edit","editTemplate","editType","enableGroupByFormat","field","filter","filterBarTemplate","filterTemplate","foreignKeyField","foreignKeyValue","format","formatter","freeze","headerTemplate","headerText","headerTextAlign","headerValueAccessor","hideAtMedia","index","isFrozen","isIdentity","isPrimaryKey","lockColumn","maxWidth","minWidth","showColumnMenu","showInColumnChooser","sortComparer","template","textAlign","type","uid","validationRules","valueAccessor","visible","width"],wp=[],bp=(()=>{class s extends Si{constructor(i){super(),this.viewContainerRef=i,ei("currentInstance",this,this.viewContainerRef),this.registerEvents(wp),this.directivePropList=Cp}}return s.\u0275fac=function(i){return new(i||s)(he(Yt))},s.\u0275dir=Je({type:s,selectors:[["e-stacked-column"]],contentQueries:function(i,t,r){if(i&1&&(Q(r,za,5),Q(r,Ba,5),Q(r,Pa,5),Q(r,Oa,5),Q(r,qa,5),Q(r,Ha,5)),i&2){let n;G(n=j())&&(t.template=n.first),G(n=j())&&(t.headerTemplate=n.first),G(n=j())&&(t.commandsTemplate=n.first),G(n=j())&&(t.filter_itemTemplate=n.first),G(n=j())&&(t.editTemplate=n.first),G(n=j())&&(t.filterTemplate=n.first)}},inputs:{allowEditing:"allowEditing",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowReordering:"allowReordering",allowResizing:"allowResizing",allowSearching:"allowSearching",allowSorting:"allowSorting",autoFit:"autoFit",clipMode:"clipMode",columns:"columns",commands:"commands",customAttributes:"customAttributes",dataSource:"dataSource",defaultValue:"defaultValue",disableHtmlEncode:"disableHtmlEncode",displayAsCheckBox:"displayAsCheckBox",edit:"edit",editTemplate:"editTemplate",editType:"editType",enableGroupByFormat:"enableGroupByFormat",field:"field",filter:"filter",filterBarTemplate:"filterBarTemplate",filterTemplate:"filterTemplate",foreignKeyField:"foreignKeyField",foreignKeyValue:"foreignKeyValue",format:"format",formatter:"formatter",freeze:"freeze",headerTemplate:"headerTemplate",headerText:"headerText",headerTextAlign:"headerTextAlign",headerValueAccessor:"headerValueAccessor",hideAtMedia:"hideAtMedia",index:"index",isFrozen:"isFrozen",isIdentity:"isIdentity",isPrimaryKey:"isPrimaryKey",lockColumn:"lockColumn",maxWidth:"maxWidth",minWidth:"minWidth",showColumnMenu:"showColumnMenu",showInColumnChooser:"showInColumnChooser",sortComparer:"sortComparer",template:"template",textAlign:"textAlign",type:"type",uid:"uid",validationRules:"validationRules",valueAccessor:"valueAccessor",visible:"visible",width:"width"},features:[lt]}),$([ie()],s.prototype,"template",void 0),$([ie()],s.prototype,"headerTemplate",void 0),$([ie()],s.prototype,"commandsTemplate",void 0),$([ie()],s.prototype,"filter_itemTemplate",void 0),$([ie()],s.prototype,"editTemplate",void 0),$([ie()],s.prototype,"filterTemplate",void 0),s})(),Ip=(()=>{class s extends Ci{constructor(){super("columns")}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275dir=Je({type:s,selectors:[["e-stacked-columns"]],contentQueries:function(i,t,r){if(i&1&&Q(r,bp,4),i&2){let n;G(n=j())&&(t.children=n)}},features:[lt]}),s})(),xp=["allowEditing","allowFiltering","allowGrouping","allowReordering","allowResizing","allowSearching","allowSorting","autoFit","clipMode","columns","commands","customAttributes","dataSource","defaultValue","disableHtmlEncode","displayAsCheckBox","edit","editTemplate","editType","enableGroupByFormat","field","filter","filterBarTemplate","filterTemplate","foreignKeyField","foreignKeyValue","format","formatter","freeze","headerTemplate","headerText","headerTextAlign","headerValueAccessor","hideAtMedia","index","isFrozen","isIdentity","isPrimaryKey","lockColumn","maxWidth","minWidth","showColumnMenu","showInColumnChooser","sortComparer","template","textAlign","type","uid","validationRules","valueAccessor","visible","width"],Rp=[],Rn=(()=>{class s extends Si{constructor(i){super(),this.viewContainerRef=i,this.tags=["columns"],ei("currentInstance",this,this.viewContainerRef),this.registerEvents(Rp),this.directivePropList=xp}}return s.\u0275fac=function(i){return new(i||s)(he(Yt))},s.\u0275dir=Je({type:s,selectors:[["e-column"]],contentQueries:function(i,t,r){if(i&1&&(Q(r,za,5),Q(r,Ba,5),Q(r,Pa,5),Q(r,Oa,5),Q(r,qa,5),Q(r,Ha,5),Q(r,Ip,5)),i&2){let n;G(n=j())&&(t.template=n.first),G(n=j())&&(t.headerTemplate=n.first),G(n=j())&&(t.commandsTemplate=n.first),G(n=j())&&(t.filter_itemTemplate=n.first),G(n=j())&&(t.editTemplate=n.first),G(n=j())&&(t.filterTemplate=n.first),G(n=j())&&(t.childColumns=n.first)}},inputs:{allowEditing:"allowEditing",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowReordering:"allowReordering",allowResizing:"allowResizing",allowSearching:"allowSearching",allowSorting:"allowSorting",autoFit:"autoFit",clipMode:"clipMode",columns:"columns",commands:"commands",customAttributes:"customAttributes",dataSource:"dataSource",defaultValue:"defaultValue",disableHtmlEncode:"disableHtmlEncode",displayAsCheckBox:"displayAsCheckBox",edit:"edit",editTemplate:"editTemplate",editType:"editType",enableGroupByFormat:"enableGroupByFormat",field:"field",filter:"filter",filterBarTemplate:"filterBarTemplate",filterTemplate:"filterTemplate",foreignKeyField:"foreignKeyField",foreignKeyValue:"foreignKeyValue",format:"format",formatter:"formatter",freeze:"freeze",headerTemplate:"headerTemplate",headerText:"headerText",headerTextAlign:"headerTextAlign",headerValueAccessor:"headerValueAccessor",hideAtMedia:"hideAtMedia",index:"index",isFrozen:"isFrozen",isIdentity:"isIdentity",isPrimaryKey:"isPrimaryKey",lockColumn:"lockColumn",maxWidth:"maxWidth",minWidth:"minWidth",showColumnMenu:"showColumnMenu",showInColumnChooser:"showInColumnChooser",sortComparer:"sortComparer",template:"template",textAlign:"textAlign",type:"type",uid:"uid",validationRules:"validationRules",valueAccessor:"valueAccessor",visible:"visible",width:"width"},features:[lt]}),$([ie()],s.prototype,"template",void 0),$([ie()],s.prototype,"headerTemplate",void 0),$([ie()],s.prototype,"commandsTemplate",void 0),$([ie()],s.prototype,"filter_itemTemplate",void 0),$([ie()],s.prototype,"editTemplate",void 0),$([ie()],s.prototype,"filterTemplate",void 0),s})(),Dn=(()=>{class s extends Ci{constructor(){super("columns")}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275dir=Je({type:s,selectors:[["e-columns"]],contentQueries:function(i,t,r){if(i&1&&Q(r,Rn,4),i&2){let n;G(n=j())&&(t.children=n)}},features:[lt]}),s})(),Dp=["columnName","customAggregate","field","footerTemplate","format","groupCaptionTemplate","groupFooterTemplate","type"],Fp=[],Fn=(()=>{class s extends Si{constructor(i){super(),this.viewContainerRef=i,ei("currentInstance",this,this.viewContainerRef),this.registerEvents(Fp),this.directivePropList=Dp}}return s.\u0275fac=function(i){return new(i||s)(he(Yt))},s.\u0275dir=Je({type:s,selectors:[["e-column"]],contentQueries:function(i,t,r){if(i&1&&(Q(r,pp,5),Q(r,dp,5),Q(r,cp,5)),i&2){let n;G(n=j())&&(t.footerTemplate=n.first),G(n=j())&&(t.groupFooterTemplate=n.first),G(n=j())&&(t.groupCaptionTemplate=n.first)}},inputs:{columnName:"columnName",customAggregate:"customAggregate",field:"field",footerTemplate:"footerTemplate",format:"format",groupCaptionTemplate:"groupCaptionTemplate",groupFooterTemplate:"groupFooterTemplate",type:"type"},features:[lt]}),$([ie()],s.prototype,"footerTemplate",void 0),$([ie()],s.prototype,"groupFooterTemplate",void 0),$([ie()],s.prototype,"groupCaptionTemplate",void 0),s})(),Tn=(()=>{class s extends Ci{constructor(){super("columns")}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275dir=Je({type:s,selectors:[["e-columns"]],contentQueries:function(i,t,r){if(i&1&&Q(r,Fn,4),i&2){let n;G(n=j())&&(t.children=n)}},features:[lt]}),s})(),Tp=["columns"],kp=[],Mp=(()=>{class s extends Si{constructor(i){super(),this.viewContainerRef=i,this.tags=["columns"],ei("currentInstance",this,this.viewContainerRef),this.registerEvents(kp),this.directivePropList=Tp}}return s.\u0275fac=function(i){return new(i||s)(he(Yt))},s.\u0275dir=Je({type:s,selectors:[["e-aggregate"]],contentQueries:function(i,t,r){if(i&1&&Q(r,Tn,5),i&2){let n;G(n=j())&&(t.childColumns=n.first)}},inputs:{columns:"columns"},features:[lt]}),s})(),Ap=(()=>{class s extends Ci{constructor(){super("aggregates")}}return s.\u0275fac=function(i){return new(i||s)},s.\u0275dir=Je({type:s,selectors:[["e-aggregates"]],contentQueries:function(i,t,r){if(i&1&&Q(r,Mp,4),i&2){let n;G(n=j())&&(t.children=n)}},features:[lt]}),s})();var Ep=["actionBegin","actionComplete","actionFailure","batchAdd","batchCancel","batchDelete","beforeAutoFill","beforeBatchAdd","beforeBatchDelete","beforeBatchSave","beforeCopy","beforeDataBound","beforeExcelExport","beforeOpenAdaptiveDialog","beforeOpenColumnChooser","beforePaste","beforePdfExport","beforePrint","beginEdit","cellDeselected","cellDeselecting","cellEdit","cellSave","cellSaved","cellSelected","cellSelecting","checkBoxChange","columnDataStateChange","columnDeselected","columnDeselecting","columnDrag","columnDragStart","columnDrop","columnMenuClick","columnMenuOpen","columnSelected","columnSelecting","commandClick","contextMenuClick","contextMenuOpen","created","dataBound","dataSourceChanged","dataStateChange","destroyed","detailDataBound","excelAggregateQueryCellInfo","excelExportComplete","excelHeaderQueryCellInfo","excelQueryCellInfo","exportDetailDataBound","exportDetailTemplate","exportGroupCaption","headerCellInfo","keyPressed","lazyLoadGroupCollapse","lazyLoadGroupExpand","load","pdfAggregateQueryCellInfo","pdfExportComplete","pdfHeaderQueryCellInfo","pdfQueryCellInfo","printComplete","queryCellInfo","recordClick","recordDoubleClick","resizeStart","resizeStop","resizing","rowDataBound","rowDeselected","rowDeselecting","rowDrag","rowDragStart","rowDragStartHelper","rowDrop","rowSelected","rowSelecting","toolbarClick","dataSourceChange"],Lp=["dataSource"],Na=(()=>{let s=class extends Cn{constructor(i,t,r,n){super(),this.ngEle=i,this.srenderer=t,this.viewContainerRef=r,this.injector=n,this.tags=["columns","aggregates"],this.element=this.ngEle.nativeElement,this.injectedModules=this.injectedModules||[];try{let a=this.injector.get("GridsFilter");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsPage");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsSelection");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsSort");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsGroup");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsReorder");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsRowDD");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsDetailRow");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsToolbar");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsAggregate");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsSearch");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsVirtualScroll");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsEdit");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsResize");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsExcelExport");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsPdfExport");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsCommandColumn");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsContextMenu");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsFreeze");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsColumnMenu");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsColumnChooser");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsForeignKey");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsInfiniteScroll");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}try{let a=this.injector.get("GridsLazyLoadGroup");this.injectedModules.indexOf(a)===-1&&this.injectedModules.push(a)}catch{}this.registerEvents(Ep),this.addTwoWay.call(this,Lp),ei("currentInstance",this,this.viewContainerRef),this.context=new Br}ngOnInit(){this.context.ngOnInit(this)}ngAfterViewInit(){this.context.ngAfterViewInit(this)}ngOnDestroy(){this.context.ngOnDestroy(this)}ngAfterContentChecked(){this.tagObjects[0].instance=this.childColumns,this.childAggregates&&(this.tagObjects[1].instance=this.childAggregates),this.context.ngAfterContentChecked(this)}};return s.\u0275fac=function(i){return new(i||s)(he(Pi),he(Bn),he(Yt),he(Ln))},s.\u0275cmp=ge({type:s,selectors:[["ejs-grid"]],contentQueries:function(i,t,r){if(i&1&&(Q(r,up,5),Q(r,fp,5),Q(r,gp,5),Q(r,mp,5),Q(r,vp,5),Q(r,yp,5),Q(r,Sp,5),Q(r,Dn,5),Q(r,Ap,5)),i&2){let n;G(n=j())&&(t.rowTemplate=n.first),G(n=j())&&(t.emptyRecordTemplate=n.first),G(n=j())&&(t.detailTemplate=n.first),G(n=j())&&(t.toolbarTemplate=n.first),G(n=j())&&(t.pagerTemplate=n.first),G(n=j())&&(t.editSettings_template=n.first),G(n=j())&&(t.groupSettings_captionTemplate=n.first),G(n=j())&&(t.childColumns=n.first),G(n=j())&&(t.childAggregates=n.first)}},inputs:{aggregates:"aggregates",allowExcelExport:"allowExcelExport",allowFiltering:"allowFiltering",allowGrouping:"allowGrouping",allowKeyboard:"allowKeyboard",allowMultiSorting:"allowMultiSorting",allowPaging:"allowPaging",allowPdfExport:"allowPdfExport",allowReordering:"allowReordering",allowResizing:"allowResizing",allowRowDragAndDrop:"allowRowDragAndDrop",allowSelection:"allowSelection",allowSorting:"allowSorting",allowTextWrap:"allowTextWrap",autoFit:"autoFit",childGrid:"childGrid",clipMode:"clipMode",columnChooserSettings:"columnChooserSettings",columnMenuItems:"columnMenuItems",columnQueryMode:"columnQueryMode",columns:"columns",contextMenuItems:"contextMenuItems",cssClass:"cssClass",currencyCode:"currencyCode",currentAction:"currentAction",currentViewData:"currentViewData",dataSource:"dataSource",detailTemplate:"detailTemplate",editSettings:"editSettings",ej2StatePersistenceVersion:"ej2StatePersistenceVersion",emptyRecordTemplate:"emptyRecordTemplate",enableAdaptiveUI:"enableAdaptiveUI",enableAltRow:"enableAltRow",enableAutoFill:"enableAutoFill",enableColumnVirtualization:"enableColumnVirtualization",enableHeaderFocus:"enableHeaderFocus",enableHover:"enableHover",enableHtmlSanitizer:"enableHtmlSanitizer",enableImmutableMode:"enableImmutableMode",enableInfiniteScrolling:"enableInfiniteScrolling",enablePersistence:"enablePersistence",enableRtl:"enableRtl",enableStickyHeader:"enableStickyHeader",enableVirtualMaskRow:"enableVirtualMaskRow",enableVirtualization:"enableVirtualization",exportGrids:"exportGrids",filterSettings:"filterSettings",frozenColumns:"frozenColumns",frozenRows:"frozenRows",gridLines:"gridLines",groupSettings:"groupSettings",height:"height",hierarchyPrintMode:"hierarchyPrintMode",infiniteScrollSettings:"infiniteScrollSettings",loadingIndicator:"loadingIndicator",locale:"locale",pageSettings:"pageSettings",pagerTemplate:"pagerTemplate",parentDetails:"parentDetails",printMode:"printMode",query:"query",queryString:"queryString",resizeSettings:"resizeSettings",rowDropSettings:"rowDropSettings",rowHeight:"rowHeight",rowRenderingMode:"rowRenderingMode",rowTemplate:"rowTemplate",searchSettings:"searchSettings",selectedRowIndex:"selectedRowIndex",selectionSettings:"selectionSettings",showColumnChooser:"showColumnChooser",showColumnMenu:"showColumnMenu",showHider:"showHider",sortSettings:"sortSettings",textWrapSettings:"textWrapSettings",toolbar:"toolbar",toolbarTemplate:"toolbarTemplate",width:"width"},outputs:{actionBegin:"actionBegin",actionComplete:"actionComplete",actionFailure:"actionFailure",batchAdd:"batchAdd",batchCancel:"batchCancel",batchDelete:"batchDelete",beforeAutoFill:"beforeAutoFill",beforeBatchAdd:"beforeBatchAdd",beforeBatchDelete:"beforeBatchDelete",beforeBatchSave:"beforeBatchSave",beforeCopy:"beforeCopy",beforeDataBound:"beforeDataBound",beforeExcelExport:"beforeExcelExport",beforeOpenAdaptiveDialog:"beforeOpenAdaptiveDialog",beforeOpenColumnChooser:"beforeOpenColumnChooser",beforePaste:"beforePaste",beforePdfExport:"beforePdfExport",beforePrint:"beforePrint",beginEdit:"beginEdit",cellDeselected:"cellDeselected",cellDeselecting:"cellDeselecting",cellEdit:"cellEdit",cellSave:"cellSave",cellSaved:"cellSaved",cellSelected:"cellSelected",cellSelecting:"cellSelecting",checkBoxChange:"checkBoxChange",columnDataStateChange:"columnDataStateChange",columnDeselected:"columnDeselected",columnDeselecting:"columnDeselecting",columnDrag:"columnDrag",columnDragStart:"columnDragStart",columnDrop:"columnDrop",columnMenuClick:"columnMenuClick",columnMenuOpen:"columnMenuOpen",columnSelected:"columnSelected",columnSelecting:"columnSelecting",commandClick:"commandClick",contextMenuClick:"contextMenuClick",contextMenuOpen:"contextMenuOpen",created:"created",dataBound:"dataBound",dataSourceChanged:"dataSourceChanged",dataStateChange:"dataStateChange",destroyed:"destroyed",detailDataBound:"detailDataBound",excelAggregateQueryCellInfo:"excelAggregateQueryCellInfo",excelExportComplete:"excelExportComplete",excelHeaderQueryCellInfo:"excelHeaderQueryCellInfo",excelQueryCellInfo:"excelQueryCellInfo",exportDetailDataBound:"exportDetailDataBound",exportDetailTemplate:"exportDetailTemplate",exportGroupCaption:"exportGroupCaption",headerCellInfo:"headerCellInfo",keyPressed:"keyPressed",lazyLoadGroupCollapse:"lazyLoadGroupCollapse",lazyLoadGroupExpand:"lazyLoadGroupExpand",load:"load",pdfAggregateQueryCellInfo:"pdfAggregateQueryCellInfo",pdfExportComplete:"pdfExportComplete",pdfHeaderQueryCellInfo:"pdfHeaderQueryCellInfo",pdfQueryCellInfo:"pdfQueryCellInfo",printComplete:"printComplete",queryCellInfo:"queryCellInfo",recordClick:"recordClick",recordDoubleClick:"recordDoubleClick",resizeStart:"resizeStart",resizeStop:"resizeStop",resizing:"resizing",rowDataBound:"rowDataBound",rowDeselected:"rowDeselected",rowDeselecting:"rowDeselecting",rowDrag:"rowDrag",rowDragStart:"rowDragStart",rowDragStartHelper:"rowDragStartHelper",rowDrop:"rowDrop",rowSelected:"rowSelected",rowSelecting:"rowSelecting",toolbarClick:"toolbarClick",dataSourceChange:"dataSourceChange"},features:[lt],decls:0,vars:0,template:function(i,t){},encapsulation:2,changeDetection:0}),$([ie()],s.prototype,"rowTemplate",void 0),$([ie()],s.prototype,"emptyRecordTemplate",void 0),$([ie()],s.prototype,"detailTemplate",void 0),$([ie()],s.prototype,"toolbarTemplate",void 0),$([ie()],s.prototype,"pagerTemplate",void 0),$([ie()],s.prototype,"editSettings_template",void 0),$([ie()],s.prototype,"groupSettings_captionTemplate",void 0),s=$([ls([Br])],s),s})(),Va=(()=>{class s{}return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=En({type:s}),s.\u0275inj=An({imports:[[pt]]}),s})();function Bp(s,e){if(s&1){let i=ht();E(0,"a",11),je("click",function(){let r=at(i).$implicit,n=Ze();return ot(n.openRepository(r.html_url))}),ee(1),P()}if(s&2){let i=e.$implicit;ae(),mi(" ",i.html_url," ")}}function Pp(s,e){if(s&1){let i=ht();E(0,"div",12),je("targetInview",function(){at(i);let r=Ze();return ot(r.loadMore())}),Se(1,"app-loading-spinner"),P()}}var Ga=(()=>{let e=class e{constructor(){this.repositories=[],this.loadMoreRepositories=new Xt,this.gridInitialized=!1}loadMore(){this.loadMoreRepositories.emit()}onGridDataBound(){this.gridInitialized=!0}openRepository(t){window.open(t)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["app-grid"]],inputs:{repositories:"repositories"},outputs:{loadMoreRepositories:"loadMoreRepositories"},standalone:!0,features:[be],decls:13,vars:2,consts:[["template",""],[1,"w-3/4","mx-auto"],[3,"dataBound","dataSource"],["field","name","headerText","Repository Name"],["field","description","headerText","Description","width","120"],["field","language","headerText","Language"],["headerText","Repository Link"],["field","owner.login","headerText","Username"],["field","stargazers_count","headerText","Stars"],["field","updated_at","headerText","Updated At","format","yMd"],["appRepoInView","","class","mt-2 flex justify-center items-center",3,"targetInview",4,"ngIf"],[1,"cursor-pointer",3,"click"],["appRepoInView","",1,"mt-2","flex","justify-center","items-center",3,"targetInview"]],template:function(r,n){if(r&1){let a=ht();E(0,"div",1)(1,"ejs-grid",2),je("dataBound",function(){return at(a),ot(n.onGridDataBound())}),E(2,"e-columns"),Se(3,"e-column",3)(4,"e-column",4)(5,"e-column",5),E(6,"e-column",6),Tt(7,Bp,2,1,"ng-template",null,0,Gn),P(),Se(9,"e-column",7)(10,"e-column",8)(11,"e-column",9),P()(),Tt(12,Pp,2,0,"div",10),P()}r&2&&(ae(),qe("dataSource",n.repositories),ae(11),qe("ngIf",n.gridInitialized))},dependencies:[Va,Na,Rn,Dn,Fn,Tn,pt,Jt,Ui,Wi],changeDetection:0});let s=e;return s})();var Op=["dataContainer"];function qp(s,e){s&1&&(E(0,"span",7),zt(),E(1,"svg",8),Se(2,"rect",9)(3,"rect",10)(4,"rect",11)(5,"rect",12),P(),fi(),E(6,"span"),ee(7,"Grid View"),P()())}function Hp(s,e){s&1&&(E(0,"span",7),zt(),E(1,"svg",8),Se(2,"rect",13)(3,"rect",14)(4,"line",15),P(),fi(),E(5,"span"),ee(6,"Card View"),P()())}function Np(s,e){if(s&1){let i=ht();E(0,"app-card",16),je("loadMoreRepositories",function(){at(i);let r=Ze();return ot(r.loadMoreRepositories())}),P()}if(s&2){let i=Ze();qe("repositories",i.repositories)}}function Vp(s,e){if(s&1){let i=ht();E(0,"app-grid",16),je("loadMoreRepositories",function(){at(i);let r=Ze();return ot(r.loadMoreRepositories())}),P()}if(s&2){let i=Ze();qe("repositories",i.repositories)}}var ja=(()=>{let e=class e{constructor(t,r,n,a){this.repositoryService=t,this.filterService=r,this.destroyRef=n,this.cdr=a,this.repositories=[],this.showCard=!0,this.fetchRepositories$=new Ai(void 0),this.pageSize=50,this.pageNumber=1,this.currentFilters={language:"",sortOrder:""}}ngOnInit(){this.fetchRepositories()}fetchRepositories(){this.fetchRepositories$.pipe(Ir(()=>this.filterService.getFilters()),xr(t=>{t.language!==this.currentFilters.language||t.sortOrder!==this.currentFilters.sortOrder?(this.currentFilters.language=t.language,this.currentFilters.sortOrder=t.sortOrder,this.pageNumber=1,this.dataContainer&&this.dataContainer.nativeElement.scrollTo({top:0,behavior:"smooth"})):this.pageNumber=this.pageNumber+1}),Ir(t=>this.repositoryService.fetchRepositories(t.language,t.sortOrder,this.pageNumber,this.pageSize)),Li(t=>this.pageNumber===1?t.items:[...this.repositories,...t.items]),xr(t=>{this.repositories=t,this.cdr.detectChanges()}),zi(t=>(console.log("Failed to fetch repositories..."),Ei([]))),ji(this.destroyRef)).subscribe()}loadMoreRepositories(){this.fetchRepositories$.next()}toggleView(){this.showCard=!this.showCard}};e.\u0275fac=function(r){return new(r||e)(he(Cs),he(_i),he(Bi),he(jn))},e.\u0275cmp=ge({type:e,selectors:[["app-display"]],viewQuery:function(r,n){if(r&1&&Vn(Op,5),r&2){let a;G(a=j())&&(n.dataContainer=a.first)}},standalone:!0,features:[be],decls:10,vars:3,consts:[["dataContainer",""],[1,"flex","flex-col"],[1,"flex","justify-center","mb-4"],["data-cy","view-button","type","button",1,"bg-pink-500","hover:bg-pink-700","text-white","font-bold","py-2","px-4","rounded","flex","items-center","gap-2",3,"click"],["class","flex items-center gap-2",4,"ngIf"],[1,"overflow-y-auto","h-[73vh]"],[3,"repositories"],[1,"flex","items-center","gap-2"],["width","24","height","24","viewBox","0 0 24 24","fill","currentColor","xmlns","http://www.w3.org/2000/svg"],["x","3","y","3","width","8","height","8","rx","1.5","stroke","black","stroke-width","0.3"],["x","13","y","3","width","8","height","8","rx","1.5","stroke","black","stroke-width","0.3"],["x","3","y","13","width","8","height","8","rx","1.5","stroke","black","stroke-width","0.3"],["x","13","y","13","width","8","height","8","rx","1.5","stroke","black","stroke-width","0.3"],["x","3","y","5","width","18","height","14","rx","2","stroke","black","stroke-width","0.3"],["x","3","y","5","width","18","height","4","fill","white"],["x1","3","y1","9","x2","21","y2","9","stroke","black","stroke-width","0.3"],[3,"loadMoreRepositories","repositories"]],template:function(r,n){if(r&1){let a=ht();E(0,"div",1),Se(1,"app-search"),E(2,"div",2)(3,"button",3),je("click",function(){return at(a),ot(n.toggleView())}),Tt(4,qp,8,0,"span",4)(5,Hp,7,0,"span",4),P()(),E(6,"div",5,0),Tt(8,Np,1,1,"app-card",6)(9,Vp,1,1),P()()}r&2&&(ae(4),qe("ngIf",n.showCard),ae(),qe("ngIf",!n.showCard),ae(3),Pn(8,n.showCard?8:9))},dependencies:[pt,Jt,bs,Is,Ga],changeDetection:0});let s=e;return s})();var _a=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["app-page-not-found"]],standalone:!0,features:[be],decls:5,vars:0,consts:[[1,"flex","flex-col","items-center","justify-center","w-3/4","mx-auto","min-h-[80vh]"],[1,"text-xl","md:text-4xl","font-bold","font-serif","text-gray-900","mb-4"],[1,"text-xs","md:text-xl","font-serif","text-gray-800"]],template:function(r,n){r&1&&(E(0,"div",0)(1,"h1",1),ee(2," 404 - Page Not Found "),P(),E(3,"p",2),ee(4," The page you are looking for does not exist. "),P()())},styles:["[_nghost-%COMP%]{display:block}"]});let s=e;return s})();var Ua=[{path:"",pathMatch:"full",redirectTo:"discover"},{path:"discover",component:ja},{path:"charts",loadComponent:()=>import("./chunk-Q3U27QSH.js").then(s=>s.ChartsComponent)},{path:"charts/barchart",loadComponent:()=>import("./chunk-PTMIO5AH.js").then(s=>s.BarChartComponent)},{path:"charts/piechart",loadComponent:()=>import("./chunk-5J7AD3UV.js").then(s=>s.PieChartComponent)},{path:"**",component:_a}];var Wa={providers:[Jn(Ua),Wn()]};var Ka=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["app-navbar"]],standalone:!0,features:[be],decls:11,vars:0,consts:[["data-cy","navbar",1,"shadow-md","mb-2"],[1,"flex","justify-between","items-center","mx-auto","py-3","w-3/4"],["routerLink","discover",1,"flex","gap-4","cursor-pointer"],["src","../../../assets/logo.png","alt","github",1,"h-6"],[1,"text-xl","font-serif"],[1,"flex","gap-8","text-base","font-serif"],["data-cy","discover","routerLink","discover","routerLinkActive","text-pink-500",1,"cursor-pointer"],["data-cy","charts","routerLink","charts","routerLinkActive","text-pink-500",1,"cursor-pointer"]],template:function(r,n){r&1&&(E(0,"nav",0)(1,"div",1)(2,"div",2),Se(3,"img",3),E(4,"div",4),ee(5,"Github Repository Dashboard"),P()(),E(6,"div",5)(7,"div",6),ee(8," Discover "),P(),E(9,"div",7),ee(10," Charts "),P()()()())},dependencies:[Xn,Yn],changeDetection:0});let s=e;return s})();var Qa=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=ge({type:e,selectors:[["app-root"]],standalone:!0,features:[be],decls:2,vars:0,template:function(r,n){r&1&&Se(0,"app-navbar")(1,"router-outlet")},dependencies:[Qn,Ka],changeDetection:0});let s=e;return s})();ns("Ngo9BigBOggjHTQxAR8/V1NBaF5cXmZCe0x0QXxbf1x0ZFZMYF9bR3VPMyBoS35RckVnW3tec3VXRWVfWUF1");Kn(Qa,Wa).catch(s=>console.error(s));
